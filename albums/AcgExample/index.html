<!DOCTYPE html><html lang="en" class="bg-[var(--page-bg)] text-[14px] md:text-[16px]" data-overlayscrollbars-initialize data-astro-cid-sckkx6r4 style="--bannerOffset: 15vh;--banner-height-home: 65vh;--banner-height: 35vh;--configHue: 230;--page-width: 90rem;"> <head><!-- 第三方分析脚本 - 延迟加载优化 --><script>
			// 使用 requestIdleCallback 延迟加载第三方脚本
			function loadAnalytics() {
				// Google Tag Manager
				(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KRX3XGVH');
				
				// Clarity
				(function(c,l,a,r,i,t,y){c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);})(window, document, "clarity", "script", "tjr3vkhj8i");
			}
			
			// 在浏览器空闲时加载，或者在 3 秒后加载
			if ('requestIdleCallback' in window) {
				requestIdleCallback(loadAnalytics, { timeout: 3000 });
			} else {
				setTimeout(loadAnalytics, 3000);
			}
		</script><title>Blue Archive related - Nagisa</title><meta charset="UTF-8"><meta name="description" content="things who made me became today without knowing who made them."><meta name="author" content="Kirifuji Nagisa"><meta property="og:site_name" content="Nagisa"><meta property="og:url" content="https://love.nagisadaisuki.icu/albums/AcgExample/"><meta property="og:title" content="Blue Archive related - Nagisa"><meta property="og:description" content="things who made me became today without knowing who made them."><meta property="og:type" content="website"><meta name="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://love.nagisadaisuki.icu/albums/AcgExample/"><meta name="twitter:title" content="Blue Archive related - Nagisa"><meta name="twitter:description" content="things who made me became today without knowing who made them."><meta name="viewport" content="width=device-width"><meta name="generator" content="Astro v5.15.9"><link rel="icon" href="/favicon/favicon-light-32.png" sizes="32x32" media="(prefers-color-scheme: light)"><link rel="icon" href="/favicon/favicon-light-128.png" sizes="128x128" media="(prefers-color-scheme: light)"><link rel="icon" href="/favicon/favicon-light-180.png" sizes="180x180" media="(prefers-color-scheme: light)"><link rel="icon" href="/favicon/favicon-light-192.png" sizes="192x192" media="(prefers-color-scheme: light)"><link rel="icon" href="/favicon/favicon-dark-32.png" sizes="32x32" media="(prefers-color-scheme: dark)"><link rel="icon" href="/favicon/favicon-dark-128.png" sizes="128x128" media="(prefers-color-scheme: dark)"><link rel="icon" href="/favicon/favicon-dark-180.png" sizes="180x180" media="(prefers-color-scheme: dark)"><link rel="icon" href="/favicon/favicon-dark-192.png" sizes="192x192" media="(prefers-color-scheme: dark)"><!-- Set the theme before the page is rendered to avoid a flash --><script>(function(){const DEFAULT_THEME = "light";
const LIGHT_MODE = "light";
const DARK_MODE = "dark";
const BANNER_HEIGHT_EXTEND = 30;
const PAGE_WIDTH = 90;
const configHue = 230;

			// Load the theme from local storage
			const theme = localStorage.getItem('theme') || DEFAULT_THEME;
			let isDark = false;
			switch (theme) {
				case LIGHT_MODE:
					document.documentElement.classList.remove('dark');
					isDark = false;
					break
				case DARK_MODE:
					document.documentElement.classList.add('dark');
					isDark = true;
					break
			}
			
			// Set the theme for Expressive Code based on current mode
			const expressiveTheme = isDark ? "github-dark" : "github-light";
			const currentTheme = document.documentElement.getAttribute("data-theme");
			
			// 只在主题不同时才更新，避免触发不必要的重绘
			if (currentTheme !== expressiveTheme) {
				document.documentElement.setAttribute("data-theme", expressiveTheme);
			}

			// Load the hue from local storage
			const hue = localStorage.getItem('hue') || configHue;
			document.documentElement.style.setProperty('--hue', hue);

			// calculate the --banner-height-extend, which needs to be a multiple of 4 to avoid blurry text
			let offset = Math.floor(window.innerHeight * (BANNER_HEIGHT_EXTEND / 100));
			offset = offset - offset % 4;
			document.documentElement.style.setProperty('--banner-height-extend', `${offset}px`);
		})();</script><!-- defines global css variables. This will be applied to <html> <body> and some other elements idk why --><!-- Pio 看板娘样式 - 仅在启用时加载 --><link rel="stylesheet" href="/pio/static/pio.css"><link rel="alternate" type="application/rss+xml" title="Kirifuji Nagisa" href="https://love.nagisadaisuki.icu/rss.xml"><!-- Umami Analytics --><link rel="stylesheet" href="/_astro/Layout.y4KPJ9hc.css">
<link rel="stylesheet" href="/_astro/Layout.DRe9SoLl.css">
<link rel="stylesheet" href="/_astro/_page_.Djju_2fB.css">
<style>.grid-layout[data-astro-cid-rgidg7mq]{display:grid;gap:1rem}.grid-layout[data-astro-cid-rgidg7mq][data-columns="2"]{grid-template-columns:repeat(auto-fit,minmax(300px,1fr))}.grid-layout[data-astro-cid-rgidg7mq][data-columns="3"]{grid-template-columns:repeat(auto-fit,minmax(250px,1fr))}.grid-layout[data-astro-cid-rgidg7mq][data-columns="4"]{grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}.masonry-layout[data-astro-cid-rgidg7mq]{-moz-columns:2;columns:2;-moz-column-gap:1rem;column-gap:1rem}@media(min-width:768px){.masonry-layout[data-astro-cid-rgidg7mq]{-moz-columns:3;columns:3}}@media(min-width:1024px){.masonry-layout[data-astro-cid-rgidg7mq][data-columns="4"]{-moz-columns:4;columns:4}}.masonry-layout[data-astro-cid-rgidg7mq] .photo-item[data-astro-cid-rgidg7mq]{-moz-column-break-inside:avoid;break-inside:avoid;margin-bottom:1rem}.grid-layout[data-astro-cid-rgidg7mq] .photo-container[data-astro-cid-rgidg7mq]{aspect-ratio:1}
</style>
<link rel="stylesheet" href="/_astro/_page_.EX5jCGH2.css">
<link rel="stylesheet" href="/_astro/_page_.BH-s_JDD.css">
<link rel="stylesheet" href="/_astro/about.CLMvY_Mt.css">
<style>.line-clamp-2[data-astro-cid-b6yaaygw]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.album-card[data-astro-cid-b6yaaygw]:hover{transform:translateY(-2px)}@keyframes fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.album-card[data-astro-cid-b6yaaygw]{animation:fadeInUp .3s ease-out}
.card-base[data-astro-cid-fepk5tcl]{container-type:inline-size}.anime-grid-container[data-astro-cid-fepk5tcl]{display:grid;grid-template-columns:repeat(2,1fr);transition:all .5s cubic-bezier(.4,0,.2,1)}@container (min-width: 900px){.anime-grid-container[data-astro-cid-fepk5tcl].single-sidebar{grid-template-columns:repeat(5,1fr)}}@container (min-width: 600px) and (max-width: 899px){.anime-grid-container[data-astro-cid-fepk5tcl].single-sidebar{grid-template-columns:repeat(3,1fr)}}@container (max-width: 599px){.anime-grid-container[data-astro-cid-fepk5tcl].single-sidebar{grid-template-columns:repeat(2,1fr)}}@container (min-width: 950px){.anime-grid-container[data-astro-cid-fepk5tcl].both-sidebar{grid-template-columns:repeat(5,1fr)}}@container (min-width: 650px) and (max-width: 949px){.anime-grid-container[data-astro-cid-fepk5tcl].both-sidebar{grid-template-columns:repeat(4,1fr)}}@container (min-width: 480px) and (max-width: 649px){.anime-grid-container[data-astro-cid-fepk5tcl].both-sidebar{grid-template-columns:repeat(3,1fr)}}@container (max-width: 479px){.anime-grid-container[data-astro-cid-fepk5tcl].both-sidebar{grid-template-columns:repeat(2,1fr)}}.filter-container[data-astro-cid-fepk5tcl]{display:flex;flex-wrap:wrap;gap:.5rem}.filter-tag[data-astro-cid-fepk5tcl]{padding:.5rem 1rem;border:1px solid var(--line-divider);border-radius:var(--radius-large);background:var(--btn-regular-bg);color:var(--btn-content);font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease;white-space:nowrap}.filter-tag[data-astro-cid-fepk5tcl]:hover:not(.active){background:var(--btn-hover-bg);border-color:var(--primary);transform:translateY(-1px)}.filter-tag[data-astro-cid-fepk5tcl].active{background:var(--primary);color:#fff;border-color:var(--primary)}.filter-tag[data-astro-cid-fepk5tcl].active:hover{background:var(--primary)!important;color:#fff!important;border-color:var(--primary)!important;transform:translateY(-1px)}[data-astro-cid-fepk5tcl][data-anime-status]{transition:all .5s cubic-bezier(.4,0,.2,1)}#anime-list-container[data-astro-cid-fepk5tcl].grid-mode [data-astro-cid-fepk5tcl][data-anime-status]:hover{transform:translateY(-8px) scale(1.02);box-shadow:0 12px 24px #00000026;z-index:10;transition:all .3s cubic-bezier(.4,0,.2,1)}#anime-list-container[data-astro-cid-fepk5tcl].list-mode [data-astro-cid-fepk5tcl][data-anime-status]:hover{transform:translate(8px) scale(1.01);box-shadow:0 8px 16px #0000001a;z-index:10;transition:all .3s cubic-bezier(.4,0,.2,1)}[data-astro-cid-fepk5tcl][data-anime-status].anime-hidden{display:none}[data-astro-cid-fepk5tcl][data-anime-status].anime-animating{transition:transform .5s cubic-bezier(.4,0,.2,1),opacity .5s cubic-bezier(.4,0,.2,1)}[data-astro-cid-fepk5tcl][data-anime-status].anime-fade-out{opacity:0;transform:scale(.8);pointer-events:none;transition:opacity .3s cubic-bezier(.4,0,.2,1),transform .3s cubic-bezier(.4,0,.2,1)}[data-astro-cid-fepk5tcl][data-anime-status].anime-fade-in{opacity:0;transform:scale(.8)}[data-astro-cid-fepk5tcl][data-anime-status].anime-fade-in-active{opacity:1;transform:scale(1)}
.filter-container[data-astro-cid-komnyuwm]{display:flex;flex-wrap:wrap;gap:.75rem;margin-bottom:1rem}.filter-tag[data-astro-cid-komnyuwm]{padding:.625rem 1.25rem;border:1px solid var(--line-divider);border-radius:var(--radius-large);background:var(--btn-regular-bg);color:var(--btn-content);font-size:.875rem;font-weight:500;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);white-space:nowrap;position:relative;overflow:hidden}.filter-tag[data-astro-cid-komnyuwm]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:var(--primary);opacity:0;transition:opacity .3s ease;z-index:-1}.filter-tag[data-astro-cid-komnyuwm]:hover:not(.active){background:var(--btn-hover-bg);border-color:var(--primary);transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.filter-tag[data-astro-cid-komnyuwm].active{background:var(--primary);color:#fff;border-color:var(--primary);transform:translateY(-1px);box-shadow:0 4px 12px rgba(var(--color-primary-rgb),.3)}.filter-tag[data-astro-cid-komnyuwm].active:hover{transform:translateY(-2px);box-shadow:0 6px 16px rgba(var(--color-primary-rgb),.4)}@keyframes fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.onload-animation[data-astro-cid-komnyuwm]{animation:fadeInUp .6s cubic-bezier(.25,.1,.25,1) forwards;opacity:0}.line-clamp-2[data-astro-cid-komnyuwm]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.device-card[data-astro-cid-komnyuwm]:after{content:"";position:absolute;inset:0;border-radius:.75rem;background:linear-gradient(135deg,rgba(var(--color-primary-rgb),.05),transparent);opacity:0;transition:opacity .4s ease;pointer-events:none}.device-card[data-astro-cid-komnyuwm]:hover:after{opacity:1}.device-card[data-astro-cid-komnyuwm] h3[data-astro-cid-komnyuwm]{text-shadow:0 1px 2px rgba(0,0,0,.05)}@media(max-width:640px){.filter-container[data-astro-cid-komnyuwm]{gap:.5rem}.filter-tag[data-astro-cid-komnyuwm]{padding:.5rem 1rem;font-size:.8rem}.device-card[data-astro-cid-komnyuwm] .relative[data-astro-cid-komnyuwm].p-6.pb-0{padding:1rem 1rem 0}.device-card[data-astro-cid-komnyuwm] .p-6[data-astro-cid-komnyuwm].pt-4{padding:1rem}}@media(prefers-color-scheme:dark){.device-card[data-astro-cid-komnyuwm]:hover{box-shadow:0 4px 12px #00000026}}
.card-base[data-astro-cid-pyfuvgrx]{background:var(--card-bg);border:1px solid var(--line-divider);transition:all .3s ease}.moments-header[data-astro-cid-pyfuvgrx]{padding:1rem;border-radius:8px;background:linear-gradient(135deg,var(--primary) 0%,var(--primary-dark, var(--primary)) 100%);color:#fff;position:relative;overflow:hidden}.header-content[data-astro-cid-pyfuvgrx]{display:flex;justify-content:space-between;align-items:center;position:relative;z-index:1}.moments-title[data-astro-cid-pyfuvgrx]{color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.1)}.moments-subtitle[data-astro-cid-pyfuvgrx]{color:#ffffffe6}.stat-number[data-astro-cid-pyfuvgrx]{color:#fff}.stat-label[data-astro-cid-pyfuvgrx]{color:#fffc}.image-item[data-astro-cid-pyfuvgrx] img[data-astro-cid-pyfuvgrx]{transition:transform .3s ease}.image-item[data-astro-cid-pyfuvgrx]:hover img[data-astro-cid-pyfuvgrx]{transform:scale(1.05)}.action-btn[data-astro-cid-pyfuvgrx]{background:none;border:none;cursor:pointer;color:var(--text-muted)}.action-btn[data-astro-cid-pyfuvgrx]:hover{color:var(--primary)}@media(max-width:640px){.moments-header[data-astro-cid-pyfuvgrx]{padding:.75rem}.header-content[data-astro-cid-pyfuvgrx]{flex-direction:column;text-align:center;gap:.75rem}.moment-images[data-astro-cid-pyfuvgrx]{grid-template-columns:repeat(2,1fr)}.moment-footer[data-astro-cid-pyfuvgrx]{flex-direction:column;align-items:flex-start;gap:.5rem}}@media(min-width:641px)and (max-width:900px){.moments-header[data-astro-cid-pyfuvgrx]{padding:1.25rem}.header-content[data-astro-cid-pyfuvgrx]{display:flex;justify-content:space-between;align-items:center}.moment-item[data-astro-cid-pyfuvgrx]{padding:1.5rem}.moment-images[data-astro-cid-pyfuvgrx]{grid-template-columns:repeat(3,1fr);gap:.75rem;max-width:500px}.moment-text[data-astro-cid-pyfuvgrx]{font-size:1rem;line-height:1.7}.moment-footer[data-astro-cid-pyfuvgrx]{margin-top:1rem}}@media(min-width:901px){.moments-header[data-astro-cid-pyfuvgrx]{padding:1.5rem}.moment-item[data-astro-cid-pyfuvgrx]{padding:2rem}.moment-images[data-astro-cid-pyfuvgrx]{grid-template-columns:repeat(auto-fit,minmax(150px,1fr));max-width:600px;gap:1rem}.moment-text[data-astro-cid-pyfuvgrx]{font-size:1.1rem;line-height:1.8}}@media(max-width:480px){.moment-item[data-astro-cid-pyfuvgrx]{border-radius:8px}.moments-header[data-astro-cid-pyfuvgrx]{border-radius:6px}}
.friend-card[data-astro-cid-spp2p3no]{animation:fadeInUp .5s ease-out forwards;opacity:0}.friend-card[data-astro-cid-spp2p3no]:nth-child(1){animation-delay:.05s}.friend-card[data-astro-cid-spp2p3no]:nth-child(2){animation-delay:.1s}.friend-card[data-astro-cid-spp2p3no]:nth-child(3){animation-delay:.15s}.friend-card[data-astro-cid-spp2p3no]:nth-child(4){animation-delay:.2s}.friend-card[data-astro-cid-spp2p3no]:nth-child(5){animation-delay:.25s}.friend-card[data-astro-cid-spp2p3no]:nth-child(6){animation-delay:.3s}@keyframes fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}#friend-search[data-astro-cid-spp2p3no]:focus{box-shadow:0 0 0 3px var(--primary) / .1}.filter-container[data-astro-cid-spp2p3no]{display:flex;flex-wrap:wrap;gap:.5rem}.filter-tag[data-astro-cid-spp2p3no]{padding:.5rem 1rem;border:1px solid var(--line-divider);border-radius:var(--radius-large);background:var(--btn-regular-bg);color:var(--btn-content);font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease;white-space:nowrap}.filter-tag[data-astro-cid-spp2p3no]:hover:not(.active){background:var(--btn-hover-bg);border-color:var(--primary);transform:translateY(-1px)}.filter-tag[data-astro-cid-spp2p3no].active{background:var(--primary);color:#fff;border-color:var(--primary)}.filter-tag[data-astro-cid-spp2p3no].active:hover{background:var(--primary)!important;color:#fff!important;border-color:var(--primary)!important;transform:translateY(-1px)}
.password-protection[data-astro-cid-732embm3]{display:flex;justify-content:center;align-items:center;min-height:60vh;padding:2rem}.password-container[data-astro-cid-732embm3]{text-align:center;max-width:400px;width:100%;padding:2rem;border-radius:12px;background:transparent;border:1px solid var(--line-divider);box-shadow:none}.lock-icon[data-astro-cid-732embm3]{margin-bottom:1rem;color:var(--primary)}.password-container[data-astro-cid-732embm3] h2[data-astro-cid-732embm3]{margin-bottom:.5rem;color:#000000d9;font-size:1.5rem}.dark .password-container[data-astro-cid-732embm3] h2[data-astro-cid-732embm3]{color:#ffffffd9}.password-container[data-astro-cid-732embm3] p[data-astro-cid-732embm3]{margin-bottom:1.5rem;color:#000000bf;opacity:.8}.dark .password-container[data-astro-cid-732embm3] p[data-astro-cid-732embm3]{color:#ffffffbf}.password-input-group[data-astro-cid-732embm3]{display:flex;gap:.5rem;margin-bottom:1rem;align-items:stretch}.password-input[data-astro-cid-732embm3]{flex:1;min-width:0;padding:.75rem 1rem;border:1px solid var(--line-divider);border-radius:8px;background:transparent;color:#000000d9;font-size:1rem;transition:border-color .2s ease}.dark .password-input[data-astro-cid-732embm3]{color:#ffffffd9}.password-input[data-astro-cid-732embm3]::-moz-placeholder{color:#00000080}.password-input[data-astro-cid-732embm3]::placeholder{color:#00000080}.dark .password-input[data-astro-cid-732embm3]::-moz-placeholder{color:#ffffff80}.dark .password-input[data-astro-cid-732embm3]::placeholder{color:#ffffff80}.password-input[data-astro-cid-732embm3]:focus{outline:none;border-color:var(--primary)}.unlock-button[data-astro-cid-732embm3]{padding:.75rem 1.5rem;background:transparent;color:var(--primary);border:1px solid var(--primary);border-radius:8px;font-size:1rem;cursor:pointer;transition:border-color .2s,color .2s,background .2s;white-space:nowrap;flex-shrink:0;min-width:-moz-fit-content;min-width:fit-content;max-width:-moz-max-content;max-width:max-content}.unlock-button[data-astro-cid-732embm3]:hover{background:var(--primary);color:#fff;border-color:var(--primary)}.unlock-button[data-astro-cid-732embm3]:disabled{opacity:.6;cursor:not-allowed}.error-message[data-astro-cid-732embm3]{color:#ef4444;font-size:.875rem;margin-top:.5rem}.decrypted-content[data-astro-cid-732embm3]{animation:fadeIn .3s ease-in-out}@keyframes fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@media(min-width:769px){.password-input-group[data-astro-cid-732embm3]{flex-wrap:nowrap}.unlock-button[data-astro-cid-732embm3]{max-width:40%}}@media(max-width:768px){.password-protection[data-astro-cid-732embm3]{padding:1rem;min-height:50vh}.password-container[data-astro-cid-732embm3]{max-width:none;width:100%;padding:1.5rem;margin:0 .5rem}.password-container[data-astro-cid-732embm3] h2[data-astro-cid-732embm3]{font-size:1.25rem;margin-bottom:.75rem}.password-container[data-astro-cid-732embm3] p[data-astro-cid-732embm3]{font-size:.9rem;margin-bottom:1.25rem}.password-input-group[data-astro-cid-732embm3]{flex-direction:column;gap:.75rem}.password-input[data-astro-cid-732embm3]{padding:.875rem 1rem;font-size:1rem;width:100%}.unlock-button[data-astro-cid-732embm3]{padding:.875rem 1rem;font-size:1rem;max-width:100%;width:100%;white-space:nowrap}.error-message[data-astro-cid-732embm3]{font-size:.8rem;text-align:center}}@media(max-width:480px){.password-protection[data-astro-cid-732embm3]{padding:.75rem}.password-container[data-astro-cid-732embm3]{padding:1.25rem;margin:0 .25rem}.password-container[data-astro-cid-732embm3] h2[data-astro-cid-732embm3]{font-size:1.125rem}.password-container[data-astro-cid-732embm3] p[data-astro-cid-732embm3]{font-size:.85rem}.password-input[data-astro-cid-732embm3],.unlock-button[data-astro-cid-732embm3]{padding:.75rem .875rem;font-size:.95rem}}
.line-clamp-1[data-astro-cid-aid3sr62]{display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden}.line-clamp-2[data-astro-cid-aid3sr62]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.line-clamp-2[data-astro-cid-qlh7ngej]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}@keyframes pulse{0%{transform:scale(1);box-shadow:0 0 #6366f166}70%{transform:scale(1.05);box-shadow:0 0 0 10px #6366f100}to{transform:scale(1);box-shadow:0 0 #6366f100}}.timeline-node[data-astro-cid-qlh7ngej]{animation:pulse 2s infinite}.timeline-horizontal-scroll[data-astro-cid-qlh7ngej]::-webkit-scrollbar{height:8px}.timeline-horizontal-scroll[data-astro-cid-qlh7ngej]::-webkit-scrollbar-track{background:#e5e7eb;border-radius:4px}.timeline-horizontal-scroll[data-astro-cid-qlh7ngej]::-webkit-scrollbar-thumb{background:hsl(var(--hue),70%,60%);border-radius:4px}
.skills-container[data-astro-cid-xahix5fp]{position:relative}.skills-grid-container[data-astro-cid-xahix5fp]{grid-template-columns:1fr;transition:grid-template-columns .3s ease}@container (min-width: 640px){.skills-grid-container[data-astro-cid-xahix5fp]{grid-template-columns:repeat(2,1fr)}}@container (min-width: 900px){.skills-grid-container[data-astro-cid-xahix5fp]{grid-template-columns:repeat(3,1fr)}}
</style>
<link rel="stylesheet" href="/_astro/_page_.DodusQ_4.css"><script type="module" src="/_astro/page.BUqocEu6.js"></script></head> <body class=" min-h-screen " style="font-family: ZenMaruGothic-Medium, &#34;萝莉体 第二版&#34;, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;; --bannerOffset: 15vh;--banner-height-home: 65vh;--banner-height: 35vh;--configHue: 230;--page-width: 90rem;" data-overlayscrollbars-initialize data-astro-cid-sckkx6r4> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KRX3XGVH" height="0" width="0" style="display:none;visibility:hidden; --bannerOffset: 15vh;--banner-height-home: 65vh;--banner-height: 35vh;--configHue: 230;--page-width: 90rem;" data-astro-cid-sckkx6r4></iframe></noscript> <!-- 页面顶部渐变高光效果 - 只在full和semifull模式下显示 --> <div class="top-gradient-highlight" data-astro-cid-sckkx6r4 style="--bannerOffset: 15vh;--banner-height-home: 65vh;--banner-height: 35vh;--configHue: 230;--page-width: 90rem;"></div> <!-- 全局配置载体 --><div id="config-carrier" data-hue="230" data-hide-code-blocks-during-transition="true"></div> <script>(function(){const tocEnable = true;
const tocDepth = 2;
const tocUseJapaneseBadge = true;

  // 将TOC配置传递到前端
  window.siteConfig = window.siteConfig || {};
  window.siteConfig.toc = {
    enable: tocEnable,
    depth: tocDepth,
    useJapaneseBadge: tocUseJapaneseBadge
  };
  
  // 添加调试信息
  console.log('TOC Config:', window.siteConfig.toc);
})();</script> <!-- 引入Umami Share工具脚本 --> <script src="/js/umami-share.js"></script>  <script>(function(){const navbarTransparentMode = "semifull";
const defaultWallpaperMode = "banner";
const defaultPostListLayout = "list";

	// 立即执行，在页面渲染前应用壁纸模式和布局模式，避免闪烁
	(function() {
		const wallpaperMode = localStorage.getItem('wallpaperMode') || defaultWallpaperMode;
		const body = document.body;
		
		// 定义 banner 高度常量（与 constants.ts 保持一致）
		const BANNER_HEIGHT = 35;
		const BANNER_HEIGHT_EXTEND = 30;
		const BANNER_HEIGHT_HOME = BANNER_HEIGHT + BANNER_HEIGHT_EXTEND;
		const MAIN_PANEL_OVERLAPS_BANNER_HEIGHT = 3.5;
		
		// 立即应用 body 类，确保首次渲染就是正确的状态
		switch(wallpaperMode) {
			case 'banner':
				body.classList.add('enable-banner');
				body.classList.remove('wallpaper-transparent', 'no-banner-mode');
				break;
			case 'fullscreen':
				body.classList.remove('enable-banner');
				body.classList.add('wallpaper-transparent', 'no-banner-mode');
				break;
			case 'none':
				body.classList.remove('enable-banner', 'wallpaper-transparent');
				body.classList.add('no-banner-mode');
				break;
		}
		
		// 立即调整主内容区域位置和布局模式（避免闪烁和位置错误）
		// 使用 requestAnimationFrame 确保 DOM 准备好
		requestAnimationFrame(function() {
			const mainContent = document.querySelector('.absolute.w-full.z-30.pointer-events-none');
			if (mainContent) {
				if (wallpaperMode === 'banner') {
					// 让主内容区域从banner顶部开始，这样波浪线会自然覆盖内容上部
					mainContent.style.top = `${BANNER_HEIGHT}vh`;
				} else {
					// fullscreen 或 none 模式
					mainContent.style.top = '5.5rem';
				}
			}
			
			// 立即应用布局模式，避免闪烁
			const mainGrid = document.getElementById('main-grid');
			if (mainGrid) {
				const savedLayout = localStorage.getItem('postListLayout');
				const currentLayout = savedLayout || defaultPostListLayout;
				mainGrid.setAttribute('data-layout-mode', currentLayout);
				
				// 根据布局模式显示或隐藏右侧边栏
				const rightSidebar = document.querySelector('.right-sidebar-container');
				if (rightSidebar) {
					if (currentLayout === 'grid') {
						rightSidebar.classList.add('hidden-in-grid-mode');
					} else {
						rightSidebar.classList.remove('hidden-in-grid-mode');
					}
				}
				
				// 同时更新文章列表容器的CSS类
				const postListContainer = document.getElementById('post-list-container');
				if (postListContainer) {
					postListContainer.classList.remove('list-mode', 'grid-mode');
					
					if (currentLayout === 'grid') {
						postListContainer.classList.add('grid-mode');
						postListContainer.classList.add('grid', 'grid-cols-1', 'lg:grid-cols-2', 'gap-6');
						postListContainer.classList.remove('flex', 'flex-col');
					} else {
						postListContainer.classList.add('list-mode');
						postListContainer.classList.add('flex', 'flex-col');
						postListContainer.classList.remove('grid', 'grid-cols-1', 'lg:grid-cols-2', 'gap-6');
					}
				}
			}
		});
	})();
	
	// 根据壁纸模式动态设置 banner 和全屏壁纸的显示
	const wallpaperMode = localStorage.getItem('wallpaperMode') || defaultWallpaperMode;
	
	// 在 DOM 加载后执行
	if (document.readyState === 'loading') {
		document.addEventListener('DOMContentLoaded', applyWallpaperMode);
	} else {
		applyWallpaperMode();
	}
	
	function applyWallpaperMode() {
		var wallpaperMode = localStorage.getItem('wallpaperMode') || defaultWallpaperMode;
		var bannerWrapper = document.getElementById('banner-wrapper');
		var fullscreenWallpaper = document.querySelector('[data-fullscreen-wallpaper]');
		var navbar = document.getElementById('navbar');
		var body = document.body;
		var mainContent = document.querySelector('.absolute.w-full.z-30.pointer-events-none');
		
		// 强制重排以确保样式正确应用
		var forceReflow = function() {
			void document.body.offsetHeight;
		};
		
		switch(wallpaperMode) {
			case 'banner':
				// 显示 banner，隐藏全屏壁纸
				if (bannerWrapper) {
					bannerWrapper.style.display = 'block';
				}
				if (fullscreenWallpaper) {
					fullscreenWallpaper.style.display = 'none';
				}
				// 先移除body类，避免CSS冲突
				body.classList.remove('wallpaper-transparent');
				body.classList.remove('no-banner-mode');
				// 强制重排
				forceReflow();
				// 移除内联样式，让CSS完全接管
				if (mainContent) {
					mainContent.style.removeProperty('top');
				}
				// 再添加enable-banner类
				body.classList.add('enable-banner');
				// navbar 恢复原始透明模式（从 config 读取）
				if (navbar) {
					navbar.removeAttribute('data-dynamic-transparent');
					// 恢复 config 中设置的 data-transparent-mode
					navbar.setAttribute('data-transparent-mode', navbarTransparentMode);
					// 如果是 semifull 模式，重新初始化滚动检测
					if (navbarTransparentMode === 'semifull' && window.initSemifullScrollDetection) {
						window.initSemifullScrollDetection();
					}
				}
				// 强制重排以确保CSS变量正确更新
				forceReflow();
				break;
				
			case 'fullscreen':
				// 隐藏 banner，显示全屏壁纸
				if (bannerWrapper) {
					bannerWrapper.style.display = 'none';
				}
				if (fullscreenWallpaper) {
					fullscreenWallpaper.style.display = 'block';
				}
				// 先移除body类，避免CSS冲突
				body.classList.remove('enable-banner');
				// 强制重排
				forceReflow();
				// 移除内联样式，让CSS完全接管
				if (mainContent) {
					mainContent.style.removeProperty('top');
				}
				// 再添加wallpaper-transparent和no-banner-mode类
				body.classList.add('wallpaper-transparent');
				body.classList.add('no-banner-mode');
				// navbar 强制设置为 semi 透明模式（忽略 config 配置）
				if (navbar) {
					navbar.setAttribute('data-dynamic-transparent', 'semi');
					// 强制移除 config 中的 data-transparent-mode 影响
					navbar.removeAttribute('data-transparent-mode');
				}
				// 强制重排以确保CSS变量正确更新
				forceReflow();
				break;
				
			case 'none':
				// 隐藏所有壁纸
				if (bannerWrapper) {
					bannerWrapper.style.display = 'none';
				}
				if (fullscreenWallpaper) {
					fullscreenWallpaper.style.display = 'none';
				}
				// 先移除body类，避免CSS冲突
				body.classList.remove('enable-banner');
				body.classList.remove('wallpaper-transparent');
				// 强制重排
				forceReflow();
				// 移除内联样式，让CSS完全接管
				if (mainContent) {
					mainContent.style.removeProperty('top');
				}
				// 再添加no-banner-mode类
				body.classList.add('no-banner-mode');
				// navbar 强制设置为不透明（忽略 config 配置）
				if (navbar) {
					navbar.setAttribute('data-dynamic-transparent', 'none');
					// 强制移除 config 中的 data-transparent-mode 影响
					navbar.removeAttribute('data-transparent-mode');
				}
				// 强制重排以确保CSS变量正确更新
				forceReflow();
				break;
		}
	}
	
	// 监听壁纸模式变化，立即应用（不重载页面）
	window.addEventListener('wallpaper-mode-change', function(event) {
		applyWallpaperMode();
	});
	
	// 支持 Swup 页面过渡 - 在内容替换之前就应用布局，避免闪烁
	function setupSwupLayoutSync() {
		if (typeof window !== 'undefined' && window.swup) {
			// 关键：在 content:replace 之前（animation:out:start）就准备好布局状态
			window.swup.hooks.on('animation:out:start', function() {
				// 保存当前布局状态，以便在新页面中立即应用
				const savedLayout = localStorage.getItem('postListLayout');
				if (savedLayout) {
					window.__pendingLayoutMode = savedLayout;
				}
			});
			
			// 在内容替换后立即应用布局，不等待其他脚本
			window.swup.hooks.on('content:replace', function() {
				const mainGrid = document.getElementById('main-grid');
				if (mainGrid) {
					const currentLayout = window.__pendingLayoutMode || localStorage.getItem('postListLayout') || defaultPostListLayout;
					mainGrid.setAttribute('data-layout-mode', currentLayout);
					
					const rightSidebar = document.querySelector('.right-sidebar-container');
					if (rightSidebar) {
						if (currentLayout === 'grid') {
							rightSidebar.classList.add('hidden-in-grid-mode');
						} else {
							rightSidebar.classList.remove('hidden-in-grid-mode');
						}
					}
					
					// 关键：同时更新文章列表容器的CSS类
					const postListContainer = document.getElementById('post-list-container');
					if (postListContainer) {
						// 移除现有布局类
						postListContainer.classList.remove('list-mode', 'grid-mode');
						
						if (currentLayout === 'grid') {
							postListContainer.classList.add('grid-mode');
							postListContainer.classList.add('grid', 'grid-cols-1', 'lg:grid-cols-2', 'gap-6');
							postListContainer.classList.remove('flex', 'flex-col');
						} else {
							postListContainer.classList.add('list-mode');
							postListContainer.classList.add('flex', 'flex-col');
							postListContainer.classList.remove('grid', 'grid-cols-1', 'lg:grid-cols-2', 'gap-6');
						}
					}
					
					// 清除临时状态
					delete window.__pendingLayoutMode;
				}
			});
			
			return true;
		}
		return false;
	}
	
	// 尝试立即设置，如果失败则延迟重试
	if (!setupSwupLayoutSync()) {
		const checkSwup = setInterval(function() {
			if (setupSwupLayoutSync()) {
				clearInterval(checkSwup);
			}
		}, 50);
		
		setTimeout(function() {
			clearInterval(checkSwup);
		}, 2000);
	}
	
	// 支持 Swup 页面过渡
	document.addEventListener('swup:page:view', function() {
		applyWallpaperMode();
		
		// 在Swup页面切换时也要重新应用布局模式
		requestAnimationFrame(function() {
			const mainGrid = document.getElementById('main-grid');
			if (mainGrid) {
				const savedLayout = localStorage.getItem('postListLayout');
				const currentLayout = savedLayout || defaultPostListLayout;
				mainGrid.setAttribute('data-layout-mode', currentLayout);
				
				if (currentLayout === 'grid') {
					const rightSidebar = document.querySelector('.right-sidebar-container');
					if (rightSidebar) {
						rightSidebar.classList.add('hidden-in-grid-mode');
					}
				} else {
					const rightSidebar = document.querySelector('.right-sidebar-container');
					if (rightSidebar) {
						rightSidebar.classList.remove('hidden-in-grid-mode');
					}
				}
			}
		});
	});
	// 在页面完全加载后，再次确认布局模式是否正确
	if (document.readyState === 'loading') {
		document.addEventListener('DOMContentLoaded', function() {
			const mainGrid = document.getElementById('main-grid');
			if (mainGrid) {
				const savedLayout = localStorage.getItem('postListLayout');
				const currentLayout = savedLayout || defaultPostListLayout;
				mainGrid.setAttribute('data-layout-mode', currentLayout);
				
				if (currentLayout === 'grid') {
					const rightSidebar = document.querySelector('.right-sidebar-container');
					if (rightSidebar) {
						rightSidebar.classList.add('hidden-in-grid-mode');
					}
				}
			}
		});
	}
})();</script>  <div class="fixed inset-0 w-full h-full overflow-hidden pointer-events-none" style="z-index: -1; opacity: 0.8;" data-fullscreen-wallpaper> <script>
// 根据 localStorage 立即设置全屏壁纸初始显示状态，避免闪烁
(function() {
	const wallpaperMode = localStorage.getItem('wallpaperMode') || 'banner';
	const fullscreenWallpaper = document.currentScript.parentElement;
	if (wallpaperMode !== 'fullscreen') {
		fullscreenWallpaper.style.display = 'none';
	}
})();
</script> <!-- 桌面端壁纸 --> <div class="hidden lg:block w-full h-full relative"> <img src="/assets/desktop-banner/1.webp" alt="Desktop wallpaper 1" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="0" style="filter: blur(1px);"><img src="/assets/desktop-banner/2.webp" alt="Desktop wallpaper 2" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="1" style="filter: blur(1px);"><img src="/assets/desktop-banner/3.webp" alt="Desktop wallpaper 3" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="2" style="filter: blur(1px);"><img src="/assets/desktop-banner/4.webp" alt="Desktop wallpaper 4" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="3" style="filter: blur(1px);"><img src="/assets/desktop-banner/5.webp" alt="Desktop wallpaper 5" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="4" style="filter: blur(1px);"><img src="/assets/desktop-banner/6.webp" alt="Desktop wallpaper 6" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="5" style="filter: blur(1px);"><img src="/assets/desktop-banner/7.webp" alt="Desktop wallpaper 7" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="6" style="filter: blur(1px);"><img src="/assets/desktop-banner/8.webp" alt="Desktop wallpaper 8" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="7" style="filter: blur(1px);"><img src="/assets/desktop-banner/9.webp" alt="Desktop wallpaper 9" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="8" style="filter: blur(1px);"><img src="/assets/desktop-banner/10.webp" alt="Desktop wallpaper 10" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="9" style="filter: blur(1px);"><img src="/assets/desktop-banner/11.webp" alt="Desktop wallpaper 11" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="10" style="filter: blur(1px);"> </div> <!-- 移动端壁纸 --> <div class="block lg:hidden w-full h-full relative"> <img src="/assets/mobile-banner/1.webp" alt="Mobile wallpaper 1" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="0" style="filter: blur(1px);"><img src="/assets/mobile-banner/2.webp" alt="Mobile wallpaper 2" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="1" style="filter: blur(1px);"><img src="/assets/mobile-banner/3.webp" alt="Mobile wallpaper 3" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="2" style="filter: blur(1px);"><img src="/assets/mobile-banner/4.webp" alt="Mobile wallpaper 4" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="3" style="filter: blur(1px);"><img src="/assets/mobile-banner/5.webp" alt="Mobile wallpaper 5" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="4" style="filter: blur(1px);"><img src="/assets/mobile-banner/6.webp" alt="Mobile wallpaper 6" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 object-center" data-carousel-item="5" style="filter: blur(1px);"> </div> </div> <script>(function(){const carouselInterval = 5;

		// 全屏壁纸轮播逻辑
		function initFullscreenWallpaperCarousel() {
			const wallpaperContainer = document.querySelector('[data-fullscreen-wallpaper]');
			if (!wallpaperContainer) return;

			const desktopItems = wallpaperContainer.querySelectorAll('.hidden.lg\\:block [data-carousel-item]');
			const mobileItems = wallpaperContainer.querySelectorAll('.block.lg\\:hidden [data-carousel-item]');

			function startCarousel(items) {
				if (items.length <= 1) return;

				let currentIndex = 0;
				
				// 初始化：显示第一张，隐藏其他
				items.forEach((item, index) => {
					item.style.opacity = index === 0 ? '1' : '0';
				});

				// 开始轮播
				setInterval(() => {
					// 隐藏当前图片
					items[currentIndex].style.opacity = '0';
					
					// 切换到下一张
					currentIndex = (currentIndex + 1) % items.length;
					
					// 显示下一张图片
					items[currentIndex].style.opacity = '1';
				}, carouselInterval * 1000);
			}

			// 分别为桌面端和移动端启动轮播
			if (desktopItems.length > 0) {
				startCarousel(desktopItems);
			}
			if (mobileItems.length > 0) {
				startCarousel(mobileItems);
			}
		}

		// 页面加载完成后初始化轮播
		if (document.readyState === 'loading') {
			document.addEventListener('DOMContentLoaded', initFullscreenWallpaperCarousel);
		} else {
			initFullscreenWallpaperCarousel();
		}
	})();</script>  <!-- Iconify图标库加载器 --><script>(function(){const preloadIcons = [];
const timeout = 10000;
const retryCount = 3;

  // 全局图标加载逻辑
  (function() {
    'use strict';
    
    // 避免重复加载
    if (window.__iconifyLoaderInitialized) {
      return;
    }
    window.__iconifyLoaderInitialized = true;

    // 图标加载器类
    class IconifyLoader {
      constructor() {
        this.isLoaded = false;
        this.isLoading = false;
        this.loadPromise = null;
        this.observers = new Set();
        this.preloadQueue = new Set();
      }

      async load(options = {}) {
        const { timeout: loadTimeout = timeout, retryCount: maxRetries = retryCount } = options;
        
        if (this.isLoaded) {
          return Promise.resolve();
        }

        if (this.isLoading && this.loadPromise) {
          return this.loadPromise;
        }

        this.isLoading = true;
        this.loadPromise = this.loadWithRetry(loadTimeout, maxRetries);

        try {
          await this.loadPromise;
          this.isLoaded = true;
          this.notifyObservers();
          await this.processPreloadQueue();
        } catch (error) {
          console.error('Failed to load Iconify:', error);
          throw error;
        } finally {
          this.isLoading = false;
        }
      }

      async loadWithRetry(timeout, retryCount) {
        for (let attempt = 1; attempt <= retryCount; attempt++) {
          try {
            await this.loadScript(timeout);
            return;
          } catch (error) {
            console.warn(`Iconify load attempt ${attempt} failed:`, error);
            
            if (attempt === retryCount) {
              throw new Error(`Failed to load Iconify after ${retryCount} attempts`);
            }
            
            await new Promise(resolve => setTimeout(resolve, 1000));
          }
        }
      }

      loadScript(timeout) {
        return new Promise((resolve, reject) => {
          // 检查是否已经存在
          if (this.isIconifyReady()) {
            resolve();
            return;
          }

          const existingScript = document.querySelector('script[src*="iconify-icon"]');
          if (existingScript) {
            this.waitForIconifyReady().then(resolve).catch(reject);
            return;
          }

          const script = document.createElement('script');
          script.src = 'https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js';
          script.async = true;
          script.crossOrigin = 'anonymous';

          const timeoutId = setTimeout(() => {
            script.remove();
            reject(new Error('Script load timeout'));
          }, timeout);

          script.onload = () => {
            clearTimeout(timeoutId);
            this.waitForIconifyReady().then(resolve).catch(reject);
          };

          script.onerror = () => {
            clearTimeout(timeoutId);
            script.remove();
            reject(new Error('Script load error'));
          };

          document.head.appendChild(script);
        });
      }

      waitForIconifyReady(maxWait = 5000) {
        return new Promise((resolve, reject) => {
          const startTime = Date.now();
          
          const checkReady = () => {
            if (this.isIconifyReady()) {
              resolve();
              return;
            }
            
            if (Date.now() - startTime > maxWait) {
              reject(new Error('Iconify initialization timeout'));
              return;
            }
            
            setTimeout(checkReady, 50);
          };
          
          checkReady();
        });
      }

      isIconifyReady() {
        return typeof window !== 'undefined' && 
               'customElements' in window && 
               customElements.get('iconify-icon') !== undefined;
      }

      onLoad(callback) {
        if (this.isLoaded) {
          callback();
        } else {
          this.observers.add(callback);
        }
      }

      notifyObservers() {
        this.observers.forEach(callback => {
          try {
            callback();
          } catch (error) {
            console.error('Error in icon load observer:', error);
          }
        });
        this.observers.clear();
      }

      addToPreloadQueue(icons) {
        if (Array.isArray(icons)) {
          icons.forEach(icon => this.preloadQueue.add(icon));
        } else {
          this.preloadQueue.add(icons);
        }
        
        if (this.isLoaded) {
          this.processPreloadQueue();
        }
      }

      async processPreloadQueue() {
        if (this.preloadQueue.size === 0) return;
        
        const iconsToLoad = Array.from(this.preloadQueue);
        this.preloadQueue.clear();
        
        await this.preloadIcons(iconsToLoad);
      }

      async preloadIcons(icons) {
        if (!this.isLoaded || icons.length === 0) return;

        return new Promise((resolve) => {
          let loadedCount = 0;
          const totalIcons = icons.length;
          const tempElements = [];

          const cleanup = () => {
            tempElements.forEach(el => {
              if (el.parentNode) {
                el.parentNode.removeChild(el);
              }
            });
          };

          const checkComplete = () => {
            loadedCount++;
            if (loadedCount >= totalIcons) {
              cleanup();
              resolve();
            }
          };

          icons.forEach(icon => {
            const tempIcon = document.createElement('iconify-icon');
            tempIcon.setAttribute('icon', icon);
            tempIcon.style.cssText = 'position:absolute;top:-9999px;left:-9999px;width:1px;height:1px;opacity:0;pointer-events:none;';
            
            tempIcon.addEventListener('load', checkComplete);
            tempIcon.addEventListener('error', checkComplete);
            
            tempElements.push(tempIcon);
            document.body.appendChild(tempIcon);
          });

          // 设置超时清理
          setTimeout(() => {
            cleanup();
            resolve();
          }, 3000);
        });
      }
    }

    // 创建全局实例
    window.__iconifyLoader = new IconifyLoader();

    // 立即开始加载
    window.__iconifyLoader.load().catch(error => {
      console.error('Failed to initialize Iconify:', error);
    });

    // 如果有预加载图标，添加到队列
    if (preloadIcons && preloadIcons.length > 0) {
      window.__iconifyLoader.addToPreloadQueue(preloadIcons);
    }

    // 导出便捷函数到全局
    window.loadIconify = () => window.__iconifyLoader.load();
    window.preloadIcons = (icons) => window.__iconifyLoader.addToPreloadQueue(icons);
    window.onIconifyReady = (callback) => window.__iconifyLoader.onLoad(callback);

    // 页面可见性变化时重新检查
    document.addEventListener('visibilitychange', () => {
      if (!document.hidden && !window.__iconifyLoader.isLoaded) {
        window.__iconifyLoader.load().catch(console.error);
      }
    });

  })();
})();</script> <!-- 为不支持JavaScript的情况提供备用方案 --><noscript><style>
    iconify-icon {
      display: none;
    }
    .icon-fallback {
      display: inline-block;
    }
  </style></noscript>   <div id="top-row" class="z-50 pointer-events-none relative transition-all duration-700 max-w-[var(--page-width)] px-0 md:px-4 mx-auto" data-astro-cid-haiuh7kc> <div id="navbar-wrapper" class="pointer-events-auto sticky top-0 transition-all" data-astro-cid-haiuh7kc> <div id="navbar" class="z-50 onload-animation" data-transparent-mode="semifull" data-is-home="false"> <div class="absolute h-8 left-0 right-0 -top-8 bg-[var(--card-bg)] transition"></div> <!-- used for onload animation --> <div class="!overflow-visible max-w-[var(--page-width)] h-[4.5rem] mx-auto flex items-center justify-between px-4"> <a href="/" class="btn-plain scale-animation rounded-lg h-[3.25rem] px-5 font-bold active:scale-95"> <div class="flex flex-row items-center text-md">   <img src="/assets/home/home.png" alt="NagisaDaisuki" class="h-[1.75rem] w-[1.75rem] mb-1 mr-2 object-contain" loading="lazy"> <span class="dark:text-white text-black">NagisaDaisuki</span>  </div> </a> <div class="hidden md:flex items-center space-x-1"> <div class="dropdown-container" data-dropdown data-astro-cid-qou34bit> <a aria-label="Home" href="/" class="btn-plain scale-animation rounded-lg h-11 font-bold px-5 active:scale-95" data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" class="text-[1.1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="material-symbols:home">   <symbol id="ai:material-symbols:home" viewBox="0 0 24 24"><path fill="currentColor" d="M4 21V9l8-6l8 6v12h-6v-7h-4v7z"/></symbol><use href="#ai:material-symbols:home"></use>  </svg> Home  </div> </a> </div>  <script type="module">document.addEventListener("DOMContentLoaded",function(){const i=document.querySelectorAll("[data-dropdown]");i.forEach(t=>{const e=t.querySelector("[data-dropdown-trigger]"),o=t.querySelector("[data-dropdown-menu]"),n=t.querySelectorAll(".dropdown-item");!e||!o||(e.addEventListener("keydown",function(r){r.key==="Enter"||r.key===" "?(r.preventDefault(),d(t,e,o)):r.key==="ArrowDown"?(r.preventDefault(),u(t,e,o),n.length>0&&n[0].focus()):r.key==="Escape"&&a(t,e,o)}),n.forEach((r,l)=>{r.addEventListener("keydown",function(s){if(s.key==="ArrowDown"){s.preventDefault();const c=(l+1)%n.length;n[c].focus()}else if(s.key==="ArrowUp"){s.preventDefault();const c=(l-1+n.length)%n.length;n[c].focus()}else s.key==="Escape"&&(a(t,e,o),e.focus())})}))}),document.addEventListener("click",function(t){i.forEach(e=>{if(!e.contains(t.target)){const o=e.querySelector("[data-dropdown-trigger]"),n=e.querySelector("[data-dropdown-menu]");o&&n&&a(e,o,n)}})})});function d(i,t,e){t.getAttribute("aria-expanded")==="true"?a(i,t,e):u(i,t,e)}function u(i,t,e){t.setAttribute("aria-expanded","true"),e.classList.remove("opacity-0","invisible","pointer-events-none","translate-y-[-8px]"),e.classList.add("opacity-100","visible","pointer-events-auto","translate-y-0")}function a(i,t,e){t.setAttribute("aria-expanded","false"),e.classList.add("opacity-0","invisible","pointer-events-none","translate-y-[-8px]"),e.classList.remove("opacity-100","visible","pointer-events-auto","translate-y-0")}</script><div class="dropdown-container" data-dropdown data-astro-cid-qou34bit> <a aria-label="Archive" href="/archive/" class="btn-plain scale-animation rounded-lg h-11 font-bold px-5 active:scale-95" data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" class="text-[1.1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="material-symbols:archive">   <symbol id="ai:material-symbols:archive" viewBox="0 0 24 24"><path fill="currentColor" d="m12 18l4-4l-1.4-1.4l-1.6 1.6V10h-2v4.2l-1.6-1.6L8 14zm-7 3q-.825 0-1.412-.587T3 19V6.525q0-.35.113-.675t.337-.6L4.7 3.725q.275-.35.687-.538T6.25 3h11.5q.45 0 .863.188t.687.537l1.25 1.525q.225.275.338.6t.112.675V19q0 .825-.587 1.413T19 21zm.4-15h13.2l-.85-1H6.25z"/></symbol><use href="#ai:material-symbols:archive"></use>  </svg> Archive  </div> </a> </div>  <div class="dropdown-container" data-dropdown data-astro-cid-qou34bit> <button class="btn-plain scale-animation rounded-lg h-11 font-bold px-5 active:scale-95 dropdown-trigger" aria-expanded="false" aria-haspopup="true" data-dropdown-trigger data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" class="text-[1.1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="material-symbols:link">   <symbol id="ai:material-symbols:link" viewBox="0 0 24 24"><path fill="currentColor" d="M11 17H7q-2.075 0-3.537-1.463T2 12t1.463-3.537T7 7h4v2H7q-1.25 0-2.125.875T4 12t.875 2.125T7 15h4zm-3-4v-2h8v2zm5 4v-2h4q1.25 0 2.125-.875T20 12t-.875-2.125T17 9h-4V7h4q2.075 0 3.538 1.463T22 12t-1.463 3.538T17 17z"/></symbol><use href="#ai:material-symbols:link"></use>  </svg> Links <svg width="1em" height="1em" class="text-[1.25rem] transition-transform duration-200 dropdown-arrow ml-1" data-astro-cid-qou34bit="true" data-icon="material-symbols:keyboard-arrow-down-rounded">   <symbol id="ai:material-symbols:keyboard-arrow-down-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="M12 14.975q-.2 0-.375-.062T11.3 14.7l-4.6-4.6q-.275-.275-.275-.7t.275-.7t.7-.275t.7.275l3.9 3.9l3.9-3.9q.275-.275.7-.275t.7.275t.275.7t-.275.7l-4.6 4.6q-.15.15-.325.213t-.375.062"/></symbol><use href="#ai:material-symbols:keyboard-arrow-down-rounded"></use>  </svg> </div> </button>
		<div class="dropdown-menu" data-dropdown-menu data-astro-cid-qou34bit> <div class="dropdown-content" data-astro-cid-qou34bit> <a href="https://github.com/NagisaDaisuki" target="_blank" class="dropdown-item" aria-label="GitHub" data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="0.97em" height="1em" viewBox="0 0 496 512" class="text-[1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="fa6-brands:github">   <use href="#ai:fa6-brands:github"></use>  </svg> <span data-astro-cid-qou34bit>GitHub</span> </div> <svg width="1em" height="1em" class="text-[0.75rem] text-black/25 dark:text-white/25" data-astro-cid-qou34bit="true" data-icon="fa6-solid:arrow-up-right-from-square">   <symbol id="ai:fa6-solid:arrow-up-right-from-square" viewBox="0 0 512 512"><path fill="currentColor" d="M320 0c-17.7 0-32 14.3-32 32s14.3 32 32 32h82.7L201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L448 109.3V192c0 17.7 14.3 32 32 32s32-14.3 32-32V32c0-17.7-14.3-32-32-32zM80 32C35.8 32 0 67.8 0 112v320c0 44.2 35.8 80 80 80h320c44.2 0 80-35.8 80-80V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v112c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V112c0-8.8 7.2-16 16-16h112c17.7 0 32-14.3 32-32s-14.3-32-32-32z"/></symbol><use href="#ai:fa6-solid:arrow-up-right-from-square"></use>  </svg> </a><a href="https://space.bilibili.com/275096023" target="_blank" class="dropdown-item" aria-label="Bilibili" data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" viewBox="0 0 512 512" class="text-[1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="fa6-brands:bilibili">   <use href="#ai:fa6-brands:bilibili"></use>  </svg> <span data-astro-cid-qou34bit>Bilibili</span> </div> <svg width="1em" height="1em" viewBox="0 0 512 512" class="text-[0.75rem] text-black/25 dark:text-white/25" data-astro-cid-qou34bit="true" data-icon="fa6-solid:arrow-up-right-from-square">   <use href="#ai:fa6-solid:arrow-up-right-from-square"></use>  </svg> </a><a href="https://gitee.com/nagisadaisuki" target="_blank" class="dropdown-item" aria-label="Gitee" data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="mdi:git">   <use href="#ai:mdi:git"></use>  </svg> <span data-astro-cid-qou34bit>Gitee</span> </div> <svg width="1em" height="1em" viewBox="0 0 512 512" class="text-[0.75rem] text-black/25 dark:text-white/25" data-astro-cid-qou34bit="true" data-icon="fa6-solid:arrow-up-right-from-square">   <use href="#ai:fa6-solid:arrow-up-right-from-square"></use>  </svg> </a><a href="https://nagisadaisuki.github.io" target="_blank" class="dropdown-item" aria-label="Fortress City" data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="material-symbols:link">   <use href="#ai:material-symbols:link"></use>  </svg> <span data-astro-cid-qou34bit>Fortress City</span> </div> <svg width="1em" height="1em" viewBox="0 0 512 512" class="text-[0.75rem] text-black/25 dark:text-white/25" data-astro-cid-qou34bit="true" data-icon="fa6-solid:arrow-up-right-from-square">   <use href="#ai:fa6-solid:arrow-up-right-from-square"></use>  </svg> </a> </div> </div> </div>  <div class="dropdown-container" data-dropdown data-astro-cid-qou34bit> <button class="btn-plain scale-animation rounded-lg h-11 font-bold px-5 active:scale-95 dropdown-trigger" aria-expanded="false" aria-haspopup="true" data-dropdown-trigger data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" class="text-[1.1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="material-symbols:person">   <symbol id="ai:material-symbols:person" viewBox="0 0 24 24"><path fill="currentColor" d="M12 12q-1.65 0-2.825-1.175T8 8t1.175-2.825T12 4t2.825 1.175T16 8t-1.175 2.825T12 12m-8 8v-2.8q0-.85.438-1.562T5.6 14.55q1.55-.775 3.15-1.162T12 13t3.25.388t3.15 1.162q.725.375 1.163 1.088T20 17.2V20z"/></symbol><use href="#ai:material-symbols:person"></use>  </svg> My <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.25rem] transition-transform duration-200 dropdown-arrow ml-1" data-astro-cid-qou34bit="true" data-icon="material-symbols:keyboard-arrow-down-rounded">   <use href="#ai:material-symbols:keyboard-arrow-down-rounded"></use>  </svg> </div> </button>
		<div class="dropdown-menu" data-dropdown-menu data-astro-cid-qou34bit> <div class="dropdown-content" data-astro-cid-qou34bit> <a href="/anime/" class="dropdown-item" aria-label="Anime" data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" class="text-[1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="material-symbols:movie">   <symbol id="ai:material-symbols:movie" viewBox="0 0 24 24"><path fill="currentColor" d="m4 4l2 4h3L7 4h2l2 4h3l-2-4h2l2 4h3l-2-4h3q.825 0 1.413.588T22 6v12q0 .825-.587 1.413T20 20H4q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4"/></symbol><use href="#ai:material-symbols:movie"></use>  </svg> <span data-astro-cid-qou34bit>Anime</span> </div>  </a><a href="/diary/" class="dropdown-item" aria-label="Diary" data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" class="text-[1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="material-symbols:book">   <symbol id="ai:material-symbols:book" viewBox="0 0 24 24"><path fill="currentColor" d="M6 22q-.825 0-1.412-.587T4 20V4q0-.825.588-1.412T6 2h12q.825 0 1.413.588T20 4v16q0 .825-.587 1.413T18 22zm5-11l2.5-1.5L16 11V4h-5z"/></symbol><use href="#ai:material-symbols:book"></use>  </svg> <span data-astro-cid-qou34bit>Diary</span> </div>  </a><a href="/albums/" class="dropdown-item" aria-label="Gallery" data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" class="text-[1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="material-symbols:photo-library">   <symbol id="ai:material-symbols:photo-library" viewBox="0 0 24 24"><path fill="currentColor" d="M9 14h10l-3.45-4.5l-2.3 3l-1.55-2zm-1 4q-.825 0-1.412-.587T6 16V4q0-.825.588-1.412T8 2h12q.825 0 1.413.588T22 4v12q0 .825-.587 1.413T20 18zm-4 4q-.825 0-1.412-.587T2 20V6h2v14h14v2z"/></symbol><use href="#ai:material-symbols:photo-library"></use>  </svg> <span data-astro-cid-qou34bit>Albums</span> </div>  </a><a href="/devices/" class="dropdown-item" aria-label="Devices" data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" class="text-[1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="material-symbols:devices">   <symbol id="ai:material-symbols:devices" viewBox="0 0 24 24"><path fill="currentColor" d="M5 17q-.825 0-1.412-.587T3 15V6q0-.825.588-1.412T5 4h14q.825 0 1.413.588T21 6h-5.5q-1.45 0-2.475 1.025T12 9.5V17zm10.5 3q-.625 0-1.062-.437T14 18.5v-9q0-.625.438-1.062T15.5 8h5q.625 0 1.063.438T22 9.5v9q0 .625-.437 1.063T20.5 20zM2 20v-2h10v2zm16-7.5q.325 0 .538-.225t.212-.525q0-.325-.213-.537T18 11q-.3 0-.525.213t-.225.537q0 .3.225.525T18 12.5"/></symbol><use href="#ai:material-symbols:devices"></use>  </svg> <span data-astro-cid-qou34bit>My Devices</span> </div>  </a> </div> </div> </div>  <div class="dropdown-container" data-dropdown data-astro-cid-qou34bit> <button class="btn-plain scale-animation rounded-lg h-11 font-bold px-5 active:scale-95 dropdown-trigger" aria-expanded="false" aria-haspopup="true" data-dropdown-trigger data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" class="text-[1.1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="material-symbols:info">   <symbol id="ai:material-symbols:info" viewBox="0 0 24 24"><path fill="currentColor" d="M11 17h2v-6h-2zm1-8q.425 0 .713-.288T13 8t-.288-.712T12 7t-.712.288T11 8t.288.713T12 9m0 13q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22"/></symbol><use href="#ai:material-symbols:info"></use>  </svg> About <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.25rem] transition-transform duration-200 dropdown-arrow ml-1" data-astro-cid-qou34bit="true" data-icon="material-symbols:keyboard-arrow-down-rounded">   <use href="#ai:material-symbols:keyboard-arrow-down-rounded"></use>  </svg> </div> </button>
		<div class="dropdown-menu" data-dropdown-menu data-astro-cid-qou34bit> <div class="dropdown-content" data-astro-cid-qou34bit> <a href="/about/" class="dropdown-item" aria-label="About" data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="material-symbols:person">   <use href="#ai:material-symbols:person"></use>  </svg> <span data-astro-cid-qou34bit>About</span> </div>  </a><a href="/friends/" class="dropdown-item" aria-label="Friends" data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" class="text-[1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="material-symbols:group">   <symbol id="ai:material-symbols:group" viewBox="0 0 24 24"><path fill="currentColor" d="M1 20v-2.8q0-.85.438-1.562T2.6 14.55q1.55-.775 3.15-1.162T9 13t3.25.388t3.15 1.162q.725.375 1.163 1.088T17 17.2V20zm18 0v-3q0-1.1-.612-2.113T16.65 13.15q1.275.15 2.4.513t2.1.887q.9.5 1.375 1.112T23 17v3zM9 12q-1.65 0-2.825-1.175T5 8t1.175-2.825T9 4t2.825 1.175T13 8t-1.175 2.825T9 12m10-4q0 1.65-1.175 2.825T15 12q-.275 0-.7-.062t-.7-.138q.675-.8 1.038-1.775T15 8t-.362-2.025T13.6 4.2q.35-.125.7-.163T15 4q1.65 0 2.825 1.175T19 8"/></symbol><use href="#ai:material-symbols:group"></use>  </svg> <span data-astro-cid-qou34bit>Friends</span> </div>  </a> </div> </div> </div>  <div class="dropdown-container" data-dropdown data-astro-cid-qou34bit> <button class="btn-plain scale-animation rounded-lg h-11 font-bold px-5 active:scale-95 dropdown-trigger" aria-expanded="false" aria-haspopup="true" data-dropdown-trigger data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="material-symbols:more-horiz">   <use href="#ai:material-symbols:more-horiz"></use>  </svg> Others <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.25rem] transition-transform duration-200 dropdown-arrow ml-1" data-astro-cid-qou34bit="true" data-icon="material-symbols:keyboard-arrow-down-rounded">   <use href="#ai:material-symbols:keyboard-arrow-down-rounded"></use>  </svg> </div> </button>
		<div class="dropdown-menu" data-dropdown-menu data-astro-cid-qou34bit> <div class="dropdown-content" data-astro-cid-qou34bit> <a href="/projects/" class="dropdown-item" aria-label="Projects" data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" class="text-[1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="material-symbols:work">   <symbol id="ai:material-symbols:work" viewBox="0 0 24 24"><path fill="currentColor" d="M4 21q-.825 0-1.412-.587T2 19V8q0-.825.588-1.412T4 6h4V4q0-.825.588-1.412T10 2h4q.825 0 1.413.588T16 4v2h4q.825 0 1.413.588T22 8v11q0 .825-.587 1.413T20 21zm6-15h4V4h-4z"/></symbol><use href="#ai:material-symbols:work"></use>  </svg> <span data-astro-cid-qou34bit>Projects</span> </div>  </a><a href="/skills/" class="dropdown-item" aria-label="Skills" data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" class="text-[1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="material-symbols:psychology">   <symbol id="ai:material-symbols:psychology" viewBox="0 0 24 24"><path fill="currentColor" d="M11 15h2l.15-1.25q.2-.075.363-.175t.287-.225l1.15.5l1-1.7l-1-.75q.05-.2.05-.4t-.05-.4l1-.75l-1-1.7l-1.15.5q-.125-.125-.288-.225t-.362-.175L13 7h-2l-.15 1.25q-.2.075-.363.175t-.287.225l-1.15-.5l-1 1.7l1 .75Q9 10.8 9 11t.05.4l-1 .75l1 1.7l1.15-.5q.125.125.288.225t.362.175zm1-2.5q-.625 0-1.062-.437T10.5 11t.438-1.062T12 9.5t1.063.438T13.5 11t-.437 1.063T12 12.5M6 22v-4.3q-1.425-1.3-2.212-3.037T3 11q0-3.75 2.625-6.375T12 2q3.125 0 5.538 1.838t3.137 4.787l1.3 5.125q.125.475-.175.863T21 15h-2v3q0 .825-.587 1.413T17 20h-2v2z"/></symbol><use href="#ai:material-symbols:psychology"></use>  </svg> <span data-astro-cid-qou34bit>Skills</span> </div>  </a><a href="/timeline/" class="dropdown-item" aria-label="Timeline" data-astro-cid-qou34bit> <div class="flex items-center" data-astro-cid-qou34bit> <svg width="1em" height="1em" class="text-[1rem] mr-2" data-astro-cid-qou34bit="true" data-icon="material-symbols:timeline">   <symbol id="ai:material-symbols:timeline" viewBox="0 0 24 24"><path fill="currentColor" d="M3 18q-.825 0-1.412-.587T1 16t.588-1.412T3 14h.263q.112 0 .237.05L8.05 9.5Q8 9.375 8 9.262V9q0-.825.588-1.412T10 7t1.413.588T12 9q0 .05-.05.5l2.55 2.55q.125-.05.238-.05h.525q.112 0 .237.05l3.55-3.55Q19 8.375 19 8.262V8q0-.825.588-1.412T21 6t1.413.588T23 8t-.587 1.413T21 10h-.262q-.113 0-.238-.05l-3.55 3.55q.05.125.05.238V14q0 .825-.587 1.413T15 16t-1.412-.587T13 14v-.262q0-.113.05-.238l-2.55-2.55q-.125.05-.238.05H10q-.05 0-.5-.05L4.95 15.5q.05.125.05.238V16q0 .825-.587 1.413T3 18"/></symbol><use href="#ai:material-symbols:timeline"></use>  </svg> <span data-astro-cid-qou34bit>Timeline</span> </div>  </a> </div> </div> </div>   </div> <div class="flex"> <!--<SearchPanel client:load>--> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();</script><script>(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="2sufQo" component-url="/_astro/Search.BEyL1FnK.js" component-export="default" renderer-url="/_astro/client.svelte.CXVuBcRL.js" props="{}" ssr client="only" opts="{&quot;name&quot;:&quot;Search&quot;,&quot;value&quot;:&quot;svelte&quot;}"></astro-island> <astro-island uid="Z1I60ii" component-url="/_astro/MobileTOC.DvRJMCBy.js" component-export="default" renderer-url="/_astro/client.svelte.CXVuBcRL.js" props="{}" ssr client="only" opts="{&quot;name&quot;:&quot;MobileTOC&quot;,&quot;value&quot;:&quot;svelte&quot;}"></astro-island> <button aria-label="Display Settings" class="btn-plain scale-animation rounded-lg h-11 w-11 active:scale-90" id="display-settings-switch"> <svg width="1em" height="1em" class="text-[1.25rem]" data-icon="material-symbols:palette-outline">   <symbol id="ai:material-symbols:palette-outline" viewBox="0 0 24 24"><path fill="currentColor" d="M12 22q-2.05 0-3.875-.788t-3.187-2.15t-2.15-3.187T2 12q0-2.075.813-3.9t2.2-3.175T8.25 2.788T12.2 2q2 0 3.775.688t3.113 1.9t2.125 2.875T22 11.05q0 2.875-1.75 4.413T16 17h-1.85q-.225 0-.312.125t-.088.275q0 .3.375.863t.375 1.287q0 1.25-.687 1.85T12 22m-5.5-9q.65 0 1.075-.425T8 11.5t-.425-1.075T6.5 10t-1.075.425T5 11.5t.425 1.075T6.5 13m3-4q.65 0 1.075-.425T11 7.5t-.425-1.075T9.5 6t-1.075.425T8 7.5t.425 1.075T9.5 9m5 0q.65 0 1.075-.425T16 7.5t-.425-1.075T14.5 6t-1.075.425T13 7.5t.425 1.075T14.5 9m3 4q.65 0 1.075-.425T19 11.5t-.425-1.075T17.5 10t-1.075.425T16 11.5t.425 1.075T17.5 13M12 20q.225 0 .363-.125t.137-.325q0-.35-.375-.825T11.75 17.3q0-1.05.725-1.675T14.25 15H16q1.65 0 2.825-.962T20 11.05q0-3.025-2.312-5.038T12.2 4Q8.8 4 6.4 6.325T4 12q0 3.325 2.338 5.663T12 20"/></symbol><use href="#ai:material-symbols:palette-outline"></use>  </svg> </button> <astro-island uid="Z1JB2nS" component-url="/_astro/LayoutSwitchButton.DNkxROd2.js" component-export="default" renderer-url="/_astro/client.svelte.CXVuBcRL.js" props="{&quot;currentLayout&quot;:[0,&quot;list&quot;]}" ssr client="only" opts="{&quot;name&quot;:&quot;LayoutSwitchButton&quot;,&quot;value&quot;:&quot;svelte&quot;}"></astro-island> <!-- 整体布局方案切换按钮：根据配置决定在哪些设备上显示 --> <div class="hidden md:block"> <astro-island uid="R37Am" component-url="/_astro/WallpaperSwitch.ATZntksD.js" component-export="default" renderer-url="/_astro/client.svelte.CXVuBcRL.js" props="{}" ssr client="only" opts="{&quot;name&quot;:&quot;WallpaperSwitch&quot;,&quot;value&quot;:&quot;svelte&quot;}"></astro-island> </div> <astro-island uid="2bv6I5" component-url="/_astro/LightDarkSwitch.bRp-zVHk.js" component-export="default" renderer-url="/_astro/client.svelte.CXVuBcRL.js" props="{}" ssr client="only" opts="{&quot;name&quot;:&quot;LightDarkSwitch&quot;,&quot;value&quot;:&quot;svelte&quot;}"></astro-island> <button aria-label="Menu" name="Nav Menu" class="btn-plain scale-animation rounded-lg w-11 h-11 active:scale-90 md:!hidden" id="nav-menu-switch"> <svg width="1em" height="1em" class="text-[1.25rem]" data-icon="material-symbols:menu-rounded">   <symbol id="ai:material-symbols:menu-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="M4 18q-.425 0-.712-.288T3 17t.288-.712T4 16h16q.425 0 .713.288T21 17t-.288.713T20 18zm0-5q-.425 0-.712-.288T3 12t.288-.712T4 11h16q.425 0 .713.288T21 12t-.288.713T20 13zm0-5q-.425 0-.712-.288T3 7t.288-.712T4 6h16q.425 0 .713.288T21 7t-.288.713T20 8z"/></symbol><use href="#ai:material-symbols:menu-rounded"></use>  </svg> </button> </div> <div id="nav-menu-panel" class="float-panel float-panel-closed absolute transition-all fixed right-4 px-2 py-2 max-h-[80vh] overflow-y-auto" data-astro-cid-h5lvqo6o> <div class="mobile-menu-item" data-astro-cid-h5lvqo6o> <!-- 普通链接项目 -->
                <a href="/" class="group flex justify-between items-center py-2 pl-3 pr-1 rounded-lg gap-8
                    hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition
                " data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/75 dark:text-white/75 font-bold group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:home">   <use href="#ai:material-symbols:home"></use>  </svg> Home </div> <svg width="1em" height="1em" class="transition text-[1.25rem] text-[var(--primary)]" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:chevron-right-rounded">   <symbol id="ai:material-symbols:chevron-right-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="M12.6 12L8.7 8.1q-.275-.275-.275-.7t.275-.7t.7-.275t.7.275l4.6 4.6q.15.15.213.325t.062.375t-.062.375t-.213.325l-4.6 4.6q-.275.275-.7.275t-.7-.275t-.275-.7t.275-.7z"/></symbol><use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg>  </a> </div><div class="mobile-menu-item" data-astro-cid-h5lvqo6o> <!-- 普通链接项目 -->
                <a href="/archive/" class="group flex justify-between items-center py-2 pl-3 pr-1 rounded-lg gap-8
                    hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition
                " data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/75 dark:text-white/75 font-bold group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:archive">   <use href="#ai:material-symbols:archive"></use>  </svg> Archive </div> <svg width="1em" height="1em" viewBox="0 0 24 24" class="transition text-[1.25rem] text-[var(--primary)]" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:chevron-right-rounded">   <use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg>  </a> </div><div class="mobile-menu-item" data-astro-cid-h5lvqo6o> <!-- 有子菜单的项目 -->
                <div class="mobile-dropdown" data-mobile-dropdown data-astro-cid-h5lvqo6o> <button class="group flex justify-between items-center py-2 pl-3 pr-1 rounded-lg gap-8 w-full text-left
                            hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition" data-mobile-dropdown-trigger aria-expanded="false" data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/75 dark:text-white/75 font-bold group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:link">   <use href="#ai:material-symbols:link"></use>  </svg> Links </div> <svg width="1em" height="1em" viewBox="0 0 24 24" class="transition text-[1.25rem] text-[var(--primary)] mobile-dropdown-arrow duration-200" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:keyboard-arrow-down-rounded">   <use href="#ai:material-symbols:keyboard-arrow-down-rounded"></use>  </svg> </button> <div class="mobile-submenu" data-mobile-submenu data-astro-cid-h5lvqo6o> <a href="https://github.com/NagisaDaisuki" class="group flex justify-between items-center py-2 pl-6 pr-1 rounded-lg gap-8
                                   hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition" target="_blank" data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/60 dark:text-white/60 font-medium group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="0.97em" height="1em" viewBox="0 0 496 512" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="fa6-brands:github">   <use href="#ai:fa6-brands:github"></use>  </svg> GitHub </div> <svg width="1em" height="1em" viewBox="0 0 512 512" class="transition text-[0.75rem] text-black/25 dark:text-white/25 -translate-x-1" data-astro-cid-h5lvqo6o="true" data-icon="fa6-solid:arrow-up-right-from-square">   <use href="#ai:fa6-solid:arrow-up-right-from-square"></use>  </svg> </a><a href="https://space.bilibili.com/275096023" class="group flex justify-between items-center py-2 pl-6 pr-1 rounded-lg gap-8
                                   hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition" target="_blank" data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/60 dark:text-white/60 font-medium group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 512 512" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="fa6-brands:bilibili">   <use href="#ai:fa6-brands:bilibili"></use>  </svg> Bilibili </div> <svg width="1em" height="1em" viewBox="0 0 512 512" class="transition text-[0.75rem] text-black/25 dark:text-white/25 -translate-x-1" data-astro-cid-h5lvqo6o="true" data-icon="fa6-solid:arrow-up-right-from-square">   <use href="#ai:fa6-solid:arrow-up-right-from-square"></use>  </svg> </a><a href="https://gitee.com/nagisadaisuki" class="group flex justify-between items-center py-2 pl-6 pr-1 rounded-lg gap-8
                                   hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition" target="_blank" data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/60 dark:text-white/60 font-medium group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="mdi:git">   <use href="#ai:mdi:git"></use>  </svg> Gitee </div> <svg width="1em" height="1em" viewBox="0 0 512 512" class="transition text-[0.75rem] text-black/25 dark:text-white/25 -translate-x-1" data-astro-cid-h5lvqo6o="true" data-icon="fa6-solid:arrow-up-right-from-square">   <use href="#ai:fa6-solid:arrow-up-right-from-square"></use>  </svg> </a><a href="https://nagisadaisuki.github.io" class="group flex justify-between items-center py-2 pl-6 pr-1 rounded-lg gap-8
                                   hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition" target="_blank" data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/60 dark:text-white/60 font-medium group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:link">   <use href="#ai:material-symbols:link"></use>  </svg> Fortress City </div> <svg width="1em" height="1em" viewBox="0 0 512 512" class="transition text-[0.75rem] text-black/25 dark:text-white/25 -translate-x-1" data-astro-cid-h5lvqo6o="true" data-icon="fa6-solid:arrow-up-right-from-square">   <use href="#ai:fa6-solid:arrow-up-right-from-square"></use>  </svg> </a> </div> </div> </div><div class="mobile-menu-item" data-astro-cid-h5lvqo6o> <!-- 有子菜单的项目 -->
                <div class="mobile-dropdown" data-mobile-dropdown data-astro-cid-h5lvqo6o> <button class="group flex justify-between items-center py-2 pl-3 pr-1 rounded-lg gap-8 w-full text-left
                            hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition" data-mobile-dropdown-trigger aria-expanded="false" data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/75 dark:text-white/75 font-bold group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:person">   <use href="#ai:material-symbols:person"></use>  </svg> My </div> <svg width="1em" height="1em" viewBox="0 0 24 24" class="transition text-[1.25rem] text-[var(--primary)] mobile-dropdown-arrow duration-200" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:keyboard-arrow-down-rounded">   <use href="#ai:material-symbols:keyboard-arrow-down-rounded"></use>  </svg> </button> <div class="mobile-submenu" data-mobile-submenu data-astro-cid-h5lvqo6o> <a href="/anime/" class="group flex justify-between items-center py-2 pl-6 pr-1 rounded-lg gap-8
                                   hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition" data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/60 dark:text-white/60 font-medium group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:movie">   <use href="#ai:material-symbols:movie"></use>  </svg> Anime </div>  </a><a href="/diary/" class="group flex justify-between items-center py-2 pl-6 pr-1 rounded-lg gap-8
                                   hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition" data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/60 dark:text-white/60 font-medium group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:book">   <use href="#ai:material-symbols:book"></use>  </svg> Diary </div>  </a><a href="/albums/" class="group flex justify-between items-center py-2 pl-6 pr-1 rounded-lg gap-8
                                   hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition" data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/60 dark:text-white/60 font-medium group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:photo-library">   <use href="#ai:material-symbols:photo-library"></use>  </svg> Albums </div>  </a><a href="/devices/" class="group flex justify-between items-center py-2 pl-6 pr-1 rounded-lg gap-8
                                   hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition" data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/60 dark:text-white/60 font-medium group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:devices">   <use href="#ai:material-symbols:devices"></use>  </svg> My Devices </div>  </a> </div> </div> </div><div class="mobile-menu-item" data-astro-cid-h5lvqo6o> <!-- 有子菜单的项目 -->
                <div class="mobile-dropdown" data-mobile-dropdown data-astro-cid-h5lvqo6o> <button class="group flex justify-between items-center py-2 pl-3 pr-1 rounded-lg gap-8 w-full text-left
                            hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition" data-mobile-dropdown-trigger aria-expanded="false" data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/75 dark:text-white/75 font-bold group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:info">   <use href="#ai:material-symbols:info"></use>  </svg> About </div> <svg width="1em" height="1em" viewBox="0 0 24 24" class="transition text-[1.25rem] text-[var(--primary)] mobile-dropdown-arrow duration-200" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:keyboard-arrow-down-rounded">   <use href="#ai:material-symbols:keyboard-arrow-down-rounded"></use>  </svg> </button> <div class="mobile-submenu" data-mobile-submenu data-astro-cid-h5lvqo6o> <a href="/about/" class="group flex justify-between items-center py-2 pl-6 pr-1 rounded-lg gap-8
                                   hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition" data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/60 dark:text-white/60 font-medium group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:person">   <use href="#ai:material-symbols:person"></use>  </svg> About </div>  </a><a href="/friends/" class="group flex justify-between items-center py-2 pl-6 pr-1 rounded-lg gap-8
                                   hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition" data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/60 dark:text-white/60 font-medium group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:group">   <use href="#ai:material-symbols:group"></use>  </svg> Friends </div>  </a> </div> </div> </div><div class="mobile-menu-item" data-astro-cid-h5lvqo6o> <!-- 有子菜单的项目 -->
                <div class="mobile-dropdown" data-mobile-dropdown data-astro-cid-h5lvqo6o> <button class="group flex justify-between items-center py-2 pl-3 pr-1 rounded-lg gap-8 w-full text-left
                            hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition" data-mobile-dropdown-trigger aria-expanded="false" data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/75 dark:text-white/75 font-bold group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:more-horiz">   <use href="#ai:material-symbols:more-horiz"></use>  </svg> Others </div> <svg width="1em" height="1em" viewBox="0 0 24 24" class="transition text-[1.25rem] text-[var(--primary)] mobile-dropdown-arrow duration-200" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:keyboard-arrow-down-rounded">   <use href="#ai:material-symbols:keyboard-arrow-down-rounded"></use>  </svg> </button> <div class="mobile-submenu" data-mobile-submenu data-astro-cid-h5lvqo6o> <a href="/projects/" class="group flex justify-between items-center py-2 pl-6 pr-1 rounded-lg gap-8
                                   hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition" data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/60 dark:text-white/60 font-medium group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:work">   <use href="#ai:material-symbols:work"></use>  </svg> Projects </div>  </a><a href="/skills/" class="group flex justify-between items-center py-2 pl-6 pr-1 rounded-lg gap-8
                                   hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition" data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/60 dark:text-white/60 font-medium group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:psychology">   <use href="#ai:material-symbols:psychology"></use>  </svg> Skills </div>  </a><a href="/timeline/" class="group flex justify-between items-center py-2 pl-6 pr-1 rounded-lg gap-8
                                   hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition" data-astro-cid-h5lvqo6o> <div class="flex items-center transition text-black/60 dark:text-white/60 font-medium group-hover:text-[var(--primary)] group-active:text-[var(--primary)]" data-astro-cid-h5lvqo6o> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.1rem] mr-2" data-astro-cid-h5lvqo6o="true" data-icon="material-symbols:timeline">   <use href="#ai:material-symbols:timeline"></use>  </svg> Timeline </div>  </a> </div> </div> </div> </div>  <script type="module">document.addEventListener("DOMContentLoaded",function(){const r=document.querySelectorAll("[data-mobile-dropdown]");r.forEach(e=>{const t=e.querySelector("[data-mobile-dropdown-trigger]"),d=e.querySelector("[data-mobile-submenu]");!t||!d||t.addEventListener("click",function(o){o.preventDefault();const u=e.getAttribute("data-expanded")==="true";r.forEach(a=>{if(a!==e){a.setAttribute("data-expanded","false");const i=a.querySelector("[data-mobile-dropdown-trigger]");i&&i.setAttribute("aria-expanded","false")}});const n=!u;e.setAttribute("data-expanded",n.toString()),t.setAttribute("aria-expanded",n.toString())})})});</script> <astro-island uid="Z1YEEYq" component-url="/_astro/DisplaySettings.Cn21OHRF.js" component-export="default" renderer-url="/_astro/client.svelte.CXVuBcRL.js" props="{}" ssr client="only" opts="{&quot;name&quot;:&quot;DisplaySettings&quot;,&quot;value&quot;:&quot;svelte&quot;}"></astro-island> </div> </div> <script type="module" src="/_astro/Navbar.astro_astro_type_script_index_0_lang.CjFOzVWH.js"></script> <script>(function(){const scriptUrl = "/pagefind/pagefind.js";

async function loadPagefind() {
    try {
        const response = await fetch(scriptUrl, { method: 'HEAD' });
        if (!response.ok) {
            throw new Error(`Pagefind script not found: ${response.status}`);
        }

        const pagefind = await import(scriptUrl);

        await pagefind.options({
            excerptLength: 20
        });

        window.pagefind = pagefind;

        document.dispatchEvent(new CustomEvent('pagefindready'));
        console.log('Pagefind loaded and initialized successfully, event dispatched.');
    } catch (error) {
        console.error('Failed to load Pagefind:', error);
        window.pagefind = {
            search: () => Promise.resolve({ results: [] }),
            options: () => Promise.resolve(),
        };
        document.dispatchEvent(new CustomEvent('pagefindloaderror'));
        console.log('Pagefind load error, event dispatched.');
    }
}

if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', loadPagefind);
} else {
    loadPagefind();
}
})();</script> </div> </div>  <div id="banner-wrapper" class="absolute z-10 w-full transition duration-700 overflow-hidden mobile-hide-banner" style="top: -30vh" data-astro-cid-haiuh7kc> <!-- Carousel mode for multiple images -->
        <div id="banner-carousel" class="relative h-full w-full" data-astro-cid-haiuh7kc> <ul class="carousel-list h-full w-full" data-astro-cid-haiuh7kc> <li class="carousel-item absolute inset-0 transition-all duration-500 opacity-100 scale-100" data-astro-cid-haiuh7kc> <!-- Mobile: use mobile-specific images with same logic as desktop --> <div class="block lg:hidden object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/mobile-banner/1.webp" alt="Mobile banner image 1" class="w-full h-full object-cover" style="object-position: center"> </div> <!-- Desktop: use desktop-specific images --> <div class="hidden lg:block object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/desktop-banner/1.webp" alt="Desktop banner image 1" class="w-full h-full object-cover" style="object-position: center"> </div> </li><li class="carousel-item absolute inset-0 transition-all duration-500 opacity-0 scale-110" data-astro-cid-haiuh7kc> <!-- Mobile: use mobile-specific images with same logic as desktop --> <div class="block lg:hidden object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/mobile-banner/2.webp" alt="Mobile banner image 2" class="w-full h-full object-cover" style="object-position: center"> </div> <!-- Desktop: use desktop-specific images --> <div class="hidden lg:block object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/desktop-banner/2.webp" alt="Desktop banner image 2" class="w-full h-full object-cover" style="object-position: center"> </div> </li><li class="carousel-item absolute inset-0 transition-all duration-500 opacity-0 scale-110" data-astro-cid-haiuh7kc> <!-- Mobile: use mobile-specific images with same logic as desktop --> <div class="block lg:hidden object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/mobile-banner/3.webp" alt="Mobile banner image 3" class="w-full h-full object-cover" style="object-position: center"> </div> <!-- Desktop: use desktop-specific images --> <div class="hidden lg:block object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/desktop-banner/3.webp" alt="Desktop banner image 3" class="w-full h-full object-cover" style="object-position: center"> </div> </li><li class="carousel-item absolute inset-0 transition-all duration-500 opacity-0 scale-110" data-astro-cid-haiuh7kc> <!-- Mobile: use mobile-specific images with same logic as desktop --> <div class="block lg:hidden object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/mobile-banner/4.webp" alt="Mobile banner image 4" class="w-full h-full object-cover" style="object-position: center"> </div> <!-- Desktop: use desktop-specific images --> <div class="hidden lg:block object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/desktop-banner/4.webp" alt="Desktop banner image 4" class="w-full h-full object-cover" style="object-position: center"> </div> </li><li class="carousel-item absolute inset-0 transition-all duration-500 opacity-0 scale-110" data-astro-cid-haiuh7kc> <!-- Mobile: use mobile-specific images with same logic as desktop --> <div class="block lg:hidden object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/mobile-banner/5.webp" alt="Mobile banner image 5" class="w-full h-full object-cover" style="object-position: center"> </div> <!-- Desktop: use desktop-specific images --> <div class="hidden lg:block object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/desktop-banner/5.webp" alt="Desktop banner image 5" class="w-full h-full object-cover" style="object-position: center"> </div> </li><li class="carousel-item absolute inset-0 transition-all duration-500 opacity-0 scale-110" data-astro-cid-haiuh7kc> <!-- Mobile: use mobile-specific images with same logic as desktop --> <div class="block lg:hidden object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/mobile-banner/6.webp" alt="Mobile banner image 6" class="w-full h-full object-cover" style="object-position: center"> </div> <!-- Desktop: use desktop-specific images --> <div class="hidden lg:block object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/desktop-banner/6.webp" alt="Desktop banner image 6" class="w-full h-full object-cover" style="object-position: center"> </div> </li><li class="carousel-item absolute inset-0 transition-all duration-500 opacity-0 scale-110" data-astro-cid-haiuh7kc> <!-- Mobile: use mobile-specific images with same logic as desktop -->  <!-- Desktop: use desktop-specific images --> <div class="hidden lg:block object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/desktop-banner/7.webp" alt="Desktop banner image 7" class="w-full h-full object-cover" style="object-position: center"> </div> </li><li class="carousel-item absolute inset-0 transition-all duration-500 opacity-0 scale-110" data-astro-cid-haiuh7kc> <!-- Mobile: use mobile-specific images with same logic as desktop -->  <!-- Desktop: use desktop-specific images --> <div class="hidden lg:block object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/desktop-banner/8.webp" alt="Desktop banner image 8" class="w-full h-full object-cover" style="object-position: center"> </div> </li><li class="carousel-item absolute inset-0 transition-all duration-500 opacity-0 scale-110" data-astro-cid-haiuh7kc> <!-- Mobile: use mobile-specific images with same logic as desktop -->  <!-- Desktop: use desktop-specific images --> <div class="hidden lg:block object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/desktop-banner/9.webp" alt="Desktop banner image 9" class="w-full h-full object-cover" style="object-position: center"> </div> </li><li class="carousel-item absolute inset-0 transition-all duration-500 opacity-0 scale-110" data-astro-cid-haiuh7kc> <!-- Mobile: use mobile-specific images with same logic as desktop -->  <!-- Desktop: use desktop-specific images --> <div class="hidden lg:block object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/desktop-banner/10.webp" alt="Desktop banner image 10" class="w-full h-full object-cover" style="object-position: center"> </div> </li><li class="carousel-item absolute inset-0 transition-all duration-500 opacity-0 scale-110" data-astro-cid-haiuh7kc> <!-- Mobile: use mobile-specific images with same logic as desktop -->  <!-- Desktop: use desktop-specific images --> <div class="hidden lg:block object-cover h-full w-full transition-transform duration-500 ease-out overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="/assets/desktop-banner/11.webp" alt="Desktop banner image 11" class="w-full h-full object-cover" style="object-position: center"> </div> </li> </ul> </div> <!-- Home page text overlay --> <div class="banner-text-overlay absolute inset-0 z-20 flex items-center justify-center hidden" data-astro-cid-haiuh7kc> <div class="w-4/5 lg:w-3/4 text-center mb-0" data-astro-cid-haiuh7kc> <div class="flex flex-col" data-astro-cid-haiuh7kc> <h1 class="banner-title text-6xl lg:text-8xl text-white drop-shadow-lg mb-2 lg:mb-4" data-astro-cid-haiuh7kc> 涼やかなる夢想の可能性 </h1> <h2 class="banner-subtitle text-xl lg:text-3xl text-white/90 drop-shadow-md" data-astro-cid-haiuh7kc> <span class="inline-block min-h-[1.2em]" data-astro-cid-haiuh7kc> <span class="typewriter " data-text="[&#34;ヴェリタスの部長兼、特異現象捜査部の部長… ミレニアム最高の天才清楚系病弱美少女ハッカーの明星ヒマリと申します。ふふっ、よろしくお願いしますね、先生。&#34;,&#34;あら、お疲れ様です先生。お待ちしておりました。 では、本日の仕事を始めましょうか？ふふっ。&#34;,&#34;いつもお忙しい先生のお手伝いに、ミレニアムの超天才病弱美少女ハッカーが馳せ参じました。 歓迎の拍手は無いのですか？こう、パチパチパチ…というような。&#34;,&#34;ミレニアムの清楚な高嶺の花であり、みなさんの憧れである 「全知」の学位を持つ眉目秀麗な乙女から仕事を手伝ってもらえるなんて… 先生はとびっきりの幸運の持ち主ですね。&#34;,&#34;「特別」を感じられるのは、「普通」があるから。ですので、「普通」を大切にしてくださいね。先生。…ついでに、苦労してる超天才清楚系病弱美少女のことも。&#34;]" data-speed="100" data-delete-speed="50" data-pause-time="2000" data-astro-cid-4iv2rnoh></span> <script type="module">class n{element;texts;currentTextIndex=0;speed;deleteSpeed;pauseTime;currentIndex=0;isDeleting=!1;timeoutId=null;constructor(t){this.element=t;const e=t.dataset.text||"";try{const i=JSON.parse(e);this.texts=Array.isArray(i)?i:[e]}catch{this.texts=[e]}this.speed=parseInt(t.dataset.speed||"100"),this.deleteSpeed=parseInt(t.dataset.deleteSpeed||"50"),this.pauseTime=parseInt(t.dataset.pauseTime||"2000"),this.texts.length>1&&!this.isTypewriterEnabled()?this.showRandomText():this.start()}isTypewriterEnabled(){return this.element.dataset.speed!==void 0||this.element.dataset.deleteSpeed!==void 0||this.element.dataset.pauseTime!==void 0}showRandomText(){const t=Math.floor(Math.random()*this.texts.length);this.element.textContent=this.texts[t]}start(){this.texts.length!==0&&this.type()}getCurrentText(){return this.texts[this.currentTextIndex]||""}type(){const t=this.getCurrentText();this.isDeleting?this.currentIndex>0?(this.currentIndex--,this.element.textContent=t.substring(0,this.currentIndex),this.timeoutId=window.setTimeout(()=>this.type(),this.deleteSpeed)):(this.isDeleting=!1,this.currentTextIndex=(this.currentTextIndex+1)%this.texts.length,this.timeoutId=window.setTimeout(()=>this.type(),this.speed)):this.currentIndex<t.length?(this.currentIndex++,this.element.textContent=t.substring(0,this.currentIndex),this.timeoutId=window.setTimeout(()=>this.type(),this.speed)):this.texts.length>1?(this.isDeleting=!0,this.timeoutId=window.setTimeout(()=>this.type(),this.pauseTime)):this.texts.length===1&&this.texts[0]===""&&(this.element.innerHTML="&nbsp;")}destroy(){this.timeoutId&&clearTimeout(this.timeoutId)}}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".typewriter").forEach(t=>{new n(t)})});document.addEventListener("swup:contentReplaced",()=>{document.querySelectorAll(".typewriter").forEach(t=>{new n(t)})});</script>  </span> </h2> </div> </div> </div> <!-- Water waves effect --> <div class="waves absolute -bottom-[1px] h-[10vh] max-h-[9.375rem] min-h-[3.125rem] w-full md:h-[15vh]" id="header-waves" style="transform: translateZ(0); will-change: fill;" data-astro-cid-haiuh7kc> <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 20 150 32" preserveAspectRatio="none" shape-rendering="auto" style="transform: translateZ(0); backface-visibility: hidden;" data-astro-cid-haiuh7kc> <defs data-astro-cid-haiuh7kc> <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v48h-352z" data-astro-cid-haiuh7kc></path> </defs> <g class="parallax" style="transform: translateZ(0);" data-astro-cid-haiuh7kc> <use xlink:href="#gentle-wave" x="48" y="0" class="opacity-25 fill-[var(--page-bg)]" style="animation-delay: -2s; animation-duration: 7s; will-change: transform;" data-astro-cid-haiuh7kc></use> <use xlink:href="#gentle-wave" x="48" y="3" class="opacity-50 fill-[var(--page-bg)]" style="animation-delay: -3s; animation-duration: 10s; will-change: transform;" data-astro-cid-haiuh7kc></use> <use xlink:href="#gentle-wave" x="48" y="5" class="opacity-75 fill-[var(--page-bg)]" style="animation-delay: -4s; animation-duration: 13s; will-change: transform;" data-astro-cid-haiuh7kc></use> <use xlink:href="#gentle-wave" x="48" y="7" class="fill-[var(--page-bg)]" style="animation-delay: -5s; animation-duration: 20s; will-change: transform;" data-astro-cid-haiuh7kc></use> </g> </svg> </div> </div>  <div class="absolute w-full z-30 pointer-events-none mobile-main-no-banner  " style="top: 35vh" data-astro-cid-haiuh7kc> <!-- The pointer-events-none here prevent blocking the click event of the TOC --> <div class="relative max-w-[var(--page-width)] mx-auto pointer-events-auto" data-astro-cid-haiuh7kc> <div id="main-grid" class="transition duration-700 w-full left-0 right-0 grid grid-cols-1 grid-cols-1 lg:grid-cols-[17.5rem_1fr] lg:grid-cols-[17.5rem_1fr_17.5rem] grid-rows-[auto_1fr_auto] lg:grid-rows-[auto] mx-auto gap-4 px-2 md:px-4  mobile-both-sidebar" data-layout-mode="list" data-astro-cid-haiuh7kc> <!-- Banner image credit -->  <div id="sidebar" class="mb-4 row-start-2 row-end-3 col-span-1 onload-animation block block row-start-2 row-end-3 col-span-1 lg:block lg:row-start-1 lg:row-end-2 lg:max-w-[17.5rem] lg:col-start-1 lg:col-end-2  w-full" data-astro-cid-gfmxq3pg> <!-- 顶部固定组件区域 --> <div class="flex flex-col w-full gap-4 mb-4" data-astro-cid-gfmxq3pg> <div class="card-base p-3"> <a aria-label="Go to About Page" href="/about/" class="group block relative mx-auto mt-1 lg:mx-0 lg:mt-0 mb-3
       max-w-[12rem] lg:max-w-none overflow-hidden rounded-xl active:scale-95"> <div class="absolute transition pointer-events-none group-hover:bg-black/30 group-active:bg-black/50
        w-full h-full z-50 flex items-center justify-center"> <svg width="1.13em" height="1em" class="transition opacity-0 scale-90 group-hover:scale-100 group-hover:opacity-100 text-white text-5xl" data-icon="fa6-regular:address-card">   <symbol id="ai:fa6-regular:address-card" viewBox="0 0 576 512"><path fill="currentColor" d="M512 80c8.8 0 16 7.2 16 16v320c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V96c0-8.8 7.2-16 16-16zM64 32C28.7 32 0 60.7 0 96v320c0 35.3 28.7 64 64 64h448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64zm144 224a64 64 0 1 0 0-128a64 64 0 1 0 0 128m-32 32c-44.2 0-80 35.8-80 80c0 8.8 7.2 16 16 16h192c8.8 0 16-7.2 16-16c0-44.2-35.8-80-80-80zm200-144c-13.3 0-24 10.7-24 24s10.7 24 24 24h80c13.3 0 24-10.7 24-24s-10.7-24-24-24zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24h80c13.3 0 24-10.7 24-24s-10.7-24-24-24z"/></symbol><use href="#ai:fa6-regular:address-card"></use>  </svg> </div> <div class="mx-auto lg:w-full h-full lg:mt-0  overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div> <img src="/_astro/avatar.CA7g1zxh_Z2fV36t.webp" alt="Profile Image of the Author" style="object-position: center" loading="lazy" decoding="async" fetchpriority="auto" width="1000" height="1000" class="w-full h-full object-cover">  </div> </a> <div class="px-2"> <div class="font-bold text-xl text-center mb-1 dark:text-neutral-50 transition">Kirifuji Nagisa</div> <div class="h-1 w-5 bg-[var(--primary)] mx-auto rounded-full mb-2 transition"></div> <div class="text-center text-neutral-400 mb-2.5 transition"> <span class="typewriter inline-block" data-text="Where there's tea party there's hope." data-speed="80" data-delete-speed="50" data-pause-time="2000" data-astro-cid-4iv2rnoh></span>   </div> <div class="flex gap-2 justify-center mb-1"> <a rel="me" aria-label="Bilibli" href="https://space.bilibili.com/275096023" target="_blank" class="btn-regular rounded-lg h-10 w-10 active:scale-90"> <svg width="1em" height="1em" class="text-[1.5rem]" data-icon="fa6-brands:bilibili">   <symbol id="ai:fa6-brands:bilibili" viewBox="0 0 512 512"><path fill="currentColor" d="M488.6 104.1c16.7 18.1 24.4 39.7 23.3 65.7v202.4c-.4 26.4-9.2 48.1-26.5 65.1c-17.2 17-39.1 25.9-65.5 26.7H92.02c-26.45-.8-48.21-9.8-65.28-27.2C9.682 419.4.767 396.5 0 368.2V169.8c.767-26 9.682-47.6 26.74-65.7C43.81 87.75 65.57 78.77 92.02 78h29.38L96.05 52.19c-5.75-5.73-8.63-13-8.63-21.79c0-8.8 2.88-16.06 8.63-21.797C101.8 2.868 109.1 0 117.9 0q13.2 0 21.9 8.603L213.1 78h88l74.5-69.397C381.7 2.868 389.2 0 398 0q13.2 0 21.9 8.603c5.7 5.737 8.6 12.997 8.6 21.797c0 8.79-2.9 16.06-8.6 21.79L394.6 78h29.3c26.4.77 48 9.75 64.7 26.1m-38.8 69.7c-.4-9.6-3.7-17.4-10.7-23.5c-5.2-6.1-14-9.4-22.7-9.8H96.05c-9.59.4-17.45 3.7-23.58 9.8c-6.14 6.1-9.4 13.9-9.78 23.5v194.4c0 9.2 3.26 17 9.78 23.5s14.38 9.8 23.58 9.8H416.4c9.2 0 17-3.3 23.3-9.8s9.7-14.3 10.1-23.5zm-264.3 42.7c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2c-6.2 6.3-14 9.5-23.6 9.5s-17.5-3.2-23.6-9.5s-9.4-14-9.8-23.2v-33.3c.4-9.1 3.8-16.9 10.1-23.2s13.2-9.6 23.3-10c9.2.4 17 3.7 23.3 10m191.5 0c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2s-14 9.5-23.6 9.5s-17.4-3.2-23.6-9.5c-7-6.3-9.4-14-9.7-23.2v-33.3c.3-9.1 3.7-16.9 10-23.2s14.1-9.6 23.3-10c9.2.4 17 3.7 23.3 10"/></symbol><use href="#ai:fa6-brands:bilibili"></use>  </svg> </a><a rel="me" aria-label="Gitee" href="https://gitee.com/nagisadaisuki" target="_blank" class="btn-regular rounded-lg h-10 w-10 active:scale-90"> <svg width="1em" height="1em" class="text-[1.5rem]" data-icon="mdi:git">   <symbol id="ai:mdi:git" viewBox="0 0 24 24"><path fill="currentColor" d="M2.6 10.59L8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2a2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2a2 2 0 0 0 2-2a2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82"/></symbol><use href="#ai:mdi:git"></use>  </svg> </a><a rel="me" aria-label="GitHub" href="https://github.com/NagisaDaisuki" target="_blank" class="btn-regular rounded-lg h-10 w-10 active:scale-90"> <svg width="0.97em" height="1em" class="text-[1.5rem]" data-icon="fa6-brands:github">   <symbol id="ai:fa6-brands:github" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6c-3.3.3-5.6-1.3-5.6-3.6c0-2 2.3-3.6 5.2-3.6c3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9c2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9c.3 2 2.9 3.3 5.9 2.6c2.9-.7 4.9-2.6 4.6-4.6c-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2c12.8 2.3 17.3-5.6 17.3-12.1c0-6.2-.3-40.4-.3-61.4c0 0-70 15-84.7-29.8c0 0-11.4-29.1-27.8-36.6c0 0-22.9-15.7 1.6-15.4c0 0 24.9 2 38.6 25.8c21.9 38.6 58.6 27.5 72.9 20.9c2.3-16 8.8-27.1 16-33.7c-55.9-6.2-112.3-14.3-112.3-110.5c0-27.5 7.6-41.3 23.6-58.9c-2.6-6.5-11.1-33.3 2.6-67.9c20.9-6.5 69 27 69 27c20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27c13.7 34.7 5.2 61.4 2.6 67.9c16 17.7 25.8 31.5 25.8 58.9c0 96.5-58.9 104.2-114.8 110.5c9.2 7.9 17 22.9 17 46.4c0 33.7-.3 75.4-.3 83.6c0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252C496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2c1.6 1.6 3.9 2.3 5.2 1c1.3-1 1-3.3-.7-5.2c-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9c1.6 1 3.6.7 4.3-.7c.7-1.3-.3-2.9-2.3-3.9c-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2c2.3 2.3 5.2 2.6 6.5 1c1.3-1.3.7-4.3-1.3-6.2c-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2c-1.4-2.3-4-3.3-5.6-2"/></symbol><use href="#ai:fa6-brands:github"></use>  </svg> </a>  </div>  </div> </div> <!-- 组件显示现在由sidebarLayoutConfig统一控制，无需检查config.enable --><widget-layout data-id="announcement" data-is-collapsed="undefined" class="pb-4 card-base onload-animation" style="animation-delay: 50ms; " data-astro-cid-ucso7hve="true"> <div class="font-bold transition text-lg text-neutral-900 dark:text-neutral-100 relative ml-8 mt-4 mb-2 flex items-center
        before:w-1 before:h-4 before:rounded-md before:bg-[var(--primary)]
        before:absolute before:left-[-16px] before:top-[5.5px]" data-astro-cid-ucso7hve style=""> Announcement  </div> <div id="announcement" class="collapse-wrapper px-4 overflow-hidden" data-astro-cid-ucso7hve style="">  <div> <!-- 公告栏内容 --> <div class="text-neutral-600 dark:text-neutral-300 leading-relaxed mb-3"> Everything I found great was sunfaded. </div> <!-- 可选链接和关闭按钮 --> <div class="flex items-center justify-between gap-3"> <div> <a href="/about/" target="_self" class="btn-regular rounded-lg px-3 py-1.5 text-sm font-medium active:scale-95 transition-transform"> Learn More </a> </div> <button class="btn-regular rounded-lg h-8 w-8 text-sm hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors" onclick="closeAnnouncement()" aria-label="Close"> <svg width="0.75em" height="1em" class="text-sm" data-icon="fa6-solid:xmark">   <symbol id="ai:fa6-solid:xmark" viewBox="0 0 384 512"><path fill="currentColor" d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7L86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256L41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3l105.4 105.3c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256z"/></symbol><use href="#ai:fa6-solid:xmark"></use>  </svg> </button> </div> </div>  </div>  </widget-layout>  <script type="module">class d extends HTMLElement{constructor(){if(super(),this.dataset.isCollapsed!=="true")return;const e=this.dataset.id,t=this.querySelector(".expand-btn"),s=this.querySelector(`#${e}`);t.addEventListener("click",()=>{s.classList.remove("collapsed"),t.classList.add("hidden")})}}customElements.get("widget-layout")||customElements.define("widget-layout",d);</script> <script type="module">function n(){const e=document.querySelector('widget-layout[data-id="announcement"]');e&&(e.style.display="none",localStorage.setItem("announcementClosed","true"))}document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector('widget-layout[data-id="announcement"]');e&&localStorage.getItem("announcementClosed")==="true"&&(e.style.display="none")});window.closeAnnouncement=n;</script><widget-layout data-id="tags" data-is-collapsed="true" class="pb-4 card-base onload-animation" style="animation-delay: 250ms; --collapsedHeight: 7.5rem;" data-astro-cid-ucso7hve="true"> <div class="font-bold transition text-lg text-neutral-900 dark:text-neutral-100 relative ml-8 mt-4 mb-2 flex items-center
        before:w-1 before:h-4 before:rounded-md before:bg-[var(--primary)]
        before:absolute before:left-[-16px] before:top-[5.5px]" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;"> Tags  </div> <div id="tags" class="collapse-wrapper px-4 overflow-hidden collapsed" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;">  <div class="flex gap-2 flex-wrap"> <a href="/archive/?tag=audio" aria-label="View all posts with the audio tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  audio </a><a href="/archive/?tag=bat" aria-label="View all posts with the bat tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  bat </a><a href="/archive/?tag=Blogging" aria-label="View all posts with the Blogging tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Blogging </a><a href="/archive/?tag=c" aria-label="View all posts with the c tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  c </a><a href="/archive/?tag=calculus" aria-label="View all posts with the calculus tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  calculus </a><a href="/archive/?tag=cmd" aria-label="View all posts with the cmd tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  cmd </a><a href="/archive/?tag=code" aria-label="View all posts with the code tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  code </a><a href="/archive/?tag=command" aria-label="View all posts with the command tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  command </a><a href="/archive/?tag=Customization" aria-label="View all posts with the Customization tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Customization </a><a href="/archive/?tag=Demo" aria-label="View all posts with the Demo tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Demo </a><a href="/archive/?tag=Encryption" aria-label="View all posts with the Encryption tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Encryption </a><a href="/archive/?tag=etc" aria-label="View all posts with the etc tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  etc </a><a href="/archive/?tag=Example" aria-label="View all posts with the Example tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Example </a><a href="/archive/?tag=FFmpeg" aria-label="View all posts with the FFmpeg tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  FFmpeg </a><a href="/archive/?tag=ffmpeg" aria-label="View all posts with the ffmpeg tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  ffmpeg </a><a href="/archive/?tag=fucntion" aria-label="View all posts with the fucntion tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  fucntion </a><a href="/archive/?tag=language" aria-label="View all posts with the language tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  language </a><a href="/archive/?tag=Leibniz" aria-label="View all posts with the Leibniz tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Leibniz </a><a href="/archive/?tag=linux" aria-label="View all posts with the linux tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  linux </a><a href="/archive/?tag=Markdown" aria-label="View all posts with the Markdown tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Markdown </a><a href="/archive/?tag=math" aria-label="View all posts with the math tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  math </a><a href="/archive/?tag=Mathjax" aria-label="View all posts with the Mathjax tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Mathjax </a><a href="/archive/?tag=Mermaid" aria-label="View all posts with the Mermaid tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Mermaid </a><a href="/archive/?tag=mizuki" aria-label="View all posts with the mizuki tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  mizuki </a><a href="/archive/?tag=Mizuki" aria-label="View all posts with the Mizuki tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Mizuki </a><a href="/archive/?tag=Newton" aria-label="View all posts with the Newton tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Newton </a><a href="/archive/?tag=operating%20system" aria-label="View all posts with the operating system tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  operating system </a><a href="/archive/?tag=programming" aria-label="View all posts with the programming tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  programming </a><a href="/archive/?tag=remote%20login" aria-label="View all posts with the remote login tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  remote login </a><a href="/archive/?tag=shell" aria-label="View all posts with the shell tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  shell </a><a href="/archive/?tag=ssh" aria-label="View all posts with the ssh tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  ssh </a><a href="/archive/?tag=ssh-keygen" aria-label="View all posts with the ssh-keygen tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  ssh-keygen </a><a href="/archive/?tag=Test" aria-label="View all posts with the Test tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Test </a><a href="/archive/?tag=tools" aria-label="View all posts with the tools tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  tools </a><a href="/archive/?tag=video" aria-label="View all posts with the video tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  video </a><a href="/archive/?tag=windows" aria-label="View all posts with the windows tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  windows </a> </div>  </div> <div class="expand-btn px-4 -mb-2" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;"> <button class="btn-plain rounded-lg w-full h-9" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;"> <div class="text-[var(--primary)] flex items-center justify-center gap-2 -translate-x-2" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;"> <svg width="1em" height="1em" class="text-[1.75rem]" data-astro-cid-ucso7hve="true" data-icon="material-symbols:more-horiz">   <symbol id="ai:material-symbols:more-horiz" viewBox="0 0 24 24"><path fill="currentColor" d="M6 14q-.825 0-1.412-.587T4 12t.588-1.412T6 10t1.413.588T8 12t-.587 1.413T6 14m6 0q-.825 0-1.412-.587T10 12t.588-1.412T12 10t1.413.588T14 12t-.587 1.413T12 14m6 0q-.825 0-1.412-.587T16 12t.588-1.412T18 10t1.413.588T20 12t-.587 1.413T18 14"/></symbol><use href="#ai:material-symbols:more-horiz"></use>  </svg> More </div> </button> </div> </widget-layout>   </div> <!-- 粘性组件区域 --> <div id="sidebar-sticky" class="transition-all duration-700 flex flex-col w-full gap-4 top-4 sticky top-4" data-astro-cid-gfmxq3pg> <widget-layout data-id="categories" data-is-collapsed="true" class="pb-4 card-base onload-animation" style="animation-delay: 150ms; --collapsedHeight: 7.5rem;" data-astro-cid-ucso7hve="true"> <div class="font-bold transition text-lg text-neutral-900 dark:text-neutral-100 relative ml-8 mt-4 mb-2 flex items-center
        before:w-1 before:h-4 before:rounded-md before:bg-[var(--primary)]
        before:absolute before:left-[-16px] before:top-[5.5px]" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;"> Categories  </div> <div id="categories" class="collapse-wrapper px-4 overflow-hidden collapsed" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;"> <a href="/archive/?category=Bat" aria-label="View all posts in the Bat category"> <button class="
            w-full
            h-10
            rounded-lg
            bg-none
            hover:bg-[var(--btn-plain-bg-hover)]
            active:bg-[var(--btn-plain-bg-active)]
            transition-all
            pl-2
            hover:pl-3
            
            text-neutral-700
            hover:text-[var(--primary)]
            dark:text-neutral-300
            dark:hover:text-[var(--primary)]
        "> <div class="flex items-center justify-between relative mr-2"> <div class="overflow-hidden text-left whitespace-nowrap overflow-ellipsis  "> Bat </div> <div class="transition px-2 h-7 ml-4 min-w-[2rem] rounded-lg text-sm font-bold
                    text-[var(--btn-content)] dark:text-[var(--deep-text)]
                    bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)]
                    flex items-center justify-center"> 1 </div> </div> </button> </a><a href="/archive/?category=bat" aria-label="View all posts in the bat category"> <button class="
            w-full
            h-10
            rounded-lg
            bg-none
            hover:bg-[var(--btn-plain-bg-hover)]
            active:bg-[var(--btn-plain-bg-active)]
            transition-all
            pl-2
            hover:pl-3
            
            text-neutral-700
            hover:text-[var(--primary)]
            dark:text-neutral-300
            dark:hover:text-[var(--primary)]
        "> <div class="flex items-center justify-between relative mr-2"> <div class="overflow-hidden text-left whitespace-nowrap overflow-ellipsis  "> bat </div> <div class="transition px-2 h-7 ml-4 min-w-[2rem] rounded-lg text-sm font-bold
                    text-[var(--btn-content)] dark:text-[var(--deep-text)]
                    bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)]
                    flex items-center justify-center"> 1 </div> </div> </button> </a><a href="/archive/?category=C" aria-label="View all posts in the C category"> <button class="
            w-full
            h-10
            rounded-lg
            bg-none
            hover:bg-[var(--btn-plain-bg-hover)]
            active:bg-[var(--btn-plain-bg-active)]
            transition-all
            pl-2
            hover:pl-3
            
            text-neutral-700
            hover:text-[var(--primary)]
            dark:text-neutral-300
            dark:hover:text-[var(--primary)]
        "> <div class="flex items-center justify-between relative mr-2"> <div class="overflow-hidden text-left whitespace-nowrap overflow-ellipsis  "> C </div> <div class="transition px-2 h-7 ml-4 min-w-[2rem] rounded-lg text-sm font-bold
                    text-[var(--btn-content)] dark:text-[var(--deep-text)]
                    bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)]
                    flex items-center justify-center"> 1 </div> </div> </button> </a><a href="/archive/?category=Examples" aria-label="View all posts in the Examples category"> <button class="
            w-full
            h-10
            rounded-lg
            bg-none
            hover:bg-[var(--btn-plain-bg-hover)]
            active:bg-[var(--btn-plain-bg-active)]
            transition-all
            pl-2
            hover:pl-3
            
            text-neutral-700
            hover:text-[var(--primary)]
            dark:text-neutral-300
            dark:hover:text-[var(--primary)]
        "> <div class="flex items-center justify-between relative mr-2"> <div class="overflow-hidden text-left whitespace-nowrap overflow-ellipsis  "> Examples </div> <div class="transition px-2 h-7 ml-4 min-w-[2rem] rounded-lg text-sm font-bold
                    text-[var(--btn-content)] dark:text-[var(--deep-text)]
                    bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)]
                    flex items-center justify-center"> 3 </div> </div> </button> </a><a href="/archive/?category=FFmpeg" aria-label="View all posts in the FFmpeg category"> <button class="
            w-full
            h-10
            rounded-lg
            bg-none
            hover:bg-[var(--btn-plain-bg-hover)]
            active:bg-[var(--btn-plain-bg-active)]
            transition-all
            pl-2
            hover:pl-3
            
            text-neutral-700
            hover:text-[var(--primary)]
            dark:text-neutral-300
            dark:hover:text-[var(--primary)]
        "> <div class="flex items-center justify-between relative mr-2"> <div class="overflow-hidden text-left whitespace-nowrap overflow-ellipsis  "> FFmpeg </div> <div class="transition px-2 h-7 ml-4 min-w-[2rem] rounded-lg text-sm font-bold
                    text-[var(--btn-content)] dark:text-[var(--deep-text)]
                    bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)]
                    flex items-center justify-center"> 1 </div> </div> </button> </a><a href="/archive/?category=Guides" aria-label="View all posts in the Guides category"> <button class="
            w-full
            h-10
            rounded-lg
            bg-none
            hover:bg-[var(--btn-plain-bg-hover)]
            active:bg-[var(--btn-plain-bg-active)]
            transition-all
            pl-2
            hover:pl-3
            
            text-neutral-700
            hover:text-[var(--primary)]
            dark:text-neutral-300
            dark:hover:text-[var(--primary)]
        "> <div class="flex items-center justify-between relative mr-2"> <div class="overflow-hidden text-left whitespace-nowrap overflow-ellipsis  "> Guides </div> <div class="transition px-2 h-7 ml-4 min-w-[2rem] rounded-lg text-sm font-bold
                    text-[var(--btn-content)] dark:text-[var(--deep-text)]
                    bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)]
                    flex items-center justify-center"> 1 </div> </div> </button> </a><a href="/archive/?category=linux" aria-label="View all posts in the linux category"> <button class="
            w-full
            h-10
            rounded-lg
            bg-none
            hover:bg-[var(--btn-plain-bg-hover)]
            active:bg-[var(--btn-plain-bg-active)]
            transition-all
            pl-2
            hover:pl-3
            
            text-neutral-700
            hover:text-[var(--primary)]
            dark:text-neutral-300
            dark:hover:text-[var(--primary)]
        "> <div class="flex items-center justify-between relative mr-2"> <div class="overflow-hidden text-left whitespace-nowrap overflow-ellipsis  "> linux </div> <div class="transition px-2 h-7 ml-4 min-w-[2rem] rounded-lg text-sm font-bold
                    text-[var(--btn-content)] dark:text-[var(--deep-text)]
                    bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)]
                    flex items-center justify-center"> 1 </div> </div> </button> </a><a href="/archive/?category=Linux" aria-label="View all posts in the Linux category"> <button class="
            w-full
            h-10
            rounded-lg
            bg-none
            hover:bg-[var(--btn-plain-bg-hover)]
            active:bg-[var(--btn-plain-bg-active)]
            transition-all
            pl-2
            hover:pl-3
            
            text-neutral-700
            hover:text-[var(--primary)]
            dark:text-neutral-300
            dark:hover:text-[var(--primary)]
        "> <div class="flex items-center justify-between relative mr-2"> <div class="overflow-hidden text-left whitespace-nowrap overflow-ellipsis  "> Linux </div> <div class="transition px-2 h-7 ml-4 min-w-[2rem] rounded-lg text-sm font-bold
                    text-[var(--btn-content)] dark:text-[var(--deep-text)]
                    bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)]
                    flex items-center justify-center"> 1 </div> </div> </button> </a><a href="/archive/?category=Math" aria-label="View all posts in the Math category"> <button class="
            w-full
            h-10
            rounded-lg
            bg-none
            hover:bg-[var(--btn-plain-bg-hover)]
            active:bg-[var(--btn-plain-bg-active)]
            transition-all
            pl-2
            hover:pl-3
            
            text-neutral-700
            hover:text-[var(--primary)]
            dark:text-neutral-300
            dark:hover:text-[var(--primary)]
        "> <div class="flex items-center justify-between relative mr-2"> <div class="overflow-hidden text-left whitespace-nowrap overflow-ellipsis  "> Math </div> <div class="transition px-2 h-7 ml-4 min-w-[2rem] rounded-lg text-sm font-bold
                    text-[var(--btn-content)] dark:text-[var(--deep-text)]
                    bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)]
                    flex items-center justify-center"> 1 </div> </div> </button> </a><a href="/archive/?category=Network" aria-label="View all posts in the Network category"> <button class="
            w-full
            h-10
            rounded-lg
            bg-none
            hover:bg-[var(--btn-plain-bg-hover)]
            active:bg-[var(--btn-plain-bg-active)]
            transition-all
            pl-2
            hover:pl-3
            
            text-neutral-700
            hover:text-[var(--primary)]
            dark:text-neutral-300
            dark:hover:text-[var(--primary)]
        "> <div class="flex items-center justify-between relative mr-2"> <div class="overflow-hidden text-left whitespace-nowrap overflow-ellipsis  "> Network </div> <div class="transition px-2 h-7 ml-4 min-w-[2rem] rounded-lg text-sm font-bold
                    text-[var(--btn-content)] dark:text-[var(--deep-text)]
                    bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)]
                    flex items-center justify-center"> 1 </div> </div> </button> </a><a href="/archive/?category=ssh" aria-label="View all posts in the ssh category"> <button class="
            w-full
            h-10
            rounded-lg
            bg-none
            hover:bg-[var(--btn-plain-bg-hover)]
            active:bg-[var(--btn-plain-bg-active)]
            transition-all
            pl-2
            hover:pl-3
            
            text-neutral-700
            hover:text-[var(--primary)]
            dark:text-neutral-300
            dark:hover:text-[var(--primary)]
        "> <div class="flex items-center justify-between relative mr-2"> <div class="overflow-hidden text-left whitespace-nowrap overflow-ellipsis  "> ssh </div> <div class="transition px-2 h-7 ml-4 min-w-[2rem] rounded-lg text-sm font-bold
                    text-[var(--btn-content)] dark:text-[var(--deep-text)]
                    bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)]
                    flex items-center justify-center"> 1 </div> </div> </button> </a><a href="/archive/?category=Technology" aria-label="View all posts in the Technology category"> <button class="
            w-full
            h-10
            rounded-lg
            bg-none
            hover:bg-[var(--btn-plain-bg-hover)]
            active:bg-[var(--btn-plain-bg-active)]
            transition-all
            pl-2
            hover:pl-3
            
            text-neutral-700
            hover:text-[var(--primary)]
            dark:text-neutral-300
            dark:hover:text-[var(--primary)]
        "> <div class="flex items-center justify-between relative mr-2"> <div class="overflow-hidden text-left whitespace-nowrap overflow-ellipsis  "> Technology </div> <div class="transition px-2 h-7 ml-4 min-w-[2rem] rounded-lg text-sm font-bold
                    text-[var(--btn-content)] dark:text-[var(--deep-text)]
                    bg-[oklch(0.95_0.025_var(--hue))] dark:bg-[var(--primary)]
                    flex items-center justify-center"> 1 </div> </div> </button> </a> </div> <div class="expand-btn px-4 -mb-2" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;"> <button class="btn-plain rounded-lg w-full h-9" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;"> <div class="text-[var(--primary)] flex items-center justify-center gap-2 -translate-x-2" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.75rem]" data-astro-cid-ucso7hve="true" data-icon="material-symbols:more-horiz">   <use href="#ai:material-symbols:more-horiz"></use>  </svg> More </div> </button> </div> </widget-layout>   </div> </div> <!-- 响应式样式和JavaScript -->  <script>
	import { widgetManager } from "../../utils/widget-manager";
	
	// 响应式布局管理
	class SidebarManager {
		constructor() {
			this.init();
		}
		
		init() {
			this.updateResponsiveDisplay();
			window.addEventListener('resize', () => this.updateResponsiveDisplay());
			
			// 监听SWUP内容替换事件
			if (typeof window !== 'undefined' && window.swup) {
				window.swup.hooks.on('content:replace', () => {
					// 延迟执行以确保DOM已更新
					setTimeout(() => {
						this.updateResponsiveDisplay();
					}, 100);
				});
			}
		}
		
		updateResponsiveDisplay() {
			const breakpoints = widgetManager.getBreakpoints();
			const width = window.innerWidth;
			
			let deviceType: 'mobile' | 'tablet' | 'desktop';
			if (width < breakpoints.mobile) {
				deviceType = 'mobile';
			} else if (width < breakpoints.tablet) {
				deviceType = 'tablet';
			} else {
				deviceType = 'desktop';
			}
			
			const shouldShow = widgetManager.shouldShowSidebar(deviceType);
			const sidebar = document.getElementById('sidebar');
			
			if (sidebar) {
				sidebar.style.setProperty(
					`--sidebar-${deviceType}-display`, 
					shouldShow ? 'block' : 'none'
				);
			}
		}
	}
	
	// 初始化侧边栏管理器
	new SidebarManager();
</script>  <div class="right-sidebar-container mb-4 col-span-1 onload-animation block row-start-3 row-end-4 lg:block lg:row-start-1 lg:row-end-2 lg:max-w-[17.5rem] lg:col-start-3 lg:col-end-4 " data-astro-cid-haiuh7kc><div id="right-sidebar" class="w-full" data-astro-cid-dnkjr6w2> <!-- 顶部固定组件区域 --> <div class="flex flex-col w-full gap-4 mb-4" data-astro-cid-dnkjr6w2> <widget-layout data-id="site-stats" data-is-collapsed="undefined" class="pb-4 card-base onload-animation hidden lg:block" style="animation-delay: 200ms; " data-astro-cid-ucso7hve="true"> <div class="font-bold transition text-lg text-neutral-900 dark:text-neutral-100 relative ml-8 mt-4 mb-2 flex items-center
        before:w-1 before:h-4 before:rounded-md before:bg-[var(--primary)]
        before:absolute before:left-[-16px] before:top-[5.5px]" data-astro-cid-ucso7hve style=""> Site Statistics  </div> <div id="site-stats" class="collapse-wrapper px-4 overflow-hidden" data-astro-cid-ucso7hve style="">  <div class="flex flex-col gap-2"> <div class="flex items-center justify-between px-3 py-1.5"> <div class="flex items-center gap-2.5"> <div class="text-[var(--primary)] text-xl"> <svg width="1em" height="1em" data-icon="material-symbols:article-outline">   <symbol id="ai:material-symbols:article-outline" viewBox="0 0 24 24"><path fill="currentColor" d="M7 17h7v-2H7zm0-4h10v-2H7zm0-4h10V7H7zM5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v14q0 .825-.587 1.413T19 21zm0-2h14V5H5zM5 5v14z"/></symbol><use href="#ai:material-symbols:article-outline"></use>  </svg> </div> <span class="text-neutral-700 dark:text-neutral-300 font-medium text-sm"> Posts </span> </div> <div class="flex items-center"> <span class="text-base font-bold text-neutral-900 dark:text-neutral-100"> 14 </span>  </div> </div><div class="flex items-center justify-between px-3 py-1.5"> <div class="flex items-center gap-2.5"> <div class="text-[var(--primary)] text-xl"> <svg width="1em" height="1em" data-icon="material-symbols:folder-outline">   <symbol id="ai:material-symbols:folder-outline" viewBox="0 0 24 24"><path fill="currentColor" d="M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h6l2 2h8q.825 0 1.413.588T22 8v10q0 .825-.587 1.413T20 20zm0-2h16V8h-8.825l-2-2H4zm0 0V6z"/></symbol><use href="#ai:material-symbols:folder-outline"></use>  </svg> </div> <span class="text-neutral-700 dark:text-neutral-300 font-medium text-sm"> Categories </span> </div> <div class="flex items-center"> <span class="text-base font-bold text-neutral-900 dark:text-neutral-100"> 12 </span>  </div> </div><div class="flex items-center justify-between px-3 py-1.5"> <div class="flex items-center gap-2.5"> <div class="text-[var(--primary)] text-xl"> <svg width="1em" height="1em" data-icon="material-symbols:label-outline">   <symbol id="ai:material-symbols:label-outline" viewBox="0 0 24 24"><path fill="currentColor" d="M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h11q.475 0 .9.213t.7.587L22 12l-5.4 7.2q-.275.375-.7.588T15 20zm0-2h11l4.5-6L15 6H4zm5.5-6"/></symbol><use href="#ai:material-symbols:label-outline"></use>  </svg> </div> <span class="text-neutral-700 dark:text-neutral-300 font-medium text-sm"> Tags </span> </div> <div class="flex items-center"> <span class="text-base font-bold text-neutral-900 dark:text-neutral-100"> 36 </span>  </div> </div><div class="flex items-center justify-between px-3 py-1.5"> <div class="flex items-center gap-2.5"> <div class="text-[var(--primary)] text-xl"> <svg width="1em" height="1em" data-icon="material-symbols:text-ad-outline-rounded">   <symbol id="ai:material-symbols:text-ad-outline-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h16q.825 0 1.413.588T22 6v12q0 .825-.587 1.413T20 20zm0-2h16V6H4zm0 0V6zm2-1h12q.425 0 .713-.288T19 16t-.288-.712T18 15H6q-.425 0-.712.288T5 16t.288.713T6 17m0-4h12q.425 0 .713-.288T19 12t-.288-.712T18 11H6q-.425 0-.712.288T5 12t.288.713T6 13m0-4h8q.425 0 .713-.288T15 8t-.288-.712T14 7H6q-.425 0-.712.288T5 8t.288.713T6 9"/></symbol><use href="#ai:material-symbols:text-ad-outline-rounded"></use>  </svg> </div> <span class="text-neutral-700 dark:text-neutral-300 font-medium text-sm"> Total Words </span> </div> <div class="flex items-center"> <span class="text-base font-bold text-neutral-900 dark:text-neutral-100"> 72,685 </span>  </div> </div><div class="flex items-center justify-between px-3 py-1.5"> <div class="flex items-center gap-2.5"> <div class="text-[var(--primary)] text-xl"> <svg width="1em" height="1em" data-icon="material-symbols:calendar-clock-outline">   <symbol id="ai:material-symbols:calendar-clock-outline" viewBox="0 0 24 24"><path fill="currentColor" d="M5 8h14V6H5zm0 0V6zm0 14q-.825 0-1.412-.587T3 20V6q0-.825.588-1.412T5 4h1V2h2v2h8V2h2v2h1q.825 0 1.413.588T21 6v5.675q-.475-.225-.975-.375T19 11.075V10H5v10h6.3q.175.55.413 1.05t.562.95zm13 1q-2.075 0-3.537-1.463T13 18t1.463-3.537T18 13t3.538 1.463T23 18t-1.463 3.538T18 23m1.675-2.625l.7-.7L18.5 17.8V15h-1v3.2z"/></symbol><use href="#ai:material-symbols:calendar-clock-outline"></use>  </svg> </div> <span class="text-neutral-700 dark:text-neutral-300 font-medium text-sm"> Running Time </span> </div> <div class="flex items-center"> <span class="text-base font-bold text-neutral-900 dark:text-neutral-100" data-stat-id="running-days"> 0 </span> <span class="text-sm text-neutral-500 dark:text-neutral-400 ml-1">  days </span> </div> </div><div class="flex items-center justify-between px-3 py-1.5"> <div class="flex items-center gap-2.5"> <div class="text-[var(--primary)] text-xl"> <svg width="1em" height="1em" data-icon="material-symbols:ecg-heart-outline">   <symbol id="ai:material-symbols:ecg-heart-outline" viewBox="0 0 24 24"><path fill="currentColor" d="M12 21q-.45 0-.862-.162t-.738-.488l-6.7-6.725q-.875-.875-1.287-2T2 9.275Q2 6.7 3.675 4.85T7.85 3q1.2 0 2.263.475T12 4.8q.8-.85 1.863-1.325T16.125 3q2.5 0 4.188 1.85T22 9.25q0 1.225-.425 2.35t-1.275 2l-6.725 6.75q-.325.325-.725.488T12 21m1-13q.25 0 .475.125t.35.325l1.7 2.55h4.15q.175-.425.263-.862t.087-.888q-.05-1.725-1.15-2.963t-2.75-1.237q-.775 0-1.487.3t-1.238.875l-.675.725q-.125.15-.325.238t-.4.087t-.4-.087t-.35-.238l-.675-.725q-.525-.575-1.225-.9T7.85 5Q6.2 5 5.1 6.263T4 9.25q0 .45.075.888t.25.862H9q.25 0 .475.125t.35.325l.875 1.3l1.35-4.05q.1-.3.362-.5T13 8m.3 3.25l-1.35 4.05q-.1.3-.375.5t-.6.2q-.25 0-.475-.125t-.35-.325L8.45 13H5.9l5.925 5.925q.05.05.088.063T12 19t.088-.012t.087-.063l5.9-5.925H15q-.25 0-.475-.125t-.375-.325z"/></symbol><use href="#ai:material-symbols:ecg-heart-outline"></use>  </svg> </div> <span class="text-neutral-700 dark:text-neutral-300 font-medium text-sm"> Last Activity </span> </div> <div class="flex items-center"> <span class="text-base font-bold text-neutral-900 dark:text-neutral-100" data-stat-id="last-update"> 0 </span> <span class="text-sm text-neutral-500 dark:text-neutral-400 ml-1">  days ago </span> </div> </div> </div>  </div>  </widget-layout>   <script>(function(){const siteStartDate = "2025-11-21";
const lastPostDate = "2025-09-21T00:00:00.000Z";

  function updateDynamicStats() {
    const today = new Date();
    
    // 更新运行天数
    const startDate = new Date(siteStartDate);
    const diffTime = Math.abs(today.getTime() - startDate.getTime());
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    
    const runningDaysElement = document.querySelector('[data-stat-id="running-days"]');
    if (runningDaysElement) {
      runningDaysElement.textContent = diffDays.toString();
    }
    
    // 更新最后活动时间
    if (lastPostDate) {
      const lastPost = new Date(lastPostDate);
      const timeSinceLastPost = Math.abs(today.getTime() - lastPost.getTime());
      const daysSinceLastUpdate = Math.floor(timeSinceLastPost / (1000 * 60 * 60 * 24));
      
      const lastUpdateElement = document.querySelector('[data-stat-id="last-update"]');
      if (lastUpdateElement) {
        lastUpdateElement.textContent = daysSinceLastUpdate.toString();
      }
    }
  }
  
  // 页面加载时更新
  updateDynamicStats();
  
  // 每小时更新一次（可选，因为天数变化较慢）
  setInterval(updateDynamicStats, 60 * 60 * 1000);
})();</script><widget-layout data-id="calendar-widget" data-is-collapsed="undefined" class="pb-4 card-base hidden md:block onload-animation hidden lg:block" style="animation-delay: 250ms; " data-astro-cid-ucso7hve="true"> <div class="font-bold transition text-lg text-neutral-900 dark:text-neutral-100 relative ml-8 mt-4 mb-2 flex items-center
        before:w-1 before:h-4 before:rounded-md before:bg-[var(--primary)]
        before:absolute before:left-[-16px] before:top-[5.5px]" data-astro-cid-ucso7hve style="">  <span id="calendar-widget-title" class="flex-1 text-left" data-astro-cid-o3b4delr></span> </div> <div id="calendar-widget" class="collapse-wrapper px-4 overflow-hidden" data-astro-cid-ucso7hve style="">   <div class="calendar-container" data-astro-cid-o3b4delr> <!-- 星期标题 --> <div class="weekdays grid grid-cols-7 gap-1 mb-2" data-astro-cid-o3b4delr> <div class="text-center text-xs text-neutral-500 dark:text-neutral-400 font-medium" data-astro-cid-o3b4delr> Sun </div><div class="text-center text-xs text-neutral-500 dark:text-neutral-400 font-medium" data-astro-cid-o3b4delr> Mon </div><div class="text-center text-xs text-neutral-500 dark:text-neutral-400 font-medium" data-astro-cid-o3b4delr> Tue </div><div class="text-center text-xs text-neutral-500 dark:text-neutral-400 font-medium" data-astro-cid-o3b4delr> Wed </div><div class="text-center text-xs text-neutral-500 dark:text-neutral-400 font-medium" data-astro-cid-o3b4delr> Thu </div><div class="text-center text-xs text-neutral-500 dark:text-neutral-400 font-medium" data-astro-cid-o3b4delr> Fri </div><div class="text-center text-xs text-neutral-500 dark:text-neutral-400 font-medium" data-astro-cid-o3b4delr> Sat </div> </div> <!-- 日历格子（由客户端动态生成） --> <div class="calendar-grid grid grid-cols-7 gap-1" id="calendar-grid" data-astro-cid-o3b4delr> <!-- 将由 JavaScript 填充 --> </div> <!-- 文章列表 --> <div id="calendar-posts" class="mt-3" data-astro-cid-o3b4delr> <div class="border-t border-neutral-200 dark:border-neutral-700 mb-2" id="calendar-posts-divider" style="display: none;" data-astro-cid-o3b4delr></div> <div class="flex flex-col gap-1" id="calendar-posts-list" data-astro-cid-o3b4delr> <!-- 将由 JavaScript 填充 --> </div> </div> </div>  </div>  </widget-layout>   <script>(function(){const postDateMap = {"2025-01-20":[{"id":"markdown-tutorial","data":{"title":"Markdown Tutorial","published":"2025-01-20T00:00:00.000Z","draft":false,"description":"A simple example of a Markdown blog post.","image":"","tags":["Markdown","Blogging"],"category":"Examples","lang":"","pinned":true,"author":"emn178","sourceLink":"https://github.com/emn178/markdown","licenseName":"Unlicensed","licenseUrl":"","encrypted":false,"password":"","prevTitle":"Encrypted Post","prevSlug":"encrypted-post","nextTitle":"","nextSlug":""},"body":"# Markdown Tutorial\n\nA markdown example shows how to write a markdown file. This document integrates core syntax and extensions (GMF).\n\n- [Block Elements](#block-elements)\n  - [Paragraphs and Line Breaks](#paragraphs-and-line-breaks)\n  - [Headers](#headers)\n  - [Blockquotes](#blockquotes)\n  - [Lists](#lists)\n  - [Code Blocks](#code-blocks)\n  - [Horizontal Rules](#horizontal-rules)\n  - [Table](#table)\n- [Span Elements](#span-elements)\n  - [Links](#links)\n  - [Emphasis](#emphasis)\n  - [Code](#code)\n  - [Images](#images)\n  - [Strikethrough](#strikethrough)\n- [Miscellaneous](#miscellaneous)\n  - [Automatic Links](#automatic-links)\n  - [Backslash Escapes](#backslash-escapes)\n- [Inline HTML](#inline-html)\n\n## Block Elements\n\n### Paragraphs and Line Breaks\n\n#### Paragraphs\n\nHTML Tag: `<p>`\n\nOne or more blank lines. (A blank line is a line containing nothing but **spaces** or **tabs** is considered blank.)\n\nCode:\n\n    This will be\n    inline.\n\n    This is second paragraph.\n\nPreview:\n\n---\n\nThis will be\ninline.\n\nThis is second paragraph.\n\n---\n\n#### Line Breaks\n\nHTML Tag: `<br />`\n\nEnd a line with **two or more spaces**.\n\nCode:\n\n    This will be not\n    inline.\n\nPreview:\n\n---\n\nThis will be not  \ninline.\n\n---\n\n### Headers\n\nMarkdown supports two styles of headers, Setext and atx.\n\n#### Setext\n\nHTML Tags: `<h1>`, `<h2>`\n\n\"Underlined\" using **equal signs (=)** as `<h1>` and **dashes (-)** as `<h2>` in any number.\n\nCode:\n\n    This is an H1\n    =============\n    This is an H2\n    -------------\n\nPreview:\n\n---\n\n# This is an H1\n\n## This is an H2\n\n---\n\n#### atx\n\nHTML Tags: `<h1>`, `<h2>`, `<h3>`, `<h4>`, `<h5>`, `<h6>`\n\nUses 1-6 **hash characters (#)** at the start of the line, corresponding to `<h1>` - `<h6>`.\n\nCode:\n\n    # This is an H1\n    ## This is an H2\n    ###### This is an H6\n\nPreview:\n\n---\n\n# This is an H1\n\n## This is an H2\n\n###### This is an H6\n\n---\n\nOptionally, you may \"close\" atx-style headers. The closing hashes **don't need to match** the number of hashes used to open the header.\n\nCode:\n\n    # This is an H1 #\n    ## This is an H2 ##\n    ### This is an H3 ######\n\nPreview:\n\n---\n\n# This is an H1\n\n## This is an H2\n\n### This is an H3\n\n---\n\n### Blockquotes\n\nHTML Tag: `<blockquote>`\n\nMarkdown uses email-style **>** characters for blockquoting. It looks best if you hard wrap the text and put a > before every line.\n\nCode:\n\n    > This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,\n    > consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.\n    > Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.\n    >\n    > Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse\n    > id sem consectetuer libero luctus adipiscing.\n\nPreview:\n\n---\n\n> This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,\n> consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.\n> Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.\n>\n> Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse\n> id sem consectetuer libero luctus adipiscing.\n\n---\n\nMarkdown allows you to be lazy and only put the > before the first line of a hard-wrapped paragraph.\n\nCode:\n\n    > This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,\n    consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.\n    Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.\n\n    > Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse\n    id sem consectetuer libero luctus adipiscing.\n\nPreview:\n\n---\n\n> This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,\n> consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.\n> Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.\n\n> Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse\n> id sem consectetuer libero luctus adipiscing.\n\n---\n\nBlockquotes can be nested (i.e. a blockquote-in-a-blockquote) by adding additional levels of >.\n\nCode:\n\n    > This is the first level of quoting.\n    >\n    > > This is nested blockquote.\n    >\n    > Back to the first level.\n\nPreview:\n\n---\n\n> This is the first level of quoting.\n>\n> > This is nested blockquote.\n>\n> Back to the first level.\n\n---\n\nBlockquotes can contain other Markdown elements, including headers, lists, and code blocks.\n\nCode:\n\n    > ## This is a header.\n    >\n    > 1.   This is the first list item.\n    > 2.   This is the second list item.\n    >\n    > Here's some example code:\n    >\n    >     return shell_exec(\"echo $input | $markdown_script\");\n\nPreview:\n\n---\n\n> ## This is a header.\n>\n> 1.  This is the first list item.\n> 2.  This is the second list item.\n>\n> Here's some example code:\n>\n>     return shell_exec(\"echo $input | $markdown_script\");\n\n---\n\n### Lists\n\nMarkdown supports ordered (numbered) and unordered (bulleted) lists.\n\n#### Unordered\n\nHTML Tag: `<ul>`\n\nUnordered lists use **asterisks (\\*)**, **pluses (+)**, and **hyphens (-)**.\n\nCode:\n\n    *   Red\n    *   Green\n    *   Blue\n\nPreview:\n\n---\n\n- Red\n- Green\n- Blue\n\n---\n\nis equivalent to:\n\nCode:\n\n    +   Red\n    +   Green\n    +   Blue\n\nand:\n\nCode:\n\n    -   Red\n    -   Green\n    -   Blue\n\n#### Ordered\n\nHTML Tag: `<ol>`\n\nOrdered lists use numbers followed by periods:\n\nCode:\n\n    1.  Bird\n    2.  McHale\n    3.  Parish\n\nPreview:\n\n---\n\n1.  Bird\n2.  McHale\n3.  Parish\n\n---\n\nIt's possible to trigger an ordered list by accident, by writing something like this:\n\nCode:\n\n    1986. What a great season.\n\nPreview:\n\n---\n\n1986. What a great season.\n\n---\n\nYou can **backslash-escape (\\\\)** the period:\n\nCode:\n\n    1986\\. What a great season.\n\nPreview:\n\n---\n\n1986\\. What a great season.\n\n---\n\n#### Indented\n\n##### Blockquote\n\nTo put a blockquote within a list item, the blockquote's > delimiters need to be indented:\n\nCode:\n\n    *   A list item with a blockquote:\n\n        > This is a blockquote\n        > inside a list item.\n\nPreview:\n\n---\n\n- A list item with a blockquote:\n\n  > This is a blockquote\n  > inside a list item.\n\n---\n\n##### Code Block\n\nTo put a code block within a list item, the code block needs to be indented twice — **8 spaces** or **two tabs**:\n\nCode:\n\n    *   A list item with a code block:\n\n            <code goes here>\n\nPreview:\n\n---\n\n- A list item with a code block:\n\n      <code goes here>\n\n---\n\n##### Nested List\n\nCode:\n\n    * A\n      * A1\n      * A2\n    * B\n    * C\n\nPreview:\n\n---\n\n- A\n  - A1\n  - A2\n- B\n- C\n\n---\n\n### Code Blocks\n\nHTML Tag: `<pre>`\n\nIndent every line of the block by at least **4 spaces** or **1 tab**.\n\nCode:\n\n    This is a normal paragraph:\n\n        This is a code block.\n\nPreview:\n\n---\n\nThis is a normal paragraph:\n\n    This is a code block.\n\n---\n\nA code block continues until it reaches a line that is not indented (or the end of the article).\n\nWithin a code block, **_ampersands (&)_** and angle **brackets (< and >)** are automatically converted into HTML entities.\n\nCode:\n\n        <div class=\"footer\">\n            &copy; 2004 Foo Corporation\n        </div>\n\nPreview:\n\n---\n\n    <div class=\"footer\">\n        &copy; 2004 Foo Corporation\n    </div>\n\n---\n\nFollowing sections Fenced Code Blocks and Syntax Highlighting are extensions, you can use the other way to write the code block.\n\n#### Fenced Code Blocks\n\nJust wrap your code in ` ``` ` (as shown below) and you won't need to indent it by four spaces.\n\nCode:\n\n    Here's an example:\n\n    ```\n    function test() {\n      console.log(\"notice the blank line before this function?\");\n    }\n    ```\n\nPreview:\n\n---\n\nHere's an example:\n\n```\nfunction test() {\n  console.log(\"notice the blank line before this function?\");\n}\n```\n\n---\n\n#### Syntax Highlighting\n\nIn your fenced block, add an optional language identifier and we'll run it through syntax highlighting ([Support Languages](https://github.com/github/linguist/blob/master/lib/linguist/languages.yml)).\n\nCode:\n\n    ```ruby\n    require 'redcarpet'\n    markdown = Redcarpet.new(\"Hello World!\")\n    puts markdown.to_html\n    ```\n\nPreview:\n\n---\n\n```ruby\nrequire 'redcarpet'\nmarkdown = Redcarpet.new(\"Hello World!\")\nputs markdown.to_html\n```\n\n---\n\n### Horizontal Rules\n\nHTML Tag: `<hr />`\nPlaces **three or more hyphens (-), asterisks (\\*), or underscores (\\_)** on a line by themselves. You may use spaces between the hyphens or asterisks.\n\nCode:\n\n    * * *\n    ***\n    *****\n    - - -\n    ---------------------------------------\n    ___\n\nPreview:\n\n---\n\n---\n\n---\n\n---\n\n---\n\n---\n\n---\n\n---\n\n### Table\n\nHTML Tag: `<table>`\n\nIt's an extension.\n\nSeparates column by **pipe (|)** and header by **dashes (-)**, and uses **colon (:)** for alignment.\n\nThe outer **pipes (|)** and alignment are optional. There are **3 delimiters** each cell at least for separating header.\n\nCode:\n\n```\n| Left | Center | Right |\n|:-----|:------:|------:|\n|aaa   |bbb     |ccc    |\n|ddd   |eee     |fff    |\n\n A | B\n---|---\n123|456\n\n\nA |B\n--|--\n12|45\n```\n\nPreview:\n\n---\n\n| Left | Center | Right |\n| :--- | :----: | ----: |\n| aaa  |  bbb   |   ccc |\n| ddd  |  eee   |   fff |\n\n| A   | B   |\n| --- | --- |\n| 123 | 456 |\n\n| A   | B   |\n| --- | --- |\n| 12  | 45  |\n\n---\n\n## Span Elements\n\n### Links\n\nHTML Tag: `<a>`\n\nMarkdown supports two style of links: inline and reference.\n\n#### Inline\n\nInline link format like this: `[Link Text](URL \"Title\")`\n\nTitle is optional.\n\nCode:\n\n    This is [an example](http://example.com/ \"Title\") inline link.\n\n    [This link](http://example.net/) has no title attribute.\n\nPreview:\n\n---\n\nThis is [an example](http://example.com/ \"Title\") inline link.\n\n[This link](http://example.net/) has no title attribute.\n\n---\n\nIf you're referring to a local resource on the same server, you can use relative paths:\n\nCode:\n\n    See my [About](/about/) page for details.\n\nPreview:\n\n---\n\nSee my [About](/about/) page for details.\n\n---\n\n#### Reference\n\nYou could predefine link references. Format like this: `[id]: URL \"Title\"`\n\nTitle is also optional. And the you refer the link, format like this: `[Link Text][id]`\n\nCode:\n\n    [id]: http://example.com/  \"Optional Title Here\"\n    This is [an example][id] reference-style link.\n\nPreview:\n\n---\n\n[id]: http://example.com/ \"Optional Title Here\"\n\nThis is [an example][id] reference-style link.\n\n---\n\nThat is:\n\n- Square brackets containing the link identifier (**not case sensitive**, optionally indented from the left margin using up to three spaces);\n- followed by a colon;\n- followed by one or more spaces (or tabs);\n- followed by the URL for the link;\n- The link URL may, optionally, be surrounded by angle brackets.\n- optionally followed by a title attribute for the link, enclosed in double or single quotes, or enclosed in parentheses.\n\nThe following three link definitions are equivalent:\n\nCode:\n\n    [foo]: http://example.com/  \"Optional Title Here\"\n    [foo]: http://example.com/  'Optional Title Here'\n    [foo]: http://example.com/  (Optional Title Here)\n    [foo]: <http://example.com/>  \"Optional Title Here\"\n\nUses an empty set of square brackets, the link text itself is used as the name.\n\nCode:\n\n    [Google]: http://google.com/\n    [Google][]\n\nPreview:\n\n---\n\n[Google]: http://google.com/\n\n[Google][]\n\n---\n\n### Emphasis\n\nHTML Tags: `<em>`, `<strong>`\n\nMarkdown treats **asterisks (\\*)** and **underscores (\\_)** as indicators of emphasis. **One delimiter** will be `<em>`; \\*_double delimiters_ will be `<strong>`.\n\nCode:\n\n    *single asterisks*\n\n    _single underscores_\n\n    **double asterisks**\n\n    __double underscores__\n\nPreview:\n\n---\n\n_single asterisks_\n\n_single underscores_\n\n**double asterisks**\n\n**double underscores**\n\n---\n\nBut if you surround an \\* or \\_ with spaces, it'll be treated as a literal asterisk or underscore.\n\nYou can backslash escape it:\n\nCode:\n\n    \\*this text is surrounded by literal asterisks\\*\n\nPreview:\n\n---\n\n\\*this text is surrounded by literal asterisks\\*\n\n---\n\n### Code\n\nHTML Tag: `<code>`\n\nWraps it with **backtick quotes (`)**.\n\nCode:\n\n    Use the `printf()` function.\n\nPreview:\n\n---\n\nUse the `printf()` function.\n\n---\n\nTo include a literal backtick character within a code span, you can use **multiple backticks** as the opening and closing delimiters:\n\nCode:\n\n    ``There is a literal backtick (`) here.``\n\nPreview:\n\n---\n\n``There is a literal backtick (`) here.``\n\n---\n\nThe backtick delimiters surrounding a code span may include spaces — one after the opening, one before the closing. This allows you to place literal backtick characters at the beginning or end of a code span:\n\nCode:\n\n    A single backtick in a code span: `` ` ``\n\n    A backtick-delimited string in a code span: `` `foo` ``\n\nPreview:\n\n---\n\nA single backtick in a code span: `` ` ``\n\nA backtick-delimited string in a code span: `` `foo` ``\n\n---\n\n### Images\n\nHTML Tag: `<img />`\n\nMarkdown uses an image syntax that is intended to resemble the syntax for links, allowing for two styles: inline and reference.\n\n#### Inline\n\nInline image syntax looks like this: `![Alt text](URL \"Title\")`\n\nTitle is optional.\n\nCode:\n\n    ![Alt text](/path/to/img.jpg)\n\n    ![Alt text](/path/to/img.jpg \"Optional title\")\n\nPreview:\n\n---\n\n![Alt text](https://s2.loli.net/2024/08/20/5fszgXeOxmL3Wdv.webp)\n\n![Alt text](https://s2.loli.net/2024/08/20/5fszgXeOxmL3Wdv.webp \"Optional title\")\n\n---\n\nThat is:\n\n- An exclamation mark: !;\n- followed by a set of square brackets, containing the alt attribute text for the image;\n- followed by a set of parentheses, containing the URL or path to the image, and an optional title attribute enclosed in double or single quotes.\n\n#### Reference\n\nReference-style image syntax looks like this: `![Alt text][id]`\n\nCode:\n\n    [img id]: https://s2.loli.net/2024/08/20/5fszgXeOxmL3Wdv.webp  \"Optional title attribute\"\n    ![Alt text][img id]\n\nPreview:\n\n---\n\n[img id]: https://s2.loli.net/2024/08/20/5fszgXeOxmL3Wdv.webp \"Optional title attribute\"\n\n![Alt text][img id]\n\n---\n\n### Strikethrough\n\nHTML Tag: `<del>`\n\nIt's an extension.\n\nGFM adds syntax to strikethrough text.\n\nCode:\n\n```\n~~Mistaken text.~~\n```\n\nPreview:\n\n---\n\n~~Mistaken text.~~\n\n---\n\n## Miscellaneous\n\n### Automatic Links\n\nMarkdown supports a shortcut style for creating \"automatic\" links for URLs and email addresses: simply surround the URL or email address with angle brackets.\n\nCode:\n\n    <http://example.com/>\n\n    <address@example.com>\n\nPreview:\n\n---\n\n<http://example.com/>\n\n<address@example.com>\n\n---\n\nGFM will autolink standard URLs.\n\nCode:\n\n```\nhttps://github.com/emn178/markdown\n```\n\nPreview:\n\n---\n\nhttps://github.com/emn178/markdown\n\n---\n\n### Backslash Escapes\n\nMarkdown allows you to use backslash escapes to generate literal characters which would otherwise have special meaning in Markdown's formatting syntax.\n\nCode:\n\n    \\*literal asterisks\\*\n\nPreview:\n\n---\n\n\\*literal asterisks\\*\n\n---\n\nMarkdown provides backslash escapes for the following characters:\n\nCode:\n\n    \\   backslash\n    `   backtick\n    *   asterisk\n    _   underscore\n    {}  curly braces\n    []  square brackets\n    ()  parentheses\n    #   hash mark\n    +   plus sign\n    -   minus sign (hyphen)\n    .   dot\n    !   exclamation mark\n\n## Inline HTML\n\nFor any markup that is not covered by Markdown's syntax, you simply use HTML itself. There's no need to preface it or delimit it to indicate that you're switching from Markdown to HTML; you just use the tags.\n\nCode:\n\n    This is a regular paragraph.\n\n    <table>\n        <tr>\n            <td>Foo</td>\n        </tr>\n    </table>\n\n    This is another regular paragraph.\n\nPreview:\n\n---\n\nThis is a regular paragraph.\n\n<table>\n    <tr>\n        <td>Foo</td>\n    </tr>\n</table>\n\nThis is another regular paragraph.\n\n---\n\nNote that Markdown formatting syntax is **not processed within block-level HTML tags**.\n\nUnlike block-level HTML tags, Markdown syntax is **processed within span-level tags**.\n\nCode:\n\n    <span>**Work**</span>\n\n    <div>\n        **No Work**\n    </div>\n\nPreview:\n\n---\n\n<span>**Work**</span>\n\n<div>\n  **No Work**\n</div>\n***","filePath":"src/content/posts/markdown-tutorial.md","digest":"257d566afac0e286","rendered":{"html":"<section><h1 id=\"markdown-tutorial\">Markdown Tutorial<a class=\"anchor\" href=\"#markdown-tutorial\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><p>A markdown example shows how to write a markdown file. This document integrates core syntax and extensions (GMF).</p><ul>\n<li><a href=\"#block-elements\">Block Elements</a>\n<ul>\n<li><a href=\"#paragraphs-and-line-breaks\">Paragraphs and Line Breaks</a></li>\n<li><a href=\"#headers\">Headers</a></li>\n<li><a href=\"#blockquotes\">Blockquotes</a></li>\n<li><a href=\"#lists\">Lists</a></li>\n<li><a href=\"#code-blocks\">Code Blocks</a></li>\n<li><a href=\"#horizontal-rules\">Horizontal Rules</a></li>\n<li><a href=\"#table\">Table</a></li>\n</ul>\n</li>\n<li><a href=\"#span-elements\">Span Elements</a>\n<ul>\n<li><a href=\"#links\">Links</a></li>\n<li><a href=\"#emphasis\">Emphasis</a></li>\n<li><a href=\"#code\">Code</a></li>\n<li><a href=\"#images\">Images</a></li>\n<li><a href=\"#strikethrough\">Strikethrough</a></li>\n</ul>\n</li>\n<li><a href=\"#miscellaneous\">Miscellaneous</a>\n<ul>\n<li><a href=\"#automatic-links\">Automatic Links</a></li>\n<li><a href=\"#backslash-escapes\">Backslash Escapes</a></li>\n</ul>\n</li>\n<li><a href=\"#inline-html\">Inline HTML</a></li>\n</ul><section><h2 id=\"block-elements\">Block Elements<a class=\"anchor\" href=\"#block-elements\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"paragraphs-and-line-breaks\">Paragraphs and Line Breaks<a class=\"anchor\" href=\"#paragraphs-and-line-breaks\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><section><h4 id=\"paragraphs\">Paragraphs<a class=\"anchor\" href=\"#paragraphs\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>HTML Tag: <code>&#x3C;p></code></p><p>One or more blank lines. (A blank line is a line containing nothing but <strong>spaces</strong> or <strong>tabs</strong> is considered blank.)</p><p>Code:</p><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:25ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This will be</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">inline.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This is second paragraph.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p>This will be\ninline.</p><p>This is second paragraph.</p><hr></section><section><h4 id=\"line-breaks\">Line Breaks<a class=\"anchor\" href=\"#line-breaks\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>HTML Tag: <code>&#x3C;br /></code></p><p>End a line with <strong>two or more spaces</strong>.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:16ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This will be not</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">inline.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p>This will be not<br>\ninline.</p><hr></section></section><section><h3 id=\"headers\">Headers<a class=\"anchor\" href=\"#headers\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>Markdown supports two styles of headers, Setext and atx.</p><section><h4 id=\"setext\">Setext<a class=\"anchor\" href=\"#setext\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>HTML Tags: <code>&#x3C;h1></code>, <code>&#x3C;h2></code></p><p>“Underlined” using <strong>equal signs (=)</strong> as <code>&#x3C;h1></code> and <strong>dashes (-)</strong> as <code>&#x3C;h2></code> in any number.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:13ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This is an H1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">=============</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This is an H2</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">-------------</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr></section></section></section></section>\n<section><h1 id=\"this-is-an-h1\">This is an H1<a class=\"anchor\" href=\"#this-is-an-h1\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h2 id=\"this-is-an-h2\">This is an H2<a class=\"anchor\" href=\"#this-is-an-h2\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><hr><section><h4 id=\"atx\">atx<a class=\"anchor\" href=\"#atx\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>HTML Tags: <code>&#x3C;h1></code>, <code>&#x3C;h2></code>, <code>&#x3C;h3></code>, <code>&#x3C;h4></code>, <code>&#x3C;h5></code>, <code>&#x3C;h6></code></p><p>Uses 1-6 <strong>hash characters (#)</strong> at the start of the line, corresponding to <code>&#x3C;h1></code> - <code>&#x3C;h6></code>.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:20ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\"># This is an H1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">## This is an H2</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">###### This is an H6</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr></section></section></section>\n<section><h1 id=\"this-is-an-h1-1\">This is an H1<a class=\"anchor\" href=\"#this-is-an-h1-1\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h2 id=\"this-is-an-h2-1\">This is an H2<a class=\"anchor\" href=\"#this-is-an-h2-1\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h6 id=\"this-is-an-h6\">This is an H6<a class=\"anchor\" href=\"#this-is-an-h6\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h6><hr><p>Optionally, you may “close” atx-style headers. The closing hashes <strong>don’t need to match</strong> the number of hashes used to open the header.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:24ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\"># This is an H1 #</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">## This is an H2 ##</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">### This is an H3 ######</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr></section></section></section>\n<section><h1 id=\"this-is-an-h1-2\">This is an H1<a class=\"anchor\" href=\"#this-is-an-h1-2\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h2 id=\"this-is-an-h2-2\">This is an H2<a class=\"anchor\" href=\"#this-is-an-h2-2\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"this-is-an-h3\">This is an H3<a class=\"anchor\" href=\"#this-is-an-h3\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><hr></section><section><h3 id=\"blockquotes\">Blockquotes<a class=\"anchor\" href=\"#blockquotes\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>HTML Tag: <code>&#x3C;blockquote></code></p><p>Markdown uses email-style <strong>></strong> characters for blockquoting. It looks best if you hard wrap the text and put a > before every line.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:72ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> id sem consectetuer libero luctus adipiscing.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><blockquote>\n<p>This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,\nconsectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.\nVestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.</p>\n<p>Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse\nid sem consectetuer libero luctus adipiscing.</p>\n</blockquote><hr><p>Markdown allows you to be lazy and only put the > before the first line of a hard-wrapped paragraph.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:71ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">id sem consectetuer libero luctus adipiscing.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><blockquote>\n<p>This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet,\nconsectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus.\nVestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus.</p>\n</blockquote><blockquote>\n<p>Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse\nid sem consectetuer libero luctus adipiscing.</p>\n</blockquote><hr><p>Blockquotes can be nested (i.e. a blockquote-in-a-blockquote) by adding additional levels of >.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:37ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> This is the first level of quoting.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> > This is nested blockquote.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> Back to the first level.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><blockquote>\n<p>This is the first level of quoting.</p>\n<blockquote>\n<p>This is nested blockquote.</p>\n</blockquote>\n<p>Back to the first level.</p>\n</blockquote><hr><p>Blockquotes can contain other Markdown elements, including headers, lists, and code blocks.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:58ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> ## This is a header.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> 1.   This is the first list item.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> 2.   This is the second list item.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> Here's some example code:</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">>     return shell_exec(\"echo $input | $markdown_script\");</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><blockquote>\n<h2 id=\"this-is-a-header\">This is a header.<a class=\"anchor\" href=\"#this-is-a-header\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2>\n<ol>\n<li>This is the first list item.</li>\n<li>This is the second list item.</li>\n</ol>\n<p>Here’s some example code:</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:52ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">return shell_exec(\"echo $input | $markdown_script\");</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</blockquote><hr></section><section><h3 id=\"lists\">Lists<a class=\"anchor\" href=\"#lists\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>Markdown supports ordered (numbered) and unordered (bulleted) lists.</p><section><h4 id=\"unordered\">Unordered<a class=\"anchor\" href=\"#unordered\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>HTML Tag: <code>&#x3C;ul></code></p><p>Unordered lists use <strong>asterisks (*)</strong>, <strong>pluses (+)</strong>, and <strong>hyphens (-)</strong>.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:9ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">*   Red</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">*   Green</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">*   Blue</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><ul>\n<li>Red</li>\n<li>Green</li>\n<li>Blue</li>\n</ul><hr><p>is equivalent to:</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:9ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">+   Red</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">+   Green</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">+   Blue</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>and:</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:9ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">-   Red</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">-   Green</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">-   Blue</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h4 id=\"ordered\">Ordered<a class=\"anchor\" href=\"#ordered\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>HTML Tag: <code>&#x3C;ol></code></p><p>Ordered lists use numbers followed by periods:</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:10ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">1.  Bird</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">2.  McHale</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">3.  Parish</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><ol>\n<li>Bird</li>\n<li>McHale</li>\n<li>Parish</li>\n</ol><hr><p>It’s possible to trigger an ordered list by accident, by writing something like this:</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:26ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">1986. What a great season.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><ol start=\"1986\">\n<li>What a great season.</li>\n</ol><hr><p>You can <strong>backslash-escape (\\)</strong> the period:</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:27ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">1986\\. What a great season.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p>1986. What a great season.</p><hr></section><section><h4 id=\"indented\">Indented<a class=\"anchor\" href=\"#indented\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><section><h5 id=\"blockquote\">Blockquote<a class=\"anchor\" href=\"#blockquote\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h5><p>To put a blockquote within a list item, the blockquote’s > delimiters need to be indented:</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:34ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">*   A list item with a blockquote:</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">> This is a blockquote</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">> inside a list item.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><ul>\n<li>\n<p>A list item with a blockquote:</p>\n<blockquote>\n<p>This is a blockquote\ninside a list item.</p>\n</blockquote>\n</li>\n</ul><hr></section><section><h5 id=\"code-block\">Code Block<a class=\"anchor\" href=\"#code-block\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h5><p>To put a code block within a list item, the code block needs to be indented twice — <strong>8 spaces</strong> or <strong>two tabs</strong>:</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:34ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">*   A list item with a code block:</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;code goes here></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><ul>\n<li>\n<p>A list item with a code block:</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:16ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;code goes here></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul><hr></section><section><h5 id=\"nested-list\">Nested List<a class=\"anchor\" href=\"#nested-list\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h5><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:6ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">* A</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">* A1</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">* A2</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">* B</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">* C</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><ul>\n<li>A\n<ul>\n<li>A1</li>\n<li>A2</li>\n</ul>\n</li>\n<li>B</li>\n<li>C</li>\n</ul><hr></section></section></section><section><h3 id=\"code-blocks\">Code Blocks<a class=\"anchor\" href=\"#code-blocks\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>HTML Tag: <code>&#x3C;pre></code></p><p>Indent every line of the block by at least <strong>4 spaces</strong> or <strong>1 tab</strong>.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:27ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This is a normal paragraph:</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">This is a code block.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p>This is a normal paragraph:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:21ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This is a code block.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><hr><p>A code block continues until it reaches a line that is not indented (or the end of the article).</p><p>Within a code block, <strong><em>ampersands (&#x26;)</em></strong> and angle <strong>brackets (&#x3C; and >)</strong> are automatically converted into HTML entities.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:35ch\"><code><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;div class=\"footer\"></span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">&#x26;copy; 2004 Foo Corporation</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;/div></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:31ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;div class=\"footer\"></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">&#x26;copy; 2004 Foo Corporation</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;/div></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><hr><p>Following sections Fenced Code Blocks and Syntax Highlighting are extensions, you can use the other way to write the code block.</p><section><h4 id=\"fenced-code-blocks\">Fenced Code Blocks<a class=\"anchor\" href=\"#fenced-code-blocks\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>Just wrap your code in <code>```</code> (as shown below) and you won’t need to indent it by four spaces.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:61ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">Here's an example:</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">```</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">function test() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">console.log(\"notice the blank line before this function?\");</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">```</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p>Here’s an example:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:61ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">function test() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">  </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">console.log(\"notice the blank line before this function?\");</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><hr></section><section><h4 id=\"syntax-highlighting\">Syntax Highlighting<a class=\"anchor\" href=\"#syntax-highlighting\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>In your fenced block, add an optional language identifier and we’ll run it through syntax highlighting (<a href=\"https://github.com/github/linguist/blob/master/lib/linguist/languages.yml\">Support Languages</a>).</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:40ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">```ruby</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">require 'redcarpet'</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">markdown = Redcarpet.new(\"Hello World!\")</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">puts markdown.to_html</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">```</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"ruby\" class=\"wrap\" style=\"--ecMaxLine:40ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">require</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'redcarpet'</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#AE4B07;--1:#FFAB70\">markdown</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">Redcarpet</span><span style=\"--0:#24292E;--1:#E1E4E8\">.</span><span style=\"--0:#BF3441;--1:#F97583\">new</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Hello World!\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#005CC5;--1:#79B8FF\">puts</span><span style=\"--0:#24292E;--1:#E1E4E8\"> markdown.</span><span style=\"--0:#6F42C1;--1:#B392F0\">to_html</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><hr></section></section><section><h3 id=\"horizontal-rules\">Horizontal Rules<a class=\"anchor\" href=\"#horizontal-rules\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>HTML Tag: <code>&#x3C;hr /></code>\nPlaces <strong>three or more hyphens (-), asterisks (*), or underscores (_)</strong> on a line by themselves. You may use spaces between the hyphens or asterisks.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:39ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">* * *</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">***</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">*****</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">- - -</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">---------------------------------------</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">___</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><hr><hr><hr><hr><hr><hr><hr></section><section><h3 id=\"table\">Table<a class=\"anchor\" href=\"#table\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>HTML Tag: <code>&#x3C;table></code></p><p>It’s an extension.</p><p>Separates column by <strong>pipe (|)</strong> and header by <strong>dashes (-)</strong>, and uses <strong>colon (:)</strong> for alignment.</p><p>The outer <strong>pipes (|)</strong> and alignment are optional. There are <strong>3 delimiters</strong> each cell at least for separating header.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:25ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">| Left | Center | Right |</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">|:-----|:------:|------:|</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">|aaa   |bbb     |ccc    |</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">|ddd   |eee     |fff    |</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:1ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\"> </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">A | B</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">---|---</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">123|456</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">A |B</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">--|--</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">12|45</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"left\">Left</th><th align=\"center\">Center</th><th align=\"right\">Right</th></tr></thead><tbody><tr><td align=\"left\">aaa</td><td align=\"center\">bbb</td><td align=\"right\">ccc</td></tr><tr><td align=\"left\">ddd</td><td align=\"center\">eee</td><td align=\"right\">fff</td></tr></tbody></table>\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>A</th><th>B</th></tr></thead><tbody><tr><td>123</td><td>456</td></tr></tbody></table>\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>A</th><th>B</th></tr></thead><tbody><tr><td>12</td><td>45</td></tr></tbody></table><hr></section></section><section><h2 id=\"span-elements\">Span Elements<a class=\"anchor\" href=\"#span-elements\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"links\">Links<a class=\"anchor\" href=\"#links\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>HTML Tag: <code>&#x3C;a></code></p><p>Markdown supports two style of links: inline and reference.</p><section><h4 id=\"inline\">Inline<a class=\"anchor\" href=\"#inline\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>Inline link format like this: <code>[Link Text](URL \"Title\")</code></p><p>Title is optional.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:62ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This is [an example](http://example.com/ \"Title\") inline link.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[This link](http://example.net/) has no title attribute.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p>This is <a href=\"http://example.com/\" title=\"Title\">an example</a> inline link.</p><p><a href=\"http://example.net/\">This link</a> has no title attribute.</p><hr><p>If you’re referring to a local resource on the same server, you can use relative paths:</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:41ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">See my [About](/about/) page for details.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p>See my <a href=\"/about/\">About</a> page for details.</p><hr></section><section><h4 id=\"reference\">Reference<a class=\"anchor\" href=\"#reference\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>You could predefine link references. Format like this: <code>[id]: URL \"Title\"</code></p><p>Title is also optional. And the you refer the link, format like this: <code>[Link Text][id]</code></p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:48ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[id]: http://example.com/  \"Optional Title Here\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This is [an example][id] reference-style link.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p>This is <a href=\"http://example.com/\" title=\"Optional Title Here\">an example</a> reference-style link.</p><hr><p>That is:</p><ul>\n<li>Square brackets containing the link identifier (<strong>not case sensitive</strong>, optionally indented from the left margin using up to three spaces);</li>\n<li>followed by a colon;</li>\n<li>followed by one or more spaces (or tabs);</li>\n<li>followed by the URL for the link;</li>\n<li>The link URL may, optionally, be surrounded by angle brackets.</li>\n<li>optionally followed by a title attribute for the link, enclosed in double or single quotes, or enclosed in parentheses.</li>\n</ul><p>The following three link definitions are equivalent:</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:51ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[foo]: http://example.com/  \"Optional Title Here\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[foo]: http://example.com/  'Optional Title Here'</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[foo]: http://example.com/  (Optional Title Here)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[foo]: &#x3C;http://example.com/>  \"Optional Title Here\"</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Uses an empty set of square brackets, the link text itself is used as the name.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:28ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[Google]: http://google.com/</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[Google][]</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p><a href=\"http://google.com/\">Google</a></p><hr></section></section><section><h3 id=\"emphasis\">Emphasis<a class=\"anchor\" href=\"#emphasis\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>HTML Tags: <code>&#x3C;em></code>, <code>&#x3C;strong></code></p><p>Markdown treats <strong>asterisks (*)</strong> and <strong>underscores (_)</strong> as indicators of emphasis. <strong>One delimiter</strong> will be <code>&#x3C;em></code>; *<em>double delimiters</em> will be <code>&#x3C;strong></code>.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:22ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">*single asterisks*</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">_single underscores_</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">**double asterisks**</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">__double underscores__</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p><em>single asterisks</em></p><p><em>single underscores</em></p><p><strong>double asterisks</strong></p><p><strong>double underscores</strong></p><hr><p>But if you surround an * or _ with spaces, it’ll be treated as a literal asterisk or underscore.</p><p>You can backslash escape it:</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:48ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">\\*this text is surrounded by literal asterisks\\*</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p>*this text is surrounded by literal asterisks*</p><hr></section><section><h3 id=\"code\">Code<a class=\"anchor\" href=\"#code\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>HTML Tag: <code>&#x3C;code></code></p><p>Wraps it with <strong>backtick quotes (`)</strong>.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:28ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">Use the `printf()` function.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p>Use the <code>printf()</code> function.</p><hr><p>To include a literal backtick character within a code span, you can use <strong>multiple backticks</strong> as the opening and closing delimiters:</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:41ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">``There is a literal backtick (`) here.``</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p><code>There is a literal backtick (`) here.</code></p><hr><p>The backtick delimiters surrounding a code span may include spaces — one after the opening, one before the closing. This allows you to place literal backtick characters at the beginning or end of a code span:</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:55ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">A single backtick in a code span: `` ` ``</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">A backtick-delimited string in a code span: `` `foo` ``</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p>A single backtick in a code span: <code>`</code></p><p>A backtick-delimited string in a code span: <code>`foo`</code></p><hr></section><section><h3 id=\"images\">Images<a class=\"anchor\" href=\"#images\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>HTML Tag: <code>&#x3C;img /></code></p><p>Markdown uses an image syntax that is intended to resemble the syntax for links, allowing for two styles: inline and reference.</p><section><h4 id=\"inline-1\">Inline<a class=\"anchor\" href=\"#inline-1\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>Inline image syntax looks like this: <code>![Alt text](URL \"Title\")</code></p><p>Title is optional.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:46ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">![Alt text](/path/to/img.jpg)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">![Alt text](/path/to/img.jpg \"Optional title\")</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p><img src=\"https://s2.loli.net/2024/08/20/5fszgXeOxmL3Wdv.webp\" alt=\"Alt text\"></p><p><img src=\"https://s2.loli.net/2024/08/20/5fszgXeOxmL3Wdv.webp\" alt=\"Alt text\" title=\"Optional title\"></p><hr><p>That is:</p><ul>\n<li>An exclamation mark: !;</li>\n<li>followed by a set of square brackets, containing the alt attribute text for the image;</li>\n<li>followed by a set of parentheses, containing the URL or path to the image, and an optional title attribute enclosed in double or single quotes.</li>\n</ul></section><section><h4 id=\"reference-1\">Reference<a class=\"anchor\" href=\"#reference-1\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>Reference-style image syntax looks like this: <code>![Alt text][id]</code></p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:89ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[img id]: https://s2.loli.net/2024/08/20/5fszgXeOxmL3Wdv.webp  \"Optional title attribute\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">![Alt text][img id]</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p><img src=\"https://s2.loli.net/2024/08/20/5fszgXeOxmL3Wdv.webp\" alt=\"Alt text\" title=\"Optional title attribute\"></p><hr></section></section><section><h3 id=\"strikethrough\">Strikethrough<a class=\"anchor\" href=\"#strikethrough\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>HTML Tag: <code>&#x3C;del></code></p><p>It’s an extension.</p><p>GFM adds syntax to strikethrough text.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:18ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">~~Mistaken text.~~</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p><del>Mistaken text.</del></p><hr></section></section><section><h2 id=\"miscellaneous\">Miscellaneous<a class=\"anchor\" href=\"#miscellaneous\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"automatic-links\">Automatic Links<a class=\"anchor\" href=\"#automatic-links\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>Markdown supports a shortcut style for creating “automatic” links for URLs and email addresses: simply surround the URL or email address with angle brackets.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:21ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;http://example.com/></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;address@example.com></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p><a href=\"http://example.com/\">http://example.com/</a></p><p><a href=\"mailto:address@example.com\">address@example.com</a></p><hr><p>GFM will autolink standard URLs.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:34ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">https://github.com/emn178/markdown</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p><a href=\"https://github.com/emn178/markdown\">https://github.com/emn178/markdown</a></p><hr></section><section><h3 id=\"backslash-escapes\">Backslash Escapes<a class=\"anchor\" href=\"#backslash-escapes\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>Markdown allows you to use backslash escapes to generate literal characters which would otherwise have special meaning in Markdown’s formatting syntax.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:21ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">\\*literal asterisks\\*</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p>*literal asterisks*</p><hr><p>Markdown provides backslash escapes for the following characters:</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:23ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">\\   backslash</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">`   backtick</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">*   asterisk</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">_   underscore</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">{}  curly braces</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[]  square brackets</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">()  parentheses</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">#   hash mark</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">+   plus sign</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">-   minus sign (hyphen)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">.   dot</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">!   exclamation mark</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section><section><h2 id=\"inline-html\">Inline HTML<a class=\"anchor\" href=\"#inline-html\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>For any markup that is not covered by Markdown’s syntax, you simply use HTML itself. There’s no need to preface it or delimit it to indicate that you’re switching from Markdown to HTML; you just use the tags.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:34ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This is a regular paragraph.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;table></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;tr></span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;td>Foo&#x3C;/td></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;/tr></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;/table></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">This is another regular paragraph.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p>This is a regular paragraph.</p><table>\n    <tbody><tr>\n        <td>Foo</td>\n    </tr>\n</tbody></table><p>This is another regular paragraph.</p><hr><p>Note that Markdown formatting syntax is <strong>not processed within block-level HTML tags</strong>.</p><p>Unlike block-level HTML tags, Markdown syntax is <strong>processed within span-level tags</strong>.</p><p>Code:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:21ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;span>**Work**&#x3C;/span></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;div></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">**No Work**</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">&#x3C;/div></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Preview:</p><hr><p><span><strong>Work</strong></span></p><div>\n  **No Work**\n</div>\n***</section></section>","metadata":{"headings":[{"depth":1,"slug":"markdown-tutorial","text":"Markdown Tutorial#"},{"depth":2,"slug":"block-elements","text":"Block Elements#"},{"depth":3,"slug":"paragraphs-and-line-breaks","text":"Paragraphs and Line Breaks#"},{"depth":4,"slug":"paragraphs","text":"Paragraphs#"},{"depth":4,"slug":"line-breaks","text":"Line Breaks#"},{"depth":3,"slug":"headers","text":"Headers#"},{"depth":4,"slug":"setext","text":"Setext#"},{"depth":1,"slug":"this-is-an-h1","text":"This is an H1#"},{"depth":2,"slug":"this-is-an-h2","text":"This is an H2#"},{"depth":4,"slug":"atx","text":"atx#"},{"depth":1,"slug":"this-is-an-h1-1","text":"This is an H1#"},{"depth":2,"slug":"this-is-an-h2-1","text":"This is an H2#"},{"depth":6,"slug":"this-is-an-h6","text":"This is an H6#"},{"depth":1,"slug":"this-is-an-h1-2","text":"This is an H1#"},{"depth":2,"slug":"this-is-an-h2-2","text":"This is an H2#"},{"depth":3,"slug":"this-is-an-h3","text":"This is an H3#"},{"depth":3,"slug":"blockquotes","text":"Blockquotes#"},{"depth":2,"slug":"this-is-a-header","text":"This is a header.#"},{"depth":3,"slug":"lists","text":"Lists#"},{"depth":4,"slug":"unordered","text":"Unordered#"},{"depth":4,"slug":"ordered","text":"Ordered#"},{"depth":4,"slug":"indented","text":"Indented#"},{"depth":5,"slug":"blockquote","text":"Blockquote#"},{"depth":5,"slug":"code-block","text":"Code Block#"},{"depth":5,"slug":"nested-list","text":"Nested List#"},{"depth":3,"slug":"code-blocks","text":"Code Blocks#"},{"depth":4,"slug":"fenced-code-blocks","text":"Fenced Code Blocks#"},{"depth":4,"slug":"syntax-highlighting","text":"Syntax Highlighting#"},{"depth":3,"slug":"horizontal-rules","text":"Horizontal Rules#"},{"depth":3,"slug":"table","text":"Table#"},{"depth":2,"slug":"span-elements","text":"Span Elements#"},{"depth":3,"slug":"links","text":"Links#"},{"depth":4,"slug":"inline","text":"Inline#"},{"depth":4,"slug":"reference","text":"Reference#"},{"depth":3,"slug":"emphasis","text":"Emphasis#"},{"depth":3,"slug":"code","text":"Code#"},{"depth":3,"slug":"images","text":"Images#"},{"depth":4,"slug":"inline-1","text":"Inline#"},{"depth":4,"slug":"reference-1","text":"Reference#"},{"depth":3,"slug":"strikethrough","text":"Strikethrough#"},{"depth":2,"slug":"miscellaneous","text":"Miscellaneous#"},{"depth":3,"slug":"automatic-links","text":"Automatic Links#"},{"depth":3,"slug":"backslash-escapes","text":"Backslash Escapes#"},{"depth":2,"slug":"inline-html","text":"Inline HTML#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"Markdown Tutorial","published":"2025-01-20T00:00:00.000Z","pinned":true,"description":"A simple example of a Markdown blog post.","tags":["Markdown","Blogging"],"category":"Examples","licenseName":"Unlicensed","author":"emn178","sourceLink":"https://github.com/emn178/markdown","draft":false,"minutes":9,"words":1700,"excerpt":"A markdown example shows how to write a markdown file. This document integrates core syntax and extensions (GMF)."},"imagePaths":[]}},"collection":"posts"}],"2024-01-15":[{"id":"encrypted-post","data":{"title":"Encrypted Post","published":"2024-01-15T00:00:00.000Z","draft":false,"description":"This is an article for testing the page encryption feature","image":"","tags":["Test","Encryption"],"category":"Technology","lang":"","pinned":true,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":true,"password":"123456","permalink":"encrypted-example","prevTitle":"C与指针笔记","prevSlug":"c/c_pointer","nextTitle":"Markdown Tutorial","nextSlug":"markdown-tutorial"},"body":"This blog template is built with [Astro](https://astro.build/). For the things that are not mentioned in this guide, you may find the answers in the [Astro Docs](https://docs.astro.build/).\n\n## Front-matter of Posts\n\n```yaml\n---\ntitle: My First Blog Post\npublished: 2023-09-09\ndescription: This is the first post of my new Astro blog.\nimage: ./cover.jpg\ntags: [Foo, Bar]\ncategory: Front-end\ndraft: false\n---\n```\n\n\n\n\n\n| Attribute     | Description                                                                                                                                                                                                 |\n|---------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| `title`       | The title of the post.                                                                                                                                                                                      |\n| `published`   | The date the post was published.                                                                                                                                                                            |\n| `pinned`      | Whether this post is pinned to the top of the post list.                                                                                                                                                   |\n| `description` | A short description of the post. Displayed on index page.                                                                                                                                                   |\n| `image`       | The cover image path of the post.<br/>1. Start with `http://` or `https://`: Use web image<br/>2. Start with `/`: For image in `public` dir<br/>3. With none of the prefixes: Relative to the markdown file |\n| `tags`        | The tags of the post.                                                                                                                                                                                       |\n| `category`    | The category of the post.                                                                                                                                                                                   |\n| `permalink`   | Custom permalink for the post. The post will be accessible at `/posts/{permalink}/`. Example: `my-special-article` (will be available at `/posts/my-special-article/`)                                   |\n| `licenseName` | The license name for the post content.                                                                                                                                                                      |\n| `author`      | The author of the post.                                                                                                                                                                                     |\n| `sourceLink`  | The source link or reference for the post content.                                                                                                                                                          |\n| `draft`       | If this post is still a draft, which won't be displayed.                                                                                                                                                    |\n\n## Where to Place the Post Files\n\n\n\nYour post files should be placed in `src/content/posts/` directory. You can also create sub-directories to better organize your posts and assets.\n\n```\nsrc/content/posts/\n├── post-1.md\n└── post-2/\n    ├── cover.png\n    └── index.md\n```\n\n## Custom Permalink\n\nYou can set a custom permalink for any post by adding the `permalink` field to the front-matter:\n\n```yaml\n---\ntitle: My Special Article\npublished: 2024-01-15\npermalink: \"my-special-article\"\ntags: [\"Example\"]\ncategory: \"Technology\"\n---\n```\n\nWhen a custom permalink is set:\n- The post will be accessible at the custom URL (e.g., `/posts/my-special-article/`)\n- The default `/posts/{slug}/` URL will still work\n- RSS/Atom feeds will use the custom permalink\n- All internal links will automatically use the custom permalink\n\n**Important Notes:**\n- Permalinks should NOT include `/posts/` prefix (it will be added automatically)\n- Avoid special characters and spaces in permalinks\n- Use lowercase letters and hyphens for best SEO practices\n- Make sure permalinks are unique across all posts\n- Don't include leading or trailing slashes\n\n\n## How It Works\n\n```mermaid\ngraph LR\n    A[User Password] --> B[bcrypt Hash]\n    B --> C[Password Hash]\n    C --> D[Extract First 32 Characters]\n    D --> E[Encryption Key]\n    E --> F[AES Encryption]\n    F --> G[Encrypted Content]\n```","filePath":"src/content/posts/encrypted-post.md","digest":"42e57ce1cde2505e","rendered":{"html":"<p>This blog template is built with <a href=\"https://astro.build/\">Astro</a>. For the things that are not mentioned in this guide, you may find the answers in the <a href=\"https://docs.astro.build/\">Astro Docs</a>.</p>\n<section><h2 id=\"front-matter-of-posts\">Front-matter of Posts<a class=\"anchor\" href=\"#front-matter-of-posts\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"yaml\" class=\"wrap\" style=\"--ecMaxLine:57ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">---</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">title</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">My First Blog Post</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">published</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#005CC5;--1:#79B8FF\">2023-09-09</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">description</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">This is the first post of my new Astro blog.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">image</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">./cover.jpg</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">tags</span><span style=\"--0:#24292E;--1:#E1E4E8\">: [</span><span style=\"--0:#032F62;--1:#9ECBFF\">Foo</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#032F62;--1:#9ECBFF\">Bar</span><span style=\"--0:#24292E;--1:#E1E4E8\">]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">category</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">Front-end</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">draft</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#005CC5;--1:#79B8FF\">false</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">---</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>Attribute</th><th>Description</th></tr></thead><tbody><tr><td><code>title</code></td><td>The title of the post.</td></tr><tr><td><code>published</code></td><td>The date the post was published.</td></tr><tr><td><code>pinned</code></td><td>Whether this post is pinned to the top of the post list.</td></tr><tr><td><code>description</code></td><td>A short description of the post. Displayed on index page.</td></tr><tr><td><code>image</code></td><td>The cover image path of the post.<br>1. Start with <code>http://</code> or <code>https://</code>: Use web image<br>2. Start with <code>/</code>: For image in <code>public</code> dir<br>3. With none of the prefixes: Relative to the markdown file</td></tr><tr><td><code>tags</code></td><td>The tags of the post.</td></tr><tr><td><code>category</code></td><td>The category of the post.</td></tr><tr><td><code>permalink</code></td><td>Custom permalink for the post. The post will be accessible at <code>/posts/{permalink}/</code>. Example: <code>my-special-article</code> (will be available at <code>/posts/my-special-article/</code>)</td></tr><tr><td><code>licenseName</code></td><td>The license name for the post content.</td></tr><tr><td><code>author</code></td><td>The author of the post.</td></tr><tr><td><code>sourceLink</code></td><td>The source link or reference for the post content.</td></tr><tr><td><code>draft</code></td><td>If this post is still a draft, which won’t be displayed.</td></tr></tbody></table></section>\n<section><h2 id=\"where-to-place-the-post-files\">Where to Place the Post Files<a class=\"anchor\" href=\"#where-to-place-the-post-files\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>Your post files should be placed in <code>src/content/posts/</code> directory. You can also create sub-directories to better organize your posts and assets.</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:18ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">src/content/posts/</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">├── post-1.md</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">└── post-2/</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">├── cover.png</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">└── index.md</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>\n<section><h2 id=\"custom-permalink\">Custom Permalink<a class=\"anchor\" href=\"#custom-permalink\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>You can set a custom permalink for any post by adding the <code>permalink</code> field to the front-matter:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"yaml\" class=\"wrap\" style=\"--ecMaxLine:31ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">---</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">title</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">My Special Article</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">published</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#005CC5;--1:#79B8FF\">2024-01-15</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">permalink</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"my-special-article\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">tags</span><span style=\"--0:#24292E;--1:#E1E4E8\">: [</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Example\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">category</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Technology\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">---</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>When a custom permalink is set:</p><ul>\n<li>The post will be accessible at the custom URL (e.g., <code>/posts/my-special-article/</code>)</li>\n<li>The default <code>/posts/{slug}/</code> URL will still work</li>\n<li>RSS/Atom feeds will use the custom permalink</li>\n<li>All internal links will automatically use the custom permalink</li>\n</ul><p><strong>Important Notes:</strong></p><ul>\n<li>Permalinks should NOT include <code>/posts/</code> prefix (it will be added automatically)</li>\n<li>Avoid special characters and spaces in permalinks</li>\n<li>Use lowercase letters and hyphens for best SEO practices</li>\n<li>Make sure permalinks are unique across all posts</li>\n<li>Don’t include leading or trailing slashes</li>\n</ul></section>\n<section><h2 id=\"how-it-works\">How It Works<a class=\"anchor\" href=\"#how-it-works\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"mermaid-diagram-container\"><div class=\"mermaid-wrapper\" id=\"mermaid-s4o7l8\"><div class=\"mermaid\" data-mermaid-code=\"graph LR\n    A[User Password] --> B[bcrypt Hash]\n    B --> C[Password Hash]\n    C --> D[Extract First 32 Characters]\n    D --> E[Encryption Key]\n    E --> F[AES Encryption]\n    F --> G[Encrypted Content]\">graph LR\n    A[User Password] --> B[bcrypt Hash]\n    B --> C[Password Hash]\n    C --> D[Extract First 32 Characters]\n    D --> E[Encryption Key]\n    E --> F[AES Encryption]\n    F --> G[Encrypted Content]</div></div><script type=\"text/javascript\">(() => {\n\t// 单例模式：检查是否已经初始化过\n\tif (window.mermaidInitialized) {\n\t\treturn;\n\t}\n\n\twindow.mermaidInitialized = true;\n\n\t// 记录当前主题状态，避免不必要的重新渲染\n\tlet currentTheme = null;\n\tlet isRendering = false; // 防止并发渲染\n\tlet retryCount = 0;\n\tconst MAX_RETRIES = 3;\n\tconst RETRY_DELAY = 1000; // 1秒\n\n\t// 检查主题是否真的发生了变化\n\tfunction hasThemeChanged() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tconst newTheme = isDark ? \"dark\" : \"default\";\n\n\t\tif (currentTheme !== newTheme) {\n\t\t\tcurrentTheme = newTheme;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t// 等待 Mermaid 库加载完成\n\tfunction waitForMermaid(timeout = 10000) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst startTime = Date.now();\n\n\t\t\tfunction check() {\n\t\t\t\tif (window.mermaid && typeof window.mermaid.initialize === \"function\") {\n\t\t\t\t\tresolve(window.mermaid);\n\t\t\t\t} else if (Date.now() - startTime > timeout) {\n\t\t\t\t\treject(new Error(\"Mermaid library failed to load within timeout\"));\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(check, 100);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcheck();\n\t\t});\n\t}\n\n\t// 设置 MutationObserver 监听 html 元素的 class 属性变化\n\tfunction setupMutationObserver() {\n\t\tconst observer = new MutationObserver((mutations) => {\n\t\t\tmutations.forEach((mutation) => {\n\t\t\t\tif (\n\t\t\t\t\tmutation.type === \"attributes\" &&\n\t\t\t\t\tmutation.attributeName === \"class\"\n\t\t\t\t) {\n\t\t\t\t\t// 检查是否是 dark 类的变化\n\t\t\t\t\tconst target = mutation.target;\n\t\t\t\t\tconst wasDark = mutation.oldValue\n\t\t\t\t\t\t? mutation.oldValue.includes(\"dark\")\n\t\t\t\t\t\t: false;\n\t\t\t\t\tconst isDark = target.classList.contains(\"dark\");\n\n\t\t\t\t\tif (wasDark !== isDark) {\n\t\t\t\t\t\tif (hasThemeChanged()) {\n\t\t\t\t\t\t\t// 延迟渲染，避免主题切换时的闪烁\n\t\t\t\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 150);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// 开始观察 html 元素的 class 属性变化\n\t\tobserver.observe(document.documentElement, {\n\t\t\tattributes: true,\n\t\t\tattributeFilter: [\"class\"],\n\t\t\tattributeOldValue: true,\n\t\t});\n\t}\n\n    // 缩放平移\n    function attachZoomControls(element, svgElement) {\n        if (element.__zoomAttached) return;\n        element.__zoomAttached = true;\n\n        const wrapper = document.createElement('div');\n        wrapper.className = 'mermaid-zoom-wrapper';\n\n        const svgParent = svgElement.parentNode;\n        wrapper.appendChild(svgElement);\n        svgParent.appendChild(wrapper);\n\n        let scale = 1;\n        let tx = 0;\n        let ty = 0;\n        const MIN_SCALE = 0.2;\n        const MAX_SCALE = 6;\n\n        function applyTransform() {\n            wrapper.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`;\n        }\n        const controls = document.createElement('div');\n        controls.className = 'mermaid-zoom-controls';\n        controls.innerHTML = `\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-in\" title=\"Zoom in\">+</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-out\" title=\"Zoom out\">−</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"reset\" title=\"Reset\">⤾</button>\n\t\t`;\n        element.appendChild(controls);\n\n        controls.addEventListener('click', (ev) => {\n            const action = ev.target.getAttribute && ev.target.getAttribute('data-action');\n            if (!action) return;\n\n            switch (action) {\n                case 'zoom-in':\n                    scale = Math.min(MAX_SCALE, +(scale * 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'zoom-out':\n                    scale = Math.max(MIN_SCALE, +(scale / 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'reset':\n                    scale = 1;\n                    tx = 0;\n                    ty = 0;\n                    applyTransform();\n                    break;\n            }\n        });\n\n        let isPanning = false;\n        let startX = 0;\n        let startY = 0;\n        let startTx = 0;\n        let startTy = 0;\n\n        wrapper.style.touchAction = 'none';\n\n        wrapper.addEventListener('pointerdown', (ev) => {\n            if (ev.button !== 0) return; // 仅左键\n            isPanning = true;\n            wrapper.setPointerCapture(ev.pointerId);\n            startX = ev.clientX;\n            startY = ev.clientY;\n            startTx = tx;\n            startTy = ty;\n        });\n\n        wrapper.addEventListener('pointermove', (ev) => {\n            if (!isPanning) return;\n            const dx = ev.clientX - startX;\n            const dy = ev.clientY - startY;\n            tx = startTx + dx / scale; // 根据当前缩放调整灵敏度\n            ty = startTy + dy / scale;\n            applyTransform();\n        });\n\n        wrapper.addEventListener('pointerup', (ev) => {\n            isPanning = false;\n            try {\n                wrapper.releasePointerCapture(ev.pointerId);\n            } catch (e) {\n            }\n        });\n\n        wrapper.addEventListener('pointercancel', () => {\n            isPanning = false;\n        });\n\n        // 鼠标滚轮缩放\n        element.addEventListener('wheel', (ev) => {\n            ev.preventDefault();\n            const delta = -ev.deltaY;\n            const zoomFactor = delta > 0 ? 1.12 : 1 / 1.12;\n            const prevScale = scale;\n            scale = Math.min(MAX_SCALE, Math.max(MIN_SCALE, +(scale * zoomFactor).toFixed(3)));\n\n            const rect = wrapper.getBoundingClientRect();\n            const cx = ev.clientX - rect.left;\n            const cy = ev.clientY - rect.top;\n\n            const worldX = (cx / prevScale) - tx;\n            const worldY = (cy / prevScale) - ty;\n\n            tx = cx / scale - worldX;\n            ty = cy / scale - worldY;\n\n            applyTransform();\n        }, {passive: false});\n\n        // 双击重置\n        wrapper.addEventListener('dblclick', () => {\n            scale = 1;\n            tx = 0;\n            ty = 0;\n            applyTransform();\n        });\n        applyTransform();\n        let resizeTimer = null;\n        window.addEventListener('resize', () => {\n            clearTimeout(resizeTimer);\n            resizeTimer = setTimeout(() => {\n                applyTransform()\n            }, 200);\n        });\n    }\n\n    // 设置其他事件监听器\n\tfunction setupEventListeners() {\n\t\t// 监听页面切换\n\t\tdocument.addEventListener(\"astro:page-load\", () => {\n\t\t\t// 重新初始化主题状态\n\t\t\tcurrentTheme = null;\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t\tif (hasThemeChanged()) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 100);\n\t\t\t}\n\t\t});\n\n\t\t// 监听页面可见性变化，页面重新可见时重新渲染\n\t\tdocument.addEventListener(\"visibilitychange\", () => {\n\t\t\tif (!document.hidden) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 200);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync function initializeMermaid() {\n\t\ttry {\n\t\t\tawait waitForMermaid();\n\n\t\t\t// 初始化 Mermaid 配置\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: \"default\",\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\t// 添加错误处理配置\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 渲染所有 Mermaid 图表\n\t\t\tawait renderMermaidDiagrams();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid:\", error);\n\t\t\t// 如果初始化失败，尝试重新加载\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => initializeMermaid(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function renderMermaidDiagrams() {\n\t\t// 防止并发渲染\n\t\tif (isRendering) {\n\t\t\treturn;\n\t\t}\n\n\t\t// 检查 Mermaid 是否可用\n\t\tif (!window.mermaid || typeof window.mermaid.render !== \"function\") {\n\t\t\tconsole.warn(\"Mermaid not available, skipping render\");\n\t\t\treturn;\n\t\t}\n\n\t\tisRendering = true;\n\n\t\ttry {\n\t\t\tconst mermaidElements = document.querySelectorAll(\n\t\t\t\t\".mermaid[data-mermaid-code]\",\n\t\t\t);\n\n\t\t\tif (mermaidElements.length === 0) {\n\t\t\t\tisRendering = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 延迟检测主题，确保 DOM 已经更新\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 100));\n\n\t\t\tconst htmlElement = document.documentElement;\n\t\t\tconst isDark = htmlElement.classList.contains(\"dark\");\n\t\t\tconst theme = isDark ? \"dark\" : \"default\";\n\n\t\t\t// 更新 Mermaid 主题（只需要更新一次）\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: theme,\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t\t// 强制应用主题变量\n\t\t\t\t\tprimaryColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryTextColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryBorderColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tlineColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tsecondaryColor: isDark ? \"#333333\" : \"#f0f0f0\",\n\t\t\t\t\ttertiaryColor: isDark ? \"#555555\" : \"#e0e0e0\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 批量渲染所有图表，添加重试机制\n\t\t\tconst renderPromises = Array.from(mermaidElements).map(\n\t\t\t\tasync (element, index) => {\n\t\t\t\t\tlet attempts = 0;\n\t\t\t\t\tconst maxAttempts = 3;\n\n\t\t\t\t\twhile (attempts < maxAttempts) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst code = element.getAttribute(\"data-mermaid-code\");\n\n\t\t\t\t\t\t\tif (!code) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 显示加载状态\n\t\t\t\t\t\t\telement.innerHTML =\n\t\t\t\t\t\t\t\t'<div class=\"mermaid-loading\">Rendering diagram...</div>';\n\n\t\t\t\t\t\t\t// 渲染图表\n\t\t\t\t\t\t\tconst { svg } = await window.mermaid.render(\n\t\t\t\t\t\t\t\t`mermaid-${Date.now()}-${index}-${attempts}`,\n\t\t\t\t\t\t\t\tcode,\n\t\t\t\t\t\t\t);\n\n                            const parser = new DOMParser();\n                            const doc = parser.parseFromString(svg, 'image/svg+xml');\n                            const svgElement = doc.documentElement;\n\n                            element.innerHTML = '';\n                            element.__zoomAttached = false;\n                            element.appendChild(svgElement);\n\n                            // 添加响应式支持\n                            const insertedSvg = element.querySelector('svg');\n                            if (insertedSvg) {\n                                insertedSvg.setAttribute('width', '100%');\n                                insertedSvg.removeAttribute('height');\n                                insertedSvg.style.maxWidth = '100%';\n                                insertedSvg.style.height = 'auto';\n                                //Todo 需要根据实际情况\n                                insertedSvg.style.minHeight = \"300px\";\n\n\t\t\t\t\t\t\t\t// 强制应用样式\n\t\t\t\t\t\t\t\tif (isDark) {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"brightness(0.9) contrast(1.1)\";\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"none\";\n\t\t\t\t\t\t\t\t}\n                                attachZoomControls(element, insertedSvg);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 渲染成功，跳出重试循环\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tattempts++;\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`Mermaid rendering attempt ${attempts} failed for element ${index}:`,\n\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif (attempts >= maxAttempts) {\n\t\t\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t\t\t`Failed to render Mermaid diagram after ${maxAttempts} attempts:`,\n\t\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\telement.innerHTML = `\n\t\t\t\t\t\t\t\t\t<div class=\"mermaid-error\">\n\t\t\t\t\t\t\t\t\t\t<p>Failed to render diagram after ${maxAttempts} attempts.</p>\n\t\t\t\t\t\t\t\t\t\t<button onclick=\"location.reload()\" style=\"margin-top: 8px; padding: 4px 8px; background: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer;\">\n\t\t\t\t\t\t\t\t\t\t\tRetry Page\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// 等待一段时间后重试\n\t\t\t\t\t\t\t\tawait new Promise((resolve) =>\n\t\t\t\t\t\t\t\t\tsetTimeout(resolve, 500 * attempts),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\n\t\t\t// 等待所有渲染完成\n\t\t\tawait Promise.all(renderPromises);\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error in renderMermaidDiagrams:\", error);\n\n\t\t\t// 如果渲染失败，尝试重新渲染\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t} finally {\n\t\t\tisRendering = false;\n\t\t}\n\t}\n\n\t// 初始化主题状态\n\tfunction initializeThemeState() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tcurrentTheme = isDark ? \"dark\" : \"default\";\n\t}\n\n\t// 加载 Mermaid 库\n\tasync function loadMermaid() {\n\t\tif (typeof window.mermaid !== \"undefined\") {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst script = document.createElement(\"script\");\n\t\t\tscript.src =\n\t\t\t\t\"https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\tscript.onload = () => {\n\t\t\t\tconsole.log(\"Mermaid library loaded successfully\");\n\t\t\t\tresolve();\n\t\t\t};\n\n\t\t\tscript.onerror = (error) => {\n\t\t\t\tconsole.error(\"Failed to load Mermaid library:\", error);\n\t\t\t\t// 尝试备用 CDN\n\t\t\t\tconst fallbackScript = document.createElement(\"script\");\n\t\t\t\tfallbackScript.src = \"https://unpkg.com/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\t\tfallbackScript.onload = () => {\n\t\t\t\t\tconsole.log(\"Mermaid library loaded from fallback CDN\");\n\t\t\t\t\tresolve();\n\t\t\t\t};\n\n\t\t\t\tfallbackScript.onerror = () => {\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t\"Failed to load Mermaid from both primary and fallback CDNs\",\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tdocument.head.appendChild(fallbackScript);\n\t\t\t};\n\n\t\t\tdocument.head.appendChild(script);\n\t\t});\n\t}\n\n\t// 主初始化函数\n\tasync function initialize() {\n\t\ttry {\n\t\t\t// 设置监听器\n\t\t\tsetupMutationObserver();\n\t\t\tsetupEventListeners();\n\n\t\t\t// 初始化主题状态\n\t\t\tinitializeThemeState();\n\n\t\t\t// 加载并初始化 Mermaid\n\t\t\tawait loadMermaid();\n\t\t\tawait initializeMermaid();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid system:\", error);\n\t\t}\n\t}\n\n\t// 启动初始化\n\tif (document.readyState === \"loading\") {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", initialize);\n\t} else {\n\t\tinitialize();\n\t}\n})();\n\x3C/script></div></section>","metadata":{"headings":[{"depth":2,"slug":"front-matter-of-posts","text":"Front-matter of Posts#"},{"depth":2,"slug":"where-to-place-the-post-files","text":"Where to Place the Post Files#"},{"depth":2,"slug":"custom-permalink","text":"Custom Permalink#"},{"depth":2,"slug":"how-it-works","text":"How It Works#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"Encrypted Post","published":"2024-01-15T00:00:00.000Z","description":"This is an article for testing the page encryption feature","encrypted":true,"pinned":true,"password":"123456","permalink":"encrypted-example","tags":["Test","Encryption"],"category":"Technology","minutes":2,"words":336,"excerpt":"This blog template is built with Astro. For the things that are not mentioned in this guide, you may find the answers in the Astro Docs."},"imagePaths":[]}},"collection":"posts"}],"2025-09-21":[{"id":"c/c_pointer","data":{"title":"C与指针笔记","published":"2025-09-21T00:00:00.000Z","draft":false,"description":"我去是C语言大佬!?","image":"./cover.jpg","tags":["c","language","programming","code"],"category":"C","lang":"","pinned":false,"author":"Akeboshi Himari","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"Useful FFmpeg commands","prevSlug":"ffmepg_related","nextTitle":"Encrypted Post","nextSlug":"encrypted-post"},"body":"<h1><center>快速上手</center></h1>\n\n-----------\n\n## 1.1.1 空白和注释\n\n1. 遵守一些规定会让C语言代码变得更加容易阅读和修改\n2. 注释告诉读者程序能做些什么\n3. 使用#if和#endif预处理有效地将代码从程序中去除\n\n~~~\n#if 0       //条件(真执行，假不执行)\n    statements\n#endif\n~~~\n\n## 1.1.2 预处理指令\n\n~~~\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#define MAX_COLS 20\n#define MAX_INPUT 1000 \n~~~\n\n| 这五行被称为预处理指令，因为它们是由预处理器解释的。\n\n~~~\nint read_column_numbers(int columns[], int max);\nvoid rearrange(char *output, char const *input,\n                int n_columns, int const columns[]);\n~~~\n\n| 这些声明被称为**函数原型(function prototype)**。它告诉编译器这些以后将在源文件中定义的函数的特征。\n\n## 1.1.3 main函数\n\n**每个C程序都必须有一个main函数，因为它是程序执行的起点。**\n\n<code>n_columns = read_column_numbers(columns,MAX_COLS);</code>\n\n> 这条语句调用函数read_column_numbers。数组columns和MAX_COLS代表的常量20作为参数传递给这个函数。在C语言中，数组参数是以 **引用(reference)** 传递的，也就是传址调用，而标量和常量则是按 **值(value)** 传递的。\n\n## 1.1.4 关于scanf的格式代码\n\n常用的scanf格式代码除了`%c,%s`以外在输入值前的空白都会被省略。所以在使用scanf函数中的格式代码%c,%s输入时不能在输入值前有空格、换行和tab\n\n<h1><center>基本概念</center></h1>\n\n-------\n\n## 2.1 环境\n\n在ANSI C的任何一种实现中存在两种不同的环境\n</br>\n一种是**翻译环境(translation environment)**，在这个环境源代码被转换为可执行的机器指令。\n</br>\n一种是**执行环境(execution environment)**，用于实际执行代码\n\n## 2.1.1 翻译\n\n翻译过程：编辑源文件->对源文件进行编译->对编译好的目标文件和链接器捆绑到一起->形成可执行程序\n</br>\n编译过程： **预处理器(preprocessor)** 处理-> **源代码解析(parse)** 处理->产生目标代码( **优化器(optimizer)** 会对目标代码进一步处理)\n\n## 2.1.2 执行\n\n程序必须载入到内存中(具有操作系统由操作系统执行)，无操作系统时必须手动载入\n\n------------\n\n在 C 语言的翻译过程中，通常的顺序是：\n\n预处理（Preprocessing）：\n这一步会处理所有的宏定义（#define）、头文件包含（#include）以及条件编译（#if）等指令。预处理器生成一个扩展后的 C 代码，这个阶段的产物是一个没有预处理指令的纯 C 源代码。\n\n编译（Compilation）：\n在这一阶段，编译器将预处理后的 C 代码转换成汇编语言代码。编译器主要做语法分析、语义分析、优化等工作。最终生成的是与特定平台相关的汇编代码文件（通常以 .s 为后缀）。\n\n汇编（Assembly）：\n汇编器将编译生成的汇编代码转换成机器码，生成目标文件（通常以 .o 或 .obj 为后缀）。目标文件包含机器指令，但没有完整的可执行程序所需的所有内容。\n\n链接（Linking）：\n链接器将多个目标文件和库文件合并，解决符号（如函数和变量的地址）之间的依赖关系，最终生成可执行文件（如 .exe 或没有后缀的文件）。如果有外部库函数或其他目标文件，链接器会将它们合并成一个完整的可执行程序。\n\n总结起来，C 语言的翻译过程是：\n\n预处理\n\n编译（生成汇编代码）\n\n汇编（生成目标文件）\n\n链接（生成可执行文件）\n\n所以，是先编译再汇编，然后通过汇编生成目标文件，最后由链接器生成可执行程序。\n\n-----\n\n## 2.2 词法规则\n\n词法规则就是**标记(token)**\n\n## 2.2.1 字符\n\n使用**转义序列(escape sequence)**和**字符转义(character escape)** 对上下文环境中特定字符表示\n\n常见的有`\\? \\\" \\' \\\\`和`\\a \\b \\f \\n \\r \\t \\v`\n\n用于表示八进制和十六进制的转义符有\n`\\ddd \\xddd`\n\n## 2.2.2 注释\n\n注意跨越多行的注释\n\n## 2.2.3 自由形式的源代码\n\nc格式相对自由，相邻的标记之间有一个或多个空白\n\n## 2.2.4 标识符(identifier)\n\n标识符就是变量、函数、类型等的名字，由大小写字母、数字和下划线组成，不能以数字开头。有**32**个关键字\n\n## 2.2.5 程序的形式\n\n一个C程序的源文件应该包含一组相关的函数，这是C程序较为合理的组织形式。\n\n-------\n\n## 2.3 程序风格\n\nC 语言程序风格（Coding Style）是指在编写 C 语言代码时，为了提高可读性、可维护性和可扩展性而遵循的一些规范和约定。良好的程序风格可以让代码更加清晰，减少错误，并便于团队协作。以下是一些常见的 C 语言编程风格规范：\n\n### 1. 代码缩进\n\n使用统一的缩进风格。常见的缩进方法有**空格缩进**（通常是 4 个空格）和 **制表符缩进**（Tab 键）。\n\n推荐： 一般来说，现代 C 编程习惯推荐使用 4 个空格进行缩进，避免混用空格和制表符。\n\n~~~\nint main(){\n    if(condition){\n        // statements\n    }\n}\n~~~\n\n### 2. 大括号风格\n\nK&R风格（Kernighan & Ritchie）和 Allman风格 是常见的大括号样式。建议选择一致的风格。\n\n推荐： K&R 风格通常更简洁，常用于 C 语言。即大括号 \"{}\" 在同一行。\n\n示例（K&R 风格）：\n\n~~~\nif(condition){\n    // 代码块\n} else {\n    // 代码块\n}\n~~~\n\n### 3.命名规范\n\n变量、函数、宏、结构体等命名应有一致性，且能清楚地表达含义。\n\n推荐：\n\n变量使用小写字母，单词之间用下划线分隔，如 int total_count;。\n\n函数使用小写字母，多个单词之间使用下划线分隔，如 int calculate_area(int width, int height);。\n\n宏常量使用全大写字母，单词之间用下划线分隔，如 #define MAX_BUFFER_SIZE 1024。\n\n结构体和 类型常使用大写开头的驼峰式命名，如 typedef struct Student Student;。\n\n## 2.4 总结\n\n- 一个C程序的代码保存在一个或多个源文件中，但一个函数只能完整地出现在同一个源文件中。把相关函数放在同一个文件内是一种好策略。\n-\n\n<h1><center>数据</center></h1>\n\n------\n\n## 3.1 基本数据类型\n\n- 在C语言中，只有四种基本数据类型：**整形、浮点型、指针和聚合类型(数组和结构)**\n\n> 字符型是整型的一种\n\n## 3.1.1 整型家族\n\n分为字符型、短整型、整型和长整型，且分为有符号(signed)和无符号(unsigned)\n\n- **长整型至少应该和整型一样长，整型至少应该和短整型一样长。**\n- 如果显示地把变量声明为signed或unsigned可以提高这类程序的可移植性。\n\n1.整型字面值\n\n**字面值(literal)** 这个术语是字面值常量的缩写————这是一种实体，指定了自身的值并且不允许发生改变。所以ANSI C允许 **命名常量const**\n\n在整数值后面添加l或L将整数解释为长整型值、u或U将数值指定为unsigned整型值。ul和UL就是这两个的结合\n\n对于多字节字符如果一个多字节字符常量的前面有一个L那么它就是**宽字符常量(wide character literal)**如：\n`L'X' L'e^'`\n\n不管采用何种字符集，使用字符常量所产生的总是正确的值，所以字符常量能提高程序的可移植性\n\n2.枚举类型\n\n**枚举(enumerated)类型**就是指它的值为符号常量而不是字面值的类型\n\n~~~\nenum Jar_Type { CUP, PINT, QUART, HALF_GALLON, GALLON}; //声明了一个enum类型称为Jar_Type\nenum { CUP, PINT, QUART, HALF_GALLON, GALLON} milk_jug,gas_can; // 匿名枚举类型并直接定义枚举类型变量 milk_jug,gas_can\nenum Jar_Type { CUP = 8, PINT = 10, QUART = 11, HALF_GALLON, GALLON};\n// 根据enum赋值规律，HALF_GALLON的值为12，GALLON为13\n~~~\n\n## 3.1.2 浮点类型\n\n浮点数字面值在缺省情况下都是double类型的，后跟L为long double，跟F为float\n\n## 3.1.3 指针\n\n1. 指针常量\n\n指针常量只能通过已分配的内存的元素得知。</br>\n因此，把指针常量表达为数值字面值的形式几乎没有用处。\n\n2. 字符串常量\n\n可以把字符串常量赋值给一个指向字符类型的数组char* </br>\n不能把字符串常量赋值给一个字符数组char[]\n\n## 3.2 基本声明\n\n变量声明的基本形式是：`说明符(一个或多个) 声明表达式列表`\n\n`int* a,b,c和int *a,*b,*c`是在声明指针时非常容易搞混的两个概念，为避免概念上的错误建议将*号写在靠近变量名那一侧\n\n## 3.2.4 隐式声明\n\n一条语句实际上是一个声明时，如果它缺少类型名，编译器会假定它为整型\n> 依赖隐式声明不是一个好主意\n\n## 3.3 typedef\n\ntypedef 为数据类型定义新名字\n\n~~~\nchar *ptr_to_char; 是一个指向字符的指针\n在添加关键字typedef后\ntypedef char* ptr_to_char;\n这个声明把标识符ptr_to_char 作为指向字符的指针类型的新名字\nptr_to_char a; 声明a是一个指向字符的指针\n~~~\n\n- 在定义函数指针或指向数组的指针时使用typedef更为合适。\n\n## 3.4 常量\n\n对于普通的数据类型来说\n`int const a; 和 const int a;`没有什么区别，因为对于整型只有值会变成常量\n\n但是对于指针来说有两种东西可能成为常量：‘**指针变量**’和‘**指针所指向的实体**’\n\n~~~\nint *pi; 是一个普通的指向整型的指针\n而\nint const *pci;\n则是一个指向整型常量的指针，可以修改指针的值但不能修改它所指向的值\n相比之下\nint *const pci; \n则是一个指向整型的常量指针。此时指针是常量，它的值无法修改，但是可以修改它所指向的整型的值。\n~~~\n\n-----\n\n在 C 语言中，“指向整型的常量指针”和“指向常量整型的指针”是两个非常常见的概念，它们在语法和使用上有所不同。下面我会分别讲解这两者的含义：\n\n1. 指向整型常量的指针（`const int *ptr` 或 `int const *ptr`）\n这种指针类型表示 指针指向的数据是常量，即指针指向的 整型数据不可修改，但是指针本身可以修改，使其指向不同的地址。\n\n~~~\nint a = 10;\nint b = 20;\nint const *ptr = &a; // 或者 const int *ptr = &a;\n*ptr = 15; // 错误，不能修改指向的数据\nptr = &b; // 正确，指针本身可以修改\n~~~\n\n2. 指向整型的常量指针（int *const ptr）\n这种指针类型表示 指针本身是常量，即指针的值（即它指向的地址）不可修改，但是指针指向的 整型数据 是可以修改的。\n\n~~~\nint a = 10;\nint b = 20;\nint *const ptr = &a; *ptr = 15; // OK，指向的值可以修改\nptr = &b; // 错误，不能修改指针的地址(指针本身是常量)\n~~~\n\n3. 两者结合使用（const int*const ptr 或 int const* const ptr）\n如果同时声明指针是常量且指向的数据是常量，那么就变成了“常量指针指向常量数据”。\n\n~~~\nint a = 10;\nconst int* const ptr = &a;\n\n*ptr = 15;  // 错误！不能修改指向的数据\nptr = &b;   // 错误！不能修改指针本身\n~~~\n\n## 3.5 作用域(scope)\n\n## 3.5.1 代码块作用域\n\n特殊情况类似内层代码和外层代码拥有同一个标识符名字内层的标识符会隐藏外层的标识符\n> 应该避免在嵌套的代码块中出现相同的变量名\n\n## 3.6 链接属性\n\n链接属性一共有三种：**external(外部)、internal(内部)和none(无)**\n\n1. 外部链接（External Linkage）\n具有外部链接的符号可以在整个程序的多个翻译单元中访问。它意味着符号可以在一个文件中声明，并在其他文件中定义或使用。\n\n全局变量：如果在一个文件中声明了全局变量，并在其他文件中引用该变量，它会具有外部链接。\n\n外部函数：同样地，外部函数可以在一个文件中定义，并在其他文件中调用。\n\n示例：\n\n~~~\n// file1.c \n#include <stdio.h>\n\nint global_var = 10; // 外部链接\nvoid func()\n{\n    printf(\"Hello World!\\n\");\n}\n\n// file2.c \nextern int global_var; //声明具有外部链接的变量\nextern void func(); // 声明外部函数\n\nint main()\n{\n    func();\n    printf(\"Global variable: %d\\n\",global_var);\n    return 0;\n}\n~~~\n\n- `global_var`和`func()`都具有外部链接，可以在file2.c中访问\n\n2. 内部链接（Internal Linkage）\n具有内部链接的符号只能在同一翻译单元（即同一源文件及其包含的头文件）中访问。它们不能跨文件使用。\n\nstatic 关键字：使用 static 关键字声明的变量或函数具有内部链接。它意味着该符号的作用域仅限于当前源文件。\n\n示例：\n\n~~~\n// file1.c \n#include <stdio.h>\nstatic int internal_var = 10; // 内部链接，只能在file1.c中使用\nstatic void internal_func(){\n    // 内部链接，只能在file1.c中调用\n    printf(\"This is an internal function\\n\");\n}\n\nint main()\n{\n    internal_func();\n    printf(\"Internal variable: %d\\n\",internal_var);\n    return 0;\n}\n\n// file2.c \nextern void internal_func(); // 无法调用，因为internal_func在file1.c中是静态的\nextern int internal_var; // 无法访问，因为internal_var是静态的\n~~~\n\n- `internal_var`和`internal_func()`只能在file1.c中使用，其他文件无法访问它们\n\n3. 无链接（No Linkage）\n没有链接的符号意味着它们在某个特定范围内是唯一的，通常这些符号仅限于局部作用域。局部变量和函数的参数一般都是无链接的。\n\n局部变量：它们的作用域仅限于函数内部，其他函数无法访问。\n\n示例：\n\n~~~\nvoid func() {\n    int local_var = 10;  // 无链接，仅在func内部有效\n    printf(\"Local variable: %d\\n\", local_var);\n}\n\nint main() {\n    func();\n    // 下面的代码会导致错误，因为local_var在main函数外不可见\n    // printf(\"Local variable in func: %d\\n\", local_var);\n    return 0;\n}\n~~~\n\n- `local_var`只能在`func()`内部使用，其他地方无法访问\n\n总结：\n\n**外部链接（External Linkage）**：符号可以在多个翻译单元（源文件）之间共享。通过 `extern` 关键字进行声明。\n\n**内部链接（Internal Linkage）**：符号仅在当前源文件内有效，不能跨文件访问。通过 `static` 关键字来定义。\n\n**无链接（No Linkage）**：符号仅在局部作用域内有效，通常用于函数参数和局部变量。\n\n~~~\nstatic int i;\nint func()\n{\n    int j;\n    extern int k;\n    extern int i; \n}\n~~~\n\n- 当`extern`关键字用于源文件中一个标识符的第一次声明时，它指定该标识符具有external链接属性。但是如上面所示在int i一开始声明了static后并不会在func内部修改extern int i为external链接属性\n\n## 3.7 存储类型\n\n有三个地方可以用于存储变量：普通内存、运行时堆栈、硬件寄存器。\n\n- 凡是在任何代码块之外的声明的变量总是存储于静态内存中，也就是不属于堆栈的内存，这类变量称为静态(static)变量\n- 在代码块内部声明的变量的缺省存储类型是自动的(automatic)，也就是说它存储于堆栈中，称为自动(auto)变量\n- 对于在代码块内部声明的变量如果给它加上关键字static，可以使它的存储类型从自动变为静态。函数的形参不能声明为静态，因为实参总是在堆栈中传递给函数\n- 关键字register可以用于自动变量的声明，声明变量应该存储于机器的硬件寄存器而不是内存\n\n**初始化**\n\n- (P44)自动变量初始化和静态变量初始化存在一个重要的差别。\n\n> 在静态变量初始化中我们可以把可执行程序想要初始化的值放在当程序执行时变量将会使用的位置。\n\n> 自动变量的初始化需要更多的开销,因为当程序链接时还无法判断自动变量的存储位置，事实上函数的局部变量在函数的每次调用时都可能占据不同的位置\n\n>**自动变量的初始化较之赋值语句效率并无提高**，除了声明为`const`的变量之外这两者只有风格之差，并无效率之别。\n\n> 优点是由于初始化在运行时执行因此可以用任何表达式作为初始化值，例如：\n\n~~~\nint\nfunc(int a)\n{\n    int b = a + 2;\n}\n~~~\n\n> 最后一个后果是除非对自动变量进行显式的初始化，否则当自动变量创建时，它们的值总是垃圾。\n\n## 3.8 static关键字\n\n当用于函数定义时，或者用于代码块之外的变量声明时，static关键字用于修改标识符的连接属性(从external 改为 internal)，但标识符的存储类型和作用域不受影响。\n\n用于代码块内部的变量声明时static关键字用于修改变量的存储类型，从自动变量改为静态变量，但变量的链接属性和作用域不受影响。\n\n## 3.10 总结\n\n- 具有external链接属性的实体总是具有静态存储类型\n- 如果一个变量声明于代码块内部，在它前面添加extern关键字将使它所引用的是全局变量而不是局部变量。\n\n<h1><center>语句</center></h1>\n\n----\n\n## 4.1 空语句\n\n`;`空语句本身不执行任何任务\n\n## 4.2 表达式语句\n\n只要在表达式后面加上一个分号，就可以把表达式转变为语句\n\n~~~\nx = y + 3;\nch = getchar();\n~~~\n\n是表达式语句\n\n> 类似于printf函数这类没有返回值的函数在标准输出中输出内容的作用称为副作用(side effect)\n\n## 4.3 代码块\n\n- 一对花括号之内的可选的声明和语句列表\n\n~~~\n{\n    declarations\n    statements\n}\n~~~\n\n## 4.4 if语句\n\n- C 并不具备布尔类型而是用整型来替代\n- else语句从属于最靠近它的不完整的if语句\n\n## 4.5 while语句\n\n..............\n\n## 4.9 goto语句\n\n`goto 语句标签;`\n\n1. 资源清理和错误处理(C中没有异常机制)\n\n~~~\n#include <stdio.h>\n#include <stdlib.h>\n\nint func()\n{\n    int *p = malloc(100);\n    if(!p) goto fail;\n    \n    FILE *fp = fopen(\"file.txt\",\"r\");\n    if(!fp) goto cleanup;\n    \n    // 正常执行逻辑\n    fclose(fp);\n    free(p);\n    return 0;\ncleanup:\n    free(p);\nfail:\n    return -1;\n}\n~~~\n\n2. 从多层嵌套中快速跳出\n\n~~~\nfor (int i = 0; i < 5; ++i) {\n    for (int j = 0; j < 5; ++j) {\n        if (i + j == 6) goto done;\n    }\n}\ndone:\nprintf(\"Exited nested loops\\n\");\n~~~\n\ngoto 是 C 的原始控制流工具，能**跳到代码中的任意标签**；\n\n不推荐**滥用**，但在特定情况下（如资源清理、退出多层嵌套）是非常有效的；\n\n如果你在写**可读性强、模块化的现代代码**，能不用就尽量不用；\n\n如果你在写**驱动、内核、嵌入式或老式 C 代码**，合理使用是完全 OK 的。\n\n## 4.10 总结\n\n<h1><center>操作符和表达式</center></h1>\n\n## 5.1 运算符\n\n- 算数运算符(右结合)\n\n`+ - * / %`除了`%`其他的操作符都适用于整型和浮点型\n\n- 移位操作符(右结合)\n\n`<< >>`左移和右移操作符\n左移右边多出来填充0，右移左边多出来填充0或1(具体看是逻辑运算还是算数运算（符号位1填1，符号位0填0）)\n> `a << -5`左移-5位是什么意思其实不重要，结果是由编译器决定的，且其结果无意义，不能在程序中出现这种情况\n\n- 位操作符(右结合)\n\n`& | ^`分别执行与或和异或操作\n\n或操作符与左移操作符结合：\n\n~~~\nint value = 0b00001010;\nint bit_number = 1;\nvalue = value | (1 << bit_number);\n// 即 value = 0b00001010 | ob00000010 = 0b00001010 （值没有发生改变）\nbit_number = 2;\nvalue = value | (1 << bit_number);\n// 即：value = 0b00001010 | 0b00000100 = 0b00001110 （值变成 14）\n~~~\n\n- 赋值符和复合赋值符(左结合)\n\n可以用复合赋值符改写上面的操作\n\n~~~\nvalue |= 1 << bit_number;\nvalue &= 1 << bit_number;\n~~~\n\n- 单目运算符(左结合)\n\n`~`操作符对二进制数进行求补操作，操作数原为1则为0，原为 0则为1\n\n`&`操作符为取址符\n\n`*`间接访问操作符\n\n`sizeof()`判断操作数类型长度\n\n<h1><center>指针</center></h1>\n\n## 6.1 内存和地址\n\n我们对两件事情感兴趣：\n\n- 内存中的每个位置由一个独一无二的地址标识：\n- 内存中的每个位置都包含一个值：\n\n>名字与内存位置之间的关联并不是硬件提供的，而是由编译器为我们实现的。\n\n**硬件仍然通过地址访问内存位置。**\n\n## 6.2 值和类型\n\n- **不能简单地通过检查一个值的位来判断它的类型。**\n\n~~~\nint a = 112;\nfloat b = 3.14;\nint *c = &a;\nint *d = &b;\n~~~\n\n在这上面变量a被解释为整型值，但b存储的为浮点值，在内存中却可能被解释为整型值，变成一个非常大的整型值。由于解释方法不同有可能被解释为整数`1078523331`。\n> 大部分情况编译器会帮助我们避免这些错误。当程序访问时编译器就会产生浮点型指令。\n\n## 6.3 指针变量的内容\n\n上面的变量c和d为指针，指针初始化是用`&`操作符完成的，该操作数用于产生操作数的内存地址。\n\n区分变量c、d的地址和c、d存储的内容是非常重要的。c、d存储的内容为a、b的地址，c、d的地址为变量自身在内存中的地址。\n\n## 6.4 间接访问操作符\n\n`*`操作符执行**间接访问(idirection)** 或 **解引用(dereferencing the pointer)**。\n\n## 6.5 未初始化和非法的指针\n\n~~~\nint *a;\n*a = 12;\n~~~\n\n> a指向了哪里，我们声明了这个变量但是未对他进行初始化，所以没有办法预测12这个值将存储于什么地方。\n>> *无论是哪种情况声明一个指向整型的指针都不会“创建”用于存储整型值的内存空间。*\n>\n> 所以程序执行这个赋值操作，有可能：\n>\n> **1.** a的初始值会是个非法地址，这样赋值语句将会出错，从而终止程序。在UNIX系统上这个错误被称为 *“段违例”(segmentation violation)* 或 *内存错误(memory fault)*。它提示程序试图访问一个并未分配给程序的内存空间。\n>\n> **2.** 对于那些要求整数必须存储于特定边界的机器而言，如果这种类型的数据在内存中的存储地址处于错误的边界上，那么对这个地址进行访问时将会产生一个错误。这个错误在UNIX系统中被称为 *总线错误(bus error)* 。\n>\n> **3.** 一种更为严重的情况是，这个指针偶尔可能包含了一个合法的地址。接下来的事情很简单：**位于那个位置的值被修改！**\n>\n## 6.6 NULL指针\n\n要使一个指针变量为NULL可以给它赋一个零值。\n> p96 NULL指针用法\n\n- 对一个NULL指针解引用是非法的，因为NULL指针没有指向任何东西。\n\n## 6.7 指针、间接访问和左值\n\n~~~\nint a;\nint *d = &a;\n\n*d = 10 - *d;       // 1.正确\nd = 10 - *d;        // 2.错误\n~~~\n\n第一条语句包含了两个间接操作。右边的间接访问作为右值使用，所以它的值d所指向的位置所存储的值(a的值)。左边的间接访问作为左值使用，所以d所指向的位置a把赋值符右边的表达式的计算结果作为它的新值。\n\n第二条语句是非法的，因为它表示把一个整型变量(10 - *d)存储于一个指针变量中，当实际使用的变量类型和应该使用的变量类型不一致时，编译器会发出警告。\n\n## 6.8 指针、间接变量和变量\n\n`*&a = 25` 和 `a = 25`的效力是相同的，但是它涉及更多的操作，且这种写法会使得代码可读性更差。\n\n## 6.9 指针常量\n\n如果变量a存储于位置100\n\n`*100 = 25;`看上去像是把25赋值给a，但是这是错的！因为字面值100的类型是整型而不是指针类型表达式，如果想把25存储于位置100必须使用强制类型转换。\n\n`*(int *)100 = 25;`这种写法合法，但是需要使用这种技巧的地方几乎碰不到！因为*在编译器执行前无法确定变量会存储在内存的什么位置。*\n\n## 6.10 指针的指针\n\n```\nint a = 12;\nint *b = &a;\nint **c = &b;\n```\n\n`*`操作符具有从右向左的结合性，表达式`**c`的类型是int，它是指针的指针。`*c`访问c所指向的位置，我们知道这是变量b。\n\n|表达式|相当的表达式|\n|:---:|:---:|\n|a|12|\n|b|&a|\n|*b|a,12|\n|c|&b|\n|*c|b,&a|\n|**c|*b,a,12|\n\n## 6.11 指针表达式\n\n符号优先级：() > ++ > * > -\n\n- 分析几个重要的指针表达式\n\n~~~\nchar ch = 'a';\nchar * cp = &ch;\n~~~\n\n1. `*cp + 1`\n2. `*(cp + 1)`\n3. `++cp`\n4. `cp++`\n5. `*++cp`\n6. `*cp++`\n7. `++*cp`\n8. `(*cp)++`\n9. `++*++cp`\n10. `++*cp++`\n\n- `*cp + 1`\n先执行间接访问操作得到它的值，后取得这个值的**副本**执行与1相加的操作。表达式最终结果为字符'b'。该表达式最终结果的存储位置并未清晰定义，所以不是一个合法左值。\n- `*(cp + 1)`\n指针加法运算的结果是一个右值，之后对这个右值进行间接访问操作后可以将其作为左值使用，尽管`cp + 1`本身并不是左值。\n\n> **间接访问操作符是少数几个其结果为左值的操作符之一。**\n\n- `++cp`和`cp++`唯一区别是这两个表达式的返回值一个是cp + 1的副本，一个是cp的副本。且这两个表达式都不是合法的左值。\n- `*cp++`和`*++cp`与不加间接访问操作的上面两个式子不同。右值为`ch + 1` 或 `ch`那个**内存地址的值**，左值为**那个位置本身**(作为变量使用)。\n- `++*cp`与上式不同，由于`*`和`++`操作符都是左结合性，首先执行间接访问操作，然后cp所指向的位置的值加一，表达式结果是这个增值后的值的一个副本。\n- `(*cp)++`是原本cp增值前的原先值，和`ch++`操作相同\n- `++*++cp`先执行`*++cp`后执行`++*++cp`，结果为`*++cp`自增后的拷贝。\n- `++*cp++`和上式的唯一区别是`*++cp`和`*cp++`的区别。\n\n## 6.12 实例\n\n程序6.1：字符串的长度\n\n~~~\n#include <stdlib.h>\nsize_t\nstrlen(char *string)\n{\n    int     length = 0;\n    while(*string++ != '\\0')\n        length += 1;\n    return length;\n}\n~~~\n\n程序6.2：在一组字符串中查找指定的字符(版本1)\n\n~~~\n#include <stdio.h>\n#define     TRUE    1\n#define     FALSE   0\n\nint\nfind_char(char **strings, char value)\n{\n    char* string;\n    // 未初始化的字符串类型\n    \n    // 对于列表中的每个字符串\n    \n    while( (string = *strings++) != NULL)\n    {\n        // 观察字符串中的每个字符\n        while( *string != '\\0')\n        {\n            if( *string++ == value)\n                return TRUE;\n        }\n    }\n    return FALSE;\n}\n~~~\n\n程序6.3：在一组字符串中查找(版本2)\n\n~~~\n#include <stdio.h>\n#include <assert.h>\n#define TRUE 1\n#define FALSE 0\n\nint \nfind_char(char **strings, int value)\n{\n    assert(strings != NULL);\n    while(*strings != NULL)\n    {\n        while(**strings != '\\0')\n        {\n            if(*(*strings)++ == value)\n                return TRUE;\n        }\n        strings++;\n    }\n    return FALSE;\n}\n~~~\n\n## 6.13 指针运算\n\n- 对指针的操作不依赖于指针的类型\n\n### 6.13.1 算数运算\n\n1. 指针 +/- 整数\n2. 指针 - 指针\n只有两个指针都指向同一个数组中的元素时才允许从一个指针减去另一个指针。\n\n~~~\nint arr[5] = {1,2,3,4,5};\nint *a = &arr[0];\nint *b = &arr[3];\n// b - a = 3\n// a - b = -3 ----> 指针可以进行反向运算并结果为负数\n~~~\n\n### 6.13.2 关系运算\n\n关系运算的前提也是指针都指向一个数组中的元素\n\n用于清除一个数组中的所有元素\n\n~~~\n#define N_VALUES    5\nfloat values[N_VALUES];\nfloat *vp;\nfor(vp = &value[0]; vp < &values[N_VALUES];)\n    *vp++ = 0;\n~~~\n\n> 这里使用`!=`替换`<`也是可行的\n\nfor循环的另一种写法\n\n~~~\nfor(vp = &values[N_VALUES - 1]; vp >= &values[0];vp--)\n    *vp = 0;\n~~~\n\n这种写法有一个问题，vp--最后会访问到一个未知的内存位置在满足`vp == &values[0]`后。\n\n## 6.14 总结\n\n- 计算机内存中的每个位置都由一个地址标识。通常邻近的内存位置合成一组，这样就允许存储更大范围的值。指针的值表示的是内存地址的变量。\n\n# 😠 函数\n\n## 7.1 函数定义\n\n- 函数的定义就是**函数体的实现**:\n- 函数体就是一个**代码块**，它在函数被调用时执行:\n\n~~~shell\n类型\n函数名( 形式参数 )\n代码块\n\nfunction_name()\n{\n\n}\n~~~\n\n**存根(stub)**：为那些此时尚未实现的代码保留一个位置。\n\n> **K&R C**形参声明\n\n~~~shell\nint *\nfind_int(key, array, array_len)\nint key;\nint array[];\nint array_len;\n{}\n~~~\n\n**return语句**\n\n- return语句允许从函数体的*任何位置*返回。\n- return expression中的`expression`是可选的。\n- 通常，表达式的类型就是函数声明的返回类型。\n\n> 没有返回值或`return;`的函数类型应该设置为void函数。\n>> 函数被分为有返回值的函数(**真函数**)和没有返回值的函数(**过程或副作用**)。\n\n## 7.2 函数声明\n\n- 使用 ***函数原型(function prototype)*** 为编译器提供函数的完整信息:\n- 对于*K&R C*风格函数编译器只知道函数返回值类型:\n\n> 标准表示，在同一个代码块中，函数原型必须与**同一个函数**的**任何先前原型**匹配。\n\n### 7.2.2 函数的缺省认定\n\n- 无法见到原型的函数，编译器认为该函数返回值为整数类型。\n\n## 7.3 函数的参数\n\n- C函数的所有参数均以 **\"传值调用\"** 方式进行传递，即传递参数的副本。\n- 传递指针和数组的行为实际上为 **\"传址调用\"** 。\n\n> 对指针和数组进行*间接访问操作*。\n\n**缺省参数提升**：使用K&R C旧风格的形参类型*类似char 和 short类型*会被提升为`int`类型,*float类型*会被提升为`double`类型\n\n## 7.4 ADT和黑盒\n\n- C语言可以用于设计和实现**抽象数据类型(ADT, Abstract Data Type)**，因为它可以***限制***函数和数据定义的作用域。\n\n- **抽象数据类型(ADT, Abstract Data Type)** 是一种编程概念，它将数据的表示(如何存储)和对数据的操作(如何使用)分离开来。\n\n### ADT的核心思想\n\n1. **数据隐藏(Data Hiding)**：数据的具体存储方式被隐藏起来，外部代码无法直接访问或修改。\n\n2. **接口(Interface)**：ADT提供一组明确定义的公共函数，作为与外部世界的唯一交互方式。\n\n- 限制对模块的访问是通过合理使用`static`关键字来实现的，它可以限制对那些并非接口的函数和数据的访问。\n\n### 示例：一个简单的计数器模块\n\n`counter.h`(公共接口)\n\n这是模块的”对外合同“，它只声明了其他文件可以访问的公共函数。\n\n~~~shell\n#ifndef COUNTER_H\n#define COUNTER_H\n\n// Increment the counter by 1.\nvoid increment_counter(void);\n\n// Get the current value of the counter. \nint get_counter(void);\n#endif // COUNTER_H\n~~~\n\n`counter.c`(黑盒实现)\n\n这是模块的”内部黑盒“。`static`关键字使得`count`变量和`private_helper`函数无法被其他文件直接访问。\n\n~~~shell\n#include \"counter.h\"\n#include <stdio.h>\n// This is a static variable. Its value is kept for the lifetime of the program,\n// but it is only visible and accessible within this file (counter.c).\nstatic int count = 0;\n\n// This is a static function. It's a private helper and cannot be called\n// from outside this file.\nstatic void private_helper()\n{\n  printf(\"--- (Internal) The counter is now being updated... ---\\n\");\n}\n\n// Public API function. It calls the private helper function\nvoid increment_counter()\n{\n  private_helper(); // This is allowed bacause private_helper is in the same file.\n  count++;\n}\n\n// Public API function. It returns the value of the private variable.\nint get_counter()\n{\n  return count;\n}\n~~~\n\n`main.c`(使用模块)\n\n这个文件只能通过`counter.h`中声明的公共函数与`counter.c`交互。任何试图访问内部私有函数的行为都将导致编译或链接错误。\n\n~~~shell\n#include <stdio.h>\n#include \"counter.h\"\n\nint main()\n{\n  printf(\"Initial counter value: %d\\n\",get_counter());\n  \n  // Call the public function to increment the counter.\n  increment_counter();\n  printf(\"Counter value after first increment: %d\\n\", get_counter());\n\n  increment_counter();\n  printf(\"Counter value after second increment: %d\\n\", get_counter());\n\n  // COMPILE/LINK ERROR!\n  // The linker will fail because private_helper() is not a public symbol.\n  // private_helper(); \n\n  return 0; \n}\n~~~\n\n> 如果不包含最后一行`private_helper()`的调用程序将编译和链接成功。\n\n## 7.5 递归\n\n- 递归函数就是直接或间接调用自身的函数。\n- C通过**运行时堆栈**支持递归函数的实现。\n- 递归的效率大部分情况下都非常低。\n\n### 使用递归与迭代来表示阶乘的计算\n\n~~~shell\nfactorial(n) =\n├── n <= 0 : 1\n└── n > 0 : n x factorial(n - 1)\n~~~\n\n**递归方法**\n\n~~~shell\nlong \nfactorial(int n)\n{\n  if (n <= 0)\n    return 1;\n  else \n    return n * factorial(n - 1);\n}\n~~~\n\n**迭代方法**\n\n~~~shell\nlong\nfactorial(int n)\n{\n  int result = 1;\n  while (n > 1)\n  { \n    result *= n;\n    n -= 1;\n  }\n  \n  return result;\n}\n~~~\n\n> 许多问题是以递归的形式进行解释的，这只是因为它比非递归形式更为清晰，但是这些问题的迭代实现往往比递归实现效率更高。\n\n### 使用递归与迭代来表示斐波那契数\n\n~~~shell\nFibonacci(n) =\n├── n <= 1 : 1 \n├── n = 2 : 1\n├── n > 2 : Fibonacci(n - 1) +Fibonacci(n - 2)\n~~~\n\n**递归方法**\n\n~~~shell\nlong fibonacci(int n)\n{\n  if (n <= 2)\n    return 1;\n\n  return fibonacci(n - 1) + fibonacci(n - 2);\n}\n~~~\n\n**迭代方法**\n\n~~~shell\nlong fibonacci(int n)\n{\n  long result;\n  long previous_result;\n  long next_older_result;\n  \n  result = previout_result = 1;\n  \n  if (n <= 2)\n    return 1;\n  \n  while (n > 2)\n  {\n    n -= 1;\n    next_older_result = previous_result;\n    previous_result = result;\n    result = previous_result + next_older_result;\n  }\n}\n~~~\n\n> 使用递归实现斐波那契数的代价比你远想的要大。\n\n## 7.6 可变参数列表\n\n- 使用`stdarg`宏实现可变参数列表，这些宏定义在`stdarg.h`头文件\n- 在定义可变参数列表时在省略号前一定是代表后面可变参数列表**参数个数**\n\n这个头文件声明了一个类型`va_list`和3个宏---`va_start`、`va_arg`和`va_end`\n\n### 计算标量参数平均值(非可变参数)\n\n~~~shell\nfloat average(int n_values, int v1,int v2, int v3, int v4, int v5)\n{\n  float sum = v1; \n  \n  if ( n_values >= 2)\n    sum += v2;\n  if ( n_values >= 3 )\n    sum += v3;\n  if ( n_values >= 4 )\n    sum += v4;\n  if ( n_values >= 5 )\n    sum += v5;\n\n  return sum / n_values;\n}\n~~~\n\n### 计算标量参数平均值(可变参数)\n\n~~~shell\n#include <stdarg.h>\n\nfloat average(int n_values, ...) // 传递任意数量的未知数\n{\n  va_list var_arg;\n  int count;\n  float sum;\n  \n  // 准备访问可变参数\n  va_start (var_arg, n_values);\n  \n  // 添加取自可变参数列表的值\n  for (count = 0;count < n_values;count += 1)\n    sum += va_arg(var_arg, int);\n  \n  // 完成处理可变参数\n  va_end(var_arg);\n  \n  return sum / n_values;\n}\n~~~\n\n# 🖐 数组\n\n## 8.1 一维数组\n\n- **指针与数组并不是相等的。**\n\n### 8.1.1 数组名\n\n考虑下面的这些声明:\n\n~~~shell\nint a;\nint b[10];\n~~~\n\n> a为标量，因为它是一个单一的值；b为数组，因为它是一些值的集合。\n\n**数组**: 相同类型的值的集合。\n\n> int b[10]中的b并不表示整个数组而是表示数组首个元素的地址。数组为`int`类型表示数组名的类型为\"指向int的常量指针\"。\n\n- 区分指针与数组差别的其中一个理由是数组名是**指针常量**而不是**指针变量**。\n\n> 常量的值是不能修改的，这也就意味着如果有一个指针`int *c`那么b = c这种赋值是非法的，因为b是常量。\n\n### 8.1.2 下标引用\n\n- **除优先级外，下标引用和间接访问完全相同。**\n\n~~~shell\narray[subscript] == *(array + (subscript))\n~~~\n\n**证明相等性:**\n\n~~~shell\nint array[10];\nint *ap = array + 2;\n~~~\n\n|statement|expression|\n|:----:|:---:|\n|ap|array + 2 and &array[2]|\n|*ap|array[2] and *(array + 2)|\n|ap[0]|*(ap + 0) and array[2]|\n|ap+6|array + 8 and &array[8]|\n|*ap+6|array[2] + 6|\n|*(ap+6)|array[8]|\n|ap[6]|*(ap+6)|\n|&ap|**unpredictable**|\n|ap[-1]|**correct operation and its array[1]**|\n|ap[9]|**unpredictable**|\n\n> **偏移量的负数是可以允许的**\n\n最后两个例子显示了为什么**下标检查**在C中是一项困难的任务。最初的C编译器并不检查下标，而最新的编译器有些依然不检查下标。且如果编译器进行下标检查涉及的开销比想象的多。\n\n> 2[array] 是一个**合法**的数组表示！它表示的是 *(2 + array)，也就是*(array + 2)即array[2]。\n\n### 8.1.3 指针与下标\n\n- 如果可以互换地使用指针表达式和下标表达式，下标绝不会比指针更有效率，指针表达式有时候比下标表达式**更有效率**。\n\n**下标方案执行循环**\n\n~~~shell\nint array[10],a;\nfor (a = 0;a < 10;a++)\n  array[a] = 0;\n~~~\n\n**指针间接访问方案执行循环**\n\n~~~shell\nint array[10],*ap;\nfor (ap = array;ap < array + 10;ap++)\n  *ap = 0;\n~~~\n\n- 在比较老的编译器中指针间接访问比下标访问更有效率  \n\n**1. 数组下标版本**  \n对于`array[a] = 0;`这行代码，计算机在每次循环时都必须做以下三件事：  \na. 找到数组的起始地址(`array`);  \nb. 将循环变量`a`乘以`int`类型的大小(例如四字节)；  \nc. 将相乘的结果**加到**起始地址，才能找到`array[a]`的准确内存位置。\n\n> 这个过程在每次循环中都涉及**一次乘法和一次加法**。\n\n**2. 指针间接访问版本**  \n对于`*ap = 0;`这行代码，计算机的处理方法更直接：  \na. 指针`ap`已经直接存储了当前要操作的内存地址。  \nb. `*ap`操作直接访问地址，非常快。  \nc. `ap++`操作只需要简单地在`ap`的地址上加上`int`类型的大小(例如四字节)，就能得到下一个元素的地址。\n\n> 这个过程只涉及**一次简单的加法**，比乘法要快得多。\n\n- 但现代编译器**非常智能**，像数组下标版本会被**优化成更高效的指针算术指令**。\n\n### 8.1.4 指针的效率\n\n- 程序的效率取决于你的**编译器**和**机器**。\n\n把一个数组的内容复制到另一个数组：\n\n~~~shell\n#define SIZE 50\nint x[SIZE];\nint y[SIZE];\nint i;\nint *p1,*p2;\n~~~\n\n下标版本函数：\n\n~~~shell\nvoid try1()\n{\n  for(i = 0; i < SIZE;i++)\n    x[i] = y[i];\n}\n~~~\n\n指针版本函数：\n\n~~~shell\nvoid try2()\n{\n    for( p1 = x, p2 = y; p1 - x < SIZE;)\n      *p1++ = *p2++;\n}\n~~~\n\n重新使用计数器：\n\n~~~shell\nvoid try3()\n{\n  for( i = 0, p1 = x, p2 = y; i < SIZE; i++)\n  {\n    *p1++ = *p2++;\n  }\n}\n~~~\n\n寄存器指针变量：\n\n~~~shell\nvoid try4()\n{\n  register int *p1, *p2;\n  register int i;\n  \n  for( i = 0,p1 = x, p2 = y;i < SIZE; i++)\n    *p1++ = *p2++;\n}\n~~~\n\n消除计数器：\n\n~~~shell\nvoid try5()\n{\n  register int *p1, *p2;\n\n  for( p1 = x, p2 = y;p1 < &x[SIZE])\n  {\n    *p1++ = *p2++;\n  }\n}\n~~~\n\n重新使用计数器是一个比较不错的写法，而消除计数器则是一个更加快速的执行代码。\n\n**结论**:  \n\n1. 使用指针变量将比使用下标产生效率更高的代码。当这个增量是1并且机器具有地址自动增量模型时，这点表现得更为突出。\n2. 如果有经过初始化并经过调整的内容来判断循环是否应该终止，就不需要使用一个单独的计数器。\n3. 那些必须在运行时求值的表达式诸如`&array[SIZE]`或`array+SIZE`这样的常量表达式往往代价更高。\n\n### 8.1.5 数组和指针\n\n- 指针和数组并不是相等的。\n\n在使用`int a[10]` 和 `int *b`这两个指针值时表达式`*a`是合法而`*b`是非法的；表达式`b++`可以通过编译，但`a++`不行。\n\n### 8.1.6 作为函数参数的数组名\n\n~~~shell\nvoid strcpy(char *buffer, char const *string)\n{\n  while (*buffer++ = *string++ != '\\0');\n}\n~~~\n\nwhile语句中的`*string++`表达式取得string所指向的那个字符，并且产生一个副作用，就是修改`string`，使它指向下一个字符。用这种方法修改形参并不会影响调用程序的实参，因为只有传递给函数的那份拷贝进行了修改。\n\n### 8.1.7 声明数组参数\n\n`int strlen(char * string)`和`int strlen(char string[])`这两种声明是相等的，**但是只在当前这个上下文环境中**。\n\n- 使用`char *string`指针声明数组参数更加准确，且数组作为形参不需要传递元素个数，因为函数并不为数组参数分配内存空间，**形参只是一个指针**。\n\n### 8.1.8 初始化\n\n`int vector[5] = {10,20,30,40,50};`是一个标准的数组初始化。\n\n#### 静态和自动初始化\n\n- 数组初始化的方式类似于标量变量的初始化方式---也就是取决于它们的存储类型。\n- 存储在静态内存的数组只初始化一次，也就是在程序开执行之前。\n- 对于自动变量而言自动变量位于运行时堆栈编译器没办法在程序开始前对它进行初始化。所以自动变量在缺省情况下是未初始化的。\n\n> 当数组的初始化局部于一个函数(或代码块)时，你应该仔细考虑一下，在程序的执行流每次进入该函数(或代码块)时，每次都对数组进行重新初始化是不是值得。如果答案是否定的，就把数组声明为`static`，这样数组的初始化只需在程序开始前执行一次。\n\n### 8.1.9 不完整的初始化\n\n- 初始化值数目大于数组长度(编译时错误)；小于则将未初始化的元素初始化为0，且只允许省略最后几个初始值。\n\n### 8.1.10 自动计算数组长度\n\n`int vector[] = {1,2,3,4,5};`让编译器识别数组大小\n\n### 8.1.11 字符数组的初始化\n\n两种初始化方法：  \n1.`char message[] = {'H','e','l','l','o',0};`  \n2.`char message[] = \"Hello\";`\n\n这两种初始化方法是相同的，都是一个字符数组初始化列表，而`char* message = \"Hello\";`是一个**字符串常量**，即一个指向常量字符串\"Hello\"的指针。上面两个都是可修改的字符数组。\n\n## 8.2 多维数组\n\n- `int martix[6][10]`在某些上下文环境中，既是6行10列，也是10行6列。\n\n### 8.2.1 存储顺序\n\n`int array[4];`是一个存储三个整型元素的数组  \n`int array[4][6];`在上面的基础上将三个整型元素改为三个包含6个元素的数组\n\n- 在C中，多维数组的元素存储顺序按照最右边下标率先变化的原则称为**行主序(row major order)**。比如读取`array[2][4]`往下读取应该是`array[2][5]`后是`array[3][0]`。\n\n### 8.2.2 数组名\n\n- 一维数组名的值是一个指针常量，它的类型是\"指向元素类型的指针\"\n- 多维数组和一维数组为一个区别是多维数组的第一维元素实际上是另一个数组\n\n`int martix[3][10];`这个数组名`matrix`的值是一个指向它第一个元素的指针，所以`matrix`是一个指向一个包含10个整型的数组的指针。\n\n### 8.2.3 下标\n\n`matrix`: 指向包含10个整型元素的数组的指针  \n`matrix+1`: 指向包含10个整型元素的数组的指针，但是指向的是matrix的下一行  \n`*(matrix + 1)`: 包含10个整型元素的子数组(常量指针)，与`matrix[1]`相等  \n`*(matrix + 1) + 5`: 上面的常量指针右移5位  \n`*(*(matrix + 1) + 5)`: 上面指针所指向的元素，与`matrix[1][5]`值相等  \n上面的式子可以改写为：*(matrix[1] + 5)\n\n### 8.2.4 指向数组的指针\n\n~~~shell\nint   vector[10], *vp = vector;\nint   matrix[3][10], *mp = matrix;\n~~~\n\n第一个声明是合法的，第二个声明是非法的。  \n`matrix`不是一个指向整型的数组而是一个指向整型数组的指针。\n\n`int (*p)[10]`是一个合法的指向二维数组的数组指针。因为下标引用的优先级高于间接访问\n，所以要给`*p`加上括号。\n\n~~~shell\nint *pi = &matrix[0][0];\nint *pi = matrix[0];\n~~~\n\n上面的两个指针指向二维数组的首地址可以逐个访问整型元素而不是逐行在数组中移动\n> 应该避免使用`int  (*p)[] = matrix;`这种没有数组长度的声明，因为没有声明数组长度当执行指针运算时它的值将根据空数组的长度进行调整(与0相乘)\n\n### 8.2.5 作为函数参数的多维数组\n\n如果是二维数组你可以声明为以下的任意一个\n\n~~~shell\nvoid func2(int (*mat)[10]);\nvoid func2(int mat[][10]);\n~~~\n\n- 编译器必须知道**第二个**及以后各维的长度才能对各下标进行求值，因此在原型中必须声明这些维的长度，也就是在原数组声明时至少为`int mat[][10]`这种并且在函数形参声明时也写成这样\n\n`void func2(int **mat);`是一个指向整型指针的指针，和一开始说的一样，指针和数组是不同的，和指向整型数组的指针不是一回事。\n\n### 8.2.6 初始化\n\n~~~shell\nint matrix[2][3] = {100,101,102,110,111,112};\n\nint two_dim[3][5] = {\n  {00,01,02,03,04},\n  {00,01,02,03,04},\n  {00,01,02,03,04}\n};\n~~~\n\n上面两种初始化的方法都可以，对于三维以上的数组来说也是类似，和一维数组一样也可以省略尾部的几个初始值。\n\n## 8.3 指针数组\n\n`int  *api[10];`: 下标引用的优先级高于间接访问，在这个表达式中首先执行下标引用。  \n\n使用指针数组的场景：\n\n~~~shell\nchar const *keyword[] = {\n    \"do\",\n    \"for\",\n    \"register\",\n    \"return\",\n    \"switch\",\n    \"while\",\n    NULL \n};\n#define N_KEYWORD \\\n  (sizeof(keyword) / sizeof(keyword[0]))\n\n# 判断参数是否与一个关键字列表中的任何单词匹配，并返回匹配的索引值。\n# 如果未找到匹配函数返回-1\n#include <string.h>\n\nint lookup_keyword( char const* const desired_word, \n              char const *keyword_table[], int const size)\n{\n  char const **kwp;\n  \n  // 对于表中的每个单词 ...\n  // for (kwp = keyword_table; kwp < keyword_table + size; kwp++)\n  // {\n  //   if (strcmp(desired_word, *kwp) == 0)\n  //       return kwp - keyword_table;\n  // }\n  for (kwp = keyword_table; kwp != NULL;kwp++)\n  {\n    if (strcmp(desired_word, *kwp) == 0)\n      return kwp - keyword_table;\n  }\n  \n\n  // 没有找到\n  return -1;\n}\n\n~~~\n\n> 使用sizeof()对数组元素个数进行自动计数\n\n## 8.4 总结\n\n1. `sizeof(array)`返回的是整个数组所占用的字节而不是一个指针所占用的字节。\n2. &array 和 array 指向的地址相同，但是&array的类型为`int (*)[]`而array的类型为`int*`\n3. 其他使用数组名的地方数组名都是指向数组第一个元素的指针\n4. `数组地址(类似于&array[1][2]) = 数组基地址 + (行索引 * 每行总大小) + (列索引 * 单个元素大小)`\n\n`地址 = 基地址 + ((行索引 * 一行元素个数) + 列索引) * sizeof(元素类型)`\n\n假如`int array[4][2]`,int大小为2,array的地址为0x1000，则 &array[1][2] = `0x1000 + (2 * 2) + (2 * 2) == 0x1008`\n\n# 💝 字符串、字符和字节\n\n- 字符串是一种重要的数据类型，但是C语言并没有显式的字符串数据类型，因为字符串以字符串常量的形式出现或者存储于字符数组中。\n- 操作字符串变量时必须额外小心各种可能导致缓冲区溢出的操作。\n\n## 9.1 字符串基础\n\n- 字符串是一串**零个或多个字符**，并且以一个**位模式为全0的NUL字符结尾**。\n\n> 字符串所包含的字符内部不能出现NUL字节\n>\n## 9.2 字符串长度\n\n- 字符串的长度就是它所包含的字符个数。\n\n使用标准库头文件`#include <string.h>`中的函数计算字符串长度\n\n~~~shell\nstrlen 原型\nsize_t strlen (char const *string);\n~~~\n\n> size_t 是一个无符号整数类型，且这个类型是在头文件`stddef.h`中定义的\n\n- 无符号数的使用需要考虑是否会产生负数\n\n~~~shell\nif (strlen(x) >= strlen(y)) ...\nif (strlen(x) - strlen(y) >= 0) ...\n~~~\n\n这两个式子是不相等的，第二行的`strlen(x) - strlen(y)`的返回结果是一个无符号数，**无符号数绝不可能是负数**！\n\n**strlen原型**\n\n~~~shell\n#include <stddef.h>\n\nsize_t \nstrlen(char const *string)\n{\n  int length;\n  \n  for (length = 0; *string++ != '\\0';)\n    length += 1;\n  return length;\n}\n~~~\n\n- 表达式中如果同时存在无符号数和有符号数，可能会产生奇怪的结果\n\n~~~shell\nif (strlen(x) >= 10) ...\nif (strlen(x) - 10 >= 0) ...\n~~~\n\n这两个式子也是不相等的，原因和上面相同。\n> 如果把strlen的返回值强制转换为`int`，就可以消除这个问题。\n\n**tips:**\n> 自己重写一个标准库函数可能会比标准库函数效率更高，如果合理使用寄存器register声明和一些技巧，**但事实上很少能如愿**。\n>> <u>寻找一种更好的算法比改良一种差劲的算法更有效率，复用已经存在的软件比重新开发一个效率更高。</u>\n\n## 9.3 不受限制的字符串函数\n\n- 最常用的字符串函数都是**不受限制**的，就是说它们只是通过寻找字符串参数结尾的`NUL`字节来判断它的长度。\n\n### 9.3.1 复制字符串\n\n~~~shell\nchar *strcpy(char *dst, char const *src);\n~~~\n\n这个函数把参数src字符串复制到dst参数，<u>由于dst参数将进行修改，所以它必须是个字符数组或者是一个指向动态分配内存的数组的指针，**不能使用字符串常量**</u>\n\n> <u>程序员必须保证目标字符数组的空间足以容纳需要复制的字符串。</u>因为如果字符串比数组长，多余的字符仍然被复制，它们将覆盖原先存储于数组后面的内存空间的值。\n>> strcpy无法解决这个问题，因为它无法判断目标字符数组的长度。\n\n### 9.3.2 连接字符串\n\n~~~shell\nchar *strcat( char *dst, char const *src);\n~~~\n\n- 找到字符串末尾NUL并将src中的首字符覆盖掉NUL  \n\n常见`strcat`用法\n\n~~~shell\nstrcpy( message, \"Hello \");\nstrcat( message, customer_name );\nstrcpy( message, \", how are you?\");\n~~~\n\n### 9.3.3 函数的返回值\n\n- `strcpy`和`strcat`都返回它第一个参数的一份拷贝\n\n将函数返回值作为另一个函数的参数\n\n~~~shell\nstrcat(strcpy(dst,a),b);\n~~~\n\n> 首先执行`strcpy`将字符串从a复制到dst并返回dst。然后这个返回值成为`strcat`函数的第一个参数，`strcat`函数把b添加到dst的后面。\n\n但是在可读性上其实不如\n\n~~~shell\nstrcpy(dst,a);\nstrcat(dst,b);\n~~~\n\n- 事实上，在这些函数的绝大多数调用中它们的返回值只是被简单地忽略。\n\n### 9.3.4 字符串比较\n\n- 比较两个字符串涉及对两个字符串对应的字符逐个进行比较，直到发现不匹配为止。\n- 那个最先不匹配的字符中较\"小\"(字符集中序数较小)的那个字符所在的字符串被认为\"小于\"另外一个字符串\n\n~~~shell\nint strcmp(char const *s1, char const *s2);\n~~~\n\n如果`s1`小于`s2`，strcmp函数返回一个小于零的值，反之返回一个大于零的值。相等返回零。\n\n~~~shell\nif (strcmp(a,b)) // 用于布尔值测试是一种坏风格\nif (strcmp(a,b) > 0) // 用于与零进行比较更好\nelse if (strcmp(a,b) < 0)\nelse\n~~~\n\n## 9.4 长度受限的字符串函数\n\n<u>标准库还包含了一些函数，它们以一种不同的方式处理字符串。</u>\n\n~~~shell\nchar *strncpy(char *dst, char const *src, size_t len);\nchar *strncat(char *dst, char const *src, size_t len);\nchar *strncmp(char const *s1, char const *s2, size_t len);\n~~~\n\n这些函数接受一个显式的长度参数，用于**限定**进行复制或比较的字符数。\n\n- 注意⚠️：如果strlen(src)的值大于或等于len，<u>那么只有len个字符被复制到dst中。它的结果将不会以**NUL**字节结尾。</u>\n\n> strncpy 调用的结果可能不是一个字符串，因此字符串必须以NUL字节结尾。\n\n保证strncpy的结果是以'\\0'结尾的\n\n~~~shell\nchar buffer[BSIZE];\n...\nstrncpy(buffer, name, BSIZE);\nbuffer[BSIZE - 1] = '\\0';\n~~~\n\n如果name的内容可以容纳于buffer中最后的赋值语句无效。\n\n如果strlen(name) >= BSIZE 那么最后一条赋值语句可以截断name的字符防止缓存区溢出。\n\n> strncat总是在结果字符串后面添加一个NUL字节，所以不会有这种问题；strncmp只比较len长度的字符串是否相等，如果strlen(name)比BSIZE大则只比较BSIZE长度个字符。\n\n## 9.5 字符串查找基础\n\n### 9.5.1 查找一个字符\n\n~~~shell\nchar *strchr(char const *str, int ch);\nchar *strrchr(char const *str, int ch);\n~~~\n\n> 虽然ch是`int`类型但是包含一个字符值。\n\n- `strchr`在字符串str中查找字符ch第一次出现的位置，找到后函数返回一个指向该位置的指针，如果该字符不存在则返回NULL指针。strrchr返回一个指向字符串中最后一次出现的位置。\n\n~~~shell\nchar string[20] = \"Hello there, honey.\";\nchar *ans;\nans = strchr(string, 'h');\n~~~\n\n### 9.5.2 查找任何几个字符\n\n~~~shell\nchar *strpbrk(char const *str, char const *group);\n~~~\n\n- 返回一个指向str中第一个匹配group中任何一个字符的字符位置。如果未找到匹配则返回NULL指针。区分大小写。\n\n~~~shell\nchar string[20] = \"Hello there, honey.\";\nchar *ans;\nans = strchr(string, \"aeiou\");\n~~~\n\nans所指向的位置是string + 1，因为这个位置是第二个参数中的字符第一次出现的位置。区分大小写。\n\n### 9.5.3 查找一个子串\n\n~~~shell\nchar *strstr(char const *s1, char const *s2);\n~~~\n\n- 在s1中查找s2第一次出现的位置，并返回一个指向该位置的指针；如果s2并没有完出现在s1返回一个NULL指针；如果第二个参数是一个空指针函数返回s1。\n\n#### 自己实现一个 `strtstr` 和 `strrpbrk` 函数\n\n~~~shell\n#include <string.h>\n\nchar*\nmy_strrstr(char const *s1, char const *s2)\n{\n  register char *last;\n  register char *current;\n\n  // 把指针初始化为我们已经找到的前一次匹配\n  last = NULL;\n  \n  // 只在第二个字符串不为空的时候进行查找，如果s2为空返回NULL\n  \n  if (*s2 != '\\0')\n  {\n    // 查找 s2 在 s1 中第一次出现的位置。\n    current = strstr(s1,s2);\n    while (current != NULL)\n    {\n      last = current;\n      current = strstr(last + 1, s2);\n    }\n  }\n  return last; // 返回指向我们找到的最后一次匹配的起始位置的指针。\n}\n~~~\n\n~~~shell\n#include <string.h>\n\nchar *\nmy_strrpbrk(char const *str, char const *group)\n{\n  register char *last;\n  register char current;\n  \n  // 把指针初始化为我们已经找到的前一次匹配\n  last = NULL;\n  \n  if (*s2 != '\\0')\n  {\n    current = strpbrk(str, group);\n    while (current != NULL)\n    {\n      last = current;\n      current = strpbrk(last + 1, group);\n    }\n  }\n  return last;\n}\n~~~\n\n## 9.6 高级字符串查找\n\n### 9.6.1 查找一个字符串前缀\n\n- `strspn`和`strcspn`函数用于计算字符串开头连续匹配指定字符集中的字符的个数\n\n~~~shell\nsize_t strspn(char const *str, char const *group);\nsize_t strcspn(char const *str, char const *group);\n~~~\n\n`str`: 要检查的字符串。  \n`group`：包含要匹配的字符集的字符串。\n\n>`strspn` 从 `str1` 的第一个字符开始，依次检查每个字符。只要这个字符在 `str2` 中能找到，就继续向后检查。**一旦遇到一个不在 `str2` 中的字符，函数就停止并返回已匹配的字符数。**\n\n> `strcspn` 从 `str1` 的第一个字符开始，依次检查每个字符。只要这个字符不在 `str2` 中，就继续向后检查。一旦遇到一个在 `str2` 中的字符，函数就停止并返回已检查的字符数。\n\n~~~shell\n#include <stdio.h>\n#include <string.h>\n\nint main() {\n    const char *sentence = \"Hello, world!\";\n    const char *charset_vowels = \"aeiou\";\n    const char *charset_alpha = \"abcdefghijklmnopqrstuvwxyz\";\n\n    size_t length1 = strspn(sentence, \"Heo\");\n    printf(\"The length of the initial part of \\\"%s\\\" consisting of 'H', 'e', 'o' is: %zu\\n\", sentence, length1); \n    // 输出: 2 (因为 'l' 不在 \"Heo\" 中)\n\n    size_t length2 = strspn(sentence, charset_alpha);\n    printf(\"The length of the initial part of \\\"%s\\\" consisting of letters is: %zu\\n\", sentence, length2);\n    // 输出: 5 (因为 ' ' 不在字母表中)\n\n    return 0;\n}\n~~~\n\n### 9.6.2 查找标记\n\n- `strtok`函数用于分割字符串。它会根据指定的分隔符，将字符串分解成一系列的标记(token)。\n\n~~~shell\nchar *strtok(char *str, char const *sep);\n~~~\n\n`str`：要被分割的字符串。\n`sep`：包含一个或多个分隔符的字符串。\n\n> strtok是在字符串本身进行处理的(in-place)，建议使用原字符串的拷贝进行操作。\n\n- `strtok`的使用非常特殊，因为它是有状态的：\n  - 第一次调用：传入要分割的字符串`str`。它会找到第一个分隔符，用`\\0`替换它，并返回第一个标记的指针。\n  - 后续调用：传入`NULL`作为`str`参数。`strtok`会从上次停止的位置继续，找到下一个分隔符，用`\\0`替换它，并返回下一个标记的指针。\n\n~~~shell\n#include <stdio.h>\n#include <string.h>\n\nint main(void)\n{\n  char str[] = \"apple,banana-orange\";\n  const char *delimiters = \",-\";\n  char *token;\n\n  // 第一次调用， 传入字符串\n  token = strtok(str,delimiters);\n  printf(\"First token: %s\\n\", token);\n  \n  // 后续调用，传入NULL\n  while(token != NULL)\n  {\n    token = strtok(NULL,delimiters);\n    if (token != NULL){\n      printf(\"Next token: %s\\n\",token);\n    }\n  }\n  return 0;\n}\n~~~\n\n## 9.7 错误信息\n\n- 当你调用一些函数，请求操作系统执行一些功能如打开文件时，如果出现错误，操作系统是通过设置一个外部的整型变量`errno`进行错误代码报告的。`strerror`函数把其中一个错误代码作为参数并返回一个指向用于描述错误的字符串的指针。\n\n~~~shell\nchar *stderror(int error_number);\n~~~\n\n事实上，返回值应该被声明为`const`，因为你不应该修改它。\n\n- `strerror`函数用于将错误编号转换为人类可读的错误信息字符串。\n\n~~~shell\n#include <stdio.h>\n#include <string.h>\n#include <errno.h>\n// 必须包含此头文件来使用 errno\n\nint main(void)\n{\n  FILE *file;\n  // 尝试打开一个不存在的文件\n  file = fopen(\"non_existent_file.txt\", \"r\");\n  \n  // 如果 fopen 失败\n  if (file == NULL)\n    printf(\"Error opening file: %s\\n\", strerror(errno));\n  else\n  {\n    printf(\"File opened successfully.\\n\");\n    fclose(file);\n  }\n  return 0;\n}\n~~~\n\n## 9.8 字符操作\n\n- 字符操作的原型位于`ctype.h`头文件中，分为字符分类函数和字符转换函数\n\n### 9.8.1 字符分类\n\n<h4>字符分类函数</h4>\n\n| 函数 | 如果它的参数符合下列条件就返回真 |\n|:---:|:---:|\n|isspace|空白字符: '空格', 换页'\\f'，换行 '\\n', 回车 '\\r', 制表符 '\\t'或垂直制表符'\\v'|\n|isdigit|十进制数字0~9|\n|isxdigit|十六进制数字，包括所有十进制数字，小写字母a\\~f,大写字母A\\~F|\n|islower|小写字母a~z|\n|isupper|大写字母A~Z|\n|isalpha|字母a\\~z A\\~Z|\n|isalnum|字母或数字，a\\~z,A\\~z或0~9|\n|ispunct|标点符号，任何不属于数字或字母的图形字符(可打印符号)|\n|isgraph|任何图形字符|\n|isprint|任何可打印字符，包括图形字符和空白字符|\n\n### 9.8.2 字符转换\n\n~~~shell\nint tolower(int ch);\nint toupper(int ch);\n\nif (ch >= 'A' && ch <= 'Z') 在ASCII字符集的机器上能够运行，但是其他字符集有可能会失败\nif (isupper(ch))\n就都能顺利运行\n~~~\n\n## 9.9 内存操作\n\n- 根据定义，字符串由一个NUL字节结尾，所以字符串内部不能包含任何NUL字符。但是非字符串数据内部包含零值的情况并不罕见。你无法使用字符串函数来处理这种类型的数据，因为当它们遇到第一个NUL字节时将停止工作。\n- 使用**内存操作函数**可以处理任意的字节序列\n\n~~~shell\nvoid *memcpy(void *dst, void const *src, size_t length);\nvoid *memmove(void *dst, void const *src, size_t length);\nvoid *memcmp(void const *a, void const *b, size_t length);\nvoid *memchr(void const *a, int ch, size_t length);\nvoid *memset(void *a, int ch, size_t length);\n~~~\n\n- 和字符操作函数类似，对于memcpy()函数，如果src与dst以任何形式出现了重叠，它的结果是未定义的。但是memmove()函数可以重叠。\n- 内存操作函数传入的长度为内存长度不是元素长度。\n- 任何类型的指针都可以转换为`void*`型指针。\n\n`memcpy`\n\n`memcpy` copies a block of memory from a source to a destination location.\n\n**Parameters:**\n\n- `dest`: A pointer to the destination memory block.\n- `src`: A pointer to the source memory block.\n- `n`: The number of bytes to copy\n\n**Use case:** Copying data between non_overlapping memory regions.\n\n~~~shell\n#include <stdio.h>\n#include <string.h>\n\nint main(void)\n{\n  int source_array[] = {1,2,3,4,5};\n  int destinaion_array[5];\n  \n  // copy 5 integers from soure_array to destination_array\n  memcpy(destination_array, source_array, sizeof(source_array));\n\n  printf(\"Destinaion array: \");\n  for (int i = 0; i < 5; i++)\n  {\n    printf(\"%d \",destination_array[i]);\n  }\n  printf(\"\\n\");\n  return 0;\n}\n~~~\n\n`memmove`\n\n`memmove` copies a block of memory from a source location to a destination location, even if the memory blocks overlap.\n\n**Parameters:** Same as `memcpy`\n\n**Use case:** Shifting data within the same array or buffer. This is safer than `memcpy` for overlapping regions.\n\n~~~shell\n#include <stdio.h>\n#include <string.h>\n\nint main(void)\n{\n  char str[] = \"abcdefgh\";\n  \n  // Shift the string two characters to the left\n  // The source and destination overlap (str + 2 and str)\n  memmove(str, str + 2,strlen(str) - 2);\n  \n  // manually add the null terminator since memmove doesn't\n  str[strlen(str) - 2] = '\\0';\n  printf(\"String after memmove: %s\\n\", str); // prints \"cdefgh\"\n\n  return 0;\n\n}\n~~~\n\n`memchr`\n\n`memchr` search a block of memory for the first occurrence of a specific byte.\n\n**Parameters:**\n\n- `a`: A pointer to the memory block to search\n- `ch`: The byte value to search for. It's passed as an `int` but is treated as an `unsigned char`.\n- `length`: The number of bytes to search.\n\n**Return Value:**\n\n- A pointer to the first occurrence of the byte `ch` within the first `n` bytes of the memory block `a`.\n- A null pointer (`NULL`) if the byte is not found.\n\n**Use Case:** Searching for a specific byte within a block of raw binary data.Unlike string functions like `strchr`. `memchr` continues its search past null terminators (`\\0`).\n\n~~~shell\n#include <stdio.h>\n#include <string.h>\n\nint main(void) {\n  // This array contains a null byte in the middle.\n  char data[] = {'h', 'e', 'l', 'l', 'o', '\\0', 'w', 'o', 'r', 'l', 'd'};\n  char *result;\n- \n  // Search for the character 'o' within the first 11 bytes of the array.\n  // A string search function like strchr would stop at the '\\0'\n  result = memchr(data, 'o', sizeof(data));\n  if (result != NULL) {\n    printf(\"Found 'o' at memory address: %p\\n\", result);\n    printf(\"Character found: '%c'\\n\", *result);\n\n    // Calculate the index of the found character\n    size_t index = (size_t)(result - data);\n    printf(\"It is located at index: %zu\\n\", index);\n  } else {\n    printf(\"The character was not found.\\n\");\n  }\n  return 0;\n}\n~~~\n\n`memcmp`\n\n`memcmp` compares a specified number of bytes in two memory blocks\n\n**Parameter:**\n\n- `a`: A pointer to the first memory block\n- `b`: A pointer to the second memory block\n- `length`: The number of bytes to compare.\n\n**Use case:** Comparing raw binary data, which may contain null bytes that would terminate string functions like `strcmp`.\n\n~~~shell\n#include <stdio.h>\n#include <string.h>\n\nint main(void)\n{\n  char data1[] = \"Hello\";\n  char data2[] = \"HellO\";\n  char data3[] = \"Hello\";\n  \n  // compare the first 5 bytes of data1 and data2\n  int result1 = memcmp(data1, data2, 5);\n  if (result1 != 0)\n  {\n    printf(\"data1 and data2 are different.\\n\");\n  }\n  // compare the first 5 bytes of data1 and data2\n  \n  int result2 = memcmp(data1, data3, 5);\n  if(result2 != 0)\n  {\n    printf(\"data1 and data3 are different.\\n\");\n  }\n  return 0;\n}\n~~~\n\n`memset`\n\n`memset` fills a block of memory with a specified byte value.\n\n**Parameters:**\n\n- `a`: A pointer to the memory block to fill.\n- `ch`: The value to be set. It's passed as an `int` but is converted to an `unsigned char`.\n- `length`: The number of bytes to fill.\n\n**Use case:** Initializing a block of memory, such as an array or a structure, to all zeros or a specific value.\n\n~~~shell\n#include <stdio.h>\n#include <string.h>\n\nint main(void)\n{\n  char buffer[10];\n  \n  // Initialize all 10 bytes of the buffer to 'A'\n  memset(buffer, 'A', sizeof(buffer));\n  printf(\"Buffer after memset: %.10s\\n\",buffer);\n  \n  // Initialize the buffer to all zeros (a common and safe practice)\n  memset(buffer, 0, sizeof(buffer));\n  printf(\"Buffer after zeroing: %d\\n\", buffer[0]); // Prints 0\n\n  return 0;\n}\n~~~\n\n## 9.10 总结\n\n- 字符串就是零个或多个字符的序列，该序列以一个NUL字节结尾。\n\n## 9.13 问题\n\n1. C语言缺少显式字符串数据类型，这是一个优点还是一个缺点？\n\nAnswer:\n\nC语言缺少显式的字符串数据类型，既是它的**优点**，也是它的**缺点**。  \n\n优点：灵活性和高效性\n\nC语言的字符串被实现为以 **空字符（\\0）** 结尾的字符数组，这带来了以下几个显著的优点：\n\n- 内存效率高：C语言的字符串存储非常紧凑，没有额外的元数据（如长度信息）。这使得C语言程序在处理大量文本时，内存开销极小。\n\n- 直接操作内存：字符串作为数组，可以像普通数组一样通过指针直接访问和操作每个字符。这给予了程序员极大的灵活性，可以实现各种高效的算法，例如原地修改、零拷贝（zero-copy）等。这在系统编程、嵌入式开发和性能关键的应用中至关重要。\n\n- 互操作性强：几乎所有编程语言都支持字节数组或指针，这使得C语言的字符串可以轻松地与其他语言（如Python、Rust、Java等）进行接口交互，而无需复杂的类型转换。\n\n缺点：安全性和易用性\n\n这种设计也带来了明显的缺点，尤其是在安全和易用方面：\n\n- 安全性风险：由于字符串的长度信息不是显式存储的，字符串处理函数（如 strcpy、strcat、sprintf）都假定目标缓冲区足够大，这极易导致缓冲区溢出。这是C语言长期以来面临的最大安全挑战之一。程序员必须手动跟踪字符串长度，否则会引发严重的漏洞。\n\n- 容易出错：忘记在字符串末尾添加 \\0，或不小心覆盖了它，都会导致程序读取到无效内存，引发未定义行为。初学者经常会因为这些问题而感到困惑。\n\n- 操作不便：字符串的拼接、截取等操作不像高级语言那样简洁。例如，要拼接两个字符串，你需要手动计算所需空间、分配内存、然后使用 strcpy 和 strcat，整个过程繁琐且容易出错。\n\n# 🤖 结构和联合\n\n- C提供了两种类型的*聚合数据类型(aggregate data type)*。**数组**是相同类型的元素的集合，**结构体**是可具有不同类型的元素的集合。\n\n- ***数组***可以通过下标访问，且数据不能相互赋值，只能通过循环逐个赋值。\n- ***结构体***通过名字访问，相同类型的结构体变量可以相互赋值。\n\n## 10.1 结构基础知识\n\n- 结构体是一些值的集合，这些值称为它的**成员(member)**，<u>但一个结构体的各个成员可能具有不同的类型。</u>\n\n- <u>结构变量属于标量类型，所以你可以像对待其他标量类型那样执行相同类型的操作。</u>\n\n### 10.1.1 结构声明\n\n在声明结构时，必须列出它包含的所有成员。\n\n~~~shell\nstruct tag {member-list} variable-list;\n~~~\n\n结构声明语法的不同\n\n~~~shell\nstruct {\n  int   a;\n  char  b;\n  float c;\n}x;\n\n\nstruct {\n  int   a;\n  char  b;\n  float c;\n} y[20],*z;\n~~~\n\n<u>这两个声明被编译器当作两种截然不同的类型，即使它们的成员列表完全相同。</u>\n\n~~~shell\nz = &x;\n~~~\n\n这条语句是非法的。\n\n- 使用 **标签(tag)** 和 **类型定义别名(typedef)** 来更方便地声明和定义一个结构体变量。\n\n**标签(tag)** 字段允许为成员列表提供一个名字。\n\n~~~shell\nstruct SIMPLE{\n  int   a;\n  char  b;\n  float c;\n};\n\nstruct SIMPLE x,y[20],*z;\n~~~\n\n这个声明使用标签来创建变量，且现在`x`,`y`,`z`都是同一种类型的结构变量。\n\n**类型定义别名(typedef)** 字段可以创建一个新的类型。\n\n~~~shell\ntypedef struct {\n  int   a;\n  char  b;\n  float c;\n} Simple;\n\nSimple x;\nSimple y[20], *z;\n~~~\n\n`Simple`现在是一个类型而不是个结构标签。\n> 如果你想在多个源文件中使用同一种类型的结构，你应该把标签声明或`typedef`形式的声明放在一个头文件中。当源文件需要这个声明时可以使用`#include`指令把那个头文件包含进来。\n\n### 10.1.2 结构成员\n\n~~~shell\nstruct COMPLEX{\n  float f;\n  int a[20];\n  long *lp;\n  struct SIMPLE s;\n  struct SIMPLE sa[10];\n  struct SIMPLE *sp;\n};\n~~~\n\n结构成员可以是标量、数组、指针甚至是其他结构体。\n\n### 10.1.3 结构成员的直接访问\n\n- 结构变量的成员是通过点操作符`.`访问的。\n- 点操作符接受两个参数，左操作数就是结构变量的名字，右操作数就是需要访问的成员的名字。这个表达式的结果就是指定的成员。\n\n~~~shell\nstruct COMPLEX comp;\n(comp.s).a; // 类型为struct SIMPLE \n(comp.sa)[4]; // 同上类型的数组\n((comp.sa)[4]).c // 取出数组元素\n结合性都是从左到右\ncomp.sa[4].c; equals ((comp.sa)[4]).c;\n~~~\n\n### 10.1.4 结构成员的间接访问\n\n- 对于指向结构体的指针要访问其元素应该执行**间接访问操作`->`**。\n\n~~~shell\nvoid func(struct COMPLEX *cp);\n// 第一种访问方式\n(*cp).f;\n// 第二种访问方式\ncp->f;\n~~~\n\n### 10.1.5 结构的自引用\n\n~~~shell\n// 作为结构这种声明是非法的，程序内部会无限包含自身和结构的成员。(永不终止的递归程序)\n// 如果我定义了 struct SELF_REF1 b; 那么 sizeof(SELF_REF1) = sizeof(int) + (4+4+4+.....) + sizeof(int)\n// 无法计算，无法在内存中分配一个固定大小的空间。\n\nstruct SELF_REF1 {\n  int   a;\n  struct SELF_REF1 b; // 非法，不能这样定义。\n  int   c;\n\n};\n\n// 作为指针这个声明是合法的，因为指针的长度在编译器确定结构体长度前就知道了。\n// sizeof(SELF_REF2) = sizeof (int) + sizeof(SELF_REF2*) + sizeof(int)\n// 可以计算固定大小空间\n\nstruct SELF_REF2{\n  int   a;\n  struct SELF_REF2 *b;\n  int   c;\n};\n\n~~~\n\n**<u>事实上一个结构内指向自身结构的指针所指向的是同一种类型的不同结构。</u>**\n更高级的数据结构如链表和树，都是用这些技巧实现的。每个结构指向链表的下一个元素或树的下一个分支。\n\n~~~shell\n// 这个结构体创建失败了，因为SELF_REF3 直到声明的末尾才定义，所以在结构\n// 声明的内部时还尚未定义。\ntypedef struct {\n  int   a;\n  SELF_REF3 *b;\n  int   c;\n}SELF_REF3;\n\n// 解决方案是定义一个结构标签来声明b\ntypedef struct SELF_REF3_TAG {\n  int   a;\n  struct SELF_REF3_TAG *b;\n  int   c;\n}SELF_REF3\n// 这次正确定义了结构体。\n~~~\n\n### 10.1.6 不完整的声明\n\n- 在声明一些相互之间存在依赖的结构时使用不完整声明(incomplete declaration)\n\n~~~shell\nstruct B;\n\nstruct A {\n    struct B  *parnter;\n      \n};\nstruct B {\n    struct A  *partner;\n};\n~~~\n\n在A的成员列表中需要标签B的不完整声明。一旦A被声明之后，B的成员列表也可以被声明。\n\n### 10.1.7 结构的初始化\n\n- 位于花括号，由逗号分隔。\n\n~~~shell\nstruct INI_EX {\n  int   a;\n  short b[10];\n  Simple c;\n\n}x = {\n  10,\n  {1,2,3,4,5},\n  {25,'x',1.9},\n};\n// 另一种初始化\nstruct INI_EX x1 = {\n  10,\n  {1,2,3,4,5},\n  {25,'x',1.9},\n};\n~~~\n\n## 10.2 结构、指针和成员\n\n声明和定义一些结构体和结构体变量\n\n~~~shell\ntypedef struct {\n  int   a;\n  short b[2];\n}Ex2;\n\ntypedef struct EX{\n  int   a;\n  char  b[3];\n  Ex2   c;\n  struct EX   *d;\n}Ex;\n\n// 定义并初始化\nEx x = {10, \"Hi\", {5,{ -1 , 25 }}, 0};\nEx *px = &x;\n~~~\n\n### 10.2.1 访问指针\n\n**step1:** `px`是一个指针变量，`px`的表达式`Ex *px = x;`表示作为左值的`px`旧值将被一个新值取代。\n> 考虑表达式`px + 1`。这个表达式并不是一个合法的左值，因为它的值并不存储于任何可标识的内存位置。`px`的右值更有意思，如果px指向一个结构数组的元素，这个表达式将指向该数组的下一个结构。就算如此`px + 1`仍是非法的，因为我们没办法分辨内存下一个位置所存储的是这些结构元素之一还是其他东西。编译器无法检测到这类错误。\n\n### 10.2.2 访问结构\n\n**step2:** `*px`的右值是px所指向的整个结构。可以用于同类型结构体赋值，作为点操作符的左操作数，访问一个指定的成员，作为参数传递给函数，作为函数的返回值返回。`px`的左值是从`x`接收来的新值，它将接受它的所有成员的新值。\n\n- 作为左值，重要的是位置，而不是这个位置所保存的值。\n\n表达式`*px + 1`是非法的，因为`*px`的结果是一个结构。C语言并没有定义结构体和整型值之间的加法运算。但表达式`*(px+1)`中的`px+1`表示结构体指针但x是一个标量所以这个表达式也是非法的。\n\n### 10.2.3 访问结构成员\n\n**step3:** 表达式`px->a`右值是`10`,`x.a`和`px->a`值相同。\n\n<u>`*px`和`px->a`之间的关系</u>。在这两个表达式中`px`所保存的地址都用于寻找这个结构。但结构体的第一个成员是`a`。所以`a`的地址和结构的地址是一样的。<u>这样`px`看上去是指向整个结构，同时指向结构的第一个成员。</u>但是他们的类型不同，变量`px`被声明为一个指向结构的指针，所以表达式`*px`的结果是整个结构而不是它的第一个成员。\n\n~~~shell\nint *pi;\n\npi = px;\n// 这个操作是非法的，因为它们的类型不匹配。\npi = (int *)px;\n// 使用强制类型转换就能奏效\n\n// 但是这种方法很危险，因为它避开了编译器的类型检查。\n// 正确的表达式更为简单\npi = &px->a;\n// -> 操作符的优先级高于&操作符的优先级，所以这个表达式无需使用括号。\n\n~~~\n\n`px->b`的值是一个指针常量，因为`b`是一个数组这个表达式`px->b`不是一个合法的左值。\n\n~~~shell\nchar *pc;\npc = px->b; // 一个指针常量\npc = px->b[1]; // 指向数组的第二个元素\n~~~\n\n### 10.2.4 访问嵌套的结构\n\n**step4:** 表达式`px->c`也是指向一个结构体，它的左值是整个结构。\n\n~~~shell\nint num = px->c.a; 指向结构体内结构体并访问结构体成员a\nshort *num1 = px->c.b;\nint num2 = *px->c.b;\n~~~\n\n### 10.2.5 访问指针成员\n\n**step5:** `px->d`的右值是0，左值是本身的内存位置。`*px->d`是非法的操作，因为d内包含了一个NULL指针，所以它不指向任何东西。\n\n~~~shell\nEx te;\nte = *px->d;\nx.d = &te;\n~~~\n\n> **空指针的本质：地址0**\n>> 空指针是一个特殊的指针值，它表示该指针不指向任何有效的内存对象。\n>> *解引用空指针后CPU会尝试访问地址0*-->*操作系统会捕获异常*-->*触发硬件异常(Page Fault)或(Segmentation Fault)*-->*内核终止程序*。\n\n## 10.3 结构的存储分配\n\n- 编译器按照成员列表的顺序一个接一个地给每个成员分配内存。<u>只有当存储成员时需要满足正确的边界要求时，成员之间才可能出现用于填充的额外内存空间。</u>\n\n~~~shell\nstruct ALIGN{\n  char  a;\n  int   b; \n  char  c;\n};\n~~~\n\n这个结构体实际分配了12个字节的内存空间但是有6个字节空间实际上不能访问。\n\n~~~shell\nstruct ALIGN2{\n  int b;\n  char a;\n  char c;\n\n};\n~~~\n\n这个结构体实际分配了8个字节的内存空间。（两个字符可以紧挨着存储，最后有2个字节被浪费）\n> 但是实际上依程序的可维护性和可读性而言不是特别大的内存损失都不需要重新排。\n\n- 在程序创建成百上千个结构体时内存浪费问题就更为明显。\n- 可以使用`offsetof`宏（定义于`stddef.h`）判断结构体内成员距离首地址的偏移值\n\n~~~shell\noffsetof(type,member) // type 是结构体类型名，member是结构体里面的成员名\noffsetof(struct ALIGN, b) // 返回值是 4,也就是成员a占用了4个字节用于结构体内内存对齐\n~~~\n\n## 10.4 作为函数参数的结构\n\n- 非必要不建议将结构体作为函数参数传递\n- 结构体作为一个标量的大小可能会比想象中的大\n\n~~~shell\ntypedef struct\n{\n  char    product[PRODUCT_SIZE];\n  int     quantity;\n  float   unit_price;\n  float   total_amount;\n};\n\nvoid print_receipt(Transaction trans);\nvoid print_receipt(Transaction *trans);\n~~~\n\n一个传递的是结构体的拷贝，一个传递的是结构体指针。就大小而言指针比结构体小得多，效率更高。\n\n~~~shell\nTransaction print_receipt(Transaction trans);\nvoid print_receipt(Transaction *trans);\n~~~\n\n如果结构体作为函数返回值在堆栈上的操作效率会更低，传递结构体指针可以直接在函数内部完成结构体成员的修改。\n\n## 10.5 位段\n\n- 结构体具有实现 **位段(bit field)** 的能力\n- 位段的成员是一个或多个位的字段，这些不同长度的字段实际上存储于一个或多个整型变量中。\n- 位段成员必须声明为`int`,`unsigned int`,`signed int`, `_Bool(C99)`类型，在成员名的后面是一个冒号和一个整数。\n- 不能对位段成员取地址(不能使用`&`运算符)\n- 位段不能是数组\n- 可移植性的程序应该避免使用位段。\n- 位段和结构体成员一样之间需要内存对齐(在位段与位段之间插入填充位(Padding))\n\n~~~shell\nstruct CHAR {\n  unsigned  ch  : 7;\n  unsigned font : 6;\n  unsigned size : 19;\n};\n~~~\n\n因为最后一个位段`size`过于庞大(大于短整型的长度)，所以可以利用前两个位段`ch`和`font`所剩余的位来增加`size`的位数，这样就避免了声明一个32位的整数来存储`size`位段。\n> CHAR这个结构体内的位段说明了位段可以把长度为奇数的数据包装在一起，节省存储空间\n\n## 10.6 联合\n\n- 联合所有成员引用的是**内存中的相同位置**\n- 适用于在不同时刻把不同的东西存储于同一个位置时\n\n~~~shell\nunion {\n  float f;\n  int   i;\n} fi;\n\nfi.f = 3.14159;\nprintf(\"%d\\n\", fi.i);\n~~~\n\n在一个浮点型和整型都是32位的机器上，变量 `fi` 只占据内存中的一个32位的字。最后用占位符`%d`输出一个浮点数不是`3`而是`1078530000`，与IEEE754单精度浮点标准有关。\n\n### 10.6.1 变体记录\n\n- 内存中某个特定的区域将在不同的时刻存储不同类型的值\n\n在 C 语言中，可以使用 **联合体（Union）** 和 **结构体（Struct）** 结合的方式来模拟 `Pascal` 语言中的**变体记录（Variant Record）**，也称为**带标签的联合体（Tagged Union）**。\n\n这种模式是 C 语言处理异构数据集合的标准方法，同时提供了类型安全性和可预测性。\n\n#### 一个存货系统的变体记录\n\n~~~shell\n// 前两个结构指定每个零件和装配件必须存储的内容\nstruct PARTINFO {\n  int     cost;\n  int     supplier;\n};\n\nstruct SUBASSYINFO {\n  int     n_parts;\n  struct {\n    char partno[10];\n    short quan;\n  }part[MAXPARTS];\n};\n\n// 存货记录包含每个项目的一般信息并包含了一个联合\nstruct INVREC {\n  char    partno[10];\n  int     quan;\n  enum    { PART, SUBPASSY }    type;\n  union   {\n          struct PARTINFO       part;\n          struct SUBASSYIINFO   subassy;\n  }info;\n};\n\n// 操作名为 rec 的 INVERC 结构变量\nif (rec.type == PART){\n  y = rec.info.part.cost;\n  z = rec.info.part.supplier;\n}\nelse{\n  y = rec.info.subpassy.nparts;\n  z = rec.info.subpassy.parts[0].quan;\n}\n~~~\n\n### 10.6.2 联合的初始化\n\n- 联合初始化的初始值必须是联合第一个成员的类型，且必须位于一对花括号里\n\n~~~shell\nunion {\n  int   a;\n  float b;\n  char  c[4];\n} x = { 5 };\n~~~\n\n> 把`x.a`初始化为 5,如果给出的初始值是任何其他类型都会被转换为一个整数并赋值给`x.a`\n\n# ♿ 动态内存分配\n\n- 数组的元素存储于内存中连续的位置上。当一个数组被声明时，它所需要的内存在**编译时**就被分配。但是也可以使用动态内存分配在**运行时**为它分配内存。\n\n## 11.1 为什么使用动态内存分配\n\n如果是已经知道数量大小的数组分配发生在编译时，但如果在编译时不能确定数组长度(数组的长度常常在运行时才知道)，因为所需内存空间取决于输入数据。\n\n## 11.2 malloc和free\n\n- `malloc`执行动态内存分配`free`执行分配内存的释放。这些函数维护一个可用内存池。\n- `malloc`分配的动态内存没有初始化，可以使用`calloc`函数初始化也可以手动初始化。\n\n函数原型(在`stdlib.h`中声明)\n\n~~~C\nvoid *malloc(size_t size);\nvoid *free(void *pointer);\n~~~\n\n`malloc`分配的是一块连续的内存，如果请求分配100字节的内存那么实际分配的内存就是100个连续的字节。\n> `malloc`分配的内存可能比请求的内存大小稍微多一点，这个行为是由编译器定义的。\n\n内存池如果是空的(可用内存无法满足请求)`malloc`函数会像操作系统请求得到更多的内存。并在这块新的内存上执行分配任务。如果操作系统无法向malloc提供更多的内存，malloc就返回一个NULL指针。***因此对malloc所分配的内存确保其是非空(NULL)是非常重要的***。\n\n~~~C\nint *a_pointer = (int*)malloc(sizeof(int) * 100);\nif (a_pointer == NULL)\n  return -1; // 在函数内提前退出并返回错误值-1\n~~~\n\n`free`的参数只能是`NULL`或是之前请求分配内存函数`malloc`,`calloc`或`realloc`的返回值。向`free`函数传递一个NULL参数没有任何意义。\n> 因为malloc的返回值是一个`void*`类型，在比较老的编译器(C89或之前)可能会要求对返回值进行强制类型转换(int*)。\n\n> 二次释放和悬空指针：对同一块内存调用两次`free(ptr)`会导致堆损坏和程序崩溃；`free(ptr)`后`ptr`仍然指向已释放的内存。为了安全应立即执行`ptr=NULL`将指针置为空指针，避免后续误用。\n\n## 11.3 calloc和realloc\n\n函数原型(在`stdlib.h`中声明)\n\n~~~C\nvoid *calloc(size_t num_elements, size_t element_size);\nvoid *realloc(void *ptr,size_t new_size);\n~~~\n\n`calloc`也用于分配内存，而`realloc`用于修改一个原先已经分配的内存块大小，使用`realloc`可以扩大和缩小内存大小。\n\n> `malloc`分配的内存是未初始化的，内容是随机的垃圾值；`calloc`分配的内存会被初始化为全0。  \n> `realloc`重新分配内存大小失败时会返回NULL但原始指针ptr指向的内存块仍有效，数据保持不变。\n\n> realloc(NULL,size) == malloc(size)  \n> realloc(ptr,0) == free(ptr)并返回NULL\n\n## 11.4 使用动态分配的内存\n\n~~~C\nint *pi;\n...\npi = malloc(100); // 如果分配成功，在整型为 4 个字节大小的机器上被当作25个整型元素的数组\npi = malloc(25 * sizeof(int)); // 这种分配方式更好一些因为它是可移植的\n...\n// 使用内存：为内存分配元素\nint *pi2, i;\n\npi2 = pi;\nfor(;pi2 != pi + 25;)\n  *pi2++ = 0;\n\n// 使用下标\nfor(i = 0; i < 25; i++)\n  pi[i] = 0;\n~~~\n\n## 11.5 常见的动态内存错误\n\n- 释放内存的一部分是不允许的，动态分配的内存必须一起释放。可以使用`realloc`函数缩小一块动态分配的内存并有效地释放尾部的部分内存(还是用原分配函数的返回值)\n\n~~~C\npi = malloc(10 * sizeof(int));\nfree(pi + 5); // 释放部分内存\n~~~\n\n**内存泄露**\n\n分配内存但在使用完毕后不释放将引起内存泄露(memory leak)。在那些所有执行程序共享一个通用内存池的操作系统中，内存泄露将一点点地榨干可用内存。\n\n其他操作系统能够记住每个程序当前拥有的内存段，这样当一个程序终止时，所有分配给它但未被释放的内存都归还给内存池。\n\n# 🤧使用结构和指针\n\n## 12.1 链表\n\n- **链表(linked_list)** 就是一些包含数据的独立数据结构的集合。链表中的每个节点通过链或指针连接在一起。程序通过指针访问链表中的节点。通常节点是动态分配的，也有由节点数组构建的链表。\n\n## 12.2 单链表\n\n- 在单链表中，每个节点包含一个指向链表下一节点的指针。链表最后一个节点的指针字段的值为`NULL`，提示链表后面不在有其他节点。在找到链表的第一个节点后，指针就可以带你访问剩余的所有节点。为了记住链表的起始位置，可以使用一个**根指针(root pointer)**。根指针指向链表的第一个节点。注意根指针只是一个指针，它不包含任何数据。\n\n~~~C\ntypedef struct NODE{\n  struct NODE *link; // 指向下一个节点的指针\n  int         value; // 存储数据的变量 \n} Node;\n~~~\n\n> 单链表无法从结束位置往前遍历\n\n### 12.2.1 在单链表中插入\n\n~~~C\n// 插入到一个有序的单链表。函数的参数是一个指向链表第一个节点的指针以及需要插入的值。\n\n#include <stdlib.h>\n#include <stdio.h>\n#include \"sll_node.h\"\n\n#define FALSE 0\n#define TRUE  1\n\nint sll_insert(Node *current, int new_value)\n{\n  Node *previous;\n  Node *new;\n\n  // 寻找正确的插入位置，方法是按顺序访问链表，直到到达其值大于或等于新插入值的节点。\n  \n  while(current->value < new_value)\n  {\n    previous = current;\n    current = current->link;\n  }\n  // 为新节点分配内存，并把新值存储到新节点中，如果内存分配失败。\n  // 函数返回false\n  new = (Node*)malloc(sizeof(Node));\n  if (new == NULL)\n    return FALSE;\n  new->value = new_value;\n\n  // 把新节点插入到链表中，并返回true \n  new->link = current;\n  previous->link = new; \n  return TRUE;\n}\n~~~\n\n~~~C\nresult = sll_insert(root,12); // 假设有一个节点存储15，插入在这个节点前\n~~~\n\n- 这个插入函数是**不正确**的，它不能处理插入最后一个节点后的场景(最后一个节点的link为NULL)，也不能处理插入第一个节点前的场景(函数不能访问root，previous未定义)\n- 可以将一个指向root的指针作为参数传递给函数。然后使用间接访问，函数不仅可以获得root(指向链表第一个节点的指针，也就是根指针)的值，也可以向它存储一个新的指针值(解决current和previous分开的问题，函数总是可以判断Node\\*\\*是否满足条件并间接访问root判断值大小是否满足。Node\\*\\*总是作为当前节点的前一个链接字段。)\n\n~~~C\n#include <stdlib.h>\n#include <stdio.h>\n#include \"sll_node.h\"\n\n#define FALSE 0\n#define TRUE  1\n\nint sll_insert(Node **rootp, int new_value)\n{\n  Node *current;\n  Node *previous;\n  Node *new;\n  \n  // 得到指向第一个节点的指针\n  current = *rootp;\n  previous = NULL;\n  \n  // 寻找正确的插入位置，方法是按序访问链表，直到到达一个其值大于或等于新值的节点\n  while(current != NULL && current->value < new_value)\n  {\n    previous = current;\n    current = current->link;\n  }\n\n  // 为新节点分配内存，并把新值存储到新节点中，如果内存分配失败，\n  // 函数返回false\n  new = (Node*)malloc(sizeof(Node));\n  if (new == NULL)\n    return FALSE;\n  new->link = current;\n  if (previous == NULL)\n    *rootp = new;\n  else\n    previous->link = new;\n  return TRUE;\n}\n\nint sll_insert_ease(Node **head, int new_value)\n{\n  Node *new_node;\n  \n  // current_ptr 现在指向的是一个指针 (head 或 link 字段)\n  // 初始时指向调用者的 head 指针变量\n  Node **current_ptr = head;\n  \n  // 1. 寻找插入位置：循环直到指针指向NULL(末尾)或指向的值 >= new_value\n  while (*current_ptr != NULL && (*current_ptr)->value < new_value)\n    current_ptr = &(*current_ptr)->link;\n  \n  // 2. 分配新节点\n  new_node = (Node*)malloc(sizeof(Node));\n  if (new_node == NULL)\n    return FALSE;\n  new_node->value = new_value;\n  \n  // 3. 插入：新节点指向 current_ptr 当前指向的那个节点\n  new_node->link = *current_ptr;\n  \n  // 4. 核心：更新current_ptr 指向的指针变量，让它指向新节点\n  *current_ptr = new_node; // *current_ptr 其实就是上一个节点的link\n  return TRUE;\n}\n// 书上的优化\nint sll_insert(register Node **linkp, int new_value)\n{\n  register Node *current;\n  register Node *new;\n  \n  while ((current = *linkp) != NULL && current->value < new_value)\n    linkp = &current->link;\n\n  new = (Node*)malloc(sizeof(Node));\n  if (new == NULL)\n    return FALSE;\n  new->value = new_value;\n  \n  new->link = current;\n  *linkp = new;\n  return TRUE;\n}\n~~~\n\n## 12.3 双链表\n\n- 单链表的替代方案是双链表。在一个双链表中，每个节点都包含两个指针，指向前一个节点的指针和指向后一个节点的指针。这样就可以以任何方向遍历双链表，甚至可以忽前忽后地在双链表中访问。\n\n~~~C\ntypedef struct NODE {\n  struct NODE   *fwd;\n  struct NODE   *bwd;\n  int           value;\n};\n~~~\n\n现在存在两个指针：一个指向链表的第一个节点(*fwd)，另一个指向最后一个节点(*bwd)。如果当前链表为空，这两字段都为`NULL`。\n\n### 12.3.1 在双链表中插入\n\n- `dll_insert`函数接受两个参数：一个指向根节点的指针和一个整型值。\n- 先前所编写的单链表插入函数把重复的值也添加到链表中。在有些应用程序中，不插入重复的值可能更为合适。`dll_insert`函数只有当欲插入的值原先不存在于链表中时才将其插入。\n\n考虑四种情况：\n\n1. 新值可能必须插入到链表的中间位置。\n2. 新值可能必须插入到链表的起始位置。\n3. 新值可能必须插入到链表的结束位置。\n4. 新值可能必须既插入到链表的初始位置，又插入到链表的结束位置(即原链表为空)。\n\n~~~C\n/*\n  把一个值插入到一个双链表，rootp是一个指向根节点的指针，\n  value是欲插入的新值\n  返回值：如果欲插值原先已存在于链表中，函数返回0；\n  如果内存不足导致无法插入，函数返回-1；如果插入成功，函数返回1。\n*/\n#include <stdlib.h>\n#include <stdio.h>\n#include \"doubly_linked_list_node.h\"\n\nint dll_insert(Node *rootp, int value)\n{\n  Node *this;\n  Node *next;\n  Node *newnode;\n  \n  /*\n    查看value是否已经存在于链表中，如果是就返回\n    否则，为新值创建一个新节点(\"newnode\"将指向它)\n    \"this\"将指向应该在新节点之前的那个节点。\n    \"next\"将指向应该在新节点之前的那个节点。\n  */\n  for (this = rootp; (next = this->fwd) != NULL; this = next){\n    if (next->value == value)\n      return 0;\n    if (next->value > value)\n      break;\n  }\n\n  newnode = (Node*)malloc(sizeof(Node));\n  if (newnode == NULL)\n    return -1;\n  newnode->value = value;\n\n  // 把新值添加到链表中\n  if (next != NULL)\n  {\n    // 情况1或2:并非位于链表尾部\n    if (this != rootp) // 情况1：并非位于链表起始位置\n    {\n      newnode->fwd = next;\n      this->fwd = newnode;\n      newnode->bwd = this;\n      next->bwd = newnode;\n    }\n    else // 情况2：位于链表的起始位置\n    {\n      newnode->fwd = next;\n      rootp->fwd = newnode;\n      newnode->bwd = NULL;\n      next->bwd = newnode;\n    }   \n  }\n  else\n  {\n    // 情况3或4:位于链表的尾部\n    if (this != rootp) // 情况3：并非位于链表的起始位置\n    {\n      newnode->fwd = NULL;\n      this->fwd = newnode;\n      newnode->bwd = this;\n      rootp->bwd = newnode;\n    }\n    else // 情况4：位于链表的起始位置\n    {\n      newnode->fwd = NULL;\n      rootp->fwd = newnode;\n      newnode->bwd = NULL;\n      rootp->bwd = newnode;\n    }\n  }\n  return 1;\n}\n~~~\n\n#### 语句提炼(statement factoring)\n>\n> 上面的双链表在最后判断节点插入位置时各个嵌套的if语句群存在大量的相似之处，可以使用**语句提炼**技巧消除这些重复代码\n\n~~~C\nif (x == 3)\n{\n  i = 1;\n  some statement;\n  j = 2;\n}\nelse\n{\n  i = 1;\n  some statement different;\n  j = 2; \n}\n~~~\n\n> 这里不管`x == 3`的值是真是假，语句`i = 1` 和 `j = 2`都将执行。且这两天语句在if条件判断前都不会执行，所以：\n\n~~~C\ni = 1; \nif (x == 3)\n  some statement;\nelse \n  some statement different;\nj = 2;\n~~~\n\n> ***但是如果是对测试的结果有所影响的语句千万不能提炼出来！***\n\n~~~C\n/*\n  双链表部分代码使用语句提炼\n*/\n// 把新节点添加到链表中\nif(next != NULL)\n{\n  newnode->fwd = next;\n  if (this != rootp)\n  {\n    this->fwd = newnode;\n    newnode->bwd = this;\n  }\n  else\n  {\n    rootp->fwd = newnode;\n    newnode->bwd = NULL;\n  }\n  next->bwd = newnode;\n}\nelse\n{\n  newnode->fwd = NULL;\n  if (this != rootp)\n  {\n    this->fwd = newnode;\n    newnode->bwd = this;\n  }\n  else\n  {\n    rootp->fwd = newnode;\n    newnode->bwd = NULL;\n  }\n  rootp->bwd = newnode;\n}\n~~~\n\n第二个简化技巧\n\n~~~C\nif (pointer != NULL)\n  field = pointer;\nelse\n  field = NULL;\n~~~\n\n这段代码的意思是设置一个和pointer相等的变量，如果pointer未指向任何东西，这个变量就设置为NULL。但是：\n\n~~~C\nfield = pointer;\n~~~\n\n这个代码的意思其实和上面的一模一样，也就是第三四种情况的else语句内的`newnode->fwd = NULL`可以写成`newnode->fwd = next`；同理`rootp->fwd = newnode`也可以写成`this->fwd = newnode`。\n\n~~~C\n/*\n  最终提炼的双链表插入函数\n*/\n#include <stdio.h>\n#include <stdlib.h>\n#include \"doubly_linked_list_node.h\"\n\nint dll_insert(register Node *rootp, int value)\n{\n  register Node *this;\n  register Node *next;\n  register Node *newnode;\n  \n  /*\n    查看value是否已经存在于链表中，如果是就返回。\n    否则，为新值创建一个新节点(\"newnode\"将指向它)。\n    \"this\"将指向应该在新节点之前的那个节点，\n    \"next\"将指向应该在新节点之后的那个节点。\n  */\n  for (this = rootp; (next = this->fwd) != NULL; this = next)\n  {\n    if (next->value == value)\n      return 0;\n    if (next->value > value)\n      break;\n  }\n  newnode = (Node*)malloc(sizeof(Node));\n  if (newnode == NULL)\n    return -1;\n  newnode->value = value;\n\n  // 把新节点添加到链表中\n  newnode->fwd = next;\n  this->fwd = newnode;\n\n  //if (this != rootp)\n  //  newnode->bwd = this;\n  //else\n  //  newnode->bwd = NULL;\n  newnode->bwd = (this != rootp) ? this : NULL;\n  \n  //if (next != NULL)\n  //  next->bwd = newnode;\n  //else\n  //  rootp->bwd = newnode;\n  (next != NULL ? next : rootp)->bwd = newnode;\n  return 1;\n}\n~~~\n\n# 🍋‍🟩 预处理器\n\n编译一个C程序涉及很多步骤。其中第一个步骤被称为**预处理(preprocessing)阶段**。C预处理器在源代码编译之前对其进行一些文本性质的操作。它的主要任务包括删除注释、插入被`#include`指令包含的文件的内容、定义和替换由`#define`指令定义的符号以及确定代码的部分内容是否应该根据一些条件编译指令进行编译。\n\n## 14.1 预定义符号\n\n|**符号**|**样例值**|**含义**|\n|:---:|:---:|:---:|\n|\\_\\_FILE\\_\\_|\"name.c\"|进行编译的源文件名|\n|\\_\\_LINE\\_\\_|25|文件当前行的行号|\n|\\_\\_DATE\\_\\_|\"Jan 31 1997\"|文件被编译的日期|\n|\\_\\_TIME\\_\\_|\"18:04:30\"|文件被编译的时间|\n|\\_\\_STDC\\_\\_|1|如果编译器遵循ANSI C，其值就为1，否则未定义|\n\n`__FILE__`和`__LINE__`在确认调试输出的来源方面很有用处。`__DATE__`和`__TIME__`常常用于在被编译的程序中加入版本信息。`__STDC__`用于那些在ANSI环境和非ANSI环境都必须进行编译的程序中结合条件编译。\n\n**更多实用的预定义符号**\n\n|**符号**|**样例值**|**含义**|\n|:---:|:---:|:---:|\n|\\_\\_STDC\\_VERSION\\_\\_|202311|显示编译器当前版本号|\n|\\_\\_func\\_\\_|main|显示当前所在函数函数名|\n|\\_\\_GUNC\\_\\_|15|和下面两个预定义符号一起使用，显示gcc当前符号|\n|\\_\\_GUNC\\_MINOR\\_\\_|2|同上|\n|\\_\\_GUNC\\_PATCHLEVEL\\_\\_|1|同上|\n|\\_\\_OPTIMIZE\\_\\_|1|判断是否使用code optimization|\n|\\_\\_x86\\_64\\_\\_|1|判断系统芯片架构，下面一致|\n|\\_\\_i386\\_\\_|1|同上|\n|\\_\\_aarch64\\_\\_|1|同上|\n|\\_\\_arm\\_\\_|1|同上|\n|\\_\\_powerpc64\\_\\_|1|同上|\n|\\_\\_powerpc\\_\\_|1|同上|\n\n## 14.2 #define\n\n在一些简单的用法中`#define`就是为数值命名一个符号\n\n`#define`更为正式的描述\n\n~~~C\n#define name stuff\n~~~\n\n替换文本并不限于数值字面值常量。使用`#define`指令，你可以把任何文本替换到程序中。\n\n~~~C\n#define reg         register\n#define do_forever  for(;;)\n#define CASE        break;case\n~~~\n\n如果定义中的stuff非常长，它可以分成几行，除了最后一行之外，每行的末尾都要加一个反斜杠。\n\n~~~C\n#define DEBUG_PRINT(x,y,z)   printf( \"File %s line %d:\" \\\n                             \" x=%d, y=%d, z=%d\", \\\n                             __FILE__, __LINE__, \\\n                             x, y, z ) \n~~~\n\n这里使用了相邻的字符串常量被自动连接为一个字符串的这个特性。\n> #define 语句末尾不需要加分号`;`\n还可以使用`#define`指令把一序列语句插入到程序中。\n\n~~~C\n#define PROCESS_LOOP \\\n        for (i = 0; i < 10; i += 1){  \\\n            sum += i;                 \\\n            if (i > 0)                \\\n            prod *= i;                \\\n        }\n~~~\n\n> 不要滥用这种技巧，如相同的代码需要出现在程序的几个地方，函数是一个更好的实现办法。\n\n### 14.2.1 宏\n\n- #define 机制包括了一个规定，允许把参数替换到文本上，这种实现通常称为 **宏(macro)** 或定义宏(defined macro)\n\n~~~C\n#define name(parameter-list) stuff\n~~~\n\n`parameter-list(参数列表)`是一个由逗号分隔的值的列表，每个值都与宏定义中的一个参数相对应\n\n~~~C\n// 一个接受一个参数的宏\n#define SQUARE(x) x * x\n\n// 正常使用没有问题\nSQUARE(5) // 返回值是 25\n\n// 下面是这个定义的问题\nint a;\na = 5; \nprintf(\"%d\\n\",SQUARE(a + 1));\n// 这里返回值返回 11 而不是 36\n\n// 被替换宏文本\nprintf(\"%d\\n\", a + 1 * a + 1);\n// 根据四则运算先执行 1 * a 后执行两个加法\n// 修改为\n#define SQUARE(x) (x) * (x)\n// 这样就可以避免第一个问题\n\n// 另一个问题\n#define DOUBLE(x) (x) + (x)\na = 5;\nprintf(\"%d\\n\", 10 * DOUBLE(a));\n// 这里返回的是 55 而不是 100\nprintf(\"%d\\n\", 10 * (a) + (a));\n// 在原来的定义外添加一个括号\n#define DOUBLE(x) ((x) + (x))\n// 就可以解决这个问题\n~~~\n\n> 所有用于对数值表达式进行求值的宏定义都应该用这种方式加上括号\n\n**一种有趣的宏**\n\n~~~C\n#define repeat do\n#define until(x) while(!(x))\n\n// 上面的宏定义将下面的循环替换\n\n// 替换\ndo{\n  statements;\n}while(!(i >= 10));\n\n// 为\nrepeat {\n  statements;\n} until (i >= 10);\n~~~\n\n> 应该避免一直使用这种写法\n>\n### 14.2.2 #define 替换\n\n1. 在调用宏时，首先对参数进行检查，看看是否包含了任何由`#define`定义的符号。如果是，它们首先被替换。\n2. 替换文本随后被插入到程序中原来文本的位置。对于宏，参数名被他们的值所替代。\n3. 最后，再次对结果文本进行扫描，看看它是否包含了任何由`#define`定义的符号。如果是就重复上述处理过程。\n\n这样宏参数和`#define`可以包含其他`#define`定义的符号。但是宏不可以出现递归。\n\n- 当预处理器搜索`#define`定义的符号时，字符串常量的内容并不进行检查。有两种将宏参数插入到字符串常量的方法\n\n~~~C\n#define PRINT(FORMAT, VALUE) \\\n      printf( \"The value is \" FORMAT \"\\n\", VALUE)\n... \nPRINT(\"%d\", x + 3)\n~~~\n\n> 这种技巧只有当字符串常量作为宏参数给出时才能使用\n\n~~~C\n#define PRINT(FORMAT, VALUE) \\\n    printf( \"The value of \" #VALUE \\\n    \" is \" FORMAT \"\\n\", VALUE )\n...\nPRINT( \"%d\", x + 3 ) // The value of x + 3 is 25 \n~~~\n\n- 第二个技巧使用预处理器把一个宏参数转换为一个字符串。`#argument`这种结构被预处理器翻译为`argument`。\n\n- `##`结构则执行一种不同的任务。它把位于它两边的符号连接成一个符号。作为用途之一，它允许宏定义从分离的文本片段创建标识符。\n\n~~~C\n#define ADD_TO_SUM ( sum_number, value ) \\\n    sun ## sum_number += value\n... \nADD_TO_SUM( 5, 25 );\n// 这条语句的意思是 sum5 += 25; 这种连接必须产生一个合法的标识符。否则其结果就是未定义的。\n~~~\n\n### 14.2.3 宏与函数\n\n~~~C\n#define MAX(a,b) ((a) > (b) ? (a) : (b))\n~~~\n\n使用宏来定义简单计算而不是函数有两个优点：\n\n1. 用于调用和从函数返回的代码可能比实际执行这个小型计算工作的代码更大，所以对于简单函数使用宏比使用函数在***程序的规模和速度方面都更胜一筹***。\n2. 函数的参数必须声明一种特定的类型，上面这个宏定义可以用于整型、长整型、单浮点型、双浮点型等其他的类型。***宏是与类型无关的***。\n\n还有一些任务无法用函数实现只能用宏定义实现。\n\n~~~C\n#define MALLOC(n, type) \\ \n    ( (type*)malloc( (n) * sizeof(type)))\n// 被转换为\npi = MALLOC(25, int);\npi = ((int*)malloc((25) * sizeof(int)));\n~~~\n\n> 请注意宏定义并没有用一个分号结尾。分号出现在调用这个宏的语句中。\n>\n### 14.2.4 带副作用的宏参数\n\n当宏参数在宏定义中出现的次数超过一次时，如果这个参数具有副作用那么当你使用这个宏时就可能出现危险，导致不可预料的结果。**副作用**就是在表达式求值时出现的永久性效果。例如 :\n\n~~~C\nx + 1\n~~~\n\n可以重复执行几百次，它每次获得的结果都是一样的。这个表达式不具有副作用。但是：\n\n~~~C\nx++\n~~~\n\n就具有副作用：它增加`x`的值。当这个值在下一次执行时，它将产生不同的结果。\n\n~~~C\n#define MAX(a,b) ((a) > (b) ? (a) : (b))\n...\nx = 5;\ny = 8;\nz = MAX( x++, y++ );\nprintf(\"x=%d, y=%d, z=%d\\n\", x, y, z);\n// MAX的结果执行后 x = 6, y = 10, z = 9\n// 虽然那个较小的值只增加了一次，但那个较大的值却增加了两次(y++) ? (y++)\nz = ((x++) > (y++) ? (x++) : (y++));\n~~~\n\n### 14.2.5 命名约定\n\n为了区分宏定义和函数的区别需要一个**命名约定**，最明显的区别就是函数名一般用全小写字母，宏定义用全大写字母。\n\n***宏和函数的不同之处***\n\n|属性|#define宏|函数|\n|:---:|:---:|:---:|\n|代码长度|每次使用时，宏代码都被插入到程序中。除了非常小的宏之外，程序的长度将大幅度增长|函数代码之处限于一个地方；每次使用这个函数时，都调用那个地方的同一份代码|\n|执行速度|更快|存在函数调用/返回的额外开销|\n|操作符/优先级|宏参数的求值是在所有周围表达式的上下文环境里，除非它们加上括号，否则邻近操作符的优先级可能会产生不可预料的结果|函数参数只在函数调用时求值一次，它的结果值传递给函数。表达式的求值结果更容易预测|\n|参数求值|参数每次用于宏定义时，它们都将重新求值。由于多次求值，具有副作用的参数可能会产生不可预测的结果|参数在函数被调用前只求值一次。在函数中多次使用参数并不会导致多种求值过程。参数的副作用并不会造成任何特殊的问题|\n|参数类型|宏与类型无关。只要对参数的操作是合法的，它可以使用于任何参数类型|函数的参数是与类型有关的。如果参数的类型不同，就需要使用不同的函数，即使它们执行的任务是相同的|\n\n### 14.2.6 #undef\n\n- 这条预处理指令用于移除一个宏定义。\n\n~~~C\n#undef name\n~~~\n\n如果一个现存的名字需要被重新定义，那么它的旧定义首先必须用`#undef`移除。\n\n### 14.2.7 命令行定义\n\n许多C编译器提供了在命令行中定义符号，用于启动编译过程。\n\n~~~C\nint array[ARRAY_SIZE];\n\n-Dname\n-Dname=stuff\n\ncc -DARRAY_SIZE=100 prog.c\n~~~\n\n## 14.3 条件编译\n\n- 只用于调试程序的语句就是一个明显的例子它们不应该出现在程序的产品版本中，**但是你可能并不想把这些语句从源代码中物理删除，因为如果需要一些维护性修改时，你可能需要重新调试这个程序，还需要这些语句**。\n- 条件编译(conditional compilation)就是用于实现这个目的。\n\n~~~C\n#if constant-expression\n      statements\n#endif\n~~~\n\n其中`constant-expression`（常量表达式）由预处理器进行求值。如果它的值是非零值（真），那么`statements`部分就被正常编译，否则预处理器就安静地删除它们。\n\n~~~C\n#define DEBUG 1\n#if DEBUG\n  printf(statements);\n#endif\n~~~\n\n一个简单的使用条件编译\n\n`#if`的子句`#elif`和`#else`\n\n~~~C\n#if constant-expression\n      statements\n#elif  constant-expression\n      other statements ...\n#else \n      other statements\n#endif\n~~~\n\n### 14.3.1 是否被定义\n\n~~~C\n#if defined(symbol)\n#ifdef symbol\n\n#if !defined(symbol)\n#ifndef symbol\n~~~\n\n`#if`形式的语句功能更强。因为常量表达式可能包含额外的条件\n\n~~~C\n#if X > 0 || defined(ABC) && defined(BCD)\n~~~\n\n> 一些老K&R C编译器并未包含所有功能。\n\n### 14.3.2 嵌套指令\n\n~~~C\n#if defined( OS_UNIX )\n  #ifdef OPTION1\n  unix_version_of_option1();\n  #endif\n  #ifdef OPTION2\n  unix_version_of_option2();\n  #ifdef OPTION3\n  unix_version_of_option3();\n#elif defined( OS_MSDOS )\n  #ifdef OPTION2\n  msdos_version_of_option2();\n  #endif\n#endif\n~~~\n\n> 在每个#endif 后添加一个注释标签可以很好地区分每个嵌套的指令\n\n## 14.4 文件包含\n\n- 一个头文件如果被包含到10个源文件中，它实际上被编译了10次。\n\n> 但实际上这种额外开销实际上并不大。\n>\n### 14.4.1 函数库文件包含\n\n头文件包含语法\n\n~~~C\n#include <filename>\n~~~\n\n> UNIX 系统上使用`<>`包含的头文件一般在目录`/usr/include`查找\n>> 编译器有一个选项`-I`允许把其他目录添加到这个列表中\n>>\n### 14.4.2 本地文件包含\n\n~~~C\n#include \"filename\"\n~~~\n\n> 优先从.c文件或.h文件所在的当前目录查找\n>\n### 14.4.3 嵌套文件包含\n\n~~~C\n#include \"a.h\"\n#include \"b.h\"\n// 如果b.h 文件里包含了a.h，那么a.h在当前文件就被包含了两次\n--------\n// another file\n#ifndef _HEADERNAME_H\n#define _HEADERNAME_H 1 // #define _HEADERNAME_H\n// All the stuff that you want in the header file\n#endif\n\n// 使用这种方法并不能直接不调用第二次该文件，但是文件内的所有文件会在第二次调用被弃用\n~~~\n\n> 这种处理将拖慢编译速度，所以可能尽量避免出现多重包含\n\n## 14.5 其他指令\n\n### 14.5.1 #error\n\n当程序编译之后，`#error`指令允许你生成错误信息，并强制终止编译过程。\n\n~~~C\n#error text of error message\n// 使用案例\n#if defined(OPTION_A)\n    stuff needed for optionA\n#elif defined(OPTION_B)\n    stuff needed for optionA\n#elif defined(OPTION_C)\n    stuff needed for optionC\n#else\n    #error No option selected!\n#endif\n\n// 检查 C 标准版本\n#if __STDC_VERSION__ < 199901L\n#error \"本项目要求 C99 或更高版本的编译器！\"\n#endif\n\n#ifdef WINDOWS_ENV \n    // 针对 Windows的代码...\n#elif defined(LINUX_ENV)\n    // 针对 Linux的代码...\n#else\n#error \"必须定义 WINDOWS_ENV 或 LINUX_ENV 宏以指定编译环境！\"\n~~~\n\n### 14.5.2 #line\n\n`#line`指令用于改变编译器对当前代码行号和文件名的追踪。\n\n~~~C\n#line number \"string\"\n// number 将当前源代码行的行号设置为这个数字\n// string 可选，将编译器追踪的文件名设置为这个字符串\n\n// 例子\n// 原始文件名 line.c  假设\n#include <stdio.h>\n\nint a = 1;\n\n#define DEBUG 0\n#undef DEBUG\n// gcc -std=c11 -g -Wall -DDEBUG=0 line.c\n// gcc -std=c11 -g -Wall -DDEBUG=1 line.c\n// 使用-DNAME 控制定义名的值\n#if DEBUG\n#line 100 \"generated_code.c\"\n#endif\nvoid func() {\n  int b = 2;       // 编译器现在认为这是 generated_code.c 的 101 行\n  int c = \"error\"; // 故意制造一个错误\n}\n\n// 恢复到当前文件的实际行号\n#line __LINE__\n\nint main(void) {\n  func();\n  return 0;\n}\n~~~\n\n### 14.5.3 #progma\n\n- 一种特殊的预处理器指令，用于向编译器发出特殊指令或特定于实现的功能。\n- `#progma` 的行为完全取决于编译器。\n\n~~~C\n#progma 记号序列\n// -------------\n#progma once // 非标准但广泛使用，确保头文件只被编译一次，防止重复包含错误。\n// 不是C标准的一部分，但是几乎所有的现代编译器(GCC, Clang, MSVC)都支持。\n#progma STDC // C99/C11 标准用于控制浮点运算和线程。\n\n#progma pack(n) // 控制结构体对齐\n// 改变结构体的内存对齐方式\nstruct DefaultStruct {\n  char c;\n  int i; // 4 字节，可能有三字节的填充\n};\n\n// 设置对齐为 1字节\n#progma pack(push, 1)\n\nstruct PackedStruct {\n  char c; // 1字节\n  int i; // 4 字节，紧跟在 c 之后，没有填充\n};\n\n#progma pack(pop) // 恢复默认对齐设置\n~~~\n\n# 🎶 输入/输出函数\n\n- ANSI C和早期C相比的最大优点之一就是它在规范里所包含的函数库。每个ANSI编译器必须支持一组规定的函数，并具备规范所要求的接口，而且按照规定的行为工作。\n\n## 15.1 错误报告\n\n`perror`函数以一种简单、统一的方式报告错误。（原型定义于stdio.h）\n\n~~~C\nvoid perror(char const *message);\n~~~\n\n> 标准库函数在程序存在错误时在一个外部整型变量`errno`（在errno.h中定义）中保存错误代码后把这个信息传递给用户程序，提示操作失败的准确原因。\n>> perror最大的优点就是容易使用。\n\n## 15.2 终止执行\n\n`exit`函数用于终止一个程序的执行。（原型定义于stdlib.h）\n\n~~~C\nvoid exit(int status);\n~~~\n\n`status`参数返回给操作系统，用于提示程序是否正常完成。\n> 预定义符号EXIT_SUCCESS 和 EXIT_FAILURE 分别提示程序的终止是成功还是失败。\n>> 一般执行完`perror`后都会执行`exit`\n\n## 15.3 标准I/O函数库\n\n- 标准I/O函数库是在原先I/O库基础上的实现和扩展，例如为printf创建了不同的版本。且函数库引入了缓冲I/O的概念，提高了绝大多数程序的效率。\n\n> 但是标准函数库是在某台特定类型机器上实现的，在其他不同类型的机器上运行相同的程序会出现无法运行的情况。\n\n- ANSI C函数库中的I/O函数在可移植性和完整性上更加完善。\n\n> ANSI C的一个主要优点就是这些修改是通过**增加不同的函数**方式实现，而不是通过对现存函数进行修改来实现，保证了程序的可移植性。\n\n## 15.4 ANSI I/O概念\n\n- 头文件`<stdio.h>`包含了与ANSI函数库的I/O部分有关的声明。\n\n> 尽管不包含这个头文件也能使用某些I/O函数，但绝大多数函数都需要包含这个头文件。\n>\n### 15.4.1 流\n\n- ANSI C对I/O的概念进行抽象，所有的I/O操作只是简单的移入/移出字节。这种字节流便称为**流(stream)**。\n\n1. 核心概念：抽象(Abstraction)\n\n- **流的本质**：流是对所有I/O操作的抽象\n- **统一接口**：所有的I/O设备都被视为类似的设备。\n- **程序视角**：对C程序而言，所有的I/O操作都只是在流上进行字节的移进或移出。\n- **细节隐藏**：特定的I/O设备的细节对程序员是隐藏的。\n\n2. 核心机制：缓冲(Buffering)\n\n大多数流是***完全缓冲的(fully buffered)***\n\n- **读取操作**：当进行\"读取\"时，实际上是从一块较大的缓冲区(buffer)中读取数据。当缓冲区空时，程序才通过设备或文件读取下一块较大的输入数据并重新填充缓冲区。\n- **写入操作**：\"写入\"也是先写入到内存中的缓冲区，直到缓冲区写满时，数据才被一次性写入(flush,冲洗或刷新)到设备或文件。\n- **效率优势**：这种块状写入和读取操作由于减少了与设备或文件的交互次数，能够实现更快速的I/O。\n\n解决输出延迟\n\n~~~C\nprintf(\"something or other\");\nfflush(stdout); // 立即将缓冲区内容写出\n~~~\n\n> 在通常的编程测试中，stdout默认是行缓冲模式。\n\n~~~C\n// 没有\\n触发自动刷新，会暂停五秒后再执行printf\n#include <stdio.h>\n#include <unistd.h> // for sleep\n\nint main() {\n    // 1. 没有 \\n，数据进入缓冲区，但不会自动刷新\n    printf(\"等待 5 秒，你可能看不到我...\");\n    \n    // 2. 暂停执行\n    sleep(5); \n\n    // 3. 补上 \\n\n    printf(\"\\n我现在出来了。\\n\"); \n    return 0;\n}\n~~~\n\n~~~C\n// 有\\n触发自动刷新，会先执行printf后等待五秒后执行另一个printf\n#include <stdio.h>\n#include <unistd.h> // for sleep\n\nint main() {\n    printf(\"等待 5 秒，你应该能看到我...\\n\");\n    \n    // 2. 暂停执行\n    sleep(5); \n\n    // 3. 补上 \\n\n    printf(\"\\n我现在出来了。\\n\"); \n    return 0;\n}\n~~~\n\n> stdin是类似的，都是行缓冲模式。\n\n- 对于输入流来说，只有缓冲区空了，程序才会从外部设备获取新的数据来填充它。\n- 对于输出流来说，只有缓冲区满了，缓冲区中的数据才会被写入到外部设备，进行刷新。\n\n#### 一、文本流(Text Stream)\n\n流分为两种，**文本(text)流** 和 **二进制(binary)** 流。文本流的有些特性在不同的系统中可能不同。其中之一就是文本行的最大长度。标准规定至少允许254个字符。另一个可能不同的特性是文本行的结束方式。例如在***MS-DOS***系统中，文本文件约定以一个回车符和一个换行符（或称为行反馈符）结尾。但是***UNIX***系统只使用一个换行符结尾。\n\n- 核心特点：字符翻译\n\n文本流在数据传输中会引入一个**翻译层**，主要针对换行符(`\\n`)：\n\n|操作|C程序中的表示|操作系统/文件中实际存储的表示|\n|:---:|:---:|:---:|\n|写入(`fprintf`,`fputs`)|写入一个换行符(`\\n`)|操作系统可能会将其翻译成一个或多个字符序列(例如Windows下的`\\r\\n`)|\n|读取(`fscanf`,`fgets`)|从文件中读取多个字符序列（例如Windows下的`\\r\\n`）|C运行时库会将这个序列翻译回单个换行符(`\\n`)供C程序使用。|\n\n- 优点：保持了跨平台的**文本文件兼容性**。可以在任何系统上打开并正确显示用文本模式创建的文件。\n- 缺点：传输的数据量可能与文件中实际存储的字节数**不一致**（因为翻译），且性能略低于二进制流。\n\n#### 二、二进制流(Binary Stream)\n\n二进制流中的字节将完全根据程序编写它们的形式写入到文件或设备中，而且完全根据它们从文件或设备读取的形式读入到程序中。并未做任何改变。\n\n- 核心特点：无翻译\n\n二进制流是**透明的**，它绕过了C运行时库的任何翻译：\n\n|操作|C程序中的表示|操作系统/文件中实际存储的表示|\n|:---:|:---:|:---:|\n|写入(`fwrite`)|写入N个字节|文件中精确存储N个字节，不做任何修改。|\n|读取(`fread`)|读取N个字节|从文件中读取N个原始字节到内存中，不做任何修改。|\n\n- 优点：1.精确性：文件中的字节数与程序处理的字节数总是精准匹配。适用于存储图片、音频、结构体、加密数据等。2.性能：由于没有翻译开销，I/O操作通常更快。\n- 缺点：**缺乏可移植性**。如果直接将C结构体写入二进制文件，文件将依赖于机器的字节序(Endianness)和数据类型大小。\n\n#### 三、编程实现上的区别\n\n在C语言中，你通过`fopen()`函数的第二个参数（模式字符串）来指定使用哪种流模式：\n\n|模式|描述|\n|:--|:--|\n|`\"r\"`/`\"w\"`/`\"a\"`|文本模式(默认)|\n|`\"rb\"`/`\"wb\"`/`\"ab\"`|二进制模式(加`b`)|\n\n### 15.4.2 文件\n\n`stdio.h`所包含的声明之一就是`FILE`结构。`FILE`是一个数据结构，用于访问一个流。如果同时激活几个流每个流都有一个相应的`FILE`与它关联。\n\n- 对于每个ANSI C程序，运行时系统必须提供至少三个流：**标准输入(standard input)**、**标准输出(standard output)**和**标准错误(standard error)**。名字分别为`stdin`、`stdout`、`stderr`。这三个流都是指向`FILE`结构的指针。\n\n> 标准输入是缺省输入来源，标准输出是缺省输出设置，标准错误是缺省错误设置。通常标准输入为键盘设置，标准输出为终端或屏幕。\n> 可以将标准输入和标准输出设置为其他设备。\n\n### 15.4.3 标准I/O常量\n\n`EOF`是许多函数的返回值，提示达到了文件尾。**EOF所选择的实际值比一个字符多几位，这是为了避免二进制被错误地解释为EOF。**\n\n- 输入函数返回`int`类型：`getchar()`和`fgetc()`等函数被设计为返回`int`(32位或16位)，而不是`char`(8位)。\n- EOF的值：一般为负整数`-1`。\n\n|状态|返回值|位宽利用|\n|:---:|:---:|:---:|\n|成功读取有效字符|返回值是一个0到255之间的整数|仅使用了`int`的低8位来存储字符代码，其余位是0。|\n|遇到文件结束(EOF)|返回值是一个负整数(-1)|`int`的所有位都被设置成-1的二进制表示(所有32位都是1)|\n\n> 一个程序至少可以打开**FOPEN_MAX**个文件，至少是8。有一个常量**FILENAME_MAX**提示字符数组应该多大以便容纳编译器所支持的最长合法文件名。\n\n## 15.5 流I/O总览\n\n对于文件流或设备流\n\n1. 使用`FILE*`将处于活动状态的文件选择使用。\n2. 流通过调用`fopen`函数打开。为了打开一个流必须指定要访问的文件或设备以及他们的访问方式。`fopen`和操作系统验证文件或设备确实存在并初始化FILE结构。\n3. 对文件或设备读取写入。\n4. 最后调用`fclose`函数关闭流。防止被再次访问，保证任何存储于缓冲区的数据被正确地写到文件中，并且释放FILE结构使它可以用于另外的文件。\n\n> 标准流不需要打开或关闭。\n\n**执行字符、文本行和二进制I/O的函数**\n\n|数据类型|输入|输出|描述|\n|:---|:---|:---|:---|\n|字符|getchar|putchar|读取(写入)单个字符|\n|文本行|gets/scanf|puts/printf|文本行未格式化的输入(输出)/格式化的输入(输出)|\n|二进制数据|fread|fwrite|读取(写入)二进制数据|\n\n> 带f前缀的输入输出函数可以用于所有流。\n\n## 15.6 打开流\n\n`fopen`函数用于创建并打开一个新流。\n\n~~~C\nFILE *fopen(char const *name, char const *mode);\n~~~\n\n`mode`参数上面编程实现给出\n> 在mode 中添加 `a+`表示该文件打开用于更新，并且流既允许读也允许写。\n> 但是在向流写入数据前必须调用其中一个文件定位函数(`fseek`、`fsetpos`、`rewind`)。\n> 在写后又想读取数据首先必须调用`fflush`函数或文件定位函数之一。\n\n应该始终检查`fopen`函数的返回值！如果函数失败，它会返回一个NULL值。\n\n~~~C\nFILE *input;\ninput = fopen(\"data3\", \"r\"); // 文本只读\nif (input == NULL)\n{\n  perror(\"failed to open file data3, Quitting...\");\n  exit(EXIT_FAILURE);\n}\n// 在终端报错类似：data3: No such file or directory\n~~~\n\n`freopen`函数用于打开（或重新打开）一个特定的文件流。原型如下：\n\n~~~C\nFILE* freopen(char const *filename, char const *mode, FILE *stream);\n~~~\n\n最大的作用是改变流的输入输出\n> `freopen`函数在执行成功时，它返回的指针和传入的第三个参数`stream`是同一个指针，即它们都指向同一个`FILE`结构体。\n\n~~~C\n#include <stdio.h>\n#include <stdlib.h> // 用于 EXIT_FAILURE\n\nint main() {\n    // 1. 初始状态：printf 输出到终端\n    printf(\"--- 程序开始 ---\\n\");\n    printf(\"这条信息应该显示在终端上。\\n\");\n\n    // =======================================================\n    // 2. 使用 freopen 重定向标准输出 (stdout)\n    //    参数: \n    //      \"log.txt\": 新的文件名\n    //      \"w\": 写入模式 (会覆盖文件原有内容)\n    //      stdout: 要重定向的目标流\n    // =======================================================\n    FILE *original_stdout = freopen(\"log.txt\", \"w\", stdout);\n\n    // 检查重定向是否成功\n    if (original_stdout == NULL) {\n        // 如果重定向失败，通常是文件路径问题\n        perror(\"freopen 失败\");\n        return EXIT_FAILURE;\n    }\n\n    // 3. 重定向后的状态：printf 输出到 log.txt 文件\n    printf(\"这条信息不会显示在终端，而是写入 log.txt。\\n\");\n    printf(\"freopen 成功地将标准输出改变了方向。\\n\");\n    printf(\"--- 程序结束 ---\\n\");\n\n    // 4. 关闭文件流并返回\n    // freopen 已经关闭了旧的 stdout（终端），并打开了新的文件。\n    // 程序结束时会自动关闭 log.txt，但明确关闭是好习惯\n    if (fclose(stdout) != 0) {\n        perror(\"关闭 stdout 失败\");\n    }\n    \n    // 注意：程序不会输出任何成功信息到终端，因为它被重定向了\n    return 0;\n}\n~~~\n\n## 15.7 关闭流\n\n使用`fclose`关闭流\n\n~~~C\nint fclose(FILE *f);\n~~~\n\n`fclose`函数在文件关闭前刷新缓冲区。执行成功返回0值，否则返回EOF。\n> 是否应该对fclose(或其他操作)进行错误检查？\n>>\n>> 1. 如果操作成功应该执行什么？  \n>> 2. 如果操作失败应该执行什么？\n>>\n>>> 如果这两个答案是不同的，应该进行错误检查；如果是相同的，跳过错误检查才是合理的。\n\n## 15.8 字符I/O\n\n字符输入\n\n~~~C\nint fgetc(FILE *stream);\nint getc(FILE *stream);\nint getchar(void);\n~~~\n\n字符输出\n\n~~~C\nint fputc(int character,FILE* stream);\nint putc(int character,FILE* stream);\nint putchar(int character);\n~~~\n\n### 15.8.1 字符I/O宏\n\n除了`fgetc`和`fputc`其他都是`#define`指令定义的宏，两种实现为了不同的场景，但是实际两种操作相差甚微。\n\n### 15.8.2 撤销字符I/O\n\n在流读取时总有一个不想读取的字符，但使用流逐个读取没有条件判断一定会读到一个不满足的字符，为了不丢弃这个字符，使用`ungetc`函数将这个字符从参数中推回stream中。\n\n> `ungetc`函数主要的应用场景是**超前扫描**或**令牌解析**\n\n读取一个整数，直到遇到非数字或EOF\n\n~~~C\n#include <stdio.h>\n#include <ctype.h> // 用于 isdigit()\n\n// 函数：从标准输入读取一个整数\nint read_integer(FILE *stream) {\n    int ch;\n    int value = 0;\n\n    // 1. 跳过开始的空白字符\n    do {\n        ch = fgetc(stream);\n    } while (isspace(ch));\n\n    // 2. 检查第一个非空白字符是否是数字\n    if (!isdigit(ch)) {\n        // 如果第一个字符不是数字，就把它放回流中\n        if (ch != EOF) {\n            ungetc(ch, stream);\n        }\n        return 0; // 或者返回一个错误代码\n    }\n\n    // 3. 读取数字部分\n    while (isdigit(ch)) {\n        value = value * 10 + (ch - '0');\n        ch = fgetc(stream); // 超前读取下一个字符\n    }\n\n    // 4. 【核心步骤】\n    // 循环停止是因为 ch 遇到了第一个非数字字符（或者 EOF）。\n    // 这个非数字字符（例如一个字母 'A'）不属于当前的整数，它属于流的下一个部分。\n    if (ch != EOF) {\n        ungetc(ch, stream); // 将这个超前读取的字符放回流中\n    }\n    \n    return value;\n}\n\nint main() {\n    int num1, num2;\n    \n    printf(\"请输入数据 (例如: 123ABC456)\\n\");\n    \n    // 假设用户输入: 123ABC456\\n\n\n    // 第一次调用：读取 123\n    num1 = read_integer(stdin); \n    printf(\"读取到第一个整数: %d\\n\", num1); \n    // 此时字符 'A' 被 read_integer 读走后又放回了 stdin。\n\n    // 第二次调用：读取下一个字符，它将是 'A'\n    printf(\"下一个字符是: %c\\n\", fgetc(stdin)); \n    \n    // 第三次调用：读取 456\n    // read_integer 会消耗 'B', 'C'，直到 456\n    // num2 = read_integer(stdin); // 错误：会消耗 'B', 'C'\n    \n    printf(\"流中剩余字符:\\n\");\n    // 清空并打印剩余部分，以验证 ungetc 后的字符 'A' 确实被读取了\n    int ch;\n    while ((ch = getchar()) != EOF) {\n        putchar(ch);\n    }\n    \n    return 0;\n}\n~~~\n\n> 退回字符和流的当前位置有关，如果使用`fseek`,`fsetpos`或`rewind`函数改变了流的位置，所有退回的字符都要被丢弃。\n>\n## 15.9 未格式化的行I/O\n\n行I/O可以使用两种方式执行————未格式化的和格式化的。这两种形式都用于操作字符串。\n\n~~~C\nchar *fgets(char* buffer, int buffer_size, FILE *stream);\nchar *gets(char *buffer);\n\nint fputs(char const *buffer, FILE* stream);\nint puts(char const *buffer);\n~~~\n\n`fgets`从指定的stream读取字符并把它们复制到buffer中。在读取到换行符或缓冲区内存储的字符达到`buffer_size - 1`时停止读取。\n\n> gets在C99后不推荐使用，C11后已经完全抛弃！在任何情况下`fgets`都会在末尾添加NUL字节表示字符串结束；puts会自动在尾部添加换行符；fputs不会添加换行符。\n\n常见错误\n\n~~~C\n#include <stdio.h>\n\nint main() {\n    char data[5];\n\n    // 错误操作：数组只有5个字节，但写入了6个字符，没有留空间给 '\\0'\n    // 实际上是写入了 'H', 'e', 'l', 'l', 'o'，'\\0' 溢出到了 data 之外\n    // 但在这个例子中，我们假设用 memcpy 或其它方式精确地填满 data，没有 \\0\n    data[0] = 'A';\n    data[1] = 'B';\n    data[2] = 'C';\n    data[3] = 'D';\n    data[4] = 'E'; // <--- 数组已满，没有空终止符\n\n    printf(\"尝试写入一个非终止字符串...\\n\");\n\n    // fputs 将会从 data[0] 开始一直读到内存中找到 \\0 为止\n    // 这将是 UB！\n    fputs(data, stdout); \n\n    printf(\"\\n程序可能崩溃，或者输出了乱码。\\n\");\n\n    return 0;\n}\n~~~\n\n> `fgets`第二个参数虽然能指定传入的元素个数，但是如果参数过大溢出它的缓冲区，`fgets`不会引起错误。\n\n一个例子\n\n~~~C\n/*\n  把标准输入读取的文本行逐行复制到标准输出。\n*/\n#include <stdio.h>\n\n#define MAX_LINE_LENGTH 1024\n\nvoid copylines(FILE *input, FILE *output)\n{\n  char buffer[MAX_LINE_LENGTH];\n  \n  while( fgets(buffer, MAX_LINE_LENGTH, input) != NULL)\n    fputs(buffer, output);\n}\n~~~\n\n## 15.10 格式化的行I/O\n\n- “格式化的行I/O”这个名字从某种意义上并不准确，因为 `scanf` 和 `printf` 函数家族并不仅限于单行。它们也可以在行的一部分或多行上执行I/O操作。\n\n### 15.10.1 scanf家族\n\n~~~C\nint fscanf(FILE *stream, char const *format, ...);\nint scanf(char const *format, ...);\nint sscanf(char const *string, char const *format, ...);\n~~~\n\n***函数无法验证对应的指针参数输入是否是对应格式代码的正确类型。函数会假定它们是正确的，于是继续执行并使用它们。***\n\n### 15.10.2 scanf格式代码\n\n- **空白字符**————与输入中的零个或多个空白字符相匹配，在处理过程中将被忽略。\n- **格式代码**————它们指定函数如何解释接下来的输入字符。\n- **其他字符**————当任何其他字符出现在格式字符串时，下一个输入字符必须与它匹配。如果匹配，该输入字符随后被丢弃；如果不匹配，函数就不再读取直接返回。\n\n#### 格式代码格式\n\n- 格式代码都是以一个百分号开头，后面可以是\n  - 一个可选的星号（赋值抑制符）\n  - 一个可选的宽度\n  - 一个可选的限定符\n  - 格式代码\n\n- 可选的星号具体使用方法\n假输入流中有数据：`Item_A: 100, Item_B: 200`\n\n~~~C\nint val_b;\n// 使用 %*s 跳过 \"Item_A:\"\n// 使用 %*d 跳过 100\n// 使用 %*c 跳过 逗号和空格\n// Item_B: 选项被匹配后丢弃\n// 只读取Item_B 的值\nscanf(\"%*s %*d, Item_B: %d\",&val_b);\n\n// 结果：val_b 将被赋值为 200，流中的 \"Item_A: 100, \"部分被跳过\n~~~\n\n#### scanf限定符\n\n| 限定符 | 作用 (用于指定参数大小) | 适用的类型码 | 对应的 C 类型 |\n| :---: | :--- | :--- | :--- |\n| **`h`** | 读取短整数（Half word size） | `d`, `i`, `u`, `o`, `x`, `n` | `short int`, `unsigned short int` |\n| **`hh`** | 读取字符大小的整数 | `d`, `i`, `u`, `o`, `x`, `n` | `signed char`, `unsigned char` |\n| **`l`** | 读取长整数 | `d`, `i`, `u`, `o`, `x`, `n` | `long int`, `unsigned long int` |\n| **`ll`** | 读取超长整数 | `d`, `i`, `u`, `o`, `x`, `n` | `long long int`, `unsigned long long int` |\n| **`l`** | 读取双精度浮点数 | `f`, `e`, `g`, `a` | `double` (注意：`%f` 读取 `float`) |\n| **`L`** | 读取超长双精度浮点数 | `f`, `e`, `g`, `a` | `long double` |\n| **`z`** | 读取 `size_t` 类型（无符号） | `d`, `i`, `u`, `o`, `x`, `n` | `size_t` |\n| **`j`** | 读取最大宽度整数 | `d`, `i`, `u`, `o`, `x`, `n` | `intmax_t`, `uintmax_t` |\n| **`t`** | 读取指针差值类型 | `d`, `i`, `u`, `o`, `x`, `n` | `ptrdiff_t` |\n\n一个不能总是正确接收参数的`fscanf()`\n\n~~~C\n  int a, b, c;\n  a = b = c = 0;\n  FILE *f = (FILE *)fopen(\"./test.txt\", \"r+\");\n  FILE *f1 = (FILE *)fopen(\"./testout.txt\", \"r+\");\n  if (f == NULL || f1 == NULL) {\n    perror(\"Failed to read from stream test.txt.\\n\");\n    return EXIT_FAILURE;\n  }\n\n  if (fscanf(f, \"%d %d\", &a, &b) ==\n      2) { // 这里如果接收的不是两个整型变量就会导致循环终止，且fscanf跳过空白字符，\n           // 所以它没有办法验证这两个值是位于同一行还是分属于两个不同的输入行\n    fprintf(stdout, \"Two number i got from stream f to stdout is %d - %d\\n\", a,\n            b);\n  }\n\n  // 重置文件指针到文件开头\n  rewind(f);\n\n  int nfield = fscanf(f, \"%4d %4d %4d\", &a, &b, &c);\n  if (nfield == 2)\n    fprintf(f1, \"Two number i got from stream f to f1 is %d - %d\", a, b);\n  else if (nfield == 3)\n    fprintf(f1, \"Three number i got from stream f to f1 is %d - %d - %d\", a, b,\n            c);\n\n  fclose(f1);\n  fclose(f); \n~~~\n\n一个更为可靠的方法读取这种类型的`fscanf()`\n\n~~~C\n#include <stdio.h>\n\n#define BUFFER_SIZE 100\n\nvoid function(FILE *input)\n{\n  int a, b, c, d, e;\n  char buffer[BUFFER_SIZE];\n  \n  while (fgets(buffer, BUFFER_SIZE, input) != NULL){\n    if (sscanf(buffer,\"%d %d %d %d %d\", &a, &b, &c, &d, &e) != 4)\n    {\n      fprintf(stderr,\"Bad input skipped: %s\", buffer);\n      continue;\n    }\n  }\n  // 处理这组输入\n}\n~~~\n\n### 15.10.3 printf家族\n\n~~~C\nint fprintf(FILE *stream, char const *format, ...);\nint printf(char const *format, ...);\nint sprintf(char *buffer, char const *format, ...);\n~~~\n\n> `sprintf()`被认为是有缺陷的(不安全的)，主要因为它存在固有的缓冲区溢出(Buffer Overflow)风险。\n>\n> 当 buffer被设置为一个固定大小的缓冲区时会有可能超出限制，且无法阻止其**继续覆盖相邻的内存**。\n>> C99 标准引入了 `snprintf` 解决`sprintf`的安全问题。\n\n~~~C\nint snprintf(char *str, size_t size, const char *format, ...);\n~~~\n\n### 15.10.4 printf 格式代码\n\n**`printf`家族格式代码和`scanf`格式代码类似**\n\n几个使用`printf`格式代码的例子\n\n1. 用`printf`格式字符串\n\n|格式代码|转换后的字符串|||\n|:---:|:---:|:---:|:---:|\n|%s|A|ABC|ABCDEFGH|\n|%5s|[][][][]A|[][]ABC|ABCDEFGH|\n|%.5s|A|ABC|ABCDE|\n|%5.5s|[][][][]A|[][]ABC|ABCDE|\n|%-5s|A[][][][]|ABC[][]|ABCDEFGH|\n\n> `%.5s` 中的`.5`是限制精度(限制字符数)，`%.5d`中的`.5`是限制宽度的，而`%5d`是限制精度(限制数字位数)。\n\n2. 用`printf`格式化整数\n\n|格式代码|转换后的数值||||\n|:---:|:---:|:---:|:---:|:---:|\n|%d|1|-12|12345|123456789|\n|%6d|[][][][][]1|[][][]-12|[]12345|123456789|\n|%.4d|0001|-0012|12345|123456789|\n|%6.4d|[][]0001|[]-0012|[]12345|123456789|\n|%-4d|1[][][][]|-12[]|12345|123456789|\n|%04d|0001|-012|12345|123456789|\n|%+d|+1|-12|+12345|+123456789|\n\n3. 用`printf`格式化浮点数\n\n|格式代码|转换后的数值||||\n|:---:|:---:|:---:|:---:|:---:|\n||1|.01|.00012345|12345.6789|\n|%f|1.000000|0.010000|0.000123|12345.678900|\n|%10.2f|[][][][][][]1.00|[][][][][][]0.01|[][][][][][]0.00|[][]12345.67|\n|%e|1.000000e+00|1.000000e-02|1.234500e-04|1.234568e+04|\n|%.4e|1.0000e+00|1.0000e-02|1.2345e-04|1.2346e+04|\n|%g|1|0.01|0.00012345|12345.7|\n\n4. 用`printf`格式化大浮点值\n\n|格式代码|转换后的数值|\n|:---:|:---:|\n||6.023e23|\n|%f|6.02299999999999975882752.000000|\n|%10.2f|6.02299999999999975882752.000000|\n|%e|6.023000e+23|\n|%.4e|6.0230e+23|\n|%g|6.023e+23|\n\n## 15.11 二进制I/O\n\n- 把数据写到文件效率最高的方法是用二进制形式写入。二进制输出**避免了在数值转换为字符串过程中所涉及的开销和精度损失**。但二进制数据并非人眼所能阅读，所以这个技巧只有**当数据将被另一个程序按顺序读取时**才能使用。\n\n`fread`函数用于读取二进制数据，`fwrite`函数用于写入二进制数据。\n\n~~~C\nsize_t fread(void *buffer, size_t size, size_t count, FILE *stream);\nsize_t fwrite(void *buffer, size_t size, size_t count, FILE* stream);\n~~~\n\n`buffer`是一个指向用于保存数据的内存位置的指针，`size`是缓冲区中每个元素的字节数，`count`是读取或写入的元素数，当然`stream`是数据读取或写入的流。\n\n一个例子\n\n~~~C\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n\n// 1. 定义一个存储数据的结构体\ntypedef struct {\n  int id;\n  char name[20];\n  float salary;\n} Employee;\n\n// 辅助函数：打印结构体内容\nvoid print_employee(const Employee *e) // const *类型 指向常量的指针\n{\n  fprintf(stdout, \"ID: %d, Name: %-20s, Salary: %.2f\\n\", e->id, e->name,\n          e->salary);\n}\n\n// 定义文件名\n#define DATA_FILE \"employees.bin\"\n\nint main(void) {\n  // 2. 准备数据：一个结构体数组\n  Employee staff_data[] = {{101, \"Alice Johnson\", 60000.00f},\n                           {102, \"Bob Smith\", 75000.50f},\n                           {103, \"Charlie Brown\", 50000.25f}};\n  const size_t num_employees = sizeof(staff_data) / sizeof(Employee);\n\n  // ------------------------------------------------------------------------\n  // 第一步：使用 fwrite 将结构体数组写入文件（输出流）\n  // ------------------------------------------------------------------------\n\n  FILE *output_file = fopen(DATA_FILE, \"wb\"); // write binary\n  if (output_file == NULL) {\n    perror(\"Error opening output file\");\n    return EXIT_FAILURE;\n  }\n\n  // fwrite(ptr, size, count, stream)\n  // ptr: 要写入的数据块的起始地址\n  // size: 每个数据块的大小（这里是 Employee 结构体的大小）\n  // count: 要写入的数据块的数量（这里是数组元素的数量）\n  // stream: 文件流指针\n\n  size_t written_count =\n      fwrite(staff_data, sizeof(Employee), num_employees, output_file);\n\n  if (written_count == num_employees) {\n    fprintf(stdout, \"成功将 %zu 个 Employee 记录写入文件：%s\\n\", written_count,\n            DATA_FILE);\n  } else {\n    fprintf(stderr, \"警告：写入失败或部分失败。\\n\");\n  }\n\n  fclose(output_file);\n\n  // ------------------------------------------------------------------------\n  // 第二步：使用 fread 从文件中读取结构体数组（输入流）\n  // ------------------------------------------------------------------------\n\n  FILE *input_file = fopen(DATA_FILE, \"rb\"); // read binary\n  if (input_file == NULL) {\n    perror(\"Error opening input file for reading\");\n    return EXIT_FAILURE;\n  }\n\n  // 3. 准备接收数据的缓冲区（创建一个新的数组来存储读取的数据）\n  Employee read_data[num_employees];\n\n  fprintf(stdout, \"\\n从文件读取数据并输出到标准输出(stdout)：\\n\");\n  printf(\"--------------------------------------------------------\\n\");\n\n  // fread(ptr, size, count, stream)\n  // ptr: 存储读取数据的内存地址\n  // size: 每个数据块的大小（这里是 Employee 结构体的大小）\n  // count: 尝试读取的数据块的数量\n  // stream: 文件流指针\n  size_t read_count =\n      fread(read_data, sizeof(Employee), num_employees, input_file);\n\n  if (read_count == num_employees) {\n    printf(\"成功读取 %zu 个 Employee 记录。\\n\", read_count);\n\n    // 4. 将读取到的结构体数组元素输出到标准输出\n    for (size_t i = 0; i < read_count; i++) {\n      printf(\"Record %zu: \", i + 1);\n      print_employee(&read_data[i]);\n    }\n  } else {\n    fprintf(stderr, \"警告：尝试读取 %zu 个记录，但只读取了 %zu 个。\\n\",\n            num_employees, read_count);\n  }\n\n  fclose(input_file);\n\n  // 清理创建的文件（可选）\n  // remove(DATA_FILE);\n\n  return EXIT_SUCCESS;\n}\n~~~\n\n## 15.12 刷新和定位数据\n\n当我们需要立即把输出缓冲区的数据进行物理写入时，应该使用`fflush`这个函数。例如，调用`fflush`函数保证调试信息实际打印出来，而不是保存在缓冲区中直到以后才打印。\n\n~~~C\nint fflush(FILE *stream);\n~~~\n\n在正常情况下，数据以线性的方式写入，这意味着后面写入的数据在文件中的位置是在以前所有写入数据的后面。C同时支持随机访问I/O，也就是以任意顺序访问文件的不同位置。\n`ftell`和`fseek`函数支持上面的操作。\n\n~~~C\nlong ftell(FILE *stream);\nint fseek(FILE *stream, long offset, int from);\n~~~\n\n`ftell`返回流的当前位置，也就是说，下一个读取或写入将要开始的位置距离文件起始位置的偏移量(offset)。这个函数允许你保存一个文件的当前位置，这样你可能在将来回到这个位置。在二进制流中这个值就是当前位置距离文件其实位置之间的字节数。\n\n在文本流中这个值表示一个位置，但它并不一定准确地表示当前位置和文件起始位置之间的字符数，因为有些系统将对行末字符进行翻译转换。但是，`ftell`函数返回的值总是可以用于`fseek`函数中，作为一个距离文件起始位置的偏移量。\n\n`fseek`函数运行你在一个流中定位。这个操作将改变下一个读取或写入操作的位置。它的第一个参数是需要改变的流，第二个和第三个参数标识文件中需要定位的位置。\n\n试图定位到一个文件的起始位置之前是一个错误。定位到文件尾之后并进行写入将扩展这个文件。定位到文件尾之后并进行读取将导致返回一条“到达文件尾”的信息。在二进制流中，从**SEEK_END**进行定位可能不被支持，所以应该避免。在文本流中，如果from是**SEEK_CUR**或**SEEK_END**，offset必须是零。如果from是**SEEK_SET**，offset必须是一个从同一个流中以前调用`ftell`所返回的值。\n\n|如果from是|你将定位到...|\n|:---:|:---:|\n|SEEK_SET|从流的起始位置起offset个字节，offset必须是一个非负值|\n|SEEK_CUR|从流的当前位置起offset个字节，offset可正可负|\n|SEEK_END|从流的尾部位置起offset个字节，offset可正可负。如果是正值它将定位到文件尾的后面|\n\n另外还有三个额外的函数，用一些限制更严的方式指执行相同的任务。\n\n~~~C\nvoid rewind(FILE *stream);\nint fgetpos(FILE *stream, fpos_t *position);\nint fsetpos(FILE *stream, fpos_t const *position);\n~~~\n\n`rewind`函数将读/写指针设置回指定流的起始位置。它同时清除流的错误提示标志。`fgetpos`和`fsetpos`函数分别是`ftell`和`fseek`函数的替代方案。\n\n它们的主要区别在于这对函数接受一个指向`fpos_t`的指针作为参数。`fgetpos`在这个位置存储文件的当前位置，`fsetpos`把文件位置设置为存储在这个位置的值。\n\n一个使用这些定位函数的例子\n\n~~~C\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n\n#define FILENAME \"demo_file.txt\"\n\nint main(void) {\n  FILE *fp;\n\n  // ===================================================================\n  // 1. 打开文件并写入数据 (使用 \"w+\" 模式允许读写)\n  // ===================================================================\n\n  fp = fopen(FILENAME, \"w+\");\n  if (fp == NULL) {\n    perror(\"Error opening file\");\n    return EXIT_FAILURE;\n  }\n\n  printf(\"--- 开始写入和控制文件指针 ---\\n\");\n\n  // 写入第一个字符串\n  fputs(\"ABCDEFGHIJKLMNOP\", fp);\n  printf(\"1. 写入 'ABCDEFGHIJKLMNOP'\\n\");\n\n  // -- fflush 示例 --\n  // 尽管没有换行符，fflush 也会强制将数据从缓冲区写入磁盘\n  fflush(fp); // fputs没有写入换行符，这里本来fputs的\n              // 第一个参数写入到缓冲区还未到fp中，但是\n              // 执行fflush可以强制从缓冲区写入磁盘\n  printf(\"2. 使用fflush 强制刷新数据到文件。\\n\");\n\n  // -- ftell 和 fgetpos 示例 --\n\n  long initial_pos = ftell(fp); // 记录当前位置 （通常是16，即字符串末尾）\n  fpos_t saved_fpos;\n  fgetpos(fp, &saved_fpos); // 记录当前位置到 fpos_t 结构体中\n\n  printf(\"3. 当前文件指针位置(ftell): %ld\\n\", initial_pos);\n\n  // 写入第二个字符串\n  fputs(\"XYZ\", fp);\n  printf(\"4. 写入 'XYZ'。\\n\");\n\n  // -- fssek 示例 --\n  // fseek(stream, offset, origin);\n  // origin: SEEK_SET 从文件开头， SEEK_CUR 从当前位置，SEEK_END 从文件末尾\n\n  // 将指针 重新定位到第五个字符(索引5)\n  fseek(fp, 5, SEEK_SET);\n  printf(\"5. 使用 fseek(5, SEEK_SET) 跳转到索引5。\\n\");\n\n  // 写入新数据 ，会覆盖掉原有的 'FGHI'\n  fputs(\"1234\", fp);\n  printf(\"6. 写入 '1234' (覆盖掉原有的 'FGHI').\\n\");\n\n  // -- fsetpos 示例 --\n\n  // 将指针重新定位回之前 fgetpos 记录的位置 (initial_pos = 16)\n  fsetpos(fp, &saved_fpos);\n  printf(\"7. 使用 fsetpos 跳转回保存的位置(%ld)。\\n\", initial_pos);\n\n  // 写入数据，会在 16 处 继续 写入\n  fputs(\"999\", fp);\n  printf(\"8. 写入'999'。\\n\");\n\n  // --- rewind 示例 ---\n  rewind(fp);\n  printf(\"9. 使用 rewind 将指针 重置到文件开头。\\n\");\n\n  // ===================================================================\n  // 2. 从开头读取最终文件内容\n  // ===================================================================\n\n  printf(\"\\n--- 读取文件内容进行验证 ---\\n\");\n  char buffer[50];\n\n  // 尝试从头读取整个文件\n  if (fgets(buffer, sizeof(buffer), fp) != NULL)\n    printf(\"文件最终内容：%s\\n\", buffer);\n  else\n    printf(\"读取文件失败\\n\");\n\n  fclose(fp);\n\n  return EXIT_SUCCESS;\n}\n~~~\n\n## 15.13 改变缓冲方式\n\n两种改变流缓冲方式的函数\n\n~~~C\nvoid setbuf(FILE* stream, char *buf);\nint setvbuf(FILE* stream, char *buf, int mode, size_t size);\n~~~\n\n`setbuf` 设置了另一个数组，用于对流进行缓冲。这个数组的字符长度必须为BUFSIZ(在stdio.h中定义)。为一个流自行指定缓冲区可以防I/O函数库为它动态分配一个缓冲区。如果用一个NULL参数调用这个函数，`setbuf`函数将关闭流的所有缓冲方式。字符准确地将程序所规定的方式进行读取和写入。\n\n> 一个流缓冲区使用一个自动数组是很危险的。\n\n`setvbuf`函数更为通用。`mode`参数用于指定缓冲的类型。**_IONBF**指定一个不缓冲的流，**_IOLBF**指定一个行缓冲流，**_IOLBF**指定一个行缓冲流。所谓行缓冲，就是每当一个换行符写入到缓冲区时，缓冲区便进行刷新。\n\n`buf`和`size`参数用于指定需要使用的缓冲区。如果`buf`为NULL，那么`size`的值必须是0。\n一般而言，最好用一个长度为BUFSIZ的字符数组作为缓冲区。\n\n一个例子\n\n~~~C\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n\n#define FILENAME \"big_buffer_test.txt\"\n#define CUSTOM_BUF_SIZE 4096 * 4 // 16 KB 的缓冲区大小\n\nint main(void) {\n  FILE *fp;\n  char custom_buffer[CUSTOM_BUF_SIZE]; // 声明自定义的内存缓冲区\n\n  // 1. 打开文件进行写入\n  fp = fopen(FILENAME, \"w\");\n  if (fp == NULL) {\n    perror(\"Error opening file.\");\n    return EXIT_FAILURE;\n  }\n\n  // 2. 使用 setvbuf 设置为全缓冲模式， 并指定自定义缓冲区\n  // 目标：只有当 16KB 缓冲区写满时，才进行一次磁盘写入操作\n  int result = setvbuf(fp, custom_buffer, _IOFBF, CUSTOM_BUF_SIZE);\n\n  if (result != 0) {\n    fprintf(stderr, \"setvbuf 设置失败!\\n\");\n    fclose(fp);\n    return EXIT_FAILURE;\n  }\n\n  printf(\"文件流已设置为 %zu 字节的全缓冲模式。\\n\", (size_t)CUSTOM_BUF_SIZE);\n\n  // 3. 写入数据\n  for (int i = 0; i < 100; i++) {\n    fprintf(fp, \"Line %d : This is buffered data.\\n\", i);\n  }\n\n  printf(\"数据已写入缓冲区，但可能尚未写入磁盘。\\n\");\n  // 此时，数据仍在内存中的 custom_buffer 中，直到缓冲区满或关闭。\n\n  // 4. 关闭文件(关闭时会自动冲刷缓冲区)\n  fclose(fp);\n  printf(\"文件已关闭，缓冲区内容已冲刷到磁盘。\\n\");\n\n  // remove(FILENAME); // 清理原文件(可选)\n\n  return EXIT_FAILURE;\n}\n~~~\n\n## 15.14 流错误函数\n\n下面的函数用于判断和管理流的状态\n\n~~~C\nint feof(FILE *stream);\nint ferror(FILE *stream);\nvoid clearerr(FILE* stream);\n~~~\n\n如果流当前处于文件尾，`feof`函数返回真。这个状态可以通过对流执行`fseek`、`rewind`或`fsetpos`函数来清除。`ferror`函数报告流的错误状态，如果出现任何读/写错误函数就返回真。最后`clearerr`函数对指定流的错误标志进行重置。\n\n一个例子\n\n~~~C\n#include <stdio.h>\n#include <stdlib.h>\n\n#define FILENAME \"status_demo.txt\"\n\n// 辅助函数：检查并报告文件状态\nvoid report_status(FILE *fp, const char *message);\n\nint main(void) {\n  FILE *fp = NULL;\n  int c;\n\n  // 1. 创建并初始化文件\n  fp = fopen(FILENAME, \"w\");\n  if (fp == NULL)\n    return EXIT_FAILURE;\n  fputs(\"Hello C I/O.\\n\", fp);\n  fclose(fp);\n\n  // ===================================================================\n  // 步骤 A: 正常读取直到 EOF (feof 示例)\n  // ===================================================================\n\n  fp = fopen(FILENAME, \"r\");\n  if (fp == NULL)\n    return EXIT_FAILURE;\n\n  printf(\"1. 首次打开文件，指针位于开头。\\n\");\n  report_status(fp, \"状态A - 读取前\");\n\n  // 读取所有字符直到文件结束\n  while ((c = fgetc(fp)) != EOF) {\n    // 确保所有数据都被消耗\n  }\n\n  printf(\"\\n2. 已读取文件所有内容(fgetc 返回 EOF)。\\n\");\n\n  // 此时，文件指针越界，EOF标志被设置\n  report_status(fp, \"状态B - 读取到 EOF 之后\");\n\n  // ===================================================================\n  // 步骤 B: 制造错误并清除 (ferror 和 clearerr 示例)\n  // ===================================================================\n\n  // 使用 fseek 强制将指针移动到文件末尾（但文件仍然是只读模式）\n  // 尝试在只读文件上写入数据，在某些系统上会设置错误标志。\n  fseek(fp, 0, SEEK_END);\n\n  // 尝试写入数据，由于文件以 \"r\" 模式打开（只读），这将失败，并设置错误标志\n  // 注意：虽然不能写入，但 ferror 通常在尝试一个非法操作后被设置。\n  // 在本例中，我们尝试在只读文件上使用 fputc，它会失败并设置 ferror 标志。\n  c = fputc('X', fp);\n\n  // 检查 fputc 是否失败(通常返回 EOF)\n  if (c == EOF) {\n    printf(\"\\n3. 尝试在只读流上写入数据(fputc)失败。\\n\");\n  }\n\n  // 此时，错误标志 ferror 被设置\n  report_status(fp, \"状态C - 尝试非法写入后\");\n\n  // clearerr 示例\n  clearerr(fp);\n  printf(\"4. 使用 clearerr() 清除了 EOF 和错误标志。\\n\");\n\n  report_status(fp, \"状态D - clearerr() 之后\");\n\n  fclose(fp);\n  remove(FILENAME); // 清理文件\n\n  return EXIT_FAILURE;\n}\n\nvoid report_status(FILE *fp, const char *message) {\n  printf(\"\\n--- %s ---\\n\", message);\n\n  // feof(fp): 检测是否到达文件末尾\n  if (feof(fp)) {\n    printf(\"FE_EOF: 文件流已到达文件末尾 (EOF)。\\n\");\n  } else {\n    printf(\"FE_EOF: 文件流未到达文件末尾。\\n\");\n  }\n\n  // ferror(fp)：检测是否发生了 I/O 错误\n  if (ferror(fp)) {\n    printf(\"F_ERROR: 文件流发生 I/O 错误。\\n\");\n  } else {\n    printf(\"F_ERROR: 文件流状态正常。\\n\");\n  }\n}\n~~~\n\n## 15.15 临时文件\n\n使用`tempfile()`函数创建一个以`wb+`模式打开的文本文件用来临时保存数据。当程序结束时这个文件便被删除`自动被执行remove()`函数。\n\n~~~C\nFILE *tmpfile(void);\n~~~\n\n> 如果想要文件以只读模式打开或不以`wb+`模式打开必须使用`fopen()`函数操作\n\n可以使用`tmpnam()`函数为临时文件创建一个文件名\n> tmpnam() 仅仅是生成一个唯一的文件名字符串，但不创建文件。你需要手动使用 fopen() 来创建和打开文件，并负责在程序结束时手动删除它。且**tmpnam**不安全！\n\n~~~C\nchar *tmpnam(char *name);\n~~~\n\n两个例子\n\n~~~C\n# include <stdio.h>\n# include <stdlib.h>\n# include <string.h>\nint main(void) {\n  FILE *tmp_fp;\n  char write_data[] = \"Temporary data buffer\";\n  char read_buffer[100];\n\n  // 1. 创建临时文件流\n  // FILE* tmpfile(void);\n  tmp_fp = tmpfile();\n\n  if (tmp_fp == NULL) {\n    perror(\"Failed to open tmpfile.\\n\");\n    return EXIT_FAILURE;\n  }\n\n  printf(\"成功创建临时文件流。该文件将在程序退出时自动删除。\\n\");\n\n  // 2. 写入数据到临时文件\n  if (fputs(write_data, tmp_fp) != EOF) {\n    printf(\"写入数据成功：\\\"%s\\\"\\n\", write_data);\n  } else {\n    perror(\"Error writing to temporary file\");\n  }\n\n  // 3. 将文件指针重置到开头\n  rewind(tmp_fp);\n\n  // 4. 从临时文件读取数据\n  if (fgets(read_buffer, sizeof(read_buffer), tmp_fp) != NULL) {\n    printf(\"从临时文件读取数据：\\\"%s\\\"\\n\", read_buffer);\n  } else {\n    perror(\"Error reading from temporary file\");\n  }\n\n  // 5. 关闭文件流\n  // 当文件流关闭时，操作系统会自动删除这个临时文件\n\n  if (fclose(tmp_fp) == 0) {\n    printf(\"\\n临时文件流关闭成功，临时文件已被删除。\\n\");\n  } else {\n    perror(\"Error closing temporary file\");\n  }\n\n  return EXIT_SUCCESS;\n}\n~~~\n\n~~~C\n# include <stdio.h>\n# include <stdlib.h>\n# include <string.h>\n# include <time.h>\n\nint main(void) {\n  char\n      temp_filename[L_tmpnam]; // L_tmpnam 是 <stdio.h> 中的宏，保证缓冲区足够大\n  FILE *fp;\n\n  // 1. 生成一个唯一的文件名\n  // 如果传入NULL， tmpnam 会使用 内部静态缓冲区，但我们使用局部数组更安全\n  if (tmpnam(temp_filename) != NULL) {\n    printf(\"生成的临时文件名是：%s\\n\", temp_filename);\n  } else {\n    fprintf(stderr, \"tmpnam failed to generate temporary file.\");\n    return EXIT_FAILURE;\n  }\n\n  // 2. 手动创建和打开文件\n  fp = fopen(temp_filename, \"w\");\n  if (fp == NULL) {\n    perror(\"Error opening the generated temporary file\");\n    return EXIT_FAILURE;\n  }\n\n  printf(\"手动创建并打开了文件。\\n\");\n\n  // 3. 写入和关闭文件...\n  fprintf(fp, \"This is manually managed temporary data.\\n\");\n  fclose(fp);\n\n  // 4. 【重要】手动删除文件\n  if (remove(temp_filename) == 0) {\n    printf(\"手动删除了临时文件：%s\\n\", temp_filename);\n  } else {\n    perror(\"Error deleting temporary file\");\n  }\n  return EXIT_SUCCESS;\n}\n~~~\n\n## 15.16 文件操纵函数\n\n有两个函数用于操纵文件但不执行任何输入/输出操作。\n\n~~~C\nint remove(char const *filename);\nint rename(char const *oldname, char const *newname);\n~~~\n\n`remove`函数删除一个指定的文件。如果当remove被调用时文件处于打开状态，其结果取决于编译器。\n\n`rename`函数用于改变一个文件的名字，从**oldname**改为**newname**。如果已经有一个**newname**的文件存在，其结果取决于编译器。\n\n> Tips\n>>\n>> 1. 调试用`printf`后加`fflush`\n>> 2. 检查`fopen`返回值\n>> 3. 改变文件的位置将**丢弃**任何被退回到流的字符\n>> 4. 在使用`fgets`时指定较大的缓冲区\n>> 5. `gets`,`sprintf`溢出检测\n>> 6. 使用自动数组作为流的缓冲区时应多加小心\n>> 7. 使用`mkstemp`替代`tmpnam`\n\n# 🤤 标准函数库\n\n## 16.1 整型函数\n\n- 这组函数返回整型值。这些函数分为三类：**算术**、**随机数**和**字符串转换**。\n\n### 16.1.1 算数<stdlib.h>\n\n标准库函数包含了4个整型算数函数。\n\n~~~C\nint abs(int value);\nlong int labs(long int value);\ndiv_t div(int numerator, int denominator);\nldiv_t ldiv(long int numer, long int denom);\n~~~\n\n`abs`函数返回它的参数的绝对值。如果其结果不能用一个整数表示，这个行为是未定义的。\n`labs`用于执行相同的任务，但它作用的对象是长整数。\n\n`div`函数把它的第二个参数(分母)除以第一个参数(分子)，产生商和余数，用一个`div_t`结构返回。这个结构包含下面两个字段。\n\n~~~C\nint quot; // 商\nint rem; // 余数 \n~~~\n\n> 这两个字段并不一定以这个顺序出现。\n\n### 16.2.1 随机数<stdlib.h>\n\n两个函数可以产生**伪随机数(pseudo-random number)**。\n\n~~~C\nint rand(void);\nvoid srand(unsigned int seed);\n~~~\n\n`rand` 返回一个 范围在 0 和 RAND_MAX(至少为32767)之间的伪随机数。\n使用`srand` 获取随机数数列。\n\n常见用法\n\n~~~C\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <time.h> \n\nint main(void)\n{\n  int i, n;\n  time_t t; // <time.h>\n  \n  n = 5;\n  \n  // 初始化随机数发生器 \n  srand((unsigned) time(&t));\n\n  // 输出 0 到 49 之间的 5 个随机数\n  for (i = 0; i < n; i++)\n  {\n    printf(\"%d\\n\", rand() % 50);\n  }\n\n  return 0;\n}\n~~~\n\n~~~C\n#include <stdio.h>\n#include <stdlib.h>\n#include <time.h>\n#define TRUE 1\n#define FALSE 1\n\n#define PRINT_ARR(ARR, SIZE)                                                   \\\n  do {                                                                         \\\n    int __i;                                                                   \\\n    for (__i = 0; __i < (SIZE); __i++) {                                       \\\n      printf(\"%-4d\", (ARR)[__i]);                                              \\\n    }                                                                          \\\n    printf(\"\\n\");                                                              \\\n  } while (0)\n\nvoid shuffle(int *deck, int n_cards);\n\nint main(void) {\n\n  int cards[10] = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};\n  fputs(\"Before shuffle: \", stdout);\n  PRINT_ARR(cards, sizeof(cards) / sizeof(cards[0]));\n\n  shuffle(cards, 10);\n\n  fputs(\"After shuffle: \", stdout);\n  PRINT_ARR(cards, sizeof(cards) / sizeof(cards[0]));\n  return 0;\n}\n\nvoid shuffle(int *deck, int n_cards) {\n  int i;\n  static int first_time = TRUE;\n\n  // 如果尚未初始化，用当天的当前时间作为随机数发生器\n  if (first_time) {\n    first_time = FALSE;\n    srand((unsigned int)time(NULL));\n  }\n\n  // 通过交换随机对的牌进行 \"洗牌\"\n  for (i = n_cards - 1; i > 0; i -= 1) {\n    int where;\n    int temp;\n\n    where = rand() % i;\n    temp = deck[where];\n    deck[where] = deck[i];\n    deck[i] = temp;\n  }\n}\n~~~\n\n### 16.1.3 字符串转换 <stdlib.h>\n\n字符串转换函数把字符串转换为数值。其中最简单的函数`atoi`和`atol`。\n\n~~~C\nint atoi(char const *string);\nlong int atol(char const *string);\nlong int strtol(char const *string, char **unused, int base);\nunsigned long int strtoul(char const *string, char **unused, int base);\n~~~\n\n> 对于上面四个函数第一个参数来说，如果包含了前导空白字符将被跳过；函数把剩余的合法字符转换为指定类型的值。在尾部存在非法缀尾字符也将被忽略。\n\n> `atoi`和`atol`分别把字符转换为整数和长整数值。`strtol`和`atol`一样把参数字符串转换为long。但是`strtol`保存一个指向转换值后面第一个字符的指针。如果函数的第二个参数并非NULL，这个指针便保存在第二个参数所指向的位置。`strtoul`和`strtol`的执行方式相同，但它产生一个无符号长整数。\n\n> 后两个函数的第三个参数是转换所指向的基数(即进制数)。如果基数为0，任何在程序中用于书写整数字面值的形式都将被接收如`0x2af4`和`0377`。\n\n~~~C\nx = strtol(\"    590bear\", next, 12);\n~~~\n\n上面的表达式x的值为9947，并把一个指向字母e的指针保存在next所指向的变量中。\n\n#### strtol 和 strtoul 返回的错误值\n\n|函数|返回值|\n|:---:|:---:|\n|strtol|如果值太大且为负数，返回LONG_MIN。如果值太大且为正数，返回LONG_MAX|\n|strtoul|如果值太大返回ULONG_MAX|\n\n## 16.2 浮点型函数\n\n- 头文件`math.h`包含了函数库中剩余的数学函数的声明。这些函数的返回值以及绝大多数参数都是double类型。\n\n几种错误\n\n~~~C\n1. 未包含头文件math.h\n\ndouble x;\nx = sqrt(5.5);\n\n// 编译器在此之前未曾见到过sqrt函数的原型。\n\n2. 定义域错误(domain error)\n\nsqrt(-5.0);\n\n3. 范围错误(range error)\nexp(DBL_MAX);\n// 因为结果值太大，这种情况函数会返回HUGE_VAL\n~~~\n\n### 16.2.1 三角函数<math.h>\n\n标准函数库提供了常见的三角函数。\n\n~~~C\ndouble sin(double angle);\ndouble cos(double angle);\ndouble tan(double angle);\ndouble asin(double value);\ndouble acos(double value);\ndouble atan(double value);\ndouble atan2(double x, double y);\n~~~\n\n`sin`,`cos`和`tan`函数的参数是一个用弧度表示的角度，这些函数分别返回这个角度的正弦、余弦和正切值。\n\n`asin`,`acos`和`atan`函数分别返回它们参数的反正弦、反余弦和反正切值。也会出现定义域错误(比如`asin`和`acos`的参数并不位于-1和1之间，就会出现一个定义域错误)。\n\n### 16.2.2 双曲函数<math.h>\n\n~~~C\ndouble sinh(double angle);\ndouble cosh(double angle);\ndouble tanh(double angle);\n~~~\n\n这些函数分别返回它们的参数的双曲正弦、双曲余弦和双曲正切值。\n\n### 16.2.3 对数和指数函数<math.h>\n\n~~~C\ndouble exp(double x);\ndouble log(double x);\ndouble log10(double x);\n~~~\n\n`exp`函数返回e值的x次幂，也就是$e^x$  \n`log`函数返回x以e为底的对数，也就是自然对数${\\ln x}$；`log10`函数返回x以10为底的对数，也就是${\\lg x}$\n> 任何一个以`b`为底的对数可以通过下面的公式转换\n\n$log_b x = \\frac{\\ln x} {\\ln b}$\n\n$log_b x = \\frac{\\log_e x} {\\log_e b}$\n> 如果它们的参数为负数，两个对数函数都将出现定义域错误。\n\n### 16.2.4 浮点表示形式<math.h>\n\n~~~C\ndouble frexp(double value, int *exponent);\ndouble ldexp(double fraction, int exponent);\ndouble modf(double value, double *ipart);\n~~~\n\n`frexp`函数计算一个**指数(exponent)**和**小数(fraction)**，这样$\\text{fraction} \\times 2^\n\\text{exponent} = \\text{value}$，其中 $0.5 <= fraction < 1$，`exponent`是一个整数。exponent存储于第二个参数所指向的内存的位置。函数返回fraction的值。与它相关的函数`ldexp`的返回值是$\\text{fraction} \\times 2^\\text{exponent}$也就是它原先的值。当需要在那些浮点格式不兼容的机器之间传递浮点数时，这些函数非常有用。\n\n`modf`函数把一个浮点值分成整数和小数两个部分，每个部分都具有和原值一样的符号。整数部分以double类型存储于第二个参数错指向的内存位置，小数部分作为函数的返回值返回。\n> frexp 和 ldexp 函数通常用于浮点数的内部处理，例如实现快速幂或进行高精度计算。\n>\n### 16.2.5 幂<math.h>\n\n~~~C\ndouble pow(double x, double y);\ndouble sqrt(double x);\n~~~\n\n`pow`函数会返回$\\text{x}^\\text{y}$的值。由于在计算这个值时可能要用到对数，如果x是一个负数且y不是一个整数会出现一个定义域错误。\n\n`sqrt`函数返回其参数的平方根。如果参数为负，就会出现一个定义域错误。\n\n### 16.2.6 底数、顶数、绝对值和余数<math.h>\n\n~~~C\ndouble floor(double x);\ndouble ceil(double x);\ndouble fabs(double x);\ndouble fmod(double x, double y);\n~~~\n\n这些函数都是用来处理浮点数的函数，分别用于取整和求模运算。\n\n`floor`函数为传入的double值向下取整，`ceil`向上取整，`fmod`返回x除以y所产生的余数，\n`fabs`返回双精度浮点数绝对值。\n\n### 16.2.7 字符串转换 <stdlib.h>\n\n~~~C\ndouble atof(char const *string);\ndouble strtod(char const *string, char **unused);\n~~~\n\n和`strtol`,`atol`类似，任一函数参数包含了前导空白字符，这些字符将被忽略。函数随后将合法的字符转换为一个double值并忽略任何缀尾的非法字符。\n\n`strtod`函数把参数字符串转换为一个double值，其方法和`atof`类似，但保存一个指向字符串中被转换的值后面的第一个字符的指针。\n\n> 值太大会返回 HUGE_VAL，值太小会返回0。这两种情况`errno`都会被设置为`ERANGE`\n\n## 16.3 日期和时间函数\n\n函数库提供了一组非常丰富的函数，用于简化日期和时间的处理。它们的原型位于`time.h`。\n\n### 16.3.1 处理器时间 <time.h>\n\n`clock`函数返回从程序开始执行起处理器所消耗的时间。\n\n~~~C\nclock_t clock(void);\n~~~\n\n`clock`函数返回一个数字，由编译器定义。通常是处理器时钟滴答的次数，将这个值除以**CLOCKS_PER_SEC**可以得到秒数。\n\n一个例子\n\n~~~C\n#include <stdio.h>\n#include <stdlib.h>\n#include <time.h>\n\n// 设置一个工作的函数\nvoid run_program_logic() {\n  long long sum = 0;\n  for (int i = 0; i < 500000000; i++) {\n    sum += i;\n  }\n  printf(\"计算结果: %lld\\n\", sum);\n\n  // 模拟程序执行过程中可能发生的 I/O等待\n  // sleep(1); // 如果加上这行，CPU时间不会等待但实际时间会增加1秒\n}\n\n// clock不是一个常用的计算墙上时钟时间的好方法\n// time() 适用于秒级精度\n// gettimeofday() POSIX: 适用于微秒级精度(更常用)\n// clock_gettime() POSIX/C11: 更现代，支持纳秒级精度和\n// 多种时钟类型(推荐用于高性能测量)\n\n// clock返回的是处理器时钟滴答的次数。把这个值转换成秒要\n// 除以常量 CLOCKS_PER_SEC\nint main(void) {\n  clock_t start_time, end_time;\n  double cpu_time_used;\n  // 1. 记录开始时间\n  start_time = clock();\n\n  // 运行程序\n  run_program_logic();\n\n  // 2. 记录结束时间\n  end_time = clock();\n\n  // 3. 计算CPU耗时（以秒为单位）\n  // 要将clock_t 转换为 double 才能进行浮点除法\n  cpu_time_used = ((double)(end_time - start_time)) / CLOCKS_PER_SEC;\n\n  printf(\"\\n--- 运行时间结果 ---\\n\");\n  printf(\"总的 CPU 滴答数：%ld\\n\", (long)(end_time - start_time));\n  printf(\"每秒滴答数(CLOCKS_PER_SEC)： %ld\\n\", (long)CLOCKS_PER_SEC);\n  printf(\"程序 CPU 运行时间：%f 秒\\n\", cpu_time_used);\n  return EXIT_SUCCESS;\n}\n~~~\n\n### 16.3.2 当天时间<time.h>\n\n`time`函数返回当前的日期和时间。\n\n~~~C\ntime_t time(time_t *returned_value);\n~~~\n\n如果参数是一个非NULL的指针，时间值也将通过这个指针进行存储。  \n如果机器无法提供当前日期和时间或时间值太大无法用`time_t`变量表示，函数返回-1。\n\n- 标准并未规定时间的编码方式，所以不应该使用字面值常量。因为它们在不同的编译器中可能具有不同的含义。\n- 一种常见的表示形式是返回从一个任意选定的时刻开始流逝的秒数。在**MS-DOS**和**UNIX**中，这个时刻是*1970年1月1日 00:00:00*\n\n> 调用time函数两次并把两个值相减由此判断时间是很有诱惑力的。但这个技巧是很危险的，因为标准**并未要求函数的结果用秒表示**。使用`difftime`函数计算两次时间差值。\n\n#### 日期和时间的转换<time.h>\n\n用于操作`time_t`的函数\n\n~~~C\nchar *ctime(time_t const *time_value);\ndouble difftime(time_t time1, time_t time2);\n~~~\n\n`ctime`函数的参数是一个指向`time_t`的指针，并返回一个指向字符串的指针，字符串格式为`Sun Jul 4 04:02:48 1976\\n\\0`。字符串内部空格是固定的。\n\n> ctime 返回的是一个存储在由编译器分配的静态字符数组的首地址，也就是存储在一个外部静态缓冲区(运行时库的静态/全局区域)，不是由调用者定义和分配的空间。\n\n> ctime 的设计模式在多线程中存在数据覆盖的风险。\n\n将调用`ctime`函数的返回值立即拷贝到一个由调用者分配的字符数组中\n\n~~~C\nchar my_buffer[50];\nmemset(mybuffer,0,sizeof(my_buffer) / sizeof(my_buffer[0]));\ntime_t t = time(NULL);\nchar *s = ctime(&t); // 这里的指针s 只是指向了由编译器分配的一个静态字符数组并不是创建了一个新的存储区域\nstrcpy(my_buffer,s,sizeof(my_buffer) / sizeof(my_buffer[0]));\n~~~\n\n> ctime 也可能以 `asctime(localtime(time_value))`实现。\n\n`difftime`函数计算$time1 - time2$的差，并把结果值转换为秒。返回值是**double**类型\n\n一个例子\n\n~~~C\n#include <stdio.h>\n#include <time.h>\n#include <unistd.h> // POSIX sleep() 函数\n\n// 模拟一段耗时的操作\nvoid heavy_operation() {\n    printf(\"开始执行耗时操作...\\n\");\n    \n    // 让程序暂停 2 秒，模拟实际经过的时间\n    // time() 和 difftime 测量的是这个实际暂停的时间\n    sleep(2); \n    \n    printf(\"操作完成。\\n\");\n}\n\nint main() {\n    time_t start_time, end_time;\n    double elapsed_time;\n\n    // 1. 记录开始时间\n    time(&start_time); \n\n    // 执行需要计时的程序段\n    heavy_operation();\n\n    // 2. 记录结束时间\n    time(&end_time);\n\n    // 3. 计算时间差\n    // difftime(结束时间, 开始时间)\n    elapsed_time = difftime(end_time, start_time);\n\n    printf(\"\\n--- 计时结果 ---\\n\");\n    printf(\"开始时间 (time_t): %ld\\n\", (long)start_time);\n    printf(\"结束时间 (time_t): %ld\\n\", (long)end_time);\n    printf(\"实际经过时间 (秒): %.2f\\n\", elapsed_time);\n\n    return 0;\n}\n~~~\n\n两个把time_t值转换为一个tm结构的函数，tm结构更方便访问日期和时间的各个组成部分。\n\n~~~C\nstruct tm *gmtime(time_t const *time_value);\nstruct tm *localtime(time_t const *time_value);\n~~~\n\n`gmtime`函数把时间值转换为**世界协调时间(Coordinated Universal Time, UTC)**。**UTC**以前被称为**格林尼治标准时间(Greenwich Mean Time)**，这也是gmtime这个名字的来历。\n`localtime`函数把一个时间值转换为当地时间。\n\n`struct tm`结构体成员(字段)\n\n| 成员名 | 类型 | 含义 | 范围/备注 |\n| :---: | :---: | :---: | :---: |\n| **`tm_sec`** | `int` | **秒** | $0$ 到 $60$ (允许 $60$ 来处理闰秒) |\n| **`tm_min`** | `int` | **分** | $0$ 到 $59$ |\n| **`tm_hour`** | `int` | **时** | $0$ 到 $23$ |\n| **`tm_mday`** | `int` | **月中的第几天（日期）** | $1$ 到 $31$ |\n| **`tm_mon`** | `int` | **月** | $0$ 到 $11$ ( $0$ 代表一月， $11$ 代表十二月) |\n| **`tm_year`** | `int` | **年** | **从 1900 年开始计算的年数**。例如，如果年份是 2025，则 `tm_year` 为 $125$。 |\n| **`tm_wday`** | `int` | **周中的第几天** | $0$ 到 $6$ ( $0$ 代表星期日， $6$ 代表星期六) |\n| **`tm_yday`** | `int` | **年中的第几天** | $0$ 到 $365$ ( $0$ 代表 1 月 1 日) |\n| **`tm_isdst`** | `int` | **夏令时标志** | 如果夏令时生效，值为正；如果未生效，值为 $0$；如果信息不可用，值为负（通常是 $-1$）。 |\n\n当有了一个tm结构之后，既可以直接使用tm结构变量内成员值，也可以把它作为参数传递给下面的函数之一。\n\n~~~C\nchar *asctime(struct tm const *tm_ptr);\nsize_t strftime(char *string, size_t maxsize, char const *format,\n                struct tm const *tm_ptr);\n~~~\n\n`asctime`函数把参数所表示的时间值转换为一个以`Sun Jul 4 04:02:48 1976\\n\\0`格式表示的字符串。\n\n`strftime`函数把一个tm结构转换为一个根据某个格式字符串而定的字符串。*这个函数在格式化日期方面提供了令人难以置信的灵活性*。如果转换结果字符串的长度小于`maxsize`参数，那么该字符就被复制到第一个参数所指向的数组中，`strftime`函数返回字符串的长度。否则，函数返回-1且数组的内容是未定义的。\n\n格式字符串包含了普通字符和格式代码。普通字符被复制到它们原先在字符串中出现的位置。\n格式代码则被一个日期或时间值代替。格式代码包含一个`%`字符，后面跟一个表示所需值的字符。\n\n| 代码 | 含义 | 示例输出 | 备注 |\n| :---: | :---: | :---: | :---: |\n| **年/世纪** | | | |\n| `%Y` | 带世纪的年份 | `2025` | 四位数字 |\n| `%y` | 不带世纪的年份 | `25` | 两位数字 (00-99) |\n| `%C` | 世纪数 | `20` | (2025 年属于第 20 世纪) |\n| **月** | | | |\n| `%m` | 月份 | `11` | 两位数字 (01-12) |\n| `%B` | 完整的月份名称 | `November` | 依赖本地环境 (Locale) |\n| `%b`, `%h` | 缩写的月份名称 | `Nov` | 依赖本地环境 |\n| **日/周** | | | |\n| `%d` | 月份中的日期 | `15` | 两位数字 (01-31) |\n| `%A` | 完整的星期几名称 | `Saturday` | 依赖本地环境 |\n| `%a` | 缩写的星期几名称 | `Sat` | 依赖本地环境 |\n| `%w` | 周中的第几天 | `6` | 数字 (0=Sunday, 6=Saturday) |\n| `%u` | ISO 8601 周中的第几天 | `6` | 数字 (1=Monday, 7=Sunday) |\n| `%j` | 年中的第几天 | `319` | 三位数字 (001-366) |\n| **时** | | | |\n| `%H` | 小时 (24 小时制) | `17` | 两位数字 (00-23) |\n| `%I` | 小时 (12 小时制) | `05` | 两位数字 (01-12) |\n| `%p` | 上午/下午标志 | `PM` | 依赖本地环境 |\n| **分/秒** | | | |\n| `%M` | 分钟 | `12` | 两位数字 (00-59) |\n| `%S` | 秒 | `26` | 两位数字 (00-60) |\n| **日期/时间组合** | | | |\n| `%x` | 本地日期表示 | `11/15/25` | 依赖本地环境 |\n| `%X` | 本地时间表示 | `17:12:26` | 依赖本地环境 |\n| `%c` | 本地日期和时间 | `Sat Nov 15 17:12:26 2025` | 依赖本地环境 |\n| **时区/其他** | | | |\n| `%Z` | 时区名称 | `JST` 或 `CST` | 依赖本地环境 |\n| `%%` | 百分号符号 | `%` | |\n\n| 格式字符串 | 示例输出 | 解释 |\n| :---: | :---: | :---: |\n| `\"%Y-%m-%d %H:%M:%S\"` | `2025-11-15 17:12:26` | 国际通用日期和时间格式 |\n| `\"%a, %b %d, %Y\"` | `Sat, Nov 15, 2025` | 英文习惯日期格式 |\n| `\"%I:%M %p\"` | `05:12 PM` | 12 小时制时间 |\n\n`mktime`函数用于把一个tm结构转换为一个time_t值。\n\n~~~C\ntime_t mktime(struct tm *tm_ptr);\n~~~\n\n一个例子\n\n~~~C\n#include <stdio.h>\n#include <stdlib.h>\n#include <time.h>\n\nint main(void) {\n  // 1. mktime 手动构建时间结构体\n  struct tm time_info = {\n      .tm_year = 2025 - 1900, // 年份从 1900 开始算\n      .tm_mon = 10 - 1,       // 月份 0 - 11\n      .tm_mday = 27,          // 日\n      .tm_hour = 23,\n      .tm_min = 14,\n      .tm_sec = 30,\n      .tm_isdst = -1 // 自动判断夏令时\n  };\n\n  time_t timestamp = mktime(&time_info);\n  printf(\"mktime生成的时间戳：%ld\\n\", timestamp);\n\n  // 2. asctime：时间结构体转字符串(固定格式)\n  char *ascii_time = asctime(&time_info);\n  printf(\"asctime输出：%s\", ascii_time); // 自带换行\n\n  // 3. strftime：自定义格式化时间(最常用)\n  char buffer[100];\n  strftime(buffer, sizeof(buffer), \"%Y-%m-%d %H:%M:%S 星期%w\", // 格式串自由组合\n           &time_info);\n  printf(\"strftime自定义：%s\\n\", buffer);\n\n  return EXIT_SUCCESS;\n}\n\n~~~\n\n> 其实在这个例子里面使用 asctime非常危险，在编写C语言代码时遇到返回值为指针类型的函数多半要小心是否是返回了一个编译器分配的静态数组指针给你，这会导致在下一次调用这个函数时修改你用指针接收的值，也就是线程不安全的函数，遇到这种情况要及时将静态内存的内容复制出来。\n\n~~~C\ntime_t time1 = time(NULL);\nchar buffer[26];\nstrncpy(buffer, asctime(&time1), sizeof(buffer)); // 以后直接使用buffer就不会变化了\n~~~\n\n## 16.4 非本地跳转<setjmp.h>\n\n`setjmp`和`longjmp`函数提供了一种类似goto语句的机制，但它并不局限于一个函数的作用域之内。这些函数常用于深层嵌套的函数调用链。如果在某个低层的函数中检测到一个错误，可以立即返回到顶层函数，不必向调用链中的每个中间层函数返回一个错误标志。\n\n为了使用这些函数必须包含包含头文件<setjmp.h>\n\n~~~c\nint setjmp(jmp_buf state);\nvoid longjmp(jmp_buf state, int value);\n~~~\n\n声明一个`jmp_buf`变量，调用`setjmp`函数初始化，`setjmp`返回值为零。`setjmp`把程序的状态信息（例如，堆栈指针的当前位置和程序的计数器）保存到跳转缓冲区。调用`setjmp`时所处的函数便称为“顶层”函数。\n\n以后，在顶层函数或其他任何它所调用的函数内的任何地方调用`longjmp`函数，将导致这个被保存的状态重新恢复。`longjmp`的效果就是使执行流通过再次从`setjmp`函数返回，从而立即跳回到顶层函数。\n\n区分`setjmp`函数的两种不同返回方式，当`setjmp`函数第一次被调用时，返回0。当`setjmp`作为`longjmp`的执行结果再次返回时，它的返回值是`longjmp`的第二个参数，它必须是个非0值。通过检查它的返回值可以判断是否调用`longjmp`以及存在多个`longjmp`可以判断是哪个`longjmp`被调用。\n\n### 16.4.1 实例\n\n~~~c\n#include <setjmp.h>\n#include <stdio.h>\n#include <stdlib.h>\n\n// 1. 声明一个 jmp_buf 变量，用于在不同函数之间共享执行环境\n// 必须在 setjmp 和 longjmp 都能访问到的作用域内声明（通常是全局或静态）\njmp_buf environment;\n\n// 错误代码定义\n#define ERROR_FILE_NOT_FOUND 1\n#define ERROR_DATA_CORRUPTED 2\n\n// 模拟一个可能失败的深层函数\nvoid process_data(int step);\n// 模拟一个中介函数\nvoid intermediate_function();\n\nint main(void) {\n\n  // 第一次调用 setjmp, 设置跳转恢复点。\n  int jump_val = setjmp(environment);\n\n  if (jump_val == 0) {\n    // 路径A：正常执行\n    printf(\"【Main】：第一次调用 setjmp，设置了错误处理点。\\n\");\n    intermediate_function(); // 开始执行正常业务逻辑\n    printf(\"【Main】：所有功能正常完成。\\n\");\n\n  } else {\n    // 路径B，从longjmp跳转回来\n    printf(\"\\n【Main】：发生了非局部跳转！\\n\");\n\n    switch (jump_val) {\n    case ERROR_DATA_CORRUPTED:\n      printf(\"错误处理：代码%d，数据处理失败，程序安全终止。\\n\", jump_val);\n      break;\n    case ERROR_FILE_NOT_FOUND:\n printf(\"错误处理：代码%d，文件未找到。\\n\", jump_val);\n      break;\n    default:\n      printf(\"错误处理：发生了未知错误。\\n\");\n      break;\n    }\n  }\n  return EXIT_SUCCESS;\n}\n\nvoid process_data(int step) {\n  printf(\"--- Function: process_data ---\\n\");\n\n  if (step == 1) {\n    printf(\"Step 1: 正在读取配置文件...\\n\");\n  } else if (step == 2) {\n    printf(\"Step 2: 正在处理数据块...\\n\");\n\n    // 假设这里发生了致命错误！\n    printf(\"致命错误：数据损坏！\\n\");\n    // 立即跳转回 setjmp的位置，并将 ERROR_DATA_CORRUPTED 作为返回值传递\n    longjmp(environment, ERROR_DATA_CORRUPTED);\n\n    // 注意：longjmp 后的代码不会被执行\n    printf(\"这行代码永远不会被执行。\\n\");\n  }\n}\n\nvoid intermediate_function() {\n  printf(\"\\n--- Function: intermediate_function ---\\n\");\n  process_data(1);\n  process_data(2); // 这一步将触发 longjmp\n  printf(\"Intermediate Function 正常结束。\\n\");\n}\n~~~\n\n### 16.4.2 何时使用非本地跳转\n\n`setjmp`和`longjmp`并不是绝对必需的，因为总是可以通过返回一个错误代码并在调用函数中对其进行检查来实现相同的效果。返回错误代码的方法有时候不是很方便，特别是当函数已经返回了一些值的时候。\n> 使用setjmp和longjmp必须要遵循某些戒律。不然会像goto一样使用一多会让代码难以理解。\n\n## 16.5 信号\n\n程序中所发生的事件绝大多数都是由**程序本身所引发的**，例如执行各种语句和请求输入。但是，有些程序必须遇到的事件却不是程序本身所引发的。一个常见的例子就是用户中断了程序。如果部分计算好的结果必须进行保存以避免数据的丢失，程序必须预备对这类事件做出反应，虽然它并没有办法预测什么时候会发生这种情况。\n\n信号就是用于这种目的。**信号(Signal)** 表示一种事件，它可能异步发生，也就是并不与程序执行过程的任何事件同步。如果程序并未安排怎样处理一个特定信号，那么当该信号出现时程序就做出一个缺省的反应。标准并未定义这个缺省反应是什么，但绝大多数编译器都选择终止程序。另外，程序可以调用signal函数，或者忽略这个信号，或者设置一个**信号处理函数(signal handler)**，当信号发生时程序就调用这个函数。\n\n### 16.5.1 信号名 <signal.h>\n\n|信号|含义|\n|:----:|:----:|\n|SIGABRT|程序请求异常终止|\n|SIGFPE|发生一个算数错误|\n|SIGILL|检测到非法指令|\n|SIGSEGV|检测到对内存的非法访问|\n|SIGINT|收到一个交互性注意信号|\n|SIGTERM|收到一个终止程序的请求|\n\n**SIGABRT**是一个由`abort`函数所引发的信号，用于终止程序。\n\n至于哪些错误将引发**SIGFPE**信号则取决于编译器。常见的有算术上溢或下溢以及除零错误。有些编译器对这个信号进行了扩展，提供了关于引发这个信号的操作的特定信息。可能对可移植性有影响。\n\n**SIGILL**信号提示CPU试图执行一条非法的指令。这个错误可能由于不正确的编译器设置导致。\n\n**SIGSEGV**信号提示程序试图非法访问内存。有两个最常见的原因：一个是程序试图访问未安装于机器上的内存或者访问操作系统未曾分配给这个程序的内存；另一个是程序违反了内存访问的边界要求。后者可能在那些要求数据边界对齐的机器上发生。\n\n前几个信号是*同步*的，因为它们都是*在程序内部发生的*。尽管无法预测一个算数错误何时将会发生，如所使用相同的数据反复运行这个程序，每次都会在相同的地方发生相同的错误。\n\n最后两个信号**SIGINT**和**SIGTERM**则是*异步*的。它们在*程序的外部产生*，通常是由程序的用户所触发，表示用户试图向程序传达一些信息。\n\n**SIGINT**信号在绝大多数机器中都是当用户试图中断程序时发生的。\n\n**SIGTERM**则是另一种用于请求终止程序的信号。\n\n一种常用的策略是为**SIGINT**定义一个信号处理函数，目的是执行一些日常维护工作并在程序退出前保存数据。但**SIGTERM**则不配备信号处理函数，这样当程序终止时便不必执行这些日常维护工作。\n\n### 16.5.2 处理信号 <signal.h>\n\n通常我们关心的是怎样处理那些自主发生的信号，也就是无法预测其什么时候会发生的信号。**raise**函数用于显式地引发一个信号。\n\n~~~c\nint raise(int sig);\n~~~\n\n调用这个函数将引发它的参数所指定的信号。程序对这类信号的反应和那些自主发生的信号是相同的。可以调用这个函数对信号处理函数进行测试。\n\n> 如果误用可能会实现一种非局部的goto效果。\n\n当一个信号发生时，程序可以使用三种方式对它做出反应。缺省的反应是由编译器定义的，通常是终止程序。程序也可以指定其他行为对信号做出反应：信号可以被忽略，或者程序可以设置一个信号处理函数，当信号发生时调用这个函数。signal函数用于指定程序希望采取的反应。\n\n~~~c\nvoid (*signal(int sig, void (*handler)(int)))(int);\n~~~\n\n分析这个函数原型，首先省略返回类型，对参数进行研究。\n\n~~~c\nsignal(int sig, void (*handler)(int));\n~~~\n\n第一个参数是信号类型，第二个参数是希望为这个信号设置的信号处理函数。这个处理函数是一个函数指针，它所指向的函数接受一个整型参数且没有返回值。当信号发生时，信号的代码作为参数传递给信号处理函数。这个参数运行一个处理函数处理几种不同的信号。\n\n现在将从原型中的去掉参数\n\n~~~c\nvoid (*signal())(int);\n~~~\n\n**signal**是一个函数，它返回一个函数指针，后者所指向的函数接受一个整型参数且无返回值。事实上signal函数返回一个指向该信号以前的处理函数的指针（被替换前的信号处理函数指针）。如果调用signal失败，例如由于非法的信号代码所致，函数将返回SIG_ERR值。这个值是个宏，在`signal.h`头文件中定义。\n\n`signal.h`头文件海定义了另外两个宏，**SIG_DFL**和**SIG_IGN**，它们可以作为signal函数的第二个参数。**SIG_DFL**恢复对该信号的缺省反应，**SIG_IGN**使该信号被忽略。\n\n总之信号处理函数原型`void (*signal(int sig, void (*handler)(int)))(int);`声明了一个名为signal的函数，它：\n\n1. 接受一个信号编号`int sig`\n2. 接受一个指向信号处理函数的函数指针`void (*handler)(int)`\n3. 返回一个指向旧的信号处理函数的函数指针\n\n用途就是利用`signal()`函数来设置新的信号处理方式，并保留旧的处理函数地址，方便之后恢复。\n\n### 16.5.3 信号处理函数\n\n当一个已经设置了信号处理函数的信号发生时，系统首先恢复对该信号的缺省行为。这样做是为了防止如果信号处理函数内部也发生这个信号可能导致的无限循环。然后，信号处理函数被调用，信号代码作为参数传递给函数。\n\n~~~c\nvoid my_handler(int sig){\n    // 假设在这里执行了很复杂的操作，并意外再次触发了 SIGINT\n    // 如果系统没有恢复缺省行为，my_handler 就会再次被调用，\n    // 可能导致堆栈溢出或无限递归，喵！\n}\n\nint main(){\n  // 第一次调用signal(), 设置 my_handler\n  signal(SIGINT, my_handler);\n  // ...\n}\n~~~\n\n- 安全机制：当**SIGINT**发生时，系统内部会执行类似`signal(SIGINT,SIG_DFL);`的操作，然后再调用`my_handler`。\n- 如果要保持处理：在信号处理函数的第一行或某处重新调用`signal()`\n\n~~~c\nvoid my_handler(int sig){\n  signal(sig,my_handler);\n  // 其他处理逻辑\n}\n~~~\n\n信号处理函数可能执行的工作类型是非常有限的。如果信号是异步的，也就是说不是由于调用`abort`或`raise`函数引起的，信号处理函数便不应该调用除signal之外的任何库函数，因为在这种情况下是未定义的。而且信号处理函数除了能向一个类型为`volatile sig_atomic_t`的静态变量赋一个值以外，可能无法访问其他任何静态数据。为了保证真正的安全，信号处理函数所能做的就是对这些变量之一进行设置然后返回。程序的剩余部分必须定期检查变量的值，看看是否有信号发生。\n\n如果信号是异步的（比如硬件错误、来自操作系统的中断，而不是自己调用 raise() 或 abort() 触发的），那么您的信号处理函数几乎不能调用任何标准库函数，除了 signal() 自身。\n\n~~~c\nvoid unsafe_handler(int sig){\n    // 🚨 危险！在异步信号处理中，调用 printf 是未定义行为！\n    // 运行时环境可能不安全，可能破坏 stdio 库的内部状态。\n    printf(\"Oops! Signal %d received.\\n\", sig); \n    \n    // 🚨 危险！\n    malloc(10); // 堆栈可能处于不完整状态，malloc内部状态可能混乱！\n    \n    // 应该调用什么？只有极少数函数安全，比如 _Exit 或 signal 本身。\n}\n~~~\n\n这些严格的限制是由于信号处理的本质产生的。信号通常用于提示发生了错误。在这些情况下，CPU的行为是精确定义的，在程序中，错误所处的上下文环境可能很不相同，因为它们并不一定能够良好定义。例如当`strcpy`函数正在执行时如果产生一个信号，可能当时目标字符串暂时未以NUL字节终结；或者当一个函数被调用时如果产生一个信号，当时堆栈可能处于不完整的状态。如果依赖这种上下文环境的库函数被调用它们就可能以不可预料的方式失败，很可能引发另一个信号。\n\n访问限制定义了在信号处理函数中保证能够运行的最小功能。类型`sig_atomic_t`定义了一种CPU可以以原子方式访问的数据类型，也就是不可分割的访问单位。例如一台16位的机器可以以原子方式访问一个16位整数，但访问一个32位整数可能需要两个操作。在访问非原子数据的中间步骤时如果产生一个信号可能导致不一致的结果，在信号处理函数中把数据访问限制为原子单位可以消除这种可能性。\n\n- 对特定类型静态变量`volatile sig_atomic_t`的测试\n\n~~~c\n#include <signal.h>\n#include <stdio.h>\n#include <stdlib.h>\n\n// 🐱 最佳实践：使用 volatile sig_atomic_t\n// 保证了原子性 (CPU 一次操作完成) 和可见性 (防止编译器优化)。\nvolatile sig_atomic_t g_signal_flag = 0;\n// 静态变量默认是0，但如果变量在别的文件，需要声明为 static volatile\n// sig_atomic_t\n\nvoid safe_handler(int sig) {\n  // 这是信号处理函数唯一应该做的事情：设置标志并快速返回\n  g_signal_flag = sig; // 赋值是原子性的\n  // 最好不要做其他事情了！\n}\n\nint main(void) {\n  signal(SIGINT, safe_handler);\n\n  while (1) {\n    // 程序的其余部分必须定期检查这个标志！\n    if (g_signal_flag != 0) {\n      fprintf(stdout, \"\\n捕捉到信号 %d, 正在安全退出...\\n\", g_signal_flag);\n      // 安全地调用库函数进行清理工作\n      exit(g_signal_flag);\n    }\n    // 程序正常运行逻辑\n  }\n  return 0;\n}\n~~~\n\n> 标准表示信号处理函数可以通过调用exit终止程序。用于处理除了**SIGABRT**之外的所有信号的处理函数也可以通过调用abort终止程序。但是由于这两个都是库函数，所以当它们被异步信号处理函数调用时可能无法正常运行。如果必须用这种方式终止程序，注意仍然存在一种微小的可能性导致它失败。如果发生这种情况，函数的失败可能破坏数据或者表现出奇怪的症状，但程序最终将终止。\n\n## 16.6 打印可变参数列表<stdarg.h>\n\n这组函数可用于可变参数列表必须被打印的场合。要求包含头文件`<stdio.h>` `<stdarg.h>`\n\n~~~c\nint vprintf(char const *format, va_list arg);\nint vfprintf(FILE *stream, char const *format, va_list arg);\nint vsprintf(char *buffer, char const *format, va_list arg);\n~~~\n\n> 推荐使用内存更安全的`int vsnprintf(char *str, size_t size, const char *format, va_list ap)`而不是`vsprintf`\n\n#### 例子\n\n用`vprintf`实现打印格式化的log\n\n~~~c\n#include <stdarg.h>\n#include <stdio.h>\n\nvoid my_log(const char *format, ...){\n  va_list args;\n  va_start(args,format);\n  \n  // 使用vprintf 将格式化字符串和参数列表打印到标准输出\n  printf(\"LOG: \");\n  vprintf(format,args);\n  printf(\"\\n\");\n  \n  va_end(args);\n}\n~~~\n\n用`vfprintf`实现打印格式化log到文本流\n\n~~~c\n#include <stdarg.h>\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n\nvoid file_log(FILE *stream, const char *format, ...);\n\nvoid remove_line(char *str);\n\nint main(void){\n  const char *log = \"app.log\";\n  FILE *fp = fopen(log,\"w\");\n  if (fp == NULL){\n    fprintf(stdout,\"Failed to open file %s,exit...\",log);\n    fclose(fp);\n    exit(1);\n  }\n\n  char name[20],passwd[20];\n  memset(name,0,sizeof(name)); \n  memset(passwd,0,sizeof(passwd));\n  fputs(\"Please input your Loginname: \\n\",stdout);\n  fgets(name,sizeof(name) / sizeof(name[0]), stdin);\n  remove_line(name);\n  fputs(\"Please input your Loginpasswd: \\n\",stdout);\n  fgets(passwd,sizeof(passwd) / sizeof(passwd[0]), stdin);\n  remove_line(passwd);\n\n  file_log(fp, \"Everything I found great was sunfaded.\");\n  file_log(fp, \"LoginName: %s\", name);\n  file_log(fp, \"LoginPasswd: %s\", passwd);\n  fclose(fp);\n  return 0;\n}\n\nvoid file_log(FILE *stream, const char *format, ...){\n  va_list args;\n  va_start(args,format);\n  fprintf(stream,\"LOG: \");\n  vfprintf(stream,format,args);\n  fprintf(stream,\"\\n\");\n\n  va_end(args);\n}\n\nvoid remove_line(char *str){\n  int size = strlen(str);\n  if (size > 0 && str[size - 1] == '\\n')\n    str[size - 1] = '\\0';\n}\n~~~\n\n使用`vsnprintf` 将格式输出到字符数组内\n\n~~~c\n# include <stdarg.h>\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#define MAX_BUFFER 256\n\n// 封装函数：将格式化输出写入到字符串\n/*\n *  @brief package function and write down output format to string\n *  @param  buffer is the container of format string\n *  @param  format is the requirement value of vsprintf function\n *  @param  ... is variables argument list\n *  @return return actual format with va_list length\n * */\nint format_message(char *buffer, const char *format, ...);\n\nint main(void) {\n\n  char output[MAX_BUFFER];\n  memset(output, 0, sizeof(output));\n\n  format_message(output, \"%d is the real value of world!\\n\", 42);\n  fprintf(stdout, \"%s\", output);\n  return EXIT_SUCCESS;\n}\nint format_message(char *buffer, const char *format, ...) {\n  va_list args;\n  va_start(args, format);\n\n  // 使用 vsnprintf 代替 vsprintf，因为它接受缓冲区大小参数，更安全\n  // vsnprintf 是 vprintf 系列中用于写入字符串的最佳实践\n  int result = vsnprintf(buffer, MAX_BUFFER, format, args);\n\n  va_end(args);\n  return result;\n}\n~~~\n\n## 16.7 执行环境\n\n### 16.7.1 终止执行<stdlib.h>\n\n这三个函数与正常或不正常的程序终止有关。\n\n~~~c\nvoid abort(void);\nvoid atexit(void (*func)(void));\nvoid exit(int status);\n~~~\n\n`abort`函数用于不正常地终止一个正在执行的程序。由于这个函数将引发SIGABRT信号，可以在程序中为这个信号设置一个信号处理函数。\n\n`atexit`函数可以把一些函数注册为**退出函数(exit function)**。当程序将要正常终止时（或者由于调用exit，或者由于main函数返回），退出函数将被调用，退出函数不能接受任何参数。\n\n`exit`函数用于正常终止程序。\n\n当`exit`函数被调用时，所有被`atexit`函数注册为退出函数的函数将按照它们所注册的顺序被反序依次调用。然后所有用于流的缓冲区被刷新，所有打开的文件被关闭。用`tmpfile`函数创建的文件被删除。然后，退出状态返回给宿主环境，程序停止执行。\n\n> 不要在atexit注册的退出函数内再次调用exit函数，其效果未定义会导致一个无限循环，很可能只有当堆栈的内存耗尽后才会终止。\n\n### 16.7.2 断言<assert.h>\n\n断言就是声明某种东西应该为真。ANSI C实现了一个assert宏，在调试程序时很有用。\n\n~~~c\nvoid assert(int expression);\n~~~\n\n当它被执行时，这个宏对表达式参数进行测试。如果它的值为假（零），它就向标准错误打印一条诊断信息并终止程序。这条信息格式是由编译器定义的，为真则则不打印任何东西继续执行。\n\n这个宏提供了一种方便的方法，对应该是真的东西进行检。例如，如果一个函数必须用一个不为NULL的指针参数进行调用，那么函数可以用断言验证这个值：\n\n~~~c\nassert(value != NULL);\n~~~\n\n如果函数错误地接受了一个**NULL**参数，程序就会打印一条类型下面形式的信息：\n\n~~~c\nAssertion failed: value != NULL, file.c line 274\n~~~\n\n> 用这种方法使用断言使调试变得更容易，因为一旦出现错误，程序就会停止。而且，这条信息准确地提示了症状出现地点。\n\n> asser只适用于验证必须为真的表达式。\n\n可以在编译时通过定义**NDEBUG**消除所有的断言。使用编译器命令`-DNDEBUG`或在源文件头文件`<assert.h>`被包含前增加下面这个定义。\n\n~~~c\n#define NDEBUG\n~~~\n\n### 16.7.3 环境<stdlib.h>\n\n**环境(environment)**就是一个由编译器定义的名字/值对的列表，它由操作系统进行维护（就是系统的环境变量）。`getenv`函数在这个列表中查找一个特定的名字，如果找到，返回一个指向其对应值的指针。程序不能修改返回的字符串。如果名字未找到，函数就返回一个NULL指针。\n\n~~~c\nchar *getenv(char const *name);\n~~~\n\n#### 使用两种不同的方法分配内存并输出映射的环境变量\n\n~~~c\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n\n#define MAX_ENV_LEN 128\n\nvoid safe_getenv_copy(const char *env_name);\n\nvoid process_env_dup(const char *env_name);\n\nint main(void) {\n  safe_getenv_copy(\"HOME\");\n  process_env_dup(\"SHELL\");\n  return 0;\n}\n\nvoid safe_getenv_copy(const char *env_name) {\n  char *env_value = getenv(\n      env_name); // 这里env_value\n                 // 指向的是在静态存储区中有操作系统维护的一个环境变量表的内存\n\n  if (env_value != NULL) {\n    // 1. 在栈上分配缓冲区\n    char local_buffer[MAX_ENV_LEN];\n\n    // 2. duplicate: use strncpy function to ensure local_buffer not to\n    // overflow. attention:strncpy may lose end symbol \\0, so you need to make\n    // sure manually\n    strncpy(local_buffer, env_value, MAX_ENV_LEN - 1);\n    local_buffer[MAX_ENV_LEN - 1] = '\\0'; // ensure empty terminate\n    printf(\"Safely copied %s: %s\\n\", env_name, local_buffer);\n    // 3. local_buffer will automatically released when leave function.\n\n  } else {\n    printf(\"%s not found\", env_name);\n  }\n}\n\nvoid process_env_dup(const char *env_name) {\n  char *env_value = getenv(env_name);\n  char *heap_copy = NULL;\n\n  if (env_value != NULL) {\n    // 1. duplicate: use strdup (or strncpy + malloc) to duplicate to heap\n    // strdup can automatically allocate enough memory and copy string\n    heap_copy = strdup(env_value);\n\n    if (heap_copy != NULL) {\n      printf(\"Safely duplicated %s: %s\\n\", env_name, heap_copy);\n\n      free(heap_copy);\n    }\n  }\n}\n~~~\n\n### 16.7.4 执行系统命令<stdlib.h>\n\n`system`函数把它的字符串参数传递给宿主操作系统，这样它就可以作为一条命令，由系统的命令处理器执行。\n\n~~~c\nvoid system(char const *command);\n~~~\n\n这个任务执行的准确行为因编译器而异，返回值也是一样。\n\n~~~c\nint val = system(NULL);\n~~~\n\n一种用于查询命令处理器是否存在的调用，如果存在返回非零值，不存在则返回零。\n\n~~~c\n#include <stdio.h>\n#include <stdlib.h>\n\nint main(void) {\n\n  printf(\"1. Listing files using system():\\n\");\n  // 调用 ls 命令列出当前目录文件\n  system(\"ls -l --color=auto\");\n\n  printf(\n      \"\\n2. Changing terminal background to BLUE using system() and 'tput'\\n\");\n\n  printf(\"Press Any key to continue...\\n\");\n  getchar();\n  // 使用 tput 命令\n  // setab 4 = Set Background Color to Blue (ANSI color 4)\n  system(\"tput setab 4\");\n\n  // 清屏\n  system(\"clear\");\n\n  printf(\"The background should now be BLUE.\\n\");\n  printf(\"This was done by invoking the 'tput' and 'clear' shell commands.\\n\");\n  printf(\"\\n3. Resetting using ANSI escape codes (via echo):\\n\");\n  printf(\"(Press Enter to reset...)\\n\");\n  getchar();\n\n  // 使用 echo 发送 ANSI 转义字符 (SGR 0 重置属性)\n  // \\033[0m 是重置所有属性的转移码\n  system(\"echo -e \\\"\\\\033[0m\\\"\");\n  system(\"clear\");\n\n  printf(\"Back to normal!\\n\");\n  return 0;\n}\n~~~\n\n### 16.7.5 排序和查找<stdlib.h>\n\n`qsort`函数在一个数组中以升序的方式对数据进行排序。由于它是和类型无关的，所以可以使用qsort排序任意类型的数据，只是数组中元素的长度是固定的。\n\n~~~c\nvoid qsort(void *base,size_t n_elements, size_t el_size,\n           int (*compare)(void const *,void const*));\n~~~\n\n第一个参数指向需要排序的数组，第二个参数指定数组中元素的数目，第三个参数指定每个元素的长度（以字符为单位），第四个参数是一个函数指针，用于对需要排序的元素进行比较。在排序时，`qsort`调用这个函数对数组中的数据进行比较。通过传递一个指向合适的比较函数的指针，可以用`qsort`排序任意类型值的数组。\n\n比较函数接受两个参数，它们是指向两个需要进行比较的值的指针。函数应该返回一个整数，大于零、等于零和小于零分别表示第一个参数大于、等于和小于第二个参数。\n\n#### 使用 qsort 对结构体数组按照结构体内成员进行排序\n\n~~~c\n#include <stdio.h>\n#include <stdlib.h>\n#include <time.h>\nstatic int strlen_my(const char *str);\n\nstatic void remove_line(char *str);\n\nstatic int strcmp_my(const char *s1, const char *s2);\n\n#define INITMY_ARR(ARR, SIZE)                                                  \\\n  do {                                                                         \\\n    int __i;                                                                   \\\n    for (__i = 0; __i < (SIZE); __i++) {                                       \\\n      fprintf(stdout, \"put No %d key string:\\n\", __i);                         \\\n      fgets((ARR)[__i].key, sizeof((ARR)[__i].key), stdin);                    \\\n      remove_line((ARR)[__i].key);                                             \\\n      (ARR)[__i].other_data = rand() % 100 + 1;                                \\\n    }                                                                          \\\n  } while (0)\n\n#define PRINT_ARR(ARR, SIZE)                                                   \\\n  do {                                                                         \\\n    int __i;                                                                   \\\n    for (__i = 0; __i < (SIZE); __i++) {                                       \\\n      fprintf(stdout, \"%s -> %d\\n\", (ARR)[__i].key, (ARR)[__i].other_data);    \\\n    }                                                                          \\\n  } while (0)\n\ntypedef struct {\n  char key[10];   // 数组的排序关键字\n  int other_data; // 与关键字关联的数据\n} Record;\n\n// 比较函数，只比较关键的值。\n/*\n *  @brief compare function：only compare key value\n *  @param two void const* variable can execute force transfer for val\n *  @return positive means val1 large than val2 zero means val1 equals to val2\n * negative means val1 less than val2\n * */\nstatic int r_compare(void const *a, void const *b);\n\nint main(void) {\n  time_t t;\n  srand((unsigned)time(&t));\n  const int length = 5;\n\n  Record array[length];\n  INITMY_ARR(array, length);\n\n  fputs(\"before qsort:\\n\", stdout);\n  PRINT_ARR(array, length);\n  qsort(array, length, sizeof(Record), r_compare);\n\n  fputs(\"after qsort:\\n\", stdout);\n  PRINT_ARR(array, length);\n\n  Record target;\n  Record *result;\n\n  // 查找\n  printf(\"\\n请输入要查找的字符串：\\n\");\n  fgets(target.key, sizeof(target.key), stdin);\n  remove_line(target.key);\n\n  // 使用 bsearch 执行二分查找\n  result = (Record *)bsearch(&target, array, length, sizeof(Record), r_compare);\n\n  if (result != NULL) {\n    printf(\"找到！key: %s, other_data: %d\\n\", result->key, result->other_data);\n    printf(\"在数组中内存地址偏移量: %ld\\n\", result - array);\n  } else {\n    printf(\"未找到 key 为 %s 的元素\\n\", target.key);\n  }\n\n  return EXIT_SUCCESS;\n}\n\nstatic int strlen_my(const char *str) {\n  const char *p = str;\n  while (*p != '\\0')\n    p++;\n  return p - str;\n}\n\nstatic int strcmp_my(const char *s1, const char *s2) {\n  while (*s1 != '\\0' && *s1 == *s2) {\n    s1++;\n    s2++;\n  }\n\n  // 为什么强制转换为 unsigned char？\n  // C 语言标准规定 strcmp 比较时应将字符视为 unsigned char。\n  // 如果不转，对于扩展 ASCII 码（如大于 127 的字符），\n  // 可能会被当成负数，导致比较结果错误。\n\n  return *(unsigned char *)s1 - *(unsigned char *)s2;\n}\n\nstatic void remove_line(char *str) {\n  int size = strlen_my(str);\n  if (size != 0 && str[size - 1] == '\\n') {\n    str[size - 1] = '\\0';\n  }\n}\n\nstatic int r_compare(void const *a, void const *b) {\n  return strcmp_my(((const Record *)a)->key, ((const Record *)b)->key);\n}\n~~~\n\n## 16.8 locale\n\n为了使C语言在全世界的范围内更为通用，标准定义了locale，这是一组特定的参数，每个国家可能不同。在缺省的情况下是 **\"C\"locale**，编译器也可以定义其他的locale。修改locale可能影响库函数的运行方式。\n\n`setlocale`函数的原型如下所示，它用于修改整个或部分locale\n\n~~~c\nchar *setlocale(int category, char const *locale);\n~~~\n\n`category`参数指定locale的哪个部分需要进行修改。所允许出现的值于下表\n\n<strong><center>setlocale 类型</center></strong>\n\n|值|修改|\n|:--:|:--:|\n|LC_ALL|整个locale|\n|LC_COLLATE|对照序列，它将影响strcoll和strxfrm函数的行为|\n|LC_CTYPE|定义于ctype.h中的函数所使用的字符类型分类信息|\n|LC_MONETARY|在格式化货币值时使用的字符|\n|LC_NUMERIC|在格式化非货币值时使用的字符。同时修改由格式化输入/输出函数和字符串转换函数所使用的小数点符号|\n|LC_TIME|strftime函数的行为|\n\n如果`setlocale`的第二个参数为NULL，函数将返回一个指向给定类型的当前的locale的名字的指针。这个值可能被保存并在后续的`setlocale`函数中使用，用来恢复以前的locale的值。\n\n> 这里`setlocale`函数返回的也是一个静态内存中的值，和ctime，strftime一样最好用一个字符数组接收当前返回的值，否则后续调用`setlocale`函数这个值可能会发生改变。\n\n> 使用`strdup`或`strncpy`复制到堆内存或栈内存上。\n\n~~~c\n#include <locale.h> // setlocale\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h> // strdup (POSIX)\n\n// 打印浮点数，观察小数点是 '.' 还是 ','\ninline static void print_number();\n\nint main(void) {\n  // 1. 显式设置初始环境为 \"C\" (标准 C 模式，小数点是点)\n  setlocale(LC_NUMERIC, \"C\");\n  printf(\"1. Initial state (C locale):\\n\");\n  print_number();\n\n  // 获取当前 locale 名称\n  char *current_ptr = setlocale(LC_NUMERIC, NULL);\n\n  // 必须拷贝字符串\n  char *saved_locale = strdup(current_ptr);\n\n  printf(\"\\n[System] Saved old locale: '%s'\\n\", saved_locale);\n\n  // 切换到新环境\n  char *new_loc = setlocale(LC_NUMERIC, \"de_DE.UTF-8\");\n  if (new_loc == NULL) {\n    printf(\"\\n(de_DE.UTF-8 not found, trying system default...)\\n\");\n    new_loc = setlocale(LC_NUMERIC, \"\"); // 尝试系统默认\n  }\n\n  printf(\"\\n2. Temporary state (Changed to '%s'):\\n\", new_loc);\n  print_number();\n\n  // 恢复原来的环境\n  printf(\"\\n[System] Restoring previous locale...\\n\");\n  setlocale(LC_NUMERIC, saved_locale);\n\n  printf(\"\\n3. Restored state:\\n\");\n  print_number();\n\n  // 别忘了释放拷贝字符串的内存\n  free(saved_locale);\n\n  return 0;\n}\n\ninline static void print_number() { printf(\" Current Output: %.2f\\n\", 3.14); }\n~~~\n\n### 16.8.1 数值和货币格式 <locale.h>\n\n`localeconv`函数用于获得根据当前的`locale`对非货币值和货币值进行合适的格式化所需要的信息。这个函数并不实际执行格式化任务，它只是提供一些如何进行格式化的信息。\n\n~~~c\nstruct lconv *localeconv(void);\n~~~\n\n`lconv`结构包含两种类型的参数：字符和字符指针。\n\n### 16.8.2 字符串和 locale<string.h>\n\n一台机器的字符集的对照序列是固定的，但locale提供了一种方法指定不同的序列。当你必须使用一个并非缺省的对照序列时，可以使用下列两个函数。\n\n~~~c\nint strcoll(char const *s1, char const *s2);\nsize_t strxfrm(char *s1, char const *s2, size_t size);\n~~~\n\n`strcoll`函数用法和`strcmp`类似，对两个字符串根据当前的locale的LC_COLLATE类型参数指定的字符串进行比较。它返回一个大于、等于或小于零的值。\n> 这个比较函数所需的计算量可能比`strcmp`需要多的多的计算量。因为它需要遵循一个并非是本地机器的对照序列。\n\n当字符串必须以这种方式反复进行比较时，可以使用`strxfrm`函数减少计算量。它根据当前的locale解释的第二个参数转换为另一个不依赖于locale的字符串。尽管转换后的字符串的内容是未确定的。\n\n~~~c\n#include <locale.h>\n#include <stdio.h>\n#include <string.h>\n\nint main() {\n  // set local environment （to let program know the language habit now）\n  setlocale(LC_ALL, \"\");\n\n  const char *s1 = \"apple\";\n  const char *s2 = \"Banana\";\n\n  printf(\"Comparing '%s' and '%s' :\\n\\n\", s1, s2);\n\n  // 1. 使用 strcmp (only compare ASCII code)\n  // 'a' = 97, 'B' = 66, 97 > 66\n  int res_cmp = strcmp(s1, s2);\n  printf(\"[strcmp] Result: %d\\n\", res_cmp);\n  if (res_cmp > 0)\n    printf(\" -> 'apple' come AFTER 'Banana' (ASCII order)\\n\");\n  else\n    printf(\" -> 'apple' comes BEFORE 'Banana'\\n\");\n\n  printf(\"-------------------------\\n\");\n\n  // 2. 使用 strcoll （compare with dictionary order ）\n  // in the habit of eng, a comes before b unless the lower and upper\n  int res_coll = strcoll(s1, s2);\n  printf(\"[strcoll] Result: %d\\n\", res_coll);\n  if (res_coll > 0)\n    printf(\" -> 'apple' comes AFTER 'Banana'\\n\");\n  else\n    printf(\" -> 'apple' comes BEFORE 'Banana' (Dictionary order)\\n\");\n\n  // 3. strxfrm showcase\n  printf(\"\\n--- strxfrm Demo ---\\n\");\n  char buf1[100], buf2[100];\n\n  // transform natural language into the compare 'key' used by strcmp\n  strxfrm(buf1, s1, sizeof(buf1));\n  strxfrm(buf2, s2, sizeof(buf2));\n\n  // the converted content might be a bunch of gibberish or a\n  // specific sequence\n  // the content after transform maybe a mess of damaged code\n  // or specific sequence we only care about the result of strcmp\n  int res_xfrm = strcmp(buf1, buf2);\n  printf(\"strcmp(xfrm(s1),xfrm(s2)) Result: %d\\n\", res_xfrm);\n\n  if (res_coll < 0 && res_xfrm < 0) {\n    printf(\"Verification: strxfrm result matches strcoll result!\\n\");\n  }\n  return 0;\n}\n~~~\n\n> `strcoll`在只需比较少次数的字符串比`strxtrm`快，`strxtrm` + `strcmp`用空间换时间的策略。\n\n~~~c\n详细对比：为什么会这样？\n\n  假设我们要排序 1000 个中文名字。\n\n  1. 只用 strcoll (慢)\n  排序算法（如 qsort）需要进行约 10,000 次比较 ($N \\log N$)。\n   * 第 1 次比较：strcoll 查阅复杂的字典规则，算出 \"张三\" < \"李四\"。\n   * 第 2 次比较：strcoll 再次查阅规则，算出 \"张三\" > \"安二\"。\n   * ...\n   * 第 10,000 次比较：strcoll 第 N 次查阅规则...\n   * 结果：同一个字符串的规则被重复解析了无数次，浪费大量 CPU。\n\n  2. 用 strxfrm + strcmp (快)\n  这是“空间换时间”的策略。\n   * 预处理阶段：调用 1000 次 strxfrm。\n       * 把 \"张三\" 转换成二进制键值 \\x05\\x01... (假设值)。\n       * 把 \"李四\" 转换成二进制键值 \\x08\\x02...。\n       * 这步虽然有开销，但每个字符串只做一次。\n   * 排序阶段：进行 10,000 次 strcmp。\n       * strcmp 只需要比较 \\x05 和 \\x08，极其快（CPU 指令级别）。\n   * 结果：最耗时的“查规则”只做了 N 次，而不是 $N \\log N$ 次。\n\n  总结公式\n\n   * 如果你只比较一次（比如 if (strcoll(a, b) > 0)）：\n       * 直接用 strcoll 更快。因为 strxfrm 需要分配内存、转换，这本身也是开销。\n   * 如果你要排序（比较次数远多于元素个数）：\n       * strxfrm + strcmp 是王道。\n~~~\n\n> `strxfrm`就是为了把昂贵的的逻辑判断“缓存”成廉价的二进制数据。\n\n### 16.8.3 改变locale的效果\n\n1. locale可能向正在执行的程序所使用的字符集增加字符（但可能不会改变现存字符的含义）。\n例如许多欧洲语言使用了能够提示重音、货币符号和其他特殊符号的扩展字符集。\n2. 打印的方向可能会改变。尤其是，locale决定一个字符应该根据前面一个被打印的字符的那个方向进行打印。\n3. printf和scanf函数家族使用当前locale定义的小数点符号。\n4. 如果locale扩展了正在使用的字符集，isalpha、islower、isspace和isupper函数可能比以前包括更多的字符。\n5. 正在使用的字符集的对照序列可能会改变。这个序列由strcoll函数使用，用于字符串之间的相互比较。\n\n6. strftime函数所产生的日期和时间格式的许多方面都是特定于locale的。","filePath":"src/content/posts/C/C_Pointer.md","digest":"a560f4b268fa3442","rendered":{"html":"<h1><center>快速上手</center></h1>\n<hr>\n<section><h2 id=\"111-空白和注释\">1.1.1 空白和注释<a class=\"anchor\" href=\"#111-空白和注释\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ol>\n<li>遵守一些规定会让C语言代码变得更加容易阅读和修改</li>\n<li>注释告诉读者程序能做些什么</li>\n<li>使用#if和#endif预处理有效地将代码从程序中去除</li>\n</ol><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:26ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">#if 0       //条件(真执行，假不执行)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">statements</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">#endif</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>\n<section><h2 id=\"112-预处理指令\">1.1.2 预处理指令<a class=\"anchor\" href=\"#112-预处理指令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:22ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">#include &#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">#include &#x3C;stdlib.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">#include &#x3C;string.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">#define MAX_COLS 20</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">#define MAX_INPUT 1000</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>| 这五行被称为预处理指令，因为它们是由预处理器解释的。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:52ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int read_column_numbers(int columns[], int max);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">void rearrange(char *output, char const *input,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">                </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">int n_columns, int const columns[]);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>| 这些声明被称为<strong>函数原型(function prototype)</strong>。它告诉编译器这些以后将在源文件中定义的函数的特征。</p></section>\n<section><h2 id=\"113-main函数\">1.1.3 main函数<a class=\"anchor\" href=\"#113-main函数\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><strong>每个C程序都必须有一个main函数，因为它是程序执行的起点。</strong></p><p><code>n_columns = read_column_numbers(columns,MAX_COLS);</code></p><blockquote>\n<p>这条语句调用函数read_column_numbers。数组columns和MAX_COLS代表的常量20作为参数传递给这个函数。在C语言中，数组参数是以 <strong>引用(reference)</strong> 传递的，也就是传址调用，而标量和常量则是按 <strong>值(value)</strong> 传递的。</p>\n</blockquote></section>\n<section><h2 id=\"114-关于scanf的格式代码\">1.1.4 关于scanf的格式代码<a class=\"anchor\" href=\"#114-关于scanf的格式代码\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>常用的scanf格式代码除了<code>%c,%s</code>以外在输入值前的空白都会被省略。所以在使用scanf函数中的格式代码%c,%s输入时不能在输入值前有空格、换行和tab</p><h1><center>基本概念</center></h1><hr></section>\n<section><h2 id=\"21-环境\">2.1 环境<a class=\"anchor\" href=\"#21-环境\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>在ANSI C的任何一种实现中存在两种不同的环境\n<br>\n一种是<strong>翻译环境(translation environment)</strong>，在这个环境源代码被转换为可执行的机器指令。\n<br>\n一种是<strong>执行环境(execution environment)</strong>，用于实际执行代码</p></section>\n<section><h2 id=\"211-翻译\">2.1.1 翻译<a class=\"anchor\" href=\"#211-翻译\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>翻译过程：编辑源文件->对源文件进行编译->对编译好的目标文件和链接器捆绑到一起->形成可执行程序\n<br>\n编译过程： <strong>预处理器(preprocessor)</strong> 处理-> <strong>源代码解析(parse)</strong> 处理->产生目标代码( <strong>优化器(optimizer)</strong> 会对目标代码进一步处理)</p></section>\n<section><h2 id=\"212-执行\">2.1.2 执行<a class=\"anchor\" href=\"#212-执行\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>程序必须载入到内存中(具有操作系统由操作系统执行)，无操作系统时必须手动载入</p><hr><p>在 C 语言的翻译过程中，通常的顺序是：</p><p>预处理（Preprocessing）：\n这一步会处理所有的宏定义（#define）、头文件包含（#include）以及条件编译（#if）等指令。预处理器生成一个扩展后的 C 代码，这个阶段的产物是一个没有预处理指令的纯 C 源代码。</p><p>编译（Compilation）：\n在这一阶段，编译器将预处理后的 C 代码转换成汇编语言代码。编译器主要做语法分析、语义分析、优化等工作。最终生成的是与特定平台相关的汇编代码文件（通常以 .s 为后缀）。</p><p>汇编（Assembly）：\n汇编器将编译生成的汇编代码转换成机器码，生成目标文件（通常以 .o 或 .obj 为后缀）。目标文件包含机器指令，但没有完整的可执行程序所需的所有内容。</p><p>链接（Linking）：\n链接器将多个目标文件和库文件合并，解决符号（如函数和变量的地址）之间的依赖关系，最终生成可执行文件（如 .exe 或没有后缀的文件）。如果有外部库函数或其他目标文件，链接器会将它们合并成一个完整的可执行程序。</p><p>总结起来，C 语言的翻译过程是：</p><p>预处理</p><p>编译（生成汇编代码）</p><p>汇编（生成目标文件）</p><p>链接（生成可执行文件）</p><p>所以，是先编译再汇编，然后通过汇编生成目标文件，最后由链接器生成可执行程序。</p><hr></section>\n<section><h2 id=\"22-词法规则\">2.2 词法规则<a class=\"anchor\" href=\"#22-词法规则\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>词法规则就是<strong>标记(token)</strong></p></section>\n<section><h2 id=\"221-字符\">2.2.1 字符<a class=\"anchor\" href=\"#221-字符\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>使用<strong>转义序列(escape sequence)<strong>和</strong>字符转义(character escape)</strong> 对上下文环境中特定字符表示</p><p>常见的有<code>\\? \\\" \\' \\\\</code>和<code>\\a \\b \\f \\n \\r \\t \\v</code></p><p>用于表示八进制和十六进制的转义符有\n<code>\\ddd \\xddd</code></p></section>\n<section><h2 id=\"222-注释\">2.2.2 注释<a class=\"anchor\" href=\"#222-注释\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>注意跨越多行的注释</p></section>\n<section><h2 id=\"223-自由形式的源代码\">2.2.3 自由形式的源代码<a class=\"anchor\" href=\"#223-自由形式的源代码\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>c格式相对自由，相邻的标记之间有一个或多个空白</p></section>\n<section><h2 id=\"224-标识符identifier\">2.2.4 标识符(identifier)<a class=\"anchor\" href=\"#224-标识符identifier\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>标识符就是变量、函数、类型等的名字，由大小写字母、数字和下划线组成，不能以数字开头。有<strong>32</strong>个关键字</p></section>\n<section><h2 id=\"225-程序的形式\">2.2.5 程序的形式<a class=\"anchor\" href=\"#225-程序的形式\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>一个C程序的源文件应该包含一组相关的函数，这是C程序较为合理的组织形式。</p><hr></section>\n<section><h2 id=\"23-程序风格\">2.3 程序风格<a class=\"anchor\" href=\"#23-程序风格\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>C 语言程序风格（Coding Style）是指在编写 C 语言代码时，为了提高可读性、可维护性和可扩展性而遵循的一些规范和约定。良好的程序风格可以让代码更加清晰，减少错误，并便于团队协作。以下是一些常见的 C 语言编程风格规范：</p><section><h3 id=\"1-代码缩进\">1. 代码缩进<a class=\"anchor\" href=\"#1-代码缩进\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>使用统一的缩进风格。常见的缩进方法有<strong>空格缩进</strong>（通常是 4 个空格）和 <strong>制表符缩进</strong>（Tab 键）。</p><p>推荐： 一般来说，现代 C 编程习惯推荐使用 4 个空格进行缩进，避免混用空格和制表符。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:21ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int main(){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">if(condition){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">// statements</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"2-大括号风格\">2. 大括号风格<a class=\"anchor\" href=\"#2-大括号风格\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>K&#x26;R风格（Kernighan &#x26; Ritchie）和 Allman风格 是常见的大括号样式。建议选择一致的风格。</p><p>推荐： K&#x26;R 风格通常更简洁，常用于 C 语言。即大括号 ”{}” 在同一行。</p><p>示例（K&#x26;R 风格）：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:14ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">if(condition){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">// 代码块</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">} else {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">// 代码块</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"3命名规范\">3.命名规范<a class=\"anchor\" href=\"#3命名规范\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>变量、函数、宏、结构体等命名应有一致性，且能清楚地表达含义。</p><p>推荐：</p><p>变量使用小写字母，单词之间用下划线分隔，如 int total_count;。</p><p>函数使用小写字母，多个单词之间使用下划线分隔，如 int calculate_area(int width, int height);。</p><p>宏常量使用全大写字母，单词之间用下划线分隔，如 #define MAX_BUFFER_SIZE 1024。</p><p>结构体和 类型常使用大写开头的驼峰式命名，如 typedef struct Student Student;。</p></section></section>\n<section><h2 id=\"24-总结\">2.4 总结<a class=\"anchor\" href=\"#24-总结\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>一个C程序的代码保存在一个或多个源文件中，但一个函数只能完整地出现在同一个源文件中。把相关函数放在同一个文件内是一种好策略。</li>\n<li></li>\n</ul><h1><center>数据</center></h1><hr></section>\n<section><h2 id=\"31-基本数据类型\">3.1 基本数据类型<a class=\"anchor\" href=\"#31-基本数据类型\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>在C语言中，只有四种基本数据类型：<strong>整形、浮点型、指针和聚合类型(数组和结构)</strong></li>\n</ul><blockquote>\n<p>字符型是整型的一种</p>\n</blockquote></section>\n<section><h2 id=\"311-整型家族\">3.1.1 整型家族<a class=\"anchor\" href=\"#311-整型家族\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>分为字符型、短整型、整型和长整型，且分为有符号(signed)和无符号(unsigned)</p><ul>\n<li><strong>长整型至少应该和整型一样长，整型至少应该和短整型一样长。</strong></li>\n<li>如果显示地把变量声明为signed或unsigned可以提高这类程序的可移植性。</li>\n</ul><p>1.整型字面值</p><p><strong>字面值(literal)</strong> 这个术语是字面值常量的缩写————这是一种实体，指定了自身的值并且不允许发生改变。所以ANSI C允许 <strong>命名常量const</strong></p><p>在整数值后面添加l或L将整数解释为长整型值、u或U将数值指定为unsigned整型值。ul和UL就是这两个的结合</p><p>对于多字节字符如果一个多字节字符常量的前面有一个L那么它就是**宽字符常量(wide character literal)**如：\n<code>L'X' L'e^'</code></p><p>不管采用何种字符集，使用字符常量所产生的总是正确的值，所以字符常量能提高程序的可移植性</p><p>2.枚举类型</p><p><strong>枚举(enumerated)类型</strong>就是指它的值为符号常量而不是字面值的类型</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:101ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">enum Jar_Type { CUP, PINT, QUART, HALF_GALLON, GALLON}; //声明了一个enum类型称为Jar_Type</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">enum { CUP, PINT, QUART, HALF_GALLON, GALLON} milk_jug,gas_can; // 匿名枚举类型并直接定义枚举类型变量 milk_jug,gas_can</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">enum Jar_Type { CUP = 8, PINT = 10, QUART = 11, HALF_GALLON, GALLON};</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">// 根据enum赋值规律，HALF_GALLON的值为12，GALLON为13</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>\n<section><h2 id=\"312-浮点类型\">3.1.2 浮点类型<a class=\"anchor\" href=\"#312-浮点类型\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>浮点数字面值在缺省情况下都是double类型的，后跟L为long double，跟F为float</p></section>\n<section><h2 id=\"313-指针\">3.1.3 指针<a class=\"anchor\" href=\"#313-指针\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ol>\n<li>指针常量</li>\n</ol><p>指针常量只能通过已分配的内存的元素得知。<br>\n因此，把指针常量表达为数值字面值的形式几乎没有用处。</p><ol start=\"2\">\n<li>字符串常量</li>\n</ol><p>可以把字符串常量赋值给一个指向字符类型的数组char* <br>\n不能把字符串常量赋值给一个字符数组char[]</p></section>\n<section><h2 id=\"32-基本声明\">3.2 基本声明<a class=\"anchor\" href=\"#32-基本声明\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>变量声明的基本形式是：<code>说明符(一个或多个) 声明表达式列表</code></p><p><code>int* a,b,c和int *a,*b,*c</code>是在声明指针时非常容易搞混的两个概念，为避免概念上的错误建议将*号写在靠近变量名那一侧</p></section>\n<section><h2 id=\"324-隐式声明\">3.2.4 隐式声明<a class=\"anchor\" href=\"#324-隐式声明\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>一条语句实际上是一个声明时，如果它缺少类型名，编译器会假定它为整型</p><blockquote>\n<p>依赖隐式声明不是一个好主意</p>\n</blockquote></section>\n<section><h2 id=\"33-typedef\">3.3 typedef<a class=\"anchor\" href=\"#33-typedef\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>typedef 为数据类型定义新名字</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:35ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">char *ptr_to_char; 是一个指向字符的指针</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">在添加关键字typedef后</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">typedef char* ptr_to_char;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">这个声明把标识符ptr_to_char 作为指向字符的指针类型的新名字</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">ptr_to_char a; 声明a是一个指向字符的指针</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li>在定义函数指针或指向数组的指针时使用typedef更为合适。</li>\n</ul></section>\n<section><h2 id=\"34-常量\">3.4 常量<a class=\"anchor\" href=\"#34-常量\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>对于普通的数据类型来说\n<code>int const a; 和 const int a;</code>没有什么区别，因为对于整型只有值会变成常量</p><p>但是对于指针来说有两种东西可能成为常量：‘<strong>指针变量</strong>’和‘<strong>指针所指向的实体</strong>’</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:46ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int *pi; 是一个普通的指向整型的指针</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">而</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int const *pci;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">则是一个指向整型常量的指针，可以修改指针的值但不能修改它所指向的值</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">相比之下</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int *const pci;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">则是一个指向整型的常量指针。此时指针是常量，它的值无法修改，但是可以修改它所指向的整型的值。</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><hr><p>在 C 语言中，“指向整型的常量指针”和“指向常量整型的指针”是两个非常常见的概念，它们在语法和使用上有所不同。下面我会分别讲解这两者的含义：</p><ol>\n<li>指向整型常量的指针（<code>const int *ptr</code> 或 <code>int const *ptr</code>）\n这种指针类型表示 指针指向的数据是常量，即指针指向的 整型数据不可修改，但是指针本身可以修改，使其指向不同的地址。</li>\n</ol><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:47ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int a = 10;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int b = 20;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int const *ptr = &#x26;a; // 或者 const int *ptr = &#x26;a;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">*ptr = 15; // 错误，不能修改指向的数据</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">ptr = &#x26;b; // 正确，指针本身可以修改</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ol start=\"2\">\n<li>指向整型的常量指针（int *const ptr）\n这种指针类型表示 指针本身是常量，即指针的值（即它指向的地址）不可修改，但是指针指向的 整型数据 是可以修改的。</li>\n</ol><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:46ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int a = 10;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int b = 20;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int *const ptr = &#x26;a; *ptr = 15; // OK，指向的值可以修改</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">ptr = &#x26;b; // 错误，不能修改指针的地址(指针本身是常量)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ol start=\"3\">\n<li>两者结合使用（const int<em>const ptr 或 int const</em> const ptr）\n如果同时声明指针是常量且指向的数据是常量，那么就变成了“常量指针指向常量数据”。</li>\n</ol><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:27ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int a = 10;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">const int* const ptr = &#x26;a;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">*ptr = 15;  // 错误！不能修改指向的数据</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">ptr = &#x26;b;   // 错误！不能修改指针本身</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>\n<section><h2 id=\"35-作用域scope\">3.5 作用域(scope)<a class=\"anchor\" href=\"#35-作用域scope\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2></section>\n<section><h2 id=\"351-代码块作用域\">3.5.1 代码块作用域<a class=\"anchor\" href=\"#351-代码块作用域\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>特殊情况类似内层代码和外层代码拥有同一个标识符名字内层的标识符会隐藏外层的标识符</p><blockquote>\n<p>应该避免在嵌套的代码块中出现相同的变量名</p>\n</blockquote></section>\n<section><h2 id=\"36-链接属性\">3.6 链接属性<a class=\"anchor\" href=\"#36-链接属性\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>链接属性一共有三种：<strong>external(外部)、internal(内部)和none(无)</strong></p><ol>\n<li>外部链接（External Linkage）\n具有外部链接的符号可以在整个程序的多个翻译单元中访问。它意味着符号可以在一个文件中声明，并在其他文件中定义或使用。</li>\n</ol><p>全局变量：如果在一个文件中声明了全局变量，并在其他文件中引用该变量，它会具有外部链接。</p><p>外部函数：同样地，外部函数可以在一个文件中定义，并在其他文件中调用。</p><p>示例：</p><div class=\"expressive-code\"><figure class=\"frame has-title\"><figcaption class=\"header\"><span class=\"title\">file1.c</span></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:47ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">#include &#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int global_var = 10; // 外部链接</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">void func()</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">printf(\"Hello World!\\n\");</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">// file2.c</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">extern int global_var; //声明具有外部链接的变量</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">extern void func(); // 声明外部函数</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int main()</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">func();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">printf(\"Global variable: %d\\n\",global_var);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">return 0;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li><code>global_var</code>和<code>func()</code>都具有外部链接，可以在file2.c中访问</li>\n</ul><ol start=\"2\">\n<li>内部链接（Internal Linkage）\n具有内部链接的符号只能在同一翻译单元（即同一源文件及其包含的头文件）中访问。它们不能跨文件使用。</li>\n</ol><p>static 关键字：使用 static 关键字声明的变量或函数具有内部链接。它意味着该符号的作用域仅限于当前源文件。</p><p>示例：</p><div class=\"expressive-code\"><figure class=\"frame has-title\"><figcaption class=\"header\"><span class=\"title\">file1.c</span></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:65ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">#include &#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">static int internal_var = 10; // 内部链接，只能在file1.c中使用</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">static void internal_func(){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">// 内部链接，只能在file1.c中调用</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">printf(\"This is an internal function\\n\");</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int main()</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">internal_func();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">printf(\"Internal variable: %d\\n\",internal_var);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">return 0;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">// file2.c</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">extern void internal_func(); // 无法调用，因为internal_func在file1.c中是静态的</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">extern int internal_var; // 无法访问，因为internal_var是静态的</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li><code>internal_var</code>和<code>internal_func()</code>只能在file1.c中使用，其他文件无法访问它们</li>\n</ul><ol start=\"3\">\n<li>无链接（No Linkage）\n没有链接的符号意味着它们在某个特定范围内是唯一的，通常这些符号仅限于局部作用域。局部变量和函数的参数一般都是无链接的。</li>\n</ol><p>局部变量：它们的作用域仅限于函数内部，其他函数无法访问。</p><p>示例：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:57ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">void func() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">int local_var = 10;  // 无链接，仅在func内部有效</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">printf(\"Local variable: %d\\n\", local_var);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int main() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">func();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">// 下面的代码会导致错误，因为local_var在main函数外不可见</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">// printf(\"Local variable in func: %d\\n\", local_var);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">return 0;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li><code>local_var</code>只能在<code>func()</code>内部使用，其他地方无法访问</li>\n</ul><p>总结：</p><p><strong>外部链接（External Linkage）</strong>：符号可以在多个翻译单元（源文件）之间共享。通过 <code>extern</code> 关键字进行声明。</p><p><strong>内部链接（Internal Linkage）</strong>：符号仅在当前源文件内有效，不能跨文件访问。通过 <code>static</code> 关键字来定义。</p><p><strong>无链接（No Linkage）</strong>：符号仅在局部作用域内有效，通常用于函数参数和局部变量。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:17ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">static int i;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int func()</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">int j;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">extern int k;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">extern int i;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li>当<code>extern</code>关键字用于源文件中一个标识符的第一次声明时，它指定该标识符具有external链接属性。但是如上面所示在int i一开始声明了static后并不会在func内部修改extern int i为external链接属性</li>\n</ul></section>\n<section><h2 id=\"37-存储类型\">3.7 存储类型<a class=\"anchor\" href=\"#37-存储类型\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>有三个地方可以用于存储变量：普通内存、运行时堆栈、硬件寄存器。</p><ul>\n<li>凡是在任何代码块之外的声明的变量总是存储于静态内存中，也就是不属于堆栈的内存，这类变量称为静态(static)变量</li>\n<li>在代码块内部声明的变量的缺省存储类型是自动的(automatic)，也就是说它存储于堆栈中，称为自动(auto)变量</li>\n<li>对于在代码块内部声明的变量如果给它加上关键字static，可以使它的存储类型从自动变为静态。函数的形参不能声明为静态，因为实参总是在堆栈中传递给函数</li>\n<li>关键字register可以用于自动变量的声明，声明变量应该存储于机器的硬件寄存器而不是内存</li>\n</ul><p><strong>初始化</strong></p><ul>\n<li>(P44)自动变量初始化和静态变量初始化存在一个重要的差别。</li>\n</ul><blockquote>\n<p>在静态变量初始化中我们可以把可执行程序想要初始化的值放在当程序执行时变量将会使用的位置。</p>\n</blockquote><blockquote>\n<p>自动变量的初始化需要更多的开销,因为当程序链接时还无法判断自动变量的存储位置，事实上函数的局部变量在函数的每次调用时都可能占据不同的位置</p>\n</blockquote><blockquote>\n<p><strong>自动变量的初始化较之赋值语句效率并无提高</strong>，除了声明为<code>const</code>的变量之外这两者只有风格之差，并无效率之别。</p>\n</blockquote><blockquote>\n<p>优点是由于初始化在运行时执行因此可以用任何表达式作为初始化值，例如：</p>\n</blockquote><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:18ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">func(int a)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">int b = a + 2;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>最后一个后果是除非对自动变量进行显式的初始化，否则当自动变量创建时，它们的值总是垃圾。</p>\n</blockquote></section>\n<section><h2 id=\"38-static关键字\">3.8 static关键字<a class=\"anchor\" href=\"#38-static关键字\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>当用于函数定义时，或者用于代码块之外的变量声明时，static关键字用于修改标识符的连接属性(从external 改为 internal)，但标识符的存储类型和作用域不受影响。</p><p>用于代码块内部的变量声明时static关键字用于修改变量的存储类型，从自动变量改为静态变量，但变量的链接属性和作用域不受影响。</p></section>\n<section><h2 id=\"310-总结\">3.10 总结<a class=\"anchor\" href=\"#310-总结\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>具有external链接属性的实体总是具有静态存储类型</li>\n<li>如果一个变量声明于代码块内部，在它前面添加extern关键字将使它所引用的是全局变量而不是局部变量。</li>\n</ul><h1><center>语句</center></h1><hr></section>\n<section><h2 id=\"41-空语句\">4.1 空语句<a class=\"anchor\" href=\"#41-空语句\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><code>;</code>空语句本身不执行任何任务</p></section>\n<section><h2 id=\"42-表达式语句\">4.2 表达式语句<a class=\"anchor\" href=\"#42-表达式语句\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>只要在表达式后面加上一个分号，就可以把表达式转变为语句</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:15ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">x = y + 3;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">ch = getchar();</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>是表达式语句</p><blockquote>\n<p>类似于printf函数这类没有返回值的函数在标准输出中输出内容的作用称为副作用(side effect)</p>\n</blockquote></section>\n<section><h2 id=\"43-代码块\">4.3 代码块<a class=\"anchor\" href=\"#43-代码块\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>一对花括号之内的可选的声明和语句列表</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:16ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">declarations</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">statements</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>\n<section><h2 id=\"44-if语句\">4.4 if语句<a class=\"anchor\" href=\"#44-if语句\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>C 并不具备布尔类型而是用整型来替代</li>\n<li>else语句从属于最靠近它的不完整的if语句</li>\n</ul></section>\n<section><h2 id=\"45-while语句\">4.5 while语句<a class=\"anchor\" href=\"#45-while语句\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>…</p></section>\n<section><h2 id=\"49-goto语句\">4.9 goto语句<a class=\"anchor\" href=\"#49-goto语句\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><code>goto 语句标签;</code></p><ol>\n<li>资源清理和错误处理(C中没有异常机制)</li>\n</ol><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:37ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">#include &#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">#include &#x3C;stdlib.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int func()</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">int *p = malloc(100);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">if(!p) goto fail;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">FILE *fp = fopen(\"file.txt\",\"r\");</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">if(!fp) goto cleanup;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">// 正常执行逻辑</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">fclose(fp);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">free(p);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">return 0;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">cleanup:</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">free(p);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">fail:</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">return -1;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ol start=\"2\">\n<li>从多层嵌套中快速跳出</li>\n</ol><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:34ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">for (int i = 0; i &#x3C; 5; ++i) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">for (int j = 0; j &#x3C; 5; ++j) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">if (i + j == 6) goto done;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">done:</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">printf(\"Exited nested loops\\n\");</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>goto 是 C 的原始控制流工具，能<strong>跳到代码中的任意标签</strong>；</p><p>不推荐<strong>滥用</strong>，但在特定情况下（如资源清理、退出多层嵌套）是非常有效的；</p><p>如果你在写<strong>可读性强、模块化的现代代码</strong>，能不用就尽量不用；</p><p>如果你在写<strong>驱动、内核、嵌入式或老式 C 代码</strong>，合理使用是完全 OK 的。</p></section>\n<section><h2 id=\"410-总结\">4.10 总结<a class=\"anchor\" href=\"#410-总结\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><h1><center>操作符和表达式</center></h1></section>\n<section><h2 id=\"51-运算符\">5.1 运算符<a class=\"anchor\" href=\"#51-运算符\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>算数运算符(右结合)</li>\n</ul><p><code>+ - * / %</code>除了<code>%</code>其他的操作符都适用于整型和浮点型</p><ul>\n<li>移位操作符(右结合)</li>\n</ul><p><code>&#x3C;&#x3C; >></code>左移和右移操作符\n左移右边多出来填充0，右移左边多出来填充0或1(具体看是逻辑运算还是算数运算（符号位1填1，符号位0填0）)</p><blockquote>\n<p><code>a &#x3C;&#x3C; -5</code>左移-5位是什么意思其实不重要，结果是由编译器决定的，且其结果无意义，不能在程序中出现这种情况</p>\n</blockquote><ul>\n<li>位操作符(右结合)</li>\n</ul><p><code>&#x26; | ^</code>分别执行与或和异或操作</p><p>或操作符与左移操作符结合：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:59ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int value = 0b00001010;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int bit_number = 1;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">value = value | (1 &#x3C;&#x3C; bit_number);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">// 即 value = 0b00001010 | ob00000010 = 0b00001010 （值没有发生改变）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">bit_number = 2;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">value = value | (1 &#x3C;&#x3C; bit_number);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">// 即：value = 0b00001010 | 0b00000100 = 0b00001110 （值变成 14）</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li>赋值符和复合赋值符(左结合)</li>\n</ul><p>可以用复合赋值符改写上面的操作</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:25ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">value |= 1 &#x3C;&#x3C; bit_number;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">value &#x26;= 1 &#x3C;&#x3C; bit_number;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li>单目运算符(左结合)</li>\n</ul><p><code>~</code>操作符对二进制数进行求补操作，操作数原为1则为0，原为 0则为1</p><p><code>&#x26;</code>操作符为取址符</p><p><code>*</code>间接访问操作符</p><p><code>sizeof()</code>判断操作数类型长度</p><h1><center>指针</center></h1></section>\n<section><h2 id=\"61-内存和地址\">6.1 内存和地址<a class=\"anchor\" href=\"#61-内存和地址\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>我们对两件事情感兴趣：</p><ul>\n<li>内存中的每个位置由一个独一无二的地址标识：</li>\n<li>内存中的每个位置都包含一个值：</li>\n</ul><blockquote>\n<p>名字与内存位置之间的关联并不是硬件提供的，而是由编译器为我们实现的。</p>\n</blockquote><p><strong>硬件仍然通过地址访问内存位置。</strong></p></section>\n<section><h2 id=\"62-值和类型\">6.2 值和类型<a class=\"anchor\" href=\"#62-值和类型\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li><strong>不能简单地通过检查一个值的位来判断它的类型。</strong></li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:15ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int a = 112;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">float b = 3.14;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int *c = &#x26;a;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int *d = &#x26;b;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>在这上面变量a被解释为整型值，但b存储的为浮点值，在内存中却可能被解释为整型值，变成一个非常大的整型值。由于解释方法不同有可能被解释为整数<code>1078523331</code>。</p><blockquote>\n<p>大部分情况编译器会帮助我们避免这些错误。当程序访问时编译器就会产生浮点型指令。</p>\n</blockquote></section>\n<section><h2 id=\"63-指针变量的内容\">6.3 指针变量的内容<a class=\"anchor\" href=\"#63-指针变量的内容\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>上面的变量c和d为指针，指针初始化是用<code>&#x26;</code>操作符完成的，该操作数用于产生操作数的内存地址。</p><p>区分变量c、d的地址和c、d存储的内容是非常重要的。c、d存储的内容为a、b的地址，c、d的地址为变量自身在内存中的地址。</p></section>\n<section><h2 id=\"64-间接访问操作符\">6.4 间接访问操作符<a class=\"anchor\" href=\"#64-间接访问操作符\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><code>*</code>操作符执行<strong>间接访问(idirection)</strong> 或 <strong>解引用(dereferencing the pointer)</strong>。</p></section>\n<section><h2 id=\"65-未初始化和非法的指针\">6.5 未初始化和非法的指针<a class=\"anchor\" href=\"#65-未初始化和非法的指针\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:8ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int *a;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">*a = 12;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>a指向了哪里，我们声明了这个变量但是未对他进行初始化，所以没有办法预测12这个值将存储于什么地方。</p>\n<blockquote>\n<p><em>无论是哪种情况声明一个指向整型的指针都不会“创建”用于存储整型值的内存空间。</em></p>\n</blockquote>\n<p>所以程序执行这个赋值操作，有可能：</p>\n<p><strong>1.</strong> a的初始值会是个非法地址，这样赋值语句将会出错，从而终止程序。在UNIX系统上这个错误被称为 <em>“段违例”(segmentation violation)</em> 或 <em>内存错误(memory fault)</em>。它提示程序试图访问一个并未分配给程序的内存空间。</p>\n<p><strong>2.</strong> 对于那些要求整数必须存储于特定边界的机器而言，如果这种类型的数据在内存中的存储地址处于错误的边界上，那么对这个地址进行访问时将会产生一个错误。这个错误在UNIX系统中被称为 <em>总线错误(bus error)</em> 。</p>\n<p><strong>3.</strong> 一种更为严重的情况是，这个指针偶尔可能包含了一个合法的地址。接下来的事情很简单：<strong>位于那个位置的值被修改！</strong></p>\n</blockquote></section>\n<section><h2 id=\"66-null指针\">6.6 NULL指针<a class=\"anchor\" href=\"#66-null指针\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>要使一个指针变量为NULL可以给它赋一个零值。</p><blockquote>\n<p>p96 NULL指针用法</p>\n</blockquote><ul>\n<li>对一个NULL指针解引用是非法的，因为NULL指针没有指向任何东西。</li>\n</ul></section>\n<section><h2 id=\"67-指针间接访问和左值\">6.7 指针、间接访问和左值<a class=\"anchor\" href=\"#67-指针间接访问和左值\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:27ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int a;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int *d = &#x26;a;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">*d = 10 - *d;       // 1.正确</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">d = 10 - *d;        // 2.错误</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>第一条语句包含了两个间接操作。右边的间接访问作为右值使用，所以它的值d所指向的位置所存储的值(a的值)。左边的间接访问作为左值使用，所以d所指向的位置a把赋值符右边的表达式的计算结果作为它的新值。</p><p>第二条语句是非法的，因为它表示把一个整型变量(10 - *d)存储于一个指针变量中，当实际使用的变量类型和应该使用的变量类型不一致时，编译器会发出警告。</p></section>\n<section><h2 id=\"68-指针间接变量和变量\">6.8 指针、间接变量和变量<a class=\"anchor\" href=\"#68-指针间接变量和变量\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><code>*&#x26;a = 25</code> 和 <code>a = 25</code>的效力是相同的，但是它涉及更多的操作，且这种写法会使得代码可读性更差。</p></section>\n<section><h2 id=\"69-指针常量\">6.9 指针常量<a class=\"anchor\" href=\"#69-指针常量\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>如果变量a存储于位置100</p><p><code>*100 = 25;</code>看上去像是把25赋值给a，但是这是错的！因为字面值100的类型是整型而不是指针类型表达式，如果想把25存储于位置100必须使用强制类型转换。</p><p><code>*(int *)100 = 25;</code>这种写法合法，但是需要使用这种技巧的地方几乎碰不到！因为<em>在编译器执行前无法确定变量会存储在内存的什么位置。</em></p></section>\n<section><h2 id=\"610-指针的指针\">6.10 指针的指针<a class=\"anchor\" href=\"#610-指针的指针\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:13ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int a = 12;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int *b = &#x26;a;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int **c = &#x26;b;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>*</code>操作符具有从右向左的结合性，表达式<code>**c</code>的类型是int，它是指针的指针。<code>*c</code>访问c所指向的位置，我们知道这是变量b。</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\">表达式</th><th align=\"center\">相当的表达式</th></tr></thead><tbody><tr><td align=\"center\">a</td><td align=\"center\">12</td></tr><tr><td align=\"center\">b</td><td align=\"center\">&#x26;a</td></tr><tr><td align=\"center\">*b</td><td align=\"center\">a,12</td></tr><tr><td align=\"center\">c</td><td align=\"center\">&#x26;b</td></tr><tr><td align=\"center\">*c</td><td align=\"center\">b,&#x26;a</td></tr><tr><td align=\"center\">**c</td><td align=\"center\">*b,a,12</td></tr></tbody></table></section>\n<section><h2 id=\"611-指针表达式\">6.11 指针表达式<a class=\"anchor\" href=\"#611-指针表达式\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>符号优先级：() > ++ > * > -</p><ul>\n<li>分析几个重要的指针表达式</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:16ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">char ch = 'a';</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">char * cp = &#x26;ch;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ol>\n<li><code>*cp + 1</code></li>\n<li><code>*(cp + 1)</code></li>\n<li><code>++cp</code></li>\n<li><code>cp++</code></li>\n<li><code>*++cp</code></li>\n<li><code>*cp++</code></li>\n<li><code>++*cp</code></li>\n<li><code>(*cp)++</code></li>\n<li><code>++*++cp</code></li>\n<li><code>++*cp++</code></li>\n</ol><ul>\n<li><code>*cp + 1</code>\n先执行间接访问操作得到它的值，后取得这个值的<strong>副本</strong>执行与1相加的操作。表达式最终结果为字符’b’。该表达式最终结果的存储位置并未清晰定义，所以不是一个合法左值。</li>\n<li><code>*(cp + 1)</code>\n指针加法运算的结果是一个右值，之后对这个右值进行间接访问操作后可以将其作为左值使用，尽管<code>cp + 1</code>本身并不是左值。</li>\n</ul><blockquote>\n<p><strong>间接访问操作符是少数几个其结果为左值的操作符之一。</strong></p>\n</blockquote><ul>\n<li><code>++cp</code>和<code>cp++</code>唯一区别是这两个表达式的返回值一个是cp + 1的副本，一个是cp的副本。且这两个表达式都不是合法的左值。</li>\n<li><code>*cp++</code>和<code>*++cp</code>与不加间接访问操作的上面两个式子不同。右值为<code>ch + 1</code> 或 <code>ch</code>那个<strong>内存地址的值</strong>，左值为<strong>那个位置本身</strong>(作为变量使用)。</li>\n<li><code>++*cp</code>与上式不同，由于<code>*</code>和<code>++</code>操作符都是左结合性，首先执行间接访问操作，然后cp所指向的位置的值加一，表达式结果是这个增值后的值的一个副本。</li>\n<li><code>(*cp)++</code>是原本cp增值前的原先值，和<code>ch++</code>操作相同</li>\n<li><code>++*++cp</code>先执行<code>*++cp</code>后执行<code>++*++cp</code>，结果为<code>*++cp</code>自增后的拷贝。</li>\n<li><code>++*cp++</code>和上式的唯一区别是<code>*++cp</code>和<code>*cp++</code>的区别。</li>\n</ul></section>\n<section><h2 id=\"612-实例\">6.12 实例<a class=\"anchor\" href=\"#612-实例\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>程序6.1：字符串的长度</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:28ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">#include &#x3C;stdlib.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">size_t</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">strlen(char *string)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">int     length = 0;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">while(*string++ != '\\0')</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">length += 1;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">return length;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>程序6.2：在一组字符串中查找指定的字符(版本1)</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:41ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">#include &#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">#define     TRUE    1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">#define     FALSE   0</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">find_char(char **strings, char value)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">char* string;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">// 未初始化的字符串类型</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">// 对于列表中的每个字符串</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">while( (string = *strings++) != NULL)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">// 观察字符串中的每个字符</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">while( *string != '\\0')</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">            </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">if( *string++ == value)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">                </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">return TRUE;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">return FALSE;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>程序6.3：在一组字符串中查找(版本2)</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:38ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">#include &#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">#include &#x3C;assert.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">#define TRUE 1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">#define FALSE 0</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">find_char(char **strings, int value)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">assert(strings != NULL);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">while(*strings != NULL)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">while(**strings != '\\0')</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">            </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">if(*(*strings)++ == value)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">                </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">return TRUE;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">strings++;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">return FALSE;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>\n<section><h2 id=\"613-指针运算\">6.13 指针运算<a class=\"anchor\" href=\"#613-指针运算\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>对指针的操作不依赖于指针的类型</li>\n</ul><section><h3 id=\"6131-算数运算\">6.13.1 算数运算<a class=\"anchor\" href=\"#6131-算数运算\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ol>\n<li>指针 +/- 整数</li>\n<li>指针 - 指针\n只有两个指针都指向同一个数组中的元素时才允许从一个指针减去另一个指针。</li>\n</ol><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:36ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int arr[5] = {1,2,3,4,5};</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int *a = &#x26;arr[0];</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">int *b = &#x26;arr[3];</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">// b - a = 3</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">// a - b = -3 ----> 指针可以进行反向运算并结果为负数</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"6132-关系运算\">6.13.2 关系运算<a class=\"anchor\" href=\"#6132-关系运算\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>关系运算的前提也是指针都指向一个数组中的元素</p><p>用于清除一个数组中的所有元素</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:44ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">#define N_VALUES    5</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">float values[N_VALUES];</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">float *vp;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">for(vp = &#x26;value[0]; vp &#x3C; &#x26;values[N_VALUES];)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">*vp++ = 0;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>这里使用<code>!=</code>替换<code>&#x3C;</code>也是可行的</p>\n</blockquote><p>for循环的另一种写法</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:54ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">for(vp = &#x26;values[N_VALUES - 1]; vp >= &#x26;values[0];vp--)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">*vp = 0;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>这种写法有一个问题，vp—最后会访问到一个未知的内存位置在满足<code>vp == &#x26;values[0]</code>后。</p></section></section>\n<section><h2 id=\"614-总结\">6.14 总结<a class=\"anchor\" href=\"#614-总结\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>计算机内存中的每个位置都由一个地址标识。通常邻近的内存位置合成一组，这样就允许存储更大范围的值。指针的值表示的是内存地址的变量。</li>\n</ul></section>\n<section><h1 id=\"-函数\">😠 函数<a class=\"anchor\" href=\"#-函数\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h2 id=\"71-函数定义\">7.1 函数定义<a class=\"anchor\" href=\"#71-函数定义\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>函数的定义就是<strong>函数体的实现</strong>:</li>\n<li>函数体就是一个<strong>代码块</strong>，它在函数被调用时执行:</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:15ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">类型</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">函数名(</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">形式参数</span><span style=\"--0:#24292E;--1:#E1E4E8\"> )</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">代码块</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">function_name</span><span style=\"--0:#24292E;--1:#E1E4E8\">()</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>存根(stub)</strong>：为那些此时尚未实现的代码保留一个位置。</p><blockquote>\n<p><strong>K&#x26;R C</strong>形参声明</p>\n</blockquote><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:31ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">find_int(key,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">array,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">array_len</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">key</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">array[]</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">array_len</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>return语句</strong></p><ul>\n<li>return语句允许从函数体的<em>任何位置</em>返回。</li>\n<li>return expression中的<code>expression</code>是可选的。</li>\n<li>通常，表达式的类型就是函数声明的返回类型。</li>\n</ul><blockquote>\n<p>没有返回值或<code>return;</code>的函数类型应该设置为void函数。</p>\n<blockquote>\n<p>函数被分为有返回值的函数(<strong>真函数</strong>)和没有返回值的函数(<strong>过程或副作用</strong>)。</p>\n</blockquote>\n</blockquote></section><section><h2 id=\"72-函数声明\">7.2 函数声明<a class=\"anchor\" href=\"#72-函数声明\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>使用 <em><strong>函数原型(function prototype)</strong></em> 为编译器提供函数的完整信息:</li>\n<li>对于<em>K&#x26;R C</em>风格函数编译器只知道函数返回值类型:</li>\n</ul><blockquote>\n<p>标准表示，在同一个代码块中，函数原型必须与<strong>同一个函数</strong>的<strong>任何先前原型</strong>匹配。</p>\n</blockquote><section><h3 id=\"722-函数的缺省认定\">7.2.2 函数的缺省认定<a class=\"anchor\" href=\"#722-函数的缺省认定\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>无法见到原型的函数，编译器认为该函数返回值为整数类型。</li>\n</ul></section></section><section><h2 id=\"73-函数的参数\">7.3 函数的参数<a class=\"anchor\" href=\"#73-函数的参数\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>C函数的所有参数均以 <strong>“传值调用”</strong> 方式进行传递，即传递参数的副本。</li>\n<li>传递指针和数组的行为实际上为 <strong>“传址调用”</strong> 。</li>\n</ul><blockquote>\n<p>对指针和数组进行<em>间接访问操作</em>。</p>\n</blockquote><p><strong>缺省参数提升</strong>：使用K&#x26;R C旧风格的形参类型<em>类似char 和 short类型</em>会被提升为<code>int</code>类型,<em>float类型</em>会被提升为<code>double</code>类型</p></section><section><h2 id=\"74-adt和黑盒\">7.4 ADT和黑盒<a class=\"anchor\" href=\"#74-adt和黑盒\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>\n<p>C语言可以用于设计和实现<strong>抽象数据类型(ADT, Abstract Data Type)</strong>，因为它可以<em><strong>限制</strong></em>函数和数据定义的作用域。</p>\n</li>\n<li>\n<p><strong>抽象数据类型(ADT, Abstract Data Type)</strong> 是一种编程概念，它将数据的表示(如何存储)和对数据的操作(如何使用)分离开来。</p>\n</li>\n</ul><section><h3 id=\"adt的核心思想\">ADT的核心思想<a class=\"anchor\" href=\"#adt的核心思想\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ol>\n<li>\n<p><strong>数据隐藏(Data Hiding)</strong>：数据的具体存储方式被隐藏起来，外部代码无法直接访问或修改。</p>\n</li>\n<li>\n<p><strong>接口(Interface)</strong>：ADT提供一组明确定义的公共函数，作为与外部世界的唯一交互方式。</p>\n</li>\n</ol><ul>\n<li>限制对模块的访问是通过合理使用<code>static</code>关键字来实现的，它可以限制对那些并非接口的函数和数据的访问。</li>\n</ul></section><section><h3 id=\"示例一个简单的计数器模块\">示例：一个简单的计数器模块<a class=\"anchor\" href=\"#示例一个简单的计数器模块\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>counter.h</code>(公共接口)</p><p>这是模块的”对外合同“，它只声明了其他文件可以访问的公共函数。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:40ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#ifndef COUNTER_H</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#define COUNTER_H</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">Increment</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">the</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">counter</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">by</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">1.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">increment_counter</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">Get</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">the</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">current</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">value</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">of</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">the</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">counter.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">get_counter</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#endif // COUNTER_H</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>counter.c</code>(黑盒实现)</p><p>这是模块的”内部黑盒“。<code>static</code>关键字使得<code>count</code>变量和<code>private_helper</code>函数无法被其他文件直接访问。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:82ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#include \"counter.h\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#include &#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">This</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">is</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">variable.</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">Its</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">value</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">is</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">kept</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">the</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">lifetime</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">of</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">the</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">program,</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">but</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">it</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">is</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">only</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">visible</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">and</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">accessible</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">within</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">this</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">file</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (counter.c).</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">count</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">This</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">is</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">function.</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">It's a private helper and cannot be called</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">// from outside this file.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">static void private_helper()</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#032F62;--1:#9ECBFF\">  </span></span><span style=\"--0:#032F62;--1:#9ECBFF\">printf(\"--- (Internal) The counter is now being updated... ---\\n\");</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">// Public API function. It calls the private helper function</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">void increment_counter()</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#032F62;--1:#9ECBFF\">  </span></span><span style=\"--0:#032F62;--1:#9ECBFF\">private_helper(); // This is allowed bacause private_helper is in the same file.</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#032F62;--1:#9ECBFF\">  </span></span><span style=\"--0:#032F62;--1:#9ECBFF\">count++;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">// Public API function. It returns the value of the private variable.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">int get_counter()</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#032F62;--1:#9ECBFF\">  </span></span><span style=\"--0:#032F62;--1:#9ECBFF\">return count;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>main.c</code>(使用模块)</p><p>这个文件只能通过<code>counter.h</code>中声明的公共函数与<code>counter.c</code>交互。任何试图访问内部私有函数的行为都将导致编译或链接错误。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:74ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#include &#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#include \"counter.h\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">()</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#005CC5;--1:#79B8FF\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">\"Initial counter value: %d\\n\"</span><span style=\"--0:#6F42C1;--1:#B392F0\">,get_counter(</span><span style=\"--0:#24292E;--1:#E1E4E8\">));</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">Call</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">the</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">function</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">to</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">increment</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">the</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">counter.</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">increment_counter</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#005CC5;--1:#79B8FF\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">\"Counter value after first increment: %d\\n\"</span><span style=\"--0:#6F42C1;--1:#B392F0\">,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">get_counter</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">increment_counter</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#005CC5;--1:#79B8FF\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">\"Counter value after second increment: %d\\n\"</span><span style=\"--0:#6F42C1;--1:#B392F0\">,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">get_counter</span><span style=\"--0:#24292E;--1:#E1E4E8\">());</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">COMPILE/LINK</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">ERROR!</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">The</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">linker</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">will</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">fail</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">because</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">private_helper</span><span style=\"--0:#24292E;--1:#E1E4E8\">() </span><span style=\"--0:#032F62;--1:#9ECBFF\">is</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">not</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">public</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">symbol.</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">private_helper</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>如果不包含最后一行<code>private_helper()</code>的调用程序将编译和链接成功。</p>\n</blockquote></section></section><section><h2 id=\"75-递归\">7.5 递归<a class=\"anchor\" href=\"#75-递归\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>递归函数就是直接或间接调用自身的函数。</li>\n<li>C通过<strong>运行时堆栈</strong>支持递归函数的实现。</li>\n<li>递归的效率大部分情况下都非常低。</li>\n</ul><section><h3 id=\"使用递归与迭代来表示阶乘的计算\">使用递归与迭代来表示阶乘的计算<a class=\"anchor\" href=\"#使用递归与迭代来表示阶乘的计算\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:32ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">factorial(n</span><span style=\"--0:#24292E;--1:#E1E4E8\">) =</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">├──</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">n</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">:</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">└──</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">n</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">:</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">n</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">x</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">factorial</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">n</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>递归方法</strong></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:32ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">long</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">factorial(int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">n</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">n</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">else</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">n</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">factorial</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">n</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>迭代方法</strong></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:17ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">long</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">factorial(int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">n</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">result</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">while</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">n</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">result</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">n</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">n</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">result</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>许多问题是以递归的形式进行解释的，这只是因为它比非递归形式更为清晰，但是这些问题的迭代实现往往比递归实现效率更高。</p>\n</blockquote></section><section><h3 id=\"使用递归与迭代来表示斐波那契数\">使用递归与迭代来表示斐波那契数<a class=\"anchor\" href=\"#使用递归与迭代来表示斐波那契数\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:46ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">Fibonacci(n</span><span style=\"--0:#24292E;--1:#E1E4E8\">) =</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">├──</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">n</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">:</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">├──</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">n</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">:</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">├──</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">n</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">:</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">Fibonacci</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">n</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#032F62;--1:#9ECBFF\">+Fibonacci</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">n</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>递归方法</strong></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:45ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">long</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">fibonacci</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">n</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">n</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">fibonacci</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">n</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#032F62;--1:#9ECBFF\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">fibonacci</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">n</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>迭代方法</strong></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:49ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">long</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">fibonacci</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">n</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">long</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">result</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">long</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">previous_result</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">long</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">next_older_result</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">result</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">previout_result</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">n</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">while</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">n</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">n</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">next_older_result</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">previous_result</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">previous_result</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">result</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">result</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">previous_result</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">next_older_result</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>使用递归实现斐波那契数的代价比你远想的要大。</p>\n</blockquote></section></section><section><h2 id=\"76-可变参数列表\">7.6 可变参数列表<a class=\"anchor\" href=\"#76-可变参数列表\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>使用<code>stdarg</code>宏实现可变参数列表，这些宏定义在<code>stdarg.h</code>头文件</li>\n<li>在定义可变参数列表时在省略号前一定是代表后面可变参数列表<strong>参数个数</strong></li>\n</ul><p>这个头文件声明了一个类型<code>va_list</code>和3个宏---<code>va_start</code>、<code>va_arg</code>和<code>va_end</code></p><section><h3 id=\"计算标量参数平均值非可变参数\">计算标量参数平均值(非可变参数)<a class=\"anchor\" href=\"#计算标量参数平均值非可变参数\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:66ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">float</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">average</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">n_values,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">v1,int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">v2,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">v3,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">v4,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">v5</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">float</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">sum</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">v1</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ( </span><span style=\"--0:#6F42C1;--1:#B392F0\">n_values</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">sum</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">+=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">v2</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ( </span><span style=\"--0:#6F42C1;--1:#B392F0\">n_values</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">3</span><span style=\"--0:#24292E;--1:#E1E4E8\"> )</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">sum</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">+=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">v3</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ( </span><span style=\"--0:#6F42C1;--1:#B392F0\">n_values</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">4</span><span style=\"--0:#24292E;--1:#E1E4E8\"> )</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">sum</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">+=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">v4</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ( </span><span style=\"--0:#6F42C1;--1:#B392F0\">n_values</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">5</span><span style=\"--0:#24292E;--1:#E1E4E8\"> )</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">sum</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">+=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">v5</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">sum</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">n_values</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"计算标量参数平均值可变参数\">计算标量参数平均值(可变参数)<a class=\"anchor\" href=\"#计算标量参数平均值可变参数\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:46ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#include &#x3C;stdarg.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">float</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">average</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">n_values,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">...</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#032F62;--1:#9ECBFF\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">传递任意数量的未知数</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">va_list</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">var_arg</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">count</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">float</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">sum</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">准备访问可变参数</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">va_start</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (var_arg, </span><span style=\"--0:#032F62;--1:#9ECBFF\">n_values</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">添加取自可变参数列表的值</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">count</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span><span style=\"--0:#6F42C1;--1:#B392F0\">count</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">n_values</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span><span style=\"--0:#6F42C1;--1:#B392F0\">count</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">+=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">sum</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">+=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">va_arg</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">var_arg,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">完成处理可变参数</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">va_end(var_arg</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">sum</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">n_values</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section></section>\n<section><h1 id=\"-数组\">🖐 数组<a class=\"anchor\" href=\"#-数组\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h2 id=\"81-一维数组\">8.1 一维数组<a class=\"anchor\" href=\"#81-一维数组\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li><strong>指针与数组并不是相等的。</strong></li>\n</ul><section><h3 id=\"811-数组名\">8.1.1 数组名<a class=\"anchor\" href=\"#811-数组名\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>考虑下面的这些声明:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:10ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">b[10]</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>a为标量，因为它是一个单一的值；b为数组，因为它是一些值的集合。</p>\n</blockquote><p><strong>数组</strong>: 相同类型的值的集合。</p><blockquote>\n<p>int b[10]中的b并不表示整个数组而是表示数组首个元素的地址。数组为<code>int</code>类型表示数组名的类型为”指向int的常量指针”。</p>\n</blockquote><ul>\n<li>区分指针与数组差别的其中一个理由是数组名是<strong>指针常量</strong>而不是<strong>指针变量</strong>。</li>\n</ul><blockquote>\n<p>常量的值是不能修改的，这也就意味着如果有一个指针<code>int *c</code>那么b = c这种赋值是非法的，因为b是常量。</p>\n</blockquote></section><section><h3 id=\"812-下标引用\">8.1.2 下标引用<a class=\"anchor\" href=\"#812-下标引用\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li><strong>除优先级外，下标引用和间接访问完全相同。</strong></li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:42ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">array[subscript]</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">array</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (subscript))</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>证明相等性:</strong></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:20ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">array[10]</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">ap</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">array</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\">statement</th><th align=\"center\">expression</th></tr></thead><tbody><tr><td align=\"center\">ap</td><td align=\"center\">array + 2 and &#x26;array[2]</td></tr><tr><td align=\"center\">*ap</td><td align=\"center\">array[2] and *(array + 2)</td></tr><tr><td align=\"center\">ap[0]</td><td align=\"center\">*(ap + 0) and array[2]</td></tr><tr><td align=\"center\">ap+6</td><td align=\"center\">array + 8 and &#x26;array[8]</td></tr><tr><td align=\"center\">*ap+6</td><td align=\"center\">array[2] + 6</td></tr><tr><td align=\"center\">*(ap+6)</td><td align=\"center\">array[8]</td></tr><tr><td align=\"center\">ap[6]</td><td align=\"center\">*(ap+6)</td></tr><tr><td align=\"center\">&#x26;ap</td><td align=\"center\"><strong>unpredictable</strong></td></tr><tr><td align=\"center\">ap[-1]</td><td align=\"center\"><strong>correct operation and its array[1]</strong></td></tr><tr><td align=\"center\">ap[9]</td><td align=\"center\"><strong>unpredictable</strong></td></tr></tbody></table><blockquote>\n<p><strong>偏移量的负数是可以允许的</strong></p>\n</blockquote><p>最后两个例子显示了为什么<strong>下标检查</strong>在C中是一项困难的任务。最初的C编译器并不检查下标，而最新的编译器有些依然不检查下标。且如果编译器进行下标检查涉及的开销比想象的多。</p><blockquote>\n<p>2[array] 是一个<strong>合法</strong>的数组表示！它表示的是 <em>(2 + array)，也就是</em>(array + 2)即array[2]。</p>\n</blockquote></section><section><h3 id=\"813-指针与下标\">8.1.3 指针与下标<a class=\"anchor\" href=\"#813-指针与下标\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>如果可以互换地使用指针表达式和下标表达式，下标绝不会比指针更有效率，指针表达式有时候比下标表达式<strong>更有效率</strong>。</li>\n</ul><p><strong>下标方案执行循环</strong></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:22ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">array[10],a</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span><span style=\"--0:#6F42C1;--1:#B392F0\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">10</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span><span style=\"--0:#6F42C1;--1:#B392F0\">a++</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">array[a]</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>指针间接访问方案执行循环</strong></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:37ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">array[10],</span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">ap</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">ap</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">array</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span><span style=\"--0:#6F42C1;--1:#B392F0\">ap</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">array</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">10</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span><span style=\"--0:#6F42C1;--1:#B392F0\">ap++</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">*ap</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li>在比较老的编译器中指针间接访问比下标访问更有效率</li>\n</ul><p><strong>1. 数组下标版本</strong><br>\n对于<code>array[a] = 0;</code>这行代码，计算机在每次循环时都必须做以下三件事：<br>\na. 找到数组的起始地址(<code>array</code>);<br>\nb. 将循环变量<code>a</code>乘以<code>int</code>类型的大小(例如四字节)；<br>\nc. 将相乘的结果<strong>加到</strong>起始地址，才能找到<code>array[a]</code>的准确内存位置。</p><blockquote>\n<p>这个过程在每次循环中都涉及<strong>一次乘法和一次加法</strong>。</p>\n</blockquote><p><strong>2. 指针间接访问版本</strong><br>\n对于<code>*ap = 0;</code>这行代码，计算机的处理方法更直接：<br>\na. 指针<code>ap</code>已经直接存储了当前要操作的内存地址。<br>\nb. <code>*ap</code>操作直接访问地址，非常快。<br>\nc. <code>ap++</code>操作只需要简单地在<code>ap</code>的地址上加上<code>int</code>类型的大小(例如四字节)，就能得到下一个元素的地址。</p><blockquote>\n<p>这个过程只涉及<strong>一次简单的加法</strong>，比乘法要快得多。</p>\n</blockquote><ul>\n<li>但现代编译器<strong>非常智能</strong>，像数组下标版本会被<strong>优化成更高效的指针算术指令</strong>。</li>\n</ul></section><section><h3 id=\"814-指针的效率\">8.1.4 指针的效率<a class=\"anchor\" href=\"#814-指针的效率\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>程序的效率取决于你的<strong>编译器</strong>和<strong>机器</strong>。</li>\n</ul><p>把一个数组的内容复制到另一个数组：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:15ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#define SIZE 50</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">x[SIZE]</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">y[SIZE]</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">i</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">p1,</span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">p2</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>下标版本函数：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:26ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">try1</span><span style=\"--0:#24292E;--1:#E1E4E8\">()</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">for(i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">; </span><span style=\"--0:#6F42C1;--1:#B392F0\">i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">SIZE</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span><span style=\"--0:#6F42C1;--1:#B392F0\">i++</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">x[i]</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">y[i]</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>指针版本函数：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:40ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">try2</span><span style=\"--0:#24292E;--1:#E1E4E8\">()</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">for(</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">p1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">x,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">p2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">y</span><span style=\"--0:#24292E;--1:#E1E4E8\">; </span><span style=\"--0:#6F42C1;--1:#B392F0\">p1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">x</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">SIZE</span><span style=\"--0:#24292E;--1:#E1E4E8\">;)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#6F42C1;--1:#B392F0\">*p1++</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">p2++</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>重新使用计数器：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:44ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">try3</span><span style=\"--0:#24292E;--1:#E1E4E8\">()</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">for(</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">0,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">p1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">x,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">p2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">y</span><span style=\"--0:#24292E;--1:#E1E4E8\">; </span><span style=\"--0:#6F42C1;--1:#B392F0\">i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">SIZE</span><span style=\"--0:#24292E;--1:#E1E4E8\">; </span><span style=\"--0:#6F42C1;--1:#B392F0\">i++</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">*p1++</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">p2++</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>寄存器指针变量：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:42ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">try4</span><span style=\"--0:#24292E;--1:#E1E4E8\">()</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">register</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">p1,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">p2</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">register</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">i</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">for(</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">0,p1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">x,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">p2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">y</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span><span style=\"--0:#6F42C1;--1:#B392F0\">i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">SIZE</span><span style=\"--0:#24292E;--1:#E1E4E8\">; </span><span style=\"--0:#6F42C1;--1:#B392F0\">i++</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">*p1++</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">p2++</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>消除计数器：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:36ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">try5</span><span style=\"--0:#24292E;--1:#E1E4E8\">()</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">register</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">p1,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">p2</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">for(</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">p1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">x,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">p2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">y</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span><span style=\"--0:#6F42C1;--1:#B392F0\">p1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> &#x26;</span><span style=\"--0:#6F42C1;--1:#B392F0\">x[SIZE]</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">*p1++</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">p2++</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>重新使用计数器是一个比较不错的写法，而消除计数器则是一个更加快速的执行代码。</p><p><strong>结论</strong>:</p><ol>\n<li>使用指针变量将比使用下标产生效率更高的代码。当这个增量是1并且机器具有地址自动增量模型时，这点表现得更为突出。</li>\n<li>如果有经过初始化并经过调整的内容来判断循环是否应该终止，就不需要使用一个单独的计数器。</li>\n<li>那些必须在运行时求值的表达式诸如<code>&#x26;array[SIZE]</code>或<code>array+SIZE</code>这样的常量表达式往往代价更高。</li>\n</ol></section><section><h3 id=\"815-数组和指针\">8.1.5 数组和指针<a class=\"anchor\" href=\"#815-数组和指针\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>指针和数组并不是相等的。</li>\n</ul><p>在使用<code>int a[10]</code> 和 <code>int *b</code>这两个指针值时表达式<code>*a</code>是合法而<code>*b</code>是非法的；表达式<code>b++</code>可以通过编译，但<code>a++</code>不行。</p></section><section><h3 id=\"816-作为函数参数的数组名\">8.1.6 作为函数参数的数组名<a class=\"anchor\" href=\"#816-作为函数参数的数组名\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:45ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">strcpy</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">buffer,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">string</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">while</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">buffer++ = </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">string++ </span><span style=\"--0:#BF3441;--1:#F97583\">!</span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'\\0'</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>while语句中的<code>*string++</code>表达式取得string所指向的那个字符，并且产生一个副作用，就是修改<code>string</code>，使它指向下一个字符。用这种方法修改形参并不会影响调用程序的实参，因为只有传递给函数的那份拷贝进行了修改。</p></section><section><h3 id=\"817-声明数组参数\">8.1.7 声明数组参数<a class=\"anchor\" href=\"#817-声明数组参数\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>int strlen(char * string)</code>和<code>int strlen(char string[])</code>这两种声明是相等的，<strong>但是只在当前这个上下文环境中</strong>。</p><ul>\n<li>使用<code>char *string</code>指针声明数组参数更加准确，且数组作为形参不需要传递元素个数，因为函数并不为数组参数分配内存空间，<strong>形参只是一个指针</strong>。</li>\n</ul></section><section><h3 id=\"818-初始化\">8.1.8 初始化<a class=\"anchor\" href=\"#818-初始化\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>int vector[5] = {10,20,30,40,50};</code>是一个标准的数组初始化。</p><section><h4 id=\"静态和自动初始化\">静态和自动初始化<a class=\"anchor\" href=\"#静态和自动初始化\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><ul>\n<li>数组初始化的方式类似于标量变量的初始化方式---也就是取决于它们的存储类型。</li>\n<li>存储在静态内存的数组只初始化一次，也就是在程序开执行之前。</li>\n<li>对于自动变量而言自动变量位于运行时堆栈编译器没办法在程序开始前对它进行初始化。所以自动变量在缺省情况下是未初始化的。</li>\n</ul><blockquote>\n<p>当数组的初始化局部于一个函数(或代码块)时，你应该仔细考虑一下，在程序的执行流每次进入该函数(或代码块)时，每次都对数组进行重新初始化是不是值得。如果答案是否定的，就把数组声明为<code>static</code>，这样数组的初始化只需在程序开始前执行一次。</p>\n</blockquote></section></section><section><h3 id=\"819-不完整的初始化\">8.1.9 不完整的初始化<a class=\"anchor\" href=\"#819-不完整的初始化\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>初始化值数目大于数组长度(编译时错误)；小于则将未初始化的元素初始化为0，且只允许省略最后几个初始值。</li>\n</ul></section><section><h3 id=\"8110-自动计算数组长度\">8.1.10 自动计算数组长度<a class=\"anchor\" href=\"#8110-自动计算数组长度\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>int vector[] = {1,2,3,4,5};</code>让编译器识别数组大小</p></section><section><h3 id=\"8111-字符数组的初始化\">8.1.11 字符数组的初始化<a class=\"anchor\" href=\"#8111-字符数组的初始化\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>两种初始化方法：<br>\n1.<code>char message[] = {'H','e','l','l','o',0};</code><br>\n2.<code>char message[] = \"Hello\";</code></p><p>这两种初始化方法是相同的，都是一个字符数组初始化列表，而<code>char* message = \"Hello\";</code>是一个<strong>字符串常量</strong>，即一个指向常量字符串”Hello”的指针。上面两个都是可修改的字符数组。</p></section></section><section><h2 id=\"82-多维数组\">8.2 多维数组<a class=\"anchor\" href=\"#82-多维数组\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li><code>int martix[6][10]</code>在某些上下文环境中，既是6行10列，也是10行6列。</li>\n</ul><section><h3 id=\"821-存储顺序\">8.2.1 存储顺序<a class=\"anchor\" href=\"#821-存储顺序\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>int array[4];</code>是一个存储三个整型元素的数组<br>\n<code>int array[4][6];</code>在上面的基础上将三个整型元素改为三个包含6个元素的数组</p><ul>\n<li>在C中，多维数组的元素存储顺序按照最右边下标率先变化的原则称为<strong>行主序(row major order)</strong>。比如读取<code>array[2][4]</code>往下读取应该是<code>array[2][5]</code>后是<code>array[3][0]</code>。</li>\n</ul></section><section><h3 id=\"822-数组名\">8.2.2 数组名<a class=\"anchor\" href=\"#822-数组名\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>一维数组名的值是一个指针常量，它的类型是”指向元素类型的指针”</li>\n<li>多维数组和一维数组为一个区别是多维数组的第一维元素实际上是另一个数组</li>\n</ul><p><code>int martix[3][10];</code>这个数组名<code>matrix</code>的值是一个指向它第一个元素的指针，所以<code>matrix</code>是一个指向一个包含10个整型的数组的指针。</p></section><section><h3 id=\"823-下标\">8.2.3 下标<a class=\"anchor\" href=\"#823-下标\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>matrix</code>: 指向包含10个整型元素的数组的指针<br>\n<code>matrix+1</code>: 指向包含10个整型元素的数组的指针，但是指向的是matrix的下一行<br>\n<code>*(matrix + 1)</code>: 包含10个整型元素的子数组(常量指针)，与<code>matrix[1]</code>相等<br>\n<code>*(matrix + 1) + 5</code>: 上面的常量指针右移5位<br>\n<code>*(*(matrix + 1) + 5)</code>: 上面指针所指向的元素，与<code>matrix[1][5]</code>值相等<br>\n上面的式子可以改写为：*(matrix[1] + 5)</p></section><section><h3 id=\"824-指向数组的指针\">8.2.4 指向数组的指针<a class=\"anchor\" href=\"#824-指向数组的指针\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:34ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#032F62;--1:#9ECBFF\">vector[10],</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">vp</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">vector</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#032F62;--1:#9ECBFF\">matrix[3][10],</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">mp</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">matrix</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>第一个声明是合法的，第二个声明是非法的。<br>\n<code>matrix</code>不是一个指向整型的数组而是一个指向整型数组的指针。</p><p><code>int (*p)[10]</code>是一个合法的指向二维数组的数组指针。因为下标引用的优先级高于间接访问\n，所以要给<code>*p</code>加上括号。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:24ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">pi</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> &#x26;</span><span style=\"--0:#6F42C1;--1:#B392F0\">matrix[0][0]</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">pi</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">matrix[0]</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>上面的两个指针指向二维数组的首地址可以逐个访问整型元素而不是逐行在数组中移动</p><blockquote>\n<p>应该避免使用<code>int  (*p)[] = matrix;</code>这种没有数组长度的声明，因为没有声明数组长度当执行指针运算时它的值将根据空数组的长度进行调整(与0相乘)</p>\n</blockquote></section><section><h3 id=\"825-作为函数参数的多维数组\">8.2.5 作为函数参数的多维数组<a class=\"anchor\" href=\"#825-作为函数参数的多维数组\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>如果是二维数组你可以声明为以下的任意一个</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:27ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">func2</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (*mat)</span><span style=\"--0:#032F62;--1:#9ECBFF\">[10]</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">func2</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mat[][10]</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li>编译器必须知道<strong>第二个</strong>及以后各维的长度才能对各下标进行求值，因此在原型中必须声明这些维的长度，也就是在原数组声明时至少为<code>int mat[][10]</code>这种并且在函数形参声明时也写成这样</li>\n</ul><p><code>void func2(int **mat);</code>是一个指向整型指针的指针，和一开始说的一样，指针和数组是不同的，和指向整型数组的指针不是一回事。</p></section><section><h3 id=\"826-初始化\">8.2.6 初始化<a class=\"anchor\" href=\"#826-初始化\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:45ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">matrix[2][3]</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">{100,101,102,110,111,112}</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">two_dim[3][5]</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span><span style=\"--0:#6F42C1;--1:#B392F0\">00,01,02,03,04},</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span><span style=\"--0:#6F42C1;--1:#B392F0\">00,01,02,03,04},</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span><span style=\"--0:#6F42C1;--1:#B392F0\">00,01,02,03,04}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">};</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>上面两种初始化的方法都可以，对于三维以上的数组来说也是类似，和一维数组一样也可以省略尾部的几个初始值。</p></section></section><section><h2 id=\"83-指针数组\">8.3 指针数组<a class=\"anchor\" href=\"#83-指针数组\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><code>int  *api[10];</code>: 下标引用的优先级高于间接访问，在这个表达式中首先执行下标引用。</p><p>使用指针数组的场景：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:65ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">keyword[]</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">\"do\"</span><span style=\"--0:#6F42C1;--1:#B392F0\">,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">\"for\"</span><span style=\"--0:#6F42C1;--1:#B392F0\">,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">\"register\"</span><span style=\"--0:#6F42C1;--1:#B392F0\">,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">\"return\"</span><span style=\"--0:#6F42C1;--1:#B392F0\">,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">\"switch\"</span><span style=\"--0:#6F42C1;--1:#B392F0\">,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">\"while\"</span><span style=\"--0:#6F42C1;--1:#B392F0\">,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">NULL</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">};</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#define N_KEYWORD \\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">sizeof(keyword</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#6F42C1;--1:#B392F0\">/</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">keyword[0]</span><span style=\"--0:#24292E;--1:#E1E4E8\">))</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 判断参数是否与一个关键字列表中的任何单词匹配，并返回匹配的索引值。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 如果未找到匹配函数返回-1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#include &#x3C;string.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">lookup_keyword</span><span style=\"--0:#24292E;--1:#E1E4E8\">( </span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">desired_word,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:14ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">              </span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">keyword_table[],</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">size</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">**</span><span style=\"--0:#032F62;--1:#9ECBFF\">kwp</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">对于表中的每个单词</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">...</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (kwp </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">keyword_table</span><span style=\"--0:#24292E;--1:#E1E4E8\">; </span><span style=\"--0:#6F42C1;--1:#B392F0\">kwp</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">keyword_table</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">size</span><span style=\"--0:#24292E;--1:#E1E4E8\">; </span><span style=\"--0:#6F42C1;--1:#B392F0\">kwp++</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#032F62;--1:#9ECBFF\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (strcmp(desired_word, </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">kwp</span><span style=\"--0:#24292E;--1:#E1E4E8\">) == 0)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\">       </span><span style=\"--0:#032F62;--1:#9ECBFF\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">kwp</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">keyword_table</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">kwp</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">keyword_table</span><span style=\"--0:#24292E;--1:#E1E4E8\">; </span><span style=\"--0:#6F42C1;--1:#B392F0\">kwp</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span><span style=\"--0:#6F42C1;--1:#B392F0\">kwp++</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">strcmp(desired_word,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">kwp</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#032F62;--1:#9ECBFF\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">kwp</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">keyword_table</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">没有找到</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-1</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>使用sizeof()对数组元素个数进行自动计数</p>\n</blockquote></section><section><h2 id=\"84-总结\">8.4 总结<a class=\"anchor\" href=\"#84-总结\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ol>\n<li><code>sizeof(array)</code>返回的是整个数组所占用的字节而不是一个指针所占用的字节。</li>\n<li>&#x26;array 和 array 指向的地址相同，但是&#x26;array的类型为<code>int (*)[]</code>而array的类型为<code>int*</code></li>\n<li>其他使用数组名的地方数组名都是指向数组第一个元素的指针</li>\n<li><code>数组地址(类似于&#x26;array[1][2]) = 数组基地址 + (行索引 * 每行总大小) + (列索引 * 单个元素大小)</code></li>\n</ol><p><code>地址 = 基地址 + ((行索引 * 一行元素个数) + 列索引) * sizeof(元素类型)</code></p><p>假如<code>int array[4][2]</code>,int大小为2,array的地址为0x1000，则 &#x26;array[1][2] = <code>0x1000 + (2 * 2) + (2 * 2) == 0x1008</code></p></section></section>\n<section><h1 id=\"-字符串字符和字节\">💝 字符串、字符和字节<a class=\"anchor\" href=\"#-字符串字符和字节\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><ul>\n<li>字符串是一种重要的数据类型，但是C语言并没有显式的字符串数据类型，因为字符串以字符串常量的形式出现或者存储于字符数组中。</li>\n<li>操作字符串变量时必须额外小心各种可能导致缓冲区溢出的操作。</li>\n</ul><section><h2 id=\"91-字符串基础\">9.1 字符串基础<a class=\"anchor\" href=\"#91-字符串基础\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>字符串是一串<strong>零个或多个字符</strong>，并且以一个<strong>位模式为全0的NUL字符结尾</strong>。</li>\n</ul><blockquote>\n<p>字符串所包含的字符内部不能出现NUL字节</p>\n</blockquote></section><section><h2 id=\"92-字符串长度\">9.2 字符串长度<a class=\"anchor\" href=\"#92-字符串长度\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>字符串的长度就是它所包含的字符个数。</li>\n</ul><p>使用标准库头文件<code>#include &#x3C;string.h></code>中的函数计算字符串长度</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:35ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">strlen</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">原型</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">strlen</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (char </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">string</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>size_t 是一个无符号整数类型，且这个类型是在头文件<code>stddef.h</code>中定义的</p>\n</blockquote><ul>\n<li>无符号数的使用需要考虑是否会产生负数</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:35ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">strlen(x</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">strlen</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">y</span><span style=\"--0:#24292E;--1:#E1E4E8\">)) ...</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">strlen(x</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#6F42C1;--1:#B392F0\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">strlen</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">y</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">) ...</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>这两个式子是不相等的，第二行的<code>strlen(x) - strlen(y)</code>的返回结果是一个无符号数，<strong>无符号数绝不可能是负数</strong>！</p><p><strong>strlen原型</strong></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:38ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#include &#x3C;stddef.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">size_t</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">strlen(char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">string</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">length</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">length</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">; </span><span style=\"--0:#6F42C1;--1:#B392F0\">*string++</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'\\0'</span><span style=\"--0:#24292E;--1:#E1E4E8\">;)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">length</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">+=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">length</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li>表达式中如果同时存在无符号数和有符号数，可能会产生奇怪的结果</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:28ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">strlen(x</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">10</span><span style=\"--0:#24292E;--1:#E1E4E8\">) ...</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">strlen(x</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#6F42C1;--1:#B392F0\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">10</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">) ...</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>这两个式子也是不相等的，原因和上面相同。</p><blockquote>\n<p>如果把strlen的返回值强制转换为<code>int</code>，就可以消除这个问题。</p>\n</blockquote><p><strong>tips:</strong></p><blockquote>\n<p>自己重写一个标准库函数可能会比标准库函数效率更高，如果合理使用寄存器register声明和一些技巧，<strong>但事实上很少能如愿</strong>。</p>\n<blockquote>\n<p><u>寻找一种更好的算法比改良一种差劲的算法更有效率，复用已经存在的软件比重新开发一个效率更高。</u></p>\n</blockquote>\n</blockquote></section><section><h2 id=\"93-不受限制的字符串函数\">9.3 不受限制的字符串函数<a class=\"anchor\" href=\"#93-不受限制的字符串函数\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>最常用的字符串函数都是<strong>不受限制</strong>的，就是说它们只是通过寻找字符串参数结尾的<code>NUL</code>字节来判断它的长度。</li>\n</ul><section><h3 id=\"931-复制字符串\">9.3.1 复制字符串<a class=\"anchor\" href=\"#931-复制字符串\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:41ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">strcpy</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">dst,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">src</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>这个函数把参数src字符串复制到dst参数，<u>由于dst参数将进行修改，所以它必须是个字符数组或者是一个指向动态分配内存的数组的指针，<strong>不能使用字符串常量</strong></u></p><blockquote>\n<p><u>程序员必须保证目标字符数组的空间足以容纳需要复制的字符串。</u>因为如果字符串比数组长，多余的字符仍然被复制，它们将覆盖原先存储于数组后面的内存空间的值。</p>\n<blockquote>\n<p>strcpy无法解决这个问题，因为它无法判断目标字符数组的长度。</p>\n</blockquote>\n</blockquote></section><section><h3 id=\"932-连接字符串\">9.3.2 连接字符串<a class=\"anchor\" href=\"#932-连接字符串\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:42ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">strcat</span><span style=\"--0:#24292E;--1:#E1E4E8\">( </span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">dst,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">src</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li>找到字符串末尾NUL并将src中的首字符覆盖掉NUL</li>\n</ul><p>常见<code>strcat</code>用法</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:35ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">strcpy(</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">message,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Hello \"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">strcat(</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">message,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">customer_name</span><span style=\"--0:#24292E;--1:#E1E4E8\"> );</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">strcpy(</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">message,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\", how are you?\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"933-函数的返回值\">9.3.3 函数的返回值<a class=\"anchor\" href=\"#933-函数的返回值\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li><code>strcpy</code>和<code>strcat</code>都返回它第一个参数的一份拷贝</li>\n</ul><p>将函数返回值作为另一个函数的参数</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:24ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">strcat(strcpy(dst,a</span><span style=\"--0:#24292E;--1:#E1E4E8\">),b);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>首先执行<code>strcpy</code>将字符串从a复制到dst并返回dst。然后这个返回值成为<code>strcat</code>函数的第一个参数，<code>strcat</code>函数把b添加到dst的后面。</p>\n</blockquote><p>但是在可读性上其实不如</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:14ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">strcpy(dst,a</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">strcat(dst,b</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li>事实上，在这些函数的绝大多数调用中它们的返回值只是被简单地忽略。</li>\n</ul></section><section><h3 id=\"934-字符串比较\">9.3.4 字符串比较<a class=\"anchor\" href=\"#934-字符串比较\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>比较两个字符串涉及对两个字符串对应的字符逐个进行比较，直到发现不匹配为止。</li>\n<li>那个最先不匹配的字符中较”小”(字符集中序数较小)的那个字符所在的字符串被认为”小于”另外一个字符串</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:43ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">strcmp</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">s1,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">s2</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>如果<code>s1</code>小于<code>s2</code>，strcmp函数返回一个小于零的值，反之返回一个大于零的值。相等返回零。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:34ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">strcmp(a,b</span><span style=\"--0:#24292E;--1:#E1E4E8\">)) // 用于布尔值测试是一种坏风格</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">strcmp(a,b</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">) // 用于与零进行比较更好</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">else</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">strcmp(a,b</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">else</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section><section><h2 id=\"94-长度受限的字符串函数\">9.4 长度受限的字符串函数<a class=\"anchor\" href=\"#94-长度受限的字符串函数\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><u>标准库还包含了一些函数，它们以一种不同的方式处理字符串。</u></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:58ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">strncpy</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">dst,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">src,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">len</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">strncat</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">dst,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">src,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">len</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">strncmp</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">s1,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">s2,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">len</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>这些函数接受一个显式的长度参数，用于<strong>限定</strong>进行复制或比较的字符数。</p><ul>\n<li>注意⚠️：如果strlen(src)的值大于或等于len，<u>那么只有len个字符被复制到dst中。它的结果将不会以<strong>NUL</strong>字节结尾。</u></li>\n</ul><blockquote>\n<p>strncpy 调用的结果可能不是一个字符串，因此字符串必须以NUL字节结尾。</p>\n</blockquote><p>保证strncpy的结果是以’\\0’结尾的</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:29ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">buffer[BSIZE]</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#005CC5;--1:#79B8FF\">...</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">strncpy(buffer,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">name,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">BSIZE</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">buffer[BSIZE</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">1]</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'\\0'</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>如果name的内容可以容纳于buffer中最后的赋值语句无效。</p><p>如果strlen(name) >= BSIZE 那么最后一条赋值语句可以截断name的字符防止缓存区溢出。</p><blockquote>\n<p>strncat总是在结果字符串后面添加一个NUL字节，所以不会有这种问题；strncmp只比较len长度的字符串是否相等，如果strlen(name)比BSIZE大则只比较BSIZE长度个字符。</p>\n</blockquote></section><section><h2 id=\"95-字符串查找基础\">9.5 字符串查找基础<a class=\"anchor\" href=\"#95-字符串查找基础\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"951-查找一个字符\">9.5.1 查找一个字符<a class=\"anchor\" href=\"#951-查找一个字符\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:39ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">strchr</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">str,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">ch</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">strrchr</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">str,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">ch</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>虽然ch是<code>int</code>类型但是包含一个字符值。</p>\n</blockquote><ul>\n<li><code>strchr</code>在字符串str中查找字符ch第一次出现的位置，找到后函数返回一个指向该位置的指针，如果该字符不存在则返回NULL指针。strrchr返回一个指向字符串中最后一次出现的位置。</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:40ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">string[20]</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Hello there, honey.\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">ans</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ans</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">strchr</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">string,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'h'</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"952-查找任何几个字符\">9.5.2 查找任何几个字符<a class=\"anchor\" href=\"#952-查找任何几个字符\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:50ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">strpbrk</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">str,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">group</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li>返回一个指向str中第一个匹配group中任何一个字符的字符位置。如果未找到匹配则返回NULL指针。区分大小写。</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:40ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">string[20]</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Hello there, honey.\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">ans</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ans</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">strchr</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">string,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"aeiou\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>ans所指向的位置是string + 1，因为这个位置是第二个参数中的字符第一次出现的位置。区分大小写。</p></section><section><h3 id=\"953-查找一个子串\">9.5.3 查找一个子串<a class=\"anchor\" href=\"#953-查找一个子串\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:45ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">strstr</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">s1,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">s2</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li>在s1中查找s2第一次出现的位置，并返回一个指向该位置的指针；如果s2并没有完出现在s1返回一个NULL指针；如果第二个参数是一个空指针函数返回s1。</li>\n</ul><section><h4 id=\"自己实现一个-strtstr-和-strrpbrk-函数\">自己实现一个 <code>strtstr</code> 和 <code>strrpbrk</code> 函数<a class=\"anchor\" href=\"#自己实现一个-strtstr-和-strrpbrk-函数\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:42ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#include &#x3C;string.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">char*</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">my_strrstr(char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">s1,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">s2</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">register</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">last</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">register</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">current</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">把指针初始化为我们已经找到的前一次匹配</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">last</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">只在第二个字符串不为空的时候进行查找，如果s2为空返回NULL</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">s2 </span><span style=\"--0:#BF3441;--1:#F97583\">!</span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'\\0'</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">查找</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">s2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">在</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">s1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">中第一次出现的位置。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">current</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">strstr</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">s1,s2</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">while</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">current</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#6F42C1;--1:#B392F0\">last</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">current</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#6F42C1;--1:#B392F0\">current</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">strstr</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">last</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">1,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">s2</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">last</span><span style=\"--0:#24292E;--1:#E1E4E8\">; </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">返回指向我们找到的最后一次匹配的起始位置的指针。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:47ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#include &#x3C;string.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">my_strrpbrk(char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">str,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">group</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">register</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">last</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">register</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">current</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">把指针初始化为我们已经找到的前一次匹配</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">last</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">s2 </span><span style=\"--0:#BF3441;--1:#F97583\">!</span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'\\0'</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">current</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">strpbrk</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">str,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">group</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">while</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">current</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#6F42C1;--1:#B392F0\">last</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">current</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#6F42C1;--1:#B392F0\">current</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">strpbrk</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">last</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">1,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">group</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">last</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section></section><section><h2 id=\"96-高级字符串查找\">9.6 高级字符串查找<a class=\"anchor\" href=\"#96-高级字符串查找\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"961-查找一个字符串前缀\">9.6.1 查找一个字符串前缀<a class=\"anchor\" href=\"#961-查找一个字符串前缀\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li><code>strspn</code>和<code>strcspn</code>函数用于计算字符串开头连续匹配指定字符集中的字符的个数</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:51ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">strspn</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">str,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">group</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">strcspn</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">str,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">group</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>str</code>: 要检查的字符串。<br>\n<code>group</code>：包含要匹配的字符集的字符串。</p><blockquote>\n<p><code>strspn</code> 从 <code>str1</code> 的第一个字符开始，依次检查每个字符。只要这个字符在 <code>str2</code> 中能找到，就继续向后检查。<strong>一旦遇到一个不在 <code>str2</code> 中的字符，函数就停止并返回已匹配的字符数。</strong></p>\n</blockquote><blockquote>\n<p><code>strcspn</code> 从 <code>str1</code> 的第一个字符开始，依次检查每个字符。只要这个字符不在 <code>str2</code> 中，就继续向后检查。一旦遇到一个在 <code>str2</code> 中的字符，函数就停止并返回已检查的字符数。</p>\n</blockquote><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:112ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#include &#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#include &#x3C;string.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">() </span><span style=\"--0:#032F62;--1:#9ECBFF\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">sentence</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Hello, world!\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">charset_vowels</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"aeiou\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">charset_alpha</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"abcdefghijklmnopqrstuvwxyz\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">length1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">strspn</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">sentence,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Heo\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#005CC5;--1:#79B8FF\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">\"The length of the initial part of </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\\"</span><span style=\"--0:#6F42C1;--1:#B392F0\">%s</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\\"</span><span style=\"--0:#6F42C1;--1:#B392F0\"> consisting of 'H', 'e', 'o' is: %zu\\n\"</span><span style=\"--0:#6F42C1;--1:#B392F0\">,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">sentence,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">length1</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">输出:</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (因为 </span><span style=\"--0:#032F62;--1:#9ECBFF\">'l'</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">不在</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Heo\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">中</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">length2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">strspn</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">sentence,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">charset_alpha</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#005CC5;--1:#79B8FF\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">\"The length of the initial part of </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\\"</span><span style=\"--0:#6F42C1;--1:#B392F0\">%s</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\\"</span><span style=\"--0:#6F42C1;--1:#B392F0\"> consisting of letters is: %zu\\n\"</span><span style=\"--0:#6F42C1;--1:#B392F0\">,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">sentence,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">length2</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">输出:</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">5</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (因为 </span><span style=\"--0:#032F62;--1:#9ECBFF\">' '</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">不在字母表中</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"962-查找标记\">9.6.2 查找标记<a class=\"anchor\" href=\"#962-查找标记\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li><code>strtok</code>函数用于分割字符串。它会根据指定的分隔符，将字符串分解成一系列的标记(token)。</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:41ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">strtok</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">str,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">sep</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>str</code>：要被分割的字符串。\n<code>sep</code>：包含一个或多个分隔符的字符串。</p><blockquote>\n<p>strtok是在字符串本身进行处理的(in-place)，建议使用原字符串的拷贝进行操作。</p>\n</blockquote><ul>\n<li><code>strtok</code>的使用非常特殊，因为它是有状态的：\n<ul>\n<li>第一次调用：传入要分割的字符串<code>str</code>。它会找到第一个分隔符，用<code>\\0</code>替换它，并返回第一个标记的指针。</li>\n<li>后续调用：传入<code>NULL</code>作为<code>str</code>参数。<code>strtok</code>会从上次停止的位置继续，找到下一个分隔符，用<code>\\0</code>替换它，并返回下一个标记的指针。</li>\n</ul>\n</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:39ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#include &#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#include &#x3C;string.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">str[]</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"apple,banana-orange\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">delimiters</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\",-\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">token</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">第一次调用，</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">传入字符串</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">token</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">strtok</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">str,delimiters</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#005CC5;--1:#79B8FF\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">\"First token: %s\\n\"</span><span style=\"--0:#6F42C1;--1:#B392F0\">,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">token</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">后续调用，传入NULL</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">while(</span><span style=\"--0:#6F42C1;--1:#B392F0\">token</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">token</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">strtok</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">NULL,delimiters</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">token</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#005CC5;--1:#79B8FF\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">\"Next token: %s\\n\"</span><span style=\"--0:#6F42C1;--1:#B392F0\">,token</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section><section><h2 id=\"97-错误信息\">9.7 错误信息<a class=\"anchor\" href=\"#97-错误信息\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>当你调用一些函数，请求操作系统执行一些功能如打开文件时，如果出现错误，操作系统是通过设置一个外部的整型变量<code>errno</code>进行错误代码报告的。<code>strerror</code>函数把其中一个错误代码作为参数并返回一个指向用于描述错误的字符串的指针。</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:33ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">stderror</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">error_number</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>事实上，返回值应该被声明为<code>const</code>，因为你不应该修改它。</p><ul>\n<li><code>strerror</code>函数用于将错误编号转换为人类可读的错误信息字符串。</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:56ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#include &#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#include &#x3C;string.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#include &#x3C;errno.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">必须包含此头文件来使用</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">errno</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">FILE</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">file</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">尝试打开一个不存在的文件</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">file</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">fopen</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">\"non_existent_file.txt\"</span><span style=\"--0:#6F42C1;--1:#B392F0\">,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"r\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">如果</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">fopen</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">失败</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">file</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#005CC5;--1:#79B8FF\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">\"Error opening file: %s\\n\"</span><span style=\"--0:#6F42C1;--1:#B392F0\">,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">strerror</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">errno</span><span style=\"--0:#24292E;--1:#E1E4E8\">));</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">else</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#005CC5;--1:#79B8FF\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">\"File opened successfully.\\n\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">fclose(file</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"98-字符操作\">9.8 字符操作<a class=\"anchor\" href=\"#98-字符操作\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>字符操作的原型位于<code>ctype.h</code>头文件中，分为字符分类函数和字符转换函数</li>\n</ul><section><h3 id=\"981-字符分类\">9.8.1 字符分类<a class=\"anchor\" href=\"#981-字符分类\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><h4>字符分类函数</h4>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\">函数</th><th align=\"center\">如果它的参数符合下列条件就返回真</th></tr></thead><tbody><tr><td align=\"center\">isspace</td><td align=\"center\">空白字符: ‘空格’, 换页’\\f’，换行 ‘\\n’, 回车 ‘\\r’, 制表符 ‘\\t’或垂直制表符’\\v’</td></tr><tr><td align=\"center\">isdigit</td><td align=\"center\">十进制数字0~9</td></tr><tr><td align=\"center\">isxdigit</td><td align=\"center\">十六进制数字，包括所有十进制数字，小写字母a~f,大写字母A~F</td></tr><tr><td align=\"center\">islower</td><td align=\"center\">小写字母a~z</td></tr><tr><td align=\"center\">isupper</td><td align=\"center\">大写字母A~Z</td></tr><tr><td align=\"center\">isalpha</td><td align=\"center\">字母a~z A~Z</td></tr><tr><td align=\"center\">isalnum</td><td align=\"center\">字母或数字，a~z,A~z或0~9</td></tr><tr><td align=\"center\">ispunct</td><td align=\"center\">标点符号，任何不属于数字或字母的图形字符(可打印符号)</td></tr><tr><td align=\"center\">isgraph</td><td align=\"center\">任何图形字符</td></tr><tr><td align=\"center\">isprint</td><td align=\"center\">任何可打印字符，包括图形字符和空白字符</td></tr></tbody></table></section><section><h3 id=\"982-字符转换\">9.8.2 字符转换<a class=\"anchor\" href=\"#982-字符转换\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:59ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">tolower</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">ch</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">toupper</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">ch</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">ch</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'A'</span><span style=\"--0:#24292E;--1:#E1E4E8\"> &#x26;&#x26; </span><span style=\"--0:#6F42C1;--1:#B392F0\">ch</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'Z'</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#6F42C1;--1:#B392F0\">在ASCII字符集的机器上能够运行，但是其他字符集有可能会失败</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">isupper(ch</span><span style=\"--0:#24292E;--1:#E1E4E8\">))</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">就都能顺利运行</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section><section><h2 id=\"99-内存操作\">9.9 内存操作<a class=\"anchor\" href=\"#99-内存操作\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>根据定义，字符串由一个NUL字节结尾，所以字符串内部不能包含任何NUL字符。但是非字符串数据内部包含零值的情况并不罕见。你无法使用字符串函数来处理这种类型的数据，因为当它们遇到第一个NUL字节时将停止工作。</li>\n<li>使用<strong>内存操作函数</strong>可以处理任意的字节序列</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:58ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">memcpy</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">dst,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">src,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">length</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">memmove</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">dst,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">src,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">length</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">memcmp</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">a,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">b,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">length</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">memchr</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">a,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">ch,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">length</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">memset</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">a,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">ch,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">length</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li>和字符操作函数类似，对于memcpy()函数，如果src与dst以任何形式出现了重叠，它的结果是未定义的。但是memmove()函数可以重叠。</li>\n<li>内存操作函数传入的长度为内存长度不是元素长度。</li>\n<li>任何类型的指针都可以转换为<code>void*</code>型指针。</li>\n</ul><p><code>memcpy</code></p><p><code>memcpy</code> copies a block of memory from a source to a destination location.</p><p><strong>Parameters:</strong></p><ul>\n<li><code>dest</code>: A pointer to the destination memory block.</li>\n<li><code>src</code>: A pointer to the source memory block.</li>\n<li><code>n</code>: The number of bytes to copy</li>\n</ul><p><strong>Use case:</strong> Copying data between non_overlapping memory regions.</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:64ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#include &#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#include &#x3C;string.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">source_array[]</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">{1,2,3,4,5}</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">destinaion_array[5]</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">copy</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">5</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">integers</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">from</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">soure_array</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">to</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">destination_array</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">memcpy(destination_array,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">source_array,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">source_array</span><span style=\"--0:#24292E;--1:#E1E4E8\">));</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#005CC5;--1:#79B8FF\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">\"Destinaion array: \"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">; </span><span style=\"--0:#6F42C1;--1:#B392F0\">i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">5</span><span style=\"--0:#24292E;--1:#E1E4E8\">; </span><span style=\"--0:#6F42C1;--1:#B392F0\">i++</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#005CC5;--1:#79B8FF\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">\"%d \"</span><span style=\"--0:#6F42C1;--1:#B392F0\">,destination_array[i]</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#005CC5;--1:#79B8FF\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">\"\\n\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>memmove</code></p><p><code>memmove</code> copies a block of memory from a source location to a destination location, even if the memory blocks overlap.</p><p><strong>Parameters:</strong> Same as <code>memcpy</code></p><p><strong>Use case:</strong> Shifting data within the same array or buffer. This is safer than <code>memcpy</code> for overlapping regions.</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:63ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#include &#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#include &#x3C;string.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">str[]</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"abcdefgh\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">Shift</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">the</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">string</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">two</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">characters</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">to</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">the</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">left</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">The</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">source</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">and</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">destination</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">overlap</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (str </span><span style=\"--0:#032F62;--1:#9ECBFF\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">and</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">str</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">memmove(str,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">str</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">2,strlen</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">str</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#032F62;--1:#9ECBFF\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">manually</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">add</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">the</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">null</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">terminator</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">since</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">memmove</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">doesn't</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#032F62;--1:#9ECBFF\">  </span></span><span style=\"--0:#032F62;--1:#9ECBFF\">str[strlen(str) - 2] = '</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\0</span><span style=\"--0:#032F62;--1:#9ECBFF\">';</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#032F62;--1:#9ECBFF\">  </span></span><span style=\"--0:#032F62;--1:#9ECBFF\">printf(\"String after memmove: %s\\n\", str); // prints \"cdefgh\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#032F62;--1:#9ECBFF\">  </span></span><span style=\"--0:#032F62;--1:#9ECBFF\">return 0;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span style=\"--0:#032F62;--1:#9ECBFF\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>memchr</code></p><p><code>memchr</code> search a block of memory for the first occurrence of a specific byte.</p><p><strong>Parameters:</strong></p><ul>\n<li><code>a</code>: A pointer to the memory block to search</li>\n<li><code>ch</code>: The byte value to search for. It’s passed as an <code>int</code> but is treated as an <code>unsigned char</code>.</li>\n<li><code>length</code>: The number of bytes to search.</li>\n</ul><p><strong>Return Value:</strong></p><ul>\n<li>A pointer to the first occurrence of the byte <code>ch</code> within the first <code>n</code> bytes of the memory block <code>a</code>.</li>\n<li>A null pointer (<code>NULL</code>) if the byte is not found.</li>\n</ul><p><strong>Use Case:</strong> Searching for a specific byte within a block of raw binary data.Unlike string functions like <code>strchr</code>. <code>memchr</code> continues its search past null terminators (<code>\\0</code>).</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:73ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#include &#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#include &#x3C;string.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#032F62;--1:#9ECBFF\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">This</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">array</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">contains</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">null</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">byte</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">in</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">the</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">middle.</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">data[]</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">{'h',</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'e',</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'l',</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'l',</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'o',</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'\\0',</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'w',</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'o',</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'r',</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'l',</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'d'}</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">result</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">-</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">Search</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">the</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">character</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'o'</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">within</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">the</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">first</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">11</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">bytes</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">of</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">the</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">array.</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">A</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">string</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">search</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">function</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">like</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">strchr</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">would</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">stop</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">at</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">the</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'\\0'</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">result</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">memchr</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">data,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'o',</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">data</span><span style=\"--0:#24292E;--1:#E1E4E8\">));</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">result</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#005CC5;--1:#79B8FF\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">\"Found 'o' at memory address: %p\\n\"</span><span style=\"--0:#6F42C1;--1:#B392F0\">,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">result</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#005CC5;--1:#79B8FF\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">\"Character found: '%c'\\n\"</span><span style=\"--0:#6F42C1;--1:#B392F0\">,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">result</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">Calculate</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">the</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">index</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">of</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">the</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">found</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">character</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">index</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (size_t)(</span><span style=\"--0:#6F42C1;--1:#B392F0\">result</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">data</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#005CC5;--1:#79B8FF\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">\"It is located at index: %zu\\n\"</span><span style=\"--0:#6F42C1;--1:#B392F0\">,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">index</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">else</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#005CC5;--1:#79B8FF\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">\"The character was not found.\\n\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>memcmp</code></p><p><code>memcmp</code> compares a specified number of bytes in two memory blocks</p><p><strong>Parameter:</strong></p><ul>\n<li><code>a</code>: A pointer to the first memory block</li>\n<li><code>b</code>: A pointer to the second memory block</li>\n<li><code>length</code>: The number of bytes to compare.</li>\n</ul><p><strong>Use case:</strong> Comparing raw binary data, which may contain null bytes that would terminate string functions like <code>strcmp</code>.</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:49ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#include &#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#include &#x3C;string.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">data1[]</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Hello\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">data2[]</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"HellO\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">data3[]</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Hello\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">compare</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">the</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">first</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">5</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">bytes</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">of</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">data1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">and</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">data2</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">result1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">memcmp</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">data1,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">data2,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">5</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">result1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#005CC5;--1:#79B8FF\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">\"data1 and data2 are different.\\n\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">compare</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">the</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">first</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">5</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">bytes</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">of</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">data1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">and</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">data2</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">result2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">memcmp</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">data1,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">data3,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">5</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">if(result2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#005CC5;--1:#79B8FF\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">\"data1 and data3 are different.\\n\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>memset</code></p><p><code>memset</code> fills a block of memory with a specified byte value.</p><p><strong>Parameters:</strong></p><ul>\n<li><code>a</code>: A pointer to the memory block to fill.</li>\n<li><code>ch</code>: The value to be set. It’s passed as an <code>int</code> but is converted to an <code>unsigned char</code>.</li>\n<li><code>length</code>: The number of bytes to fill.</li>\n</ul><p><strong>Use case:</strong> Initializing a block of memory, such as an array or a structure, to all zeros or a specific value.</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:68ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#include &#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">#include &#x3C;string.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">buffer[10]</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">Initialize</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">all</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">10</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">bytes</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">of</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">the</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">buffer</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">to</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'A'</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">memset(buffer,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'A',</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">buffer</span><span style=\"--0:#24292E;--1:#E1E4E8\">));</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#005CC5;--1:#79B8FF\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">\"Buffer after memset: %.10s\\n\"</span><span style=\"--0:#6F42C1;--1:#B392F0\">,buffer</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">Initialize</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">the</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">buffer</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">to</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">all</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">zeros</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (a </span><span style=\"--0:#032F62;--1:#9ECBFF\">common</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">and</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">safe</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">practice</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">memset(buffer,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">0,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">buffer</span><span style=\"--0:#24292E;--1:#E1E4E8\">));</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#005CC5;--1:#79B8FF\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">\"Buffer after zeroing: %d\\n\"</span><span style=\"--0:#6F42C1;--1:#B392F0\">,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">buffer[0]</span><span style=\"--0:#24292E;--1:#E1E4E8\">); </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">Prints</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"910-总结\">9.10 总结<a class=\"anchor\" href=\"#910-总结\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>字符串就是零个或多个字符的序列，该序列以一个NUL字节结尾。</li>\n</ul></section><section><h2 id=\"913-问题\">9.13 问题<a class=\"anchor\" href=\"#913-问题\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ol>\n<li>C语言缺少显式字符串数据类型，这是一个优点还是一个缺点？</li>\n</ol><p>Answer:</p><p>C语言缺少显式的字符串数据类型，既是它的<strong>优点</strong>，也是它的<strong>缺点</strong>。</p><p>优点：灵活性和高效性</p><p>C语言的字符串被实现为以 <strong>空字符（\\0）</strong> 结尾的字符数组，这带来了以下几个显著的优点：</p><ul>\n<li>\n<p>内存效率高：C语言的字符串存储非常紧凑，没有额外的元数据（如长度信息）。这使得C语言程序在处理大量文本时，内存开销极小。</p>\n</li>\n<li>\n<p>直接操作内存：字符串作为数组，可以像普通数组一样通过指针直接访问和操作每个字符。这给予了程序员极大的灵活性，可以实现各种高效的算法，例如原地修改、零拷贝（zero-copy）等。这在系统编程、嵌入式开发和性能关键的应用中至关重要。</p>\n</li>\n<li>\n<p>互操作性强：几乎所有编程语言都支持字节数组或指针，这使得C语言的字符串可以轻松地与其他语言（如Python、Rust、Java等）进行接口交互，而无需复杂的类型转换。</p>\n</li>\n</ul><p>缺点：安全性和易用性</p><p>这种设计也带来了明显的缺点，尤其是在安全和易用方面：</p><ul>\n<li>\n<p>安全性风险：由于字符串的长度信息不是显式存储的，字符串处理函数（如 strcpy、strcat、sprintf）都假定目标缓冲区足够大，这极易导致缓冲区溢出。这是C语言长期以来面临的最大安全挑战之一。程序员必须手动跟踪字符串长度，否则会引发严重的漏洞。</p>\n</li>\n<li>\n<p>容易出错：忘记在字符串末尾添加 \\0，或不小心覆盖了它，都会导致程序读取到无效内存，引发未定义行为。初学者经常会因为这些问题而感到困惑。</p>\n</li>\n<li>\n<p>操作不便：字符串的拼接、截取等操作不像高级语言那样简洁。例如，要拼接两个字符串，你需要手动计算所需空间、分配内存、然后使用 strcpy 和 strcat，整个过程繁琐且容易出错。</p>\n</li>\n</ul></section></section>\n<section><h1 id=\"-结构和联合\">🤖 结构和联合<a class=\"anchor\" href=\"#-结构和联合\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><ul>\n<li>\n<p>C提供了两种类型的<em>聚合数据类型(aggregate data type)</em>。<strong>数组</strong>是相同类型的元素的集合，<strong>结构体</strong>是可具有不同类型的元素的集合。</p>\n</li>\n<li>\n<p><em><strong>数组</strong></em>可以通过下标访问，且数据不能相互赋值，只能通过循环逐个赋值。</p>\n</li>\n<li>\n<p><em><strong>结构体</strong></em>通过名字访问，相同类型的结构体变量可以相互赋值。</p>\n</li>\n</ul><section><h2 id=\"101-结构基础知识\">10.1 结构基础知识<a class=\"anchor\" href=\"#101-结构基础知识\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>\n<p>结构体是一些值的集合，这些值称为它的<strong>成员(member)</strong>，<u>但一个结构体的各个成员可能具有不同的类型。</u></p>\n</li>\n<li>\n<p><u>结构变量属于标量类型，所以你可以像对待其他标量类型那样执行相同类型的操作。</u></p>\n</li>\n</ul><section><h3 id=\"1011-结构声明\">10.1.1 结构声明<a class=\"anchor\" href=\"#1011-结构声明\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>在声明结构时，必须列出它包含的所有成员。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:39ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">tag</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">{member-list}</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">variable-list</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>结构声明语法的不同</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:11ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#032F62;--1:#9ECBFF\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#032F62;--1:#9ECBFF\">b</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">float</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">c</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}x;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#032F62;--1:#9ECBFF\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#032F62;--1:#9ECBFF\">b</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">float</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">c</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">} y[20],*z;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><u>这两个声明被编译器当作两种截然不同的类型，即使它们的成员列表完全相同。</u></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:7ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">z</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> &#x26;</span><span style=\"--0:#6F42C1;--1:#B392F0\">x</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>这条语句是非法的。</p><ul>\n<li>使用 <strong>标签(tag)</strong> 和 <strong>类型定义别名(typedef)</strong> 来更方便地声明和定义一个结构体变量。</li>\n</ul><p><strong>标签(tag)</strong> 字段允许为成员列表提供一个名字。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:25ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">SIMPLE{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#032F62;--1:#9ECBFF\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#032F62;--1:#9ECBFF\">b</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">float</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">c</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">};</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">SIMPLE</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">x,y[20],</span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">z</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>这个声明使用标签来创建变量，且现在<code>x</code>,<code>y</code>,<code>z</code>都是同一种类型的结构变量。</p><p><strong>类型定义别名(typedef)</strong> 字段可以创建一个新的类型。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:17ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">typedef</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#032F62;--1:#9ECBFF\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#032F62;--1:#9ECBFF\">b</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">float</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">c</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">} Simple;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">Simple</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">x</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">Simple</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">y[20],</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">z</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>Simple</code>现在是一个类型而不是个结构标签。</p><blockquote>\n<p>如果你想在多个源文件中使用同一种类型的结构，你应该把标签声明或<code>typedef</code>形式的声明放在一个头文件中。当源文件需要这个声明时可以使用<code>#include</code>指令把那个头文件包含进来。</p>\n</blockquote></section><section><h3 id=\"1012-结构成员\">10.1.2 结构成员<a class=\"anchor\" href=\"#1012-结构成员\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:23ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">COMPLEX{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">float</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">f</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">a[20]</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">long</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">lp</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">SIMPLE</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">s</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">SIMPLE</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">sa[10]</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">SIMPLE</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">sp</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">};</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>结构成员可以是标量、数组、指针甚至是其他结构体。</p></section><section><h3 id=\"1013-结构成员的直接访问\">10.1.3 结构成员的直接访问<a class=\"anchor\" href=\"#1013-结构成员的直接访问\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>结构变量的成员是通过点操作符<code>.</code>访问的。</li>\n<li>点操作符接受两个参数，左操作数就是结构变量的名字，右操作数就是需要访问的成员的名字。这个表达式的结果就是指定的成员。</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:38ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">COMPLEX</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">comp</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">comp.s</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span><span style=\"--0:#6F42C1;--1:#B392F0\">.a</span><span style=\"--0:#24292E;--1:#E1E4E8\">; </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">类型为struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">SIMPLE</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">comp.sa</span><span style=\"--0:#24292E;--1:#E1E4E8\">)[4]; </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">同上类型的数组</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">((comp.sa)[</span><span style=\"--0:#005CC5;--1:#79B8FF\">4</span><span style=\"--0:#24292E;--1:#E1E4E8\">]).c </span><span style=\"--0:#BF3441;--1:#F97583\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 取出数组元素</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">结合性都是从左到右</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">comp.sa[4].c</span><span style=\"--0:#24292E;--1:#E1E4E8\">; </span><span style=\"--0:#6F42C1;--1:#B392F0\">equals</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ((comp.sa)[4]).c;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"1014-结构成员的间接访问\">10.1.4 结构成员的间接访问<a class=\"anchor\" href=\"#1014-结构成员的间接访问\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>对于指向结构体的指针要访问其元素应该执行<strong>间接访问操作<code>-></code></strong>。</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:30ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">func</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">COMPLEX</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">cp</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">第一种访问方式</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">cp)</span><span style=\"--0:#6F42C1;--1:#B392F0\">.f</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">第二种访问方式</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">cp-</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span><span style=\"--0:#032F62;--1:#9ECBFF\">f</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"1015-结构的自引用\">10.1.5 结构的自引用<a class=\"anchor\" href=\"#1015-结构的自引用\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:94ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">作为结构这种声明是非法的，程序内部会无限包含自身和结构的成员。</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">永不终止的递归程序</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">如果我定义了</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">SELF_REF1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">b</span><span style=\"--0:#24292E;--1:#E1E4E8\">; </span><span style=\"--0:#6F42C1;--1:#B392F0\">那么</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">SELF_REF1</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#032F62;--1:#9ECBFF\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (4+4+4+.....) + sizeof(</span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">无法计算，无法在内存中分配一个固定大小的空间。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">SELF_REF1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#032F62;--1:#9ECBFF\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">SELF_REF1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">b</span><span style=\"--0:#24292E;--1:#E1E4E8\">; </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">非法，不能这样定义。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#032F62;--1:#9ECBFF\">c</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">};</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">作为指针这个声明是合法的，因为指针的长度在编译器确定结构体长度前就知道了。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">SELF_REF2</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (int) + sizeof(</span><span style=\"--0:#6F42C1;--1:#B392F0\">SELF_REF2*</span><span style=\"--0:#24292E;--1:#E1E4E8\">) + sizeof(</span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">可以计算固定大小空间</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">SELF_REF2{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#032F62;--1:#9ECBFF\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">SELF_REF2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">b</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#032F62;--1:#9ECBFF\">c</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">};</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong><u>事实上一个结构内指向自身结构的指针所指向的是同一种类型的不同结构。</u></strong>\n更高级的数据结构如链表和树，都是用这些技巧实现的。每个结构指向链表的下一个元素或树的下一个分支。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:42ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">这个结构体创建失败了，因为SELF_REF3</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">直到声明的末尾才定义，所以在结构</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">声明的内部时还尚未定义。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">typedef</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#032F62;--1:#9ECBFF\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">SELF_REF3</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">b</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#032F62;--1:#9ECBFF\">c</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}SELF_REF3;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">解决方案是定义一个结构标签来声明b</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">typedef</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">SELF_REF3_TAG</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#032F62;--1:#9ECBFF\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">SELF_REF3_TAG</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">b</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#032F62;--1:#9ECBFF\">c</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}SELF_REF3</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">这次正确定义了结构体。</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"1016-不完整的声明\">10.1.6 不完整的声明<a class=\"anchor\" href=\"#1016-不完整的声明\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>在声明一些相互之间存在依赖的结构时使用不完整声明(incomplete declaration)</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:23ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">B</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">A</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">B</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">parnter</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">};</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">B</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">A</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">partner</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">};</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>在A的成员列表中需要标签B的不完整声明。一旦A被声明之后，B的成员列表也可以被声明。</p></section><section><h3 id=\"1017-结构的初始化\">10.1.7 结构的初始化<a class=\"anchor\" href=\"#1017-结构的初始化\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>位于花括号，由逗号分隔。</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:20ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">INI_EX</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#032F62;--1:#9ECBFF\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">short</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">b[10]</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">Simple</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">c</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}x = {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">10,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span><span style=\"--0:#6F42C1;--1:#B392F0\">1,2,3,4,5},</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span><span style=\"--0:#6F42C1;--1:#B392F0\">25,</span><span style=\"--0:#6F42C1;--1:#B392F0\">'x'</span><span style=\"--0:#6F42C1;--1:#B392F0\">,1.9},</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">};</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">另一种初始化</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">INI_EX</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">x1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">10,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span><span style=\"--0:#6F42C1;--1:#B392F0\">1,2,3,4,5},</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span><span style=\"--0:#6F42C1;--1:#B392F0\">25,</span><span style=\"--0:#6F42C1;--1:#B392F0\">'x'</span><span style=\"--0:#6F42C1;--1:#B392F0\">,1.9},</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">};</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section><section><h2 id=\"102-结构指针和成员\">10.2 结构、指针和成员<a class=\"anchor\" href=\"#102-结构指针和成员\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>声明和定义一些结构体和结构体变量</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:38ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">typedef</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#032F62;--1:#9ECBFF\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">short</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">b[2]</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}Ex2;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">typedef</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">EX{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#032F62;--1:#9ECBFF\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#032F62;--1:#9ECBFF\">b[3]</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">Ex2</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#032F62;--1:#9ECBFF\">c</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">EX</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">d</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}Ex;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">定义并初始化</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">Ex</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">x</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">{10,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Hi\",</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">{5,{</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">25</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">}},</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#032F62;--1:#9ECBFF\">}</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">Ex</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">px</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> &#x26;</span><span style=\"--0:#6F42C1;--1:#B392F0\">x</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><section><h3 id=\"1021-访问指针\">10.2.1 访问指针<a class=\"anchor\" href=\"#1021-访问指针\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>step1:</strong> <code>px</code>是一个指针变量，<code>px</code>的表达式<code>Ex *px = x;</code>表示作为左值的<code>px</code>旧值将被一个新值取代。</p><blockquote>\n<p>考虑表达式<code>px + 1</code>。这个表达式并不是一个合法的左值，因为它的值并不存储于任何可标识的内存位置。<code>px</code>的右值更有意思，如果px指向一个结构数组的元素，这个表达式将指向该数组的下一个结构。就算如此<code>px + 1</code>仍是非法的，因为我们没办法分辨内存下一个位置所存储的是这些结构元素之一还是其他东西。编译器无法检测到这类错误。</p>\n</blockquote></section><section><h3 id=\"1022-访问结构\">10.2.2 访问结构<a class=\"anchor\" href=\"#1022-访问结构\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>step2:</strong> <code>*px</code>的右值是px所指向的整个结构。可以用于同类型结构体赋值，作为点操作符的左操作数，访问一个指定的成员，作为参数传递给函数，作为函数的返回值返回。<code>px</code>的左值是从<code>x</code>接收来的新值，它将接受它的所有成员的新值。</p><ul>\n<li>作为左值，重要的是位置，而不是这个位置所保存的值。</li>\n</ul><p>表达式<code>*px + 1</code>是非法的，因为<code>*px</code>的结果是一个结构。C语言并没有定义结构体和整型值之间的加法运算。但表达式<code>*(px+1)</code>中的<code>px+1</code>表示结构体指针但x是一个标量所以这个表达式也是非法的。</p></section><section><h3 id=\"1023-访问结构成员\">10.2.3 访问结构成员<a class=\"anchor\" href=\"#1023-访问结构成员\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>step3:</strong> 表达式<code>px->a</code>右值是<code>10</code>,<code>x.a</code>和<code>px->a</code>值相同。</p><p><u><code>*px</code>和<code>px->a</code>之间的关系</u>。在这两个表达式中<code>px</code>所保存的地址都用于寻找这个结构。但结构体的第一个成员是<code>a</code>。所以<code>a</code>的地址和结构的地址是一样的。<u>这样<code>px</code>看上去是指向整个结构，同时指向结构的第一个成员。</u>但是他们的类型不同，变量<code>px</code>被声明为一个指向结构的指针，所以表达式<code>*px</code>的结果是整个结构而不是它的第一个成员。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:38ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">pi</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">pi</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">px</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">这个操作是非法的，因为它们的类型不匹配。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">pi</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (int </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">)px;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">使用强制类型转换就能奏效</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">但是这种方法很危险，因为它避开了编译器的类型检查。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">正确的表达式更为简单</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">pi</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> &#x26;</span><span style=\"--0:#6F42C1;--1:#B392F0\">px-</span><span style=\"--0:#24292E;--1:#E1E4E8\">></span><span style=\"--0:#032F62;--1:#9ECBFF\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> -</span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">操作符的优先级高于</span><span style=\"--0:#24292E;--1:#E1E4E8\">&#x26;</span><span style=\"--0:#6F42C1;--1:#B392F0\">操作符的优先级，所以这个表达式无需使用括号。</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>px->b</code>的值是一个指针常量，因为<code>b</code>是一个数组这个表达式<code>px->b</code>不是一个合法的左值。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:28ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">pc</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">pc</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">px</span><span style=\"--0:#24292E;--1:#E1E4E8\">-</span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#032F62;--1:#9ECBFF\">b</span><span style=\"--0:#24292E;--1:#E1E4E8\">; </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">一个指针常量</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">pc</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">px</span><span style=\"--0:#24292E;--1:#E1E4E8\">-</span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#032F62;--1:#9ECBFF\">b[1]</span><span style=\"--0:#24292E;--1:#E1E4E8\">; </span><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">指向数组的第二个元素</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"1024-访问嵌套的结构\">10.2.4 访问嵌套的结构<a class=\"anchor\" href=\"#1024-访问嵌套的结构\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>step4:</strong> 表达式<code>px->c</code>也是指向一个结构体，它的左值是整个结构。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:37ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">num</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">px</span><span style=\"--0:#24292E;--1:#E1E4E8\">-</span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#032F62;--1:#9ECBFF\">c.a</span><span style=\"--0:#24292E;--1:#E1E4E8\">; </span><span style=\"--0:#6F42C1;--1:#B392F0\">指向结构体内结构体并访问结构体成员a</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">short</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">num1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">px</span><span style=\"--0:#24292E;--1:#E1E4E8\">-</span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#032F62;--1:#9ECBFF\">c.b</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">num2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">px</span><span style=\"--0:#24292E;--1:#E1E4E8\">-</span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#032F62;--1:#9ECBFF\">c.b</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"1025-访问指针成员\">10.2.5 访问指针成员<a class=\"anchor\" href=\"#1025-访问指针成员\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>step5:</strong> <code>px->d</code>的右值是0，左值是本身的内存位置。<code>*px->d</code>是非法的操作，因为d内包含了一个NULL指针，所以它不指向任何东西。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:12ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">Ex</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">te</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">te</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">px</span><span style=\"--0:#24292E;--1:#E1E4E8\">-</span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#032F62;--1:#9ECBFF\">d</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">x.d</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> &#x26;</span><span style=\"--0:#6F42C1;--1:#B392F0\">te</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p><strong>空指针的本质：地址0</strong></p>\n<blockquote>\n<p>空指针是一个特殊的指针值，它表示该指针不指向任何有效的内存对象。\n<em>解引用空指针后CPU会尝试访问地址0</em>—><em>操作系统会捕获异常</em>—><em>触发硬件异常(Page Fault)或(Segmentation Fault)</em>—><em>内核终止程序</em>。</p>\n</blockquote>\n</blockquote></section></section><section><h2 id=\"103-结构的存储分配\">10.3 结构的存储分配<a class=\"anchor\" href=\"#103-结构的存储分配\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>编译器按照成员列表的顺序一个接一个地给每个成员分配内存。<u>只有当存储成员时需要满足正确的边界要求时，成员之间才可能出现用于填充的额外内存空间。</u></li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:13ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">ALIGN{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#032F62;--1:#9ECBFF\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#032F62;--1:#9ECBFF\">b</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#032F62;--1:#9ECBFF\">c</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">};</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>这个结构体实际分配了12个字节的内存空间但是有6个字节空间实际上不能访问。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:14ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">ALIGN2{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">b</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">c</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">};</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>这个结构体实际分配了8个字节的内存空间。（两个字符可以紧挨着存储，最后有2个字节被浪费）</p><blockquote>\n<p>但是实际上依程序的可维护性和可读性而言不是特别大的内存损失都不需要重新排。</p>\n</blockquote><ul>\n<li>在程序创建成百上千个结构体时内存浪费问题就更为明显。</li>\n<li>可以使用<code>offsetof</code>宏（定义于<code>stddef.h</code>）判断结构体内成员距离首地址的偏移值</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:59ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">offsetof(type,member</span><span style=\"--0:#24292E;--1:#E1E4E8\">) // type 是结构体类型名，member是结构体里面的成员名</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">offsetof(struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">ALIGN,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">b</span><span style=\"--0:#24292E;--1:#E1E4E8\">) // 返回值是 4,也就是成员a占用了4个字节用于结构体内内存对齐</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"104-作为函数参数的结构\">10.4 作为函数参数的结构<a class=\"anchor\" href=\"#104-作为函数参数的结构\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>非必要不建议将结构体作为函数参数传递</li>\n<li>结构体作为一个标量的大小可能会比想象中的大</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:39ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">typedef</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">struct</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\">    </span><span style=\"--0:#032F62;--1:#9ECBFF\">product[PRODUCT_SIZE]</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">     </span><span style=\"--0:#032F62;--1:#9ECBFF\">quantity</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">float</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#032F62;--1:#9ECBFF\">unit_price</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">float</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#032F62;--1:#9ECBFF\">total_amount</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">};</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">print_receipt</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">Transaction</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">trans</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">print_receipt</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">Transaction</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">trans</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>一个传递的是结构体的拷贝，一个传递的是结构体指针。就大小而言指针比结构体小得多，效率更高。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:45ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">Transaction</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">print_receipt</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">Transaction</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">trans</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">print_receipt</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">Transaction</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span><span style=\"--0:#032F62;--1:#9ECBFF\">trans</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>如果结构体作为函数返回值在堆栈上的操作效率会更低，传递结构体指针可以直接在函数内部完成结构体成员的修改。</p></section><section><h2 id=\"105-位段\">10.5 位段<a class=\"anchor\" href=\"#105-位段\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>结构体具有实现 <strong>位段(bit field)</strong> 的能力</li>\n<li>位段的成员是一个或多个位的字段，这些不同长度的字段实际上存储于一个或多个整型变量中。</li>\n<li>位段成员必须声明为<code>int</code>,<code>unsigned int</code>,<code>signed int</code>, <code>_Bool(C99)</code>类型，在成员名的后面是一个冒号和一个整数。</li>\n<li>不能对位段成员取地址(不能使用<code>&#x26;</code>运算符)</li>\n<li>位段不能是数组</li>\n<li>可移植性的程序应该避免使用位段。</li>\n<li>位段和结构体成员一样之间需要内存对齐(在位段与位段之间插入填充位(Padding))</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:21ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">CHAR</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">unsigned</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#032F62;--1:#9ECBFF\">ch</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#032F62;--1:#9ECBFF\">:</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">7</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">unsigned</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">font</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">:</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">6</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">unsigned</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">size</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">:</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">19</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">};</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>因为最后一个位段<code>size</code>过于庞大(大于短整型的长度)，所以可以利用前两个位段<code>ch</code>和<code>font</code>所剩余的位来增加<code>size</code>的位数，这样就避免了声明一个32位的整数来存储<code>size</code>位段。</p><blockquote>\n<p>CHAR这个结构体内的位段说明了位段可以把长度为奇数的数据包装在一起，节省存储空间</p>\n</blockquote></section><section><h2 id=\"106-联合\">10.6 联合<a class=\"anchor\" href=\"#106-联合\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>联合所有成员引用的是<strong>内存中的相同位置</strong></li>\n<li>适用于在不同时刻把不同的东西存储于同一个位置时</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:21ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">union</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">float</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">f</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#032F62;--1:#9ECBFF\">i</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">} fi;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">fi.f</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">3.14159</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#005CC5;--1:#79B8FF\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">\"%d\\n\"</span><span style=\"--0:#6F42C1;--1:#B392F0\">,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">fi.i</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>在一个浮点型和整型都是32位的机器上，变量 <code>fi</code> 只占据内存中的一个32位的字。最后用占位符<code>%d</code>输出一个浮点数不是<code>3</code>而是<code>1078530000</code>，与IEEE754单精度浮点标准有关。</p><section><h3 id=\"1061-变体记录\">10.6.1 变体记录<a class=\"anchor\" href=\"#1061-变体记录\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>内存中某个特定的区域将在不同的时刻存储不同类型的值</li>\n</ul><p>在 C 语言中，可以使用 <strong>联合体（Union）</strong> 和 <strong>结构体（Struct）</strong> 结合的方式来模拟 <code>Pascal</code> 语言中的<strong>变体记录（Variant Record）</strong>，也称为<strong>带标签的联合体（Tagged Union）</strong>。</p><p>这种模式是 C 语言处理异构数据集合的标准方法，同时提供了类型安全性和可预测性。</p><section><h4 id=\"一个存货系统的变体记录\">一个存货系统的变体记录<a class=\"anchor\" href=\"#一个存货系统的变体记录\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:40ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">前两个结构指定每个零件和装配件必须存储的内容</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">PARTINFO</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">     </span><span style=\"--0:#032F62;--1:#9ECBFF\">cost</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">     </span><span style=\"--0:#032F62;--1:#9ECBFF\">supplier</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">};</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">SUBASSYINFO</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">     </span><span style=\"--0:#032F62;--1:#9ECBFF\">n_parts</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">partno[10]</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">short</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">quan</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}part[MAXPARTS];</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">};</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">存货记录包含每个项目的一般信息并包含了一个联合</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">INVREC</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\">    </span><span style=\"--0:#032F62;--1:#9ECBFF\">partno[10]</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">     </span><span style=\"--0:#032F62;--1:#9ECBFF\">quan</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">enum</span><span style=\"--0:#24292E;--1:#E1E4E8\">    </span><span style=\"--0:#032F62;--1:#9ECBFF\">{</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">PART,</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">SUBPASSY</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">}</span><span style=\"--0:#24292E;--1:#E1E4E8\">    </span><span style=\"--0:#032F62;--1:#9ECBFF\">type</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">union</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#032F62;--1:#9ECBFF\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:10ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">          </span><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">PARTINFO</span><span style=\"--0:#24292E;--1:#E1E4E8\">       </span><span style=\"--0:#032F62;--1:#9ECBFF\">part</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:10ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\">          </span><span style=\"--0:#6F42C1;--1:#B392F0\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">SUBASSYIINFO</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#032F62;--1:#9ECBFF\">subassy</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}info;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">};</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">//</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">操作名为</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">rec</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">的</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">INVERC</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">结构变量</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">rec.type</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">PART</span><span style=\"--0:#24292E;--1:#E1E4E8\">){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">y</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">rec.info.part.cost</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">z</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">rec.info.part.supplier</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">else</span><span style=\"--0:#032F62;--1:#9ECBFF\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">y</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">rec.info.subpassy.nparts</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">z</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">rec.info.subpassy.parts[0].quan</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section><section><h3 id=\"1062-联合的初始化\">10.6.2 联合的初始化<a class=\"anchor\" href=\"#1062-联合的初始化\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>联合初始化的初始值必须是联合第一个成员的类型，且必须位于一对花括号里</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:13ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">union</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#032F62;--1:#9ECBFF\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">float</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">b</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#032F62;--1:#9ECBFF\">c[4]</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">} x = { 5 };</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>把<code>x.a</code>初始化为 5,如果给出的初始值是任何其他类型都会被转换为一个整数并赋值给<code>x.a</code></p>\n</blockquote></section></section></section>\n<section><h1 id=\"-动态内存分配\">♿ 动态内存分配<a class=\"anchor\" href=\"#-动态内存分配\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><ul>\n<li>数组的元素存储于内存中连续的位置上。当一个数组被声明时，它所需要的内存在<strong>编译时</strong>就被分配。但是也可以使用动态内存分配在<strong>运行时</strong>为它分配内存。</li>\n</ul><section><h2 id=\"111-为什么使用动态内存分配\">11.1 为什么使用动态内存分配<a class=\"anchor\" href=\"#111-为什么使用动态内存分配\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>如果是已经知道数量大小的数组分配发生在编译时，但如果在编译时不能确定数组长度(数组的长度常常在运行时才知道)，因为所需内存空间取决于输入数据。</p></section><section><h2 id=\"112-malloc和free\">11.2 malloc和free<a class=\"anchor\" href=\"#112-malloc和free\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li><code>malloc</code>执行动态内存分配<code>free</code>执行分配内存的释放。这些函数维护一个可用内存池。</li>\n<li><code>malloc</code>分配的动态内存没有初始化，可以使用<code>calloc</code>函数初始化也可以手动初始化。</li>\n</ul><p>函数原型(在<code>stdlib.h</code>中声明)</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:26ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#6F42C1;--1:#B392F0\">malloc</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">size</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#6F42C1;--1:#B392F0\">free</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">pointer</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>malloc</code>分配的是一块连续的内存，如果请求分配100字节的内存那么实际分配的内存就是100个连续的字节。</p><blockquote>\n<p><code>malloc</code>分配的内存可能比请求的内存大小稍微多一点，这个行为是由编译器定义的。</p>\n</blockquote><p>内存池如果是空的(可用内存无法满足请求)<code>malloc</code>函数会像操作系统请求得到更多的内存。并在这块新的内存上执行分配任务。如果操作系统无法向malloc提供更多的内存，malloc就返回一个NULL指针。<em><strong>因此对malloc所分配的内存确保其是非空(NULL)是非常重要的</strong></em>。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:49ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">a_pointer </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#BF3441;--1:#F97583\">int*</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span><span style=\"--0:#6F42C1;--1:#B392F0\">malloc</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">100</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (a_pointer </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span><span style=\"--0:#616972;--1:#99A0A6\"> // 在函数内提前退出并返回错误值-1</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>free</code>的参数只能是<code>NULL</code>或是之前请求分配内存函数<code>malloc</code>,<code>calloc</code>或<code>realloc</code>的返回值。向<code>free</code>函数传递一个NULL参数没有任何意义。</p><blockquote>\n<p>因为malloc的返回值是一个<code>void*</code>类型，在比较老的编译器(C89或之前)可能会要求对返回值进行强制类型转换(int*)。</p>\n</blockquote><blockquote>\n<p>二次释放和悬空指针：对同一块内存调用两次<code>free(ptr)</code>会导致堆损坏和程序崩溃；<code>free(ptr)</code>后<code>ptr</code>仍然指向已释放的内存。为了安全应立即执行<code>ptr=NULL</code>将指针置为空指针，避免后续误用。</p>\n</blockquote></section><section><h2 id=\"113-calloc和realloc\">11.3 calloc和realloc<a class=\"anchor\" href=\"#113-calloc和realloc\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>函数原型(在<code>stdlib.h</code>中声明)</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:55ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#6F42C1;--1:#B392F0\">calloc</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">num_elements</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">element_size</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#6F42C1;--1:#B392F0\">realloc</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">ptr</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span><span style=\"--0:#BF3441;--1:#F97583\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">new_size</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>calloc</code>也用于分配内存，而<code>realloc</code>用于修改一个原先已经分配的内存块大小，使用<code>realloc</code>可以扩大和缩小内存大小。</p><blockquote>\n<p><code>malloc</code>分配的内存是未初始化的，内容是随机的垃圾值；<code>calloc</code>分配的内存会被初始化为全0。<br>\n<code>realloc</code>重新分配内存大小失败时会返回NULL但原始指针ptr指向的内存块仍有效，数据保持不变。</p>\n</blockquote><blockquote>\n<p>realloc(NULL,size) == malloc(size)<br>\nrealloc(ptr,0) == free(ptr)并返回NULL</p>\n</blockquote></section><section><h2 id=\"114-使用动态分配的内存\">11.4 使用动态分配的内存<a class=\"anchor\" href=\"#114-使用动态分配的内存\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:57ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">pi;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">...</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">pi </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">malloc</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">100</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span><span style=\"--0:#616972;--1:#99A0A6\"> // 如果分配成功，在整型为 4 个字节大小的机器上被当作25个整型元素的数组</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">pi </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">malloc</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">25</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">));</span><span style=\"--0:#616972;--1:#99A0A6\"> // 这种分配方式更好一些因为它是可移植的</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">...</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 使用内存：为内存分配元素</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">pi2, i;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">pi2 </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> pi;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\">(;pi2 </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> pi </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">25</span><span style=\"--0:#24292E;--1:#E1E4E8\">;)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">pi2</span><span style=\"--0:#BF3441;--1:#F97583\">++</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 使用下标</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\">(i </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">; i </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">25</span><span style=\"--0:#24292E;--1:#E1E4E8\">; i</span><span style=\"--0:#BF3441;--1:#F97583\">++</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#AE4B07;--1:#FFAB70\">pi</span><span style=\"--0:#24292E;--1:#E1E4E8\">[i] </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"115-常见的动态内存错误\">11.5 常见的动态内存错误<a class=\"anchor\" href=\"#115-常见的动态内存错误\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>释放内存的一部分是不允许的，动态分配的内存必须一起释放。可以使用<code>realloc</code>函数缩小一块动态分配的内存并有效地释放尾部的部分内存(还是用原分配函数的返回值)</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:30ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">pi </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">malloc</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">10</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">));</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">free</span><span style=\"--0:#24292E;--1:#E1E4E8\">(pi </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">5</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span><span style=\"--0:#616972;--1:#99A0A6\"> // 释放部分内存</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>内存泄露</strong></p><p>分配内存但在使用完毕后不释放将引起内存泄露(memory leak)。在那些所有执行程序共享一个通用内存池的操作系统中，内存泄露将一点点地榨干可用内存。</p><p>其他操作系统能够记住每个程序当前拥有的内存段，这样当一个程序终止时，所有分配给它但未被释放的内存都归还给内存池。</p></section></section>\n<section><h1 id=\"使用结构和指针\">🤧使用结构和指针<a class=\"anchor\" href=\"#使用结构和指针\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h2 id=\"121-链表\">12.1 链表<a class=\"anchor\" href=\"#121-链表\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li><strong>链表(linked_list)</strong> 就是一些包含数据的独立数据结构的集合。链表中的每个节点通过链或指针连接在一起。程序通过指针访问链表中的节点。通常节点是动态分配的，也有由节点数组构建的链表。</li>\n</ul></section><section><h2 id=\"122-单链表\">12.2 单链表<a class=\"anchor\" href=\"#122-单链表\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>在单链表中，每个节点包含一个指向链表下一节点的指针。链表最后一个节点的指针字段的值为<code>NULL</code>，提示链表后面不在有其他节点。在找到链表的第一个节点后，指针就可以带你访问剩余的所有节点。为了记住链表的起始位置，可以使用一个<strong>根指针(root pointer)</strong>。根指针指向链表的第一个节点。注意根指针只是一个指针，它不包含任何数据。</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:34ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">typedef</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> NODE{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> NODE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">link;</span><span style=\"--0:#616972;--1:#99A0A6\"> // 指向下一个节点的指针</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">         value;</span><span style=\"--0:#616972;--1:#99A0A6\"> // 存储数据的变量</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">} Node;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>单链表无法从结束位置往前遍历</p>\n</blockquote><section><h3 id=\"1221-在单链表中插入\">12.2.1 在单链表中插入<a class=\"anchor\" href=\"#1221-在单链表中插入\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:45ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 插入到一个有序的单链表。函数的参数是一个指向链表第一个节点的指针以及需要插入的值。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdlib.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"sll_node.h\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">FALSE</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">TRUE</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">sll_insert</span><span style=\"--0:#24292E;--1:#E1E4E8\">(Node </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">current</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">new_value</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">Node </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">previous;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">Node </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">new;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 寻找正确的插入位置，方法是按顺序访问链表，直到到达其值大于或等于新插入值的节点。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">while</span><span style=\"--0:#24292E;--1:#E1E4E8\">(current->value </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> new_value)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">previous </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> current;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">current </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> current->link;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 为新节点分配内存，并把新值存储到新节点中，如果内存分配失败。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 函数返回false</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">new </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (Node</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span><span style=\"--0:#6F42C1;--1:#B392F0\">malloc</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(Node));</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (new </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">FALSE</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">new->value </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> new_value;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 把新节点插入到链表中，并返回true</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">new->link </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> current;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">previous->link </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> new;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">TRUE</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:53ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">result </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">sll_insert</span><span style=\"--0:#24292E;--1:#E1E4E8\">(root,</span><span style=\"--0:#005CC5;--1:#79B8FF\">12</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span><span style=\"--0:#616972;--1:#99A0A6\"> // 假设有一个节点存储15，插入在这个节点前</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li>这个插入函数是<strong>不正确</strong>的，它不能处理插入最后一个节点后的场景(最后一个节点的link为NULL)，也不能处理插入第一个节点前的场景(函数不能访问root，previous未定义)</li>\n<li>可以将一个指向root的指针作为参数传递给函数。然后使用间接访问，函数不仅可以获得root(指向链表第一个节点的指针，也就是根指针)的值，也可以向它存储一个新的指针值(解决current和previous分开的问题，函数总是可以判断Node**是否满足条件并间接访问root判断值大小是否满足。Node**总是作为当前节点的前一个链接字段。)</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:67ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdlib.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"sll_node.h\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">FALSE</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">TRUE</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">sll_insert</span><span style=\"--0:#24292E;--1:#E1E4E8\">(Node </span><span style=\"--0:#BF3441;--1:#F97583\">**</span><span style=\"--0:#AE4B07;--1:#FFAB70\">rootp</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">new_value</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">Node </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">current;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">Node </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">previous;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">Node </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">new;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 得到指向第一个节点的指针</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">current </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">rootp;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">previous </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 寻找正确的插入位置，方法是按序访问链表，直到到达一个其值大于或等于新值的节点</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">while</span><span style=\"--0:#24292E;--1:#E1E4E8\">(current </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> current->value </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> new_value)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">previous </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> current;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">current </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> current->link;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 为新节点分配内存，并把新值存储到新节点中，如果内存分配失败，</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 函数返回false</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">new </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (Node</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span><span style=\"--0:#6F42C1;--1:#B392F0\">malloc</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(Node));</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (new </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">FALSE</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">new->link </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> current;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (previous </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">rootp </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> new;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">else</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">previous->link </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> new;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">TRUE</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">sll_insert_ease</span><span style=\"--0:#24292E;--1:#E1E4E8\">(Node </span><span style=\"--0:#BF3441;--1:#F97583\">**</span><span style=\"--0:#AE4B07;--1:#FFAB70\">head</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">new_value</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">Node </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">new_node;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// current_ptr 现在指向的是一个指针 (head 或 link 字段)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 初始时指向调用者的 head 指针变量</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">Node </span><span style=\"--0:#BF3441;--1:#F97583\">**</span><span style=\"--0:#24292E;--1:#E1E4E8\">current_ptr </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> head;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">46</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 1. 寻找插入位置：循环直到指针指向NULL(末尾)或指向的值 >= new_value</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">47</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">while</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">current_ptr </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">current_ptr)->value </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> new_value)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">48</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">current_ptr </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">current_ptr)->link;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">49</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">50</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 2. 分配新节点</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">51</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">new_node </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (Node</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span><span style=\"--0:#6F42C1;--1:#B392F0\">malloc</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(Node));</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">52</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (new_node </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">53</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">FALSE</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">54</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">new_node->value </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> new_value;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">55</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">56</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 3. 插入：新节点指向 current_ptr 当前指向的那个节点</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">57</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">new_node->link </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">current_ptr;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">58</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">59</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 4. 核心：更新current_ptr 指向的指针变量，让它指向新节点</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">60</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">current_ptr </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> new_node;</span><span style=\"--0:#616972;--1:#99A0A6\"> // *current_ptr 其实就是上一个节点的link</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">61</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">TRUE</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">62</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">63</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 书上的优化</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">64</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">sll_insert</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">register</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Node </span><span style=\"--0:#BF3441;--1:#F97583\">**</span><span style=\"--0:#AE4B07;--1:#FFAB70\">linkp</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">new_value</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">65</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">66</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">register</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Node </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">current;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">67</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">register</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Node </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">new;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">68</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">69</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">while</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ((current </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">linkp) </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> current->value </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> new_value)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">70</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">linkp </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\">current->link;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">71</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">72</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">new </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (Node</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span><span style=\"--0:#6F42C1;--1:#B392F0\">malloc</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(Node));</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">73</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (new </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">74</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">FALSE</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">75</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">new->value </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> new_value;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">76</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">77</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">new->link </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> current;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">78</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">linkp </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> new;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">79</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">TRUE</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">80</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section><section><h2 id=\"123-双链表\">12.3 双链表<a class=\"anchor\" href=\"#123-双链表\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>单链表的替代方案是双链表。在一个双链表中，每个节点都包含两个指针，指向前一个节点的指针和指向后一个节点的指针。这样就可以以任何方向遍历双链表，甚至可以忽前忽后地在双链表中访问。</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:22ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">typedef</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> NODE {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> NODE   </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">fwd;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> NODE   </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">bwd;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">           value;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">};</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>现在存在两个指针：一个指向链表的第一个节点(*fwd)，另一个指向最后一个节点(*bwd)。如果当前链表为空，这两字段都为<code>NULL</code>。</p><section><h3 id=\"1231-在双链表中插入\">12.3.1 在双链表中插入<a class=\"anchor\" href=\"#1231-在双链表中插入\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li><code>dll_insert</code>函数接受两个参数：一个指向根节点的指针和一个整型值。</li>\n<li>先前所编写的单链表插入函数把重复的值也添加到链表中。在有些应用程序中，不插入重复的值可能更为合适。<code>dll_insert</code>函数只有当欲插入的值原先不存在于链表中时才将其插入。</li>\n</ul><p>考虑四种情况：</p><ol>\n<li>新值可能必须插入到链表的中间位置。</li>\n<li>新值可能必须插入到链表的起始位置。</li>\n<li>新值可能必须插入到链表的结束位置。</li>\n<li>新值可能必须既插入到链表的初始位置，又插入到链表的结束位置(即原链表为空)。</li>\n</ol><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:62ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">/*</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">  </span></span><span style=\"--0:#616972;--1:#99A0A6\">把一个值插入到一个双链表，rootp是一个指向根节点的指针，</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">  </span></span><span style=\"--0:#616972;--1:#99A0A6\">value是欲插入的新值</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">  </span></span><span style=\"--0:#616972;--1:#99A0A6\">返回值：如果欲插值原先已存在于链表中，函数返回0；</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">  </span></span><span style=\"--0:#616972;--1:#99A0A6\">如果内存不足导致无法插入，函数返回-1；如果插入成功，函数返回1。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">*/</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdlib.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"doubly_linked_list_node.h\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">dll_insert</span><span style=\"--0:#24292E;--1:#E1E4E8\">(Node </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">rootp</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">value</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">Node </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">this;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">Node </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">next;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">Node </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">newnode;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">  </span></span><span style=\"--0:#616972;--1:#99A0A6\">/*</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">    </span></span><span style=\"--0:#616972;--1:#99A0A6\">查看value是否已经存在于链表中，如果是就返回</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">    </span></span><span style=\"--0:#616972;--1:#99A0A6\">否则，为新值创建一个新节点(\"newnode\"将指向它)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">    </span></span><span style=\"--0:#616972;--1:#99A0A6\">\"this\"将指向应该在新节点之前的那个节点。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">    </span></span><span style=\"--0:#616972;--1:#99A0A6\">\"next\"将指向应该在新节点之前的那个节点。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">  </span></span><span style=\"--0:#616972;--1:#99A0A6\">*/</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (this </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> rootp; (next </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> this->fwd) </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">; this </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> next){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (next->value </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> value)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (next->value </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> value)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#BF3441;--1:#F97583\">break</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">newnode </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (Node</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span><span style=\"--0:#6F42C1;--1:#B392F0\">malloc</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(Node));</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (newnode </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">newnode->value </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> value;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 把新值添加到链表中</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (next </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 情况1或2:并非位于链表尾部</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (this </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> rootp)</span><span style=\"--0:#616972;--1:#99A0A6\"> // 情况1：并非位于链表起始位置</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">newnode->fwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> next;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">this->fwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> newnode;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">newnode->bwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> this;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">next->bwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> newnode;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">46</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">else</span><span style=\"--0:#616972;--1:#99A0A6\"> // 情况2：位于链表的起始位置</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">47</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">48</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">newnode->fwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> next;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">49</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">rootp->fwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> newnode;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">50</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">newnode->bwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">51</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">next->bwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> newnode;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">52</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">53</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">54</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">else</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">55</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">56</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 情况3或4:位于链表的尾部</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">57</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (this </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> rootp)</span><span style=\"--0:#616972;--1:#99A0A6\"> // 情况3：并非位于链表的起始位置</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">58</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">59</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">newnode->fwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">60</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">this->fwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> newnode;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">61</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">newnode->bwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> this;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">62</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">rootp->bwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> newnode;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">63</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">64</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">else</span><span style=\"--0:#616972;--1:#99A0A6\"> // 情况4：位于链表的起始位置</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">65</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">66</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">newnode->fwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">67</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">rootp->fwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> newnode;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">68</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">newnode->bwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">69</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">rootp->bwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> newnode;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">70</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">71</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">72</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">73</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><section><h4 id=\"语句提炼statement-factoring\">语句提炼(statement factoring)<a class=\"anchor\" href=\"#语句提炼statement-factoring\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><blockquote>\n<p>上面的双链表在最后判断节点插入位置时各个嵌套的if语句群存在大量的相似之处，可以使用<strong>语句提炼</strong>技巧消除这些重复代码</p>\n</blockquote><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:27ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (x </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">3</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">i </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">some statement;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">j </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">else</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">i </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">some statement different;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">j </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>这里不管<code>x == 3</code>的值是真是假，语句<code>i = 1</code> 和 <code>j = 2</code>都将执行。且这两天语句在if条件判断前都不会执行，所以：</p>\n</blockquote><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:27ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">i </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (x </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">3</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">some statement;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">else</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">some statement different;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">j </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p><em><strong>但是如果是对测试的结果有所影响的语句千万不能提炼出来！</strong></em></p>\n</blockquote><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:25ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">/*</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">  </span></span><span style=\"--0:#616972;--1:#99A0A6\">双链表部分代码使用语句提炼</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">*/</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 把新节点添加到链表中</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\">(next </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">newnode->fwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> next;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (this </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> rootp)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">this->fwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> newnode;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">newnode->bwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> this;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">else</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">rootp->fwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> newnode;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">newnode->bwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">next->bwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> newnode;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">else</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">newnode->fwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (this </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> rootp)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">this->fwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> newnode;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">newnode->bwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> this;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">else</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">rootp->fwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> newnode;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">newnode->bwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">rootp->bwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> newnode;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>第二个简化技巧</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:20ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (pointer </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">field </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> pointer;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">else</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">field </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>这段代码的意思是设置一个和pointer相等的变量，如果pointer未指向任何东西，这个变量就设置为NULL。但是：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:16ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">field </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> pointer;</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>这个代码的意思其实和上面的一模一样，也就是第三四种情况的else语句内的<code>newnode->fwd = NULL</code>可以写成<code>newnode->fwd = next</code>；同理<code>rootp->fwd = newnode</code>也可以写成<code>this->fwd = newnode</code>。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:61ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">/*</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">  </span></span><span style=\"--0:#616972;--1:#99A0A6\">最终提炼的双链表插入函数</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">*/</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdlib.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"doubly_linked_list_node.h\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">dll_insert</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">register</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Node </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">rootp</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">value</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">register</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Node </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">this;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">register</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Node </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">next;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">register</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Node </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">newnode;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">  </span></span><span style=\"--0:#616972;--1:#99A0A6\">/*</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">    </span></span><span style=\"--0:#616972;--1:#99A0A6\">查看value是否已经存在于链表中，如果是就返回。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">    </span></span><span style=\"--0:#616972;--1:#99A0A6\">否则，为新值创建一个新节点(\"newnode\"将指向它)。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">    </span></span><span style=\"--0:#616972;--1:#99A0A6\">\"this\"将指向应该在新节点之前的那个节点，</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">    </span></span><span style=\"--0:#616972;--1:#99A0A6\">\"next\"将指向应该在新节点之后的那个节点。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">  </span></span><span style=\"--0:#616972;--1:#99A0A6\">*/</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (this </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> rootp; (next </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> this->fwd) </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">; this </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> next)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (next->value </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> value)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (next->value </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> value)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#BF3441;--1:#F97583\">break</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">newnode </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (Node</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span><span style=\"--0:#6F42C1;--1:#B392F0\">malloc</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(Node));</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (newnode </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">newnode->value </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> value;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 把新节点添加到链表中</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">newnode->fwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> next;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">this->fwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> newnode;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">//if (this != rootp)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">//  newnode->bwd = this;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">//else</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">//  newnode->bwd = NULL;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">newnode->bwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (this </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> rootp) </span><span style=\"--0:#BF3441;--1:#F97583\">?</span><span style=\"--0:#24292E;--1:#E1E4E8\"> this </span><span style=\"--0:#BF3441;--1:#F97583\">:</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">//if (next != NULL)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">//  next->bwd = newnode;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">//else</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">//  rootp->bwd = newnode;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">46</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">(next </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">?</span><span style=\"--0:#24292E;--1:#E1E4E8\"> next </span><span style=\"--0:#BF3441;--1:#F97583\">:</span><span style=\"--0:#24292E;--1:#E1E4E8\"> rootp)->bwd </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> newnode;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">47</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">48</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section></section></section>\n<section><h1 id=\"-预处理器\">🍋‍🟩 预处理器<a class=\"anchor\" href=\"#-预处理器\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><p>编译一个C程序涉及很多步骤。其中第一个步骤被称为<strong>预处理(preprocessing)阶段</strong>。C预处理器在源代码编译之前对其进行一些文本性质的操作。它的主要任务包括删除注释、插入被<code>#include</code>指令包含的文件的内容、定义和替换由<code>#define</code>指令定义的符号以及确定代码的部分内容是否应该根据一些条件编译指令进行编译。</p><section><h2 id=\"141-预定义符号\">14.1 预定义符号<a class=\"anchor\" href=\"#141-预定义符号\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\"><strong>符号</strong></th><th align=\"center\"><strong>样例值</strong></th><th align=\"center\"><strong>含义</strong></th></tr></thead><tbody><tr><td align=\"center\">__FILE__</td><td align=\"center\">“name.c”</td><td align=\"center\">进行编译的源文件名</td></tr><tr><td align=\"center\">__LINE__</td><td align=\"center\">25</td><td align=\"center\">文件当前行的行号</td></tr><tr><td align=\"center\">__DATE__</td><td align=\"center\">“Jan 31 1997”</td><td align=\"center\">文件被编译的日期</td></tr><tr><td align=\"center\">__TIME__</td><td align=\"center\">“18:04:30”</td><td align=\"center\">文件被编译的时间</td></tr><tr><td align=\"center\">__STDC__</td><td align=\"center\">1</td><td align=\"center\">如果编译器遵循ANSI C，其值就为1，否则未定义</td></tr></tbody></table><p><code>__FILE__</code>和<code>__LINE__</code>在确认调试输出的来源方面很有用处。<code>__DATE__</code>和<code>__TIME__</code>常常用于在被编译的程序中加入版本信息。<code>__STDC__</code>用于那些在ANSI环境和非ANSI环境都必须进行编译的程序中结合条件编译。</p><p><strong>更多实用的预定义符号</strong></p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\"><strong>符号</strong></th><th align=\"center\"><strong>样例值</strong></th><th align=\"center\"><strong>含义</strong></th></tr></thead><tbody><tr><td align=\"center\">__STDC_VERSION__</td><td align=\"center\">202311</td><td align=\"center\">显示编译器当前版本号</td></tr><tr><td align=\"center\">__func__</td><td align=\"center\">main</td><td align=\"center\">显示当前所在函数函数名</td></tr><tr><td align=\"center\">__GUNC__</td><td align=\"center\">15</td><td align=\"center\">和下面两个预定义符号一起使用，显示gcc当前符号</td></tr><tr><td align=\"center\">__GUNC_MINOR__</td><td align=\"center\">2</td><td align=\"center\">同上</td></tr><tr><td align=\"center\">__GUNC_PATCHLEVEL__</td><td align=\"center\">1</td><td align=\"center\">同上</td></tr><tr><td align=\"center\">__OPTIMIZE__</td><td align=\"center\">1</td><td align=\"center\">判断是否使用code optimization</td></tr><tr><td align=\"center\">__x86_64__</td><td align=\"center\">1</td><td align=\"center\">判断系统芯片架构，下面一致</td></tr><tr><td align=\"center\">__i386__</td><td align=\"center\">1</td><td align=\"center\">同上</td></tr><tr><td align=\"center\">__aarch64__</td><td align=\"center\">1</td><td align=\"center\">同上</td></tr><tr><td align=\"center\">__arm__</td><td align=\"center\">1</td><td align=\"center\">同上</td></tr><tr><td align=\"center\">__powerpc64__</td><td align=\"center\">1</td><td align=\"center\">同上</td></tr><tr><td align=\"center\">__powerpc__</td><td align=\"center\">1</td><td align=\"center\">同上</td></tr></tbody></table></section><section><h2 id=\"142-define\">14.2 #define<a class=\"anchor\" href=\"#142-define\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>在一些简单的用法中<code>#define</code>就是为数值命名一个符号</p><p><code>#define</code>更为正式的描述</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:18ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">name</span><span style=\"--0:#24292E;--1:#E1E4E8\"> stuff</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>替换文本并不限于数值字面值常量。使用<code>#define</code>指令，你可以把任何文本替换到程序中。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:30ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">reg</span><span style=\"--0:#24292E;--1:#E1E4E8\">         </span><span style=\"--0:#BF3441;--1:#F97583\">register</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">do_forever</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\">(;;)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">CASE</span><span style=\"--0:#24292E;--1:#E1E4E8\">        </span><span style=\"--0:#BF3441;--1:#F97583\">break</span><span style=\"--0:#24292E;--1:#E1E4E8\">;case</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>如果定义中的stuff非常长，它可以分成几行，除了最后一行之外，每行的末尾都要加一个反斜杠。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:57ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">DEBUG_PRINT</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">x</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span><span style=\"--0:#AE4B07;--1:#FFAB70\">y</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span><span style=\"--0:#AE4B07;--1:#FFAB70\">z</span><span style=\"--0:#24292E;--1:#E1E4E8\">)   </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">( </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"File </span><span style=\"--0:#005CC5;--1:#79B8FF\">%s</span><span style=\"--0:#032F62;--1:#9ECBFF\"> line </span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\">:\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:29ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">                             </span><span style=\"--0:#032F62;--1:#9ECBFF\">\" x=</span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\">, y=</span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\">, z=</span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:29ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">                             </span><span style=\"--0:#6F42C1;--1:#B392F0\">__FILE__</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#6F42C1;--1:#B392F0\">__LINE__</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:29ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                             </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">x, y, z )</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>这里使用了相邻的字符串常量被自动连接为一个字符串的这个特性。</p><blockquote>\n<p>#define 语句末尾不需要加分号<code>;</code>\n还可以使用<code>#define</code>指令把一序列语句插入到程序中。</p>\n</blockquote><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:39ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">PROCESS_LOOP</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (i </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">; i </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">10</span><span style=\"--0:#24292E;--1:#E1E4E8\">; i </span><span style=\"--0:#BF3441;--1:#F97583\">+=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">){  </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">sum </span><span style=\"--0:#BF3441;--1:#F97583\">+=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> i;                 </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (i </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">)                </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">prod </span><span style=\"--0:#BF3441;--1:#F97583\">*=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> i;                </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>不要滥用这种技巧，如相同的代码需要出现在程序的几个地方，函数是一个更好的实现办法。</p>\n</blockquote><section><h3 id=\"1421-宏\">14.2.1 宏<a class=\"anchor\" href=\"#1421-宏\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>#define 机制包括了一个规定，允许把参数替换到文本上，这种实现通常称为 <strong>宏(macro)</strong> 或定义宏(defined macro)</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:34ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">name</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">parameter</span><span style=\"--0:#24292E;--1:#E1E4E8\">-list) stuff</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>parameter-list(参数列表)</code>是一个由逗号分隔的值的列表，每个值都与宏定义中的一个参数相对应</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:31ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 一个接受一个参数的宏</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">SQUARE</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">x</span><span style=\"--0:#24292E;--1:#E1E4E8\">) x </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> x</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 正常使用没有问题</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">SQUARE</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">5</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span><span style=\"--0:#616972;--1:#99A0A6\"> // 返回值是 25</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 下面是这个定义的问题</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> a;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">a </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">5</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">%d\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span><span style=\"--0:#6F42C1;--1:#B392F0\">SQUARE</span><span style=\"--0:#24292E;--1:#E1E4E8\">(a </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">));</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 这里返回值返回 11 而不是 36</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 被替换宏文本</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">%d\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, a </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> a </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 根据四则运算先执行 1 * a 后执行两个加法</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 修改为</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">SQUARE</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">x</span><span style=\"--0:#24292E;--1:#E1E4E8\">) (x) </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (x)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 这样就可以避免第一个问题</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 另一个问题</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">DOUBLE</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">x</span><span style=\"--0:#24292E;--1:#E1E4E8\">) (x) </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (x)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">a </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">5</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">%d\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#005CC5;--1:#79B8FF\">10</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">DOUBLE</span><span style=\"--0:#24292E;--1:#E1E4E8\">(a));</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 这里返回的是 55 而不是 100</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">%d\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#005CC5;--1:#79B8FF\">10</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (a) </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (a));</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 在原来的定义外添加一个括号</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">DOUBLE</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">x</span><span style=\"--0:#24292E;--1:#E1E4E8\">) ((x) </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (x))</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 就可以解决这个问题</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>所有用于对数值表达式进行求值的宏定义都应该用这种方式加上括号</p>\n</blockquote><p><strong>一种有趣的宏</strong></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:28ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">repeat</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">do</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">until</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">x</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#BF3441;--1:#F97583\">while</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">!</span><span style=\"--0:#24292E;--1:#E1E4E8\">(x))</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 上面的宏定义将下面的循环替换</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 替换</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">do</span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">statements;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span><span style=\"--0:#BF3441;--1:#F97583\">while</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">!</span><span style=\"--0:#24292E;--1:#E1E4E8\">(i </span><span style=\"--0:#BF3441;--1:#F97583\">>=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">10</span><span style=\"--0:#24292E;--1:#E1E4E8\">));</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 为</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">repeat {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">statements;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#6F42C1;--1:#B392F0\">until</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (i </span><span style=\"--0:#BF3441;--1:#F97583\">>=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">10</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>应该避免一直使用这种写法</p>\n</blockquote></section><section><h3 id=\"1422-define-替换\">14.2.2 #define 替换<a class=\"anchor\" href=\"#1422-define-替换\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ol>\n<li>在调用宏时，首先对参数进行检查，看看是否包含了任何由<code>#define</code>定义的符号。如果是，它们首先被替换。</li>\n<li>替换文本随后被插入到程序中原来文本的位置。对于宏，参数名被他们的值所替代。</li>\n<li>最后，再次对结果文本进行扫描，看看它是否包含了任何由<code>#define</code>定义的符号。如果是就重复上述处理过程。</li>\n</ol><p>这样宏参数和<code>#define</code>可以包含其他<code>#define</code>定义的符号。但是宏不可以出现递归。</p><ul>\n<li>当预处理器搜索<code>#define</code>定义的符号时，字符串常量的内容并不进行检查。有两种将宏参数插入到字符串常量的方法</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:49ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">PRINT</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">FORMAT</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#AE4B07;--1:#FFAB70\">VALUE</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">( </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"The value is \"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> FORMAT </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, VALUE)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">...</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">PRINT</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, x </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">3</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>这种技巧只有当字符串常量作为宏参数给出时才能使用</p>\n</blockquote><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:48ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">PRINT</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">FORMAT</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#AE4B07;--1:#FFAB70\">VALUE</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">( </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"The value of \"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> #VALUE </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#032F62;--1:#9ECBFF\">\" is \"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> FORMAT </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, VALUE )</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">...</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">PRINT</span><span style=\"--0:#24292E;--1:#E1E4E8\">( </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, x </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">3</span><span style=\"--0:#24292E;--1:#E1E4E8\"> )</span><span style=\"--0:#616972;--1:#99A0A6\"> // The value of x + 3 is 25</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li>\n<p>第二个技巧使用预处理器把一个宏参数转换为一个字符串。<code>#argument</code>这种结构被预处理器翻译为<code>argument</code>。</p>\n</li>\n<li>\n<p><code>##</code>结构则执行一种不同的任务。它把位于它两边的符号连接成一个符号。作为用途之一，它允许宏定义从分离的文本片段创建标识符。</p>\n</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:53ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ADD_TO_SUM</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ( sum_number, value ) </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">sun ## sum_number </span><span style=\"--0:#BF3441;--1:#F97583\">+=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> value</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">...</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ADD_TO_SUM</span><span style=\"--0:#24292E;--1:#E1E4E8\">( </span><span style=\"--0:#005CC5;--1:#79B8FF\">5</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#005CC5;--1:#79B8FF\">25</span><span style=\"--0:#24292E;--1:#E1E4E8\"> );</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 这条语句的意思是 sum5 += 25; 这种连接必须产生一个合法的标识符。否则其结果就是未定义的。</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"1423-宏与函数\">14.2.3 宏与函数<a class=\"anchor\" href=\"#1423-宏与函数\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:40ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">MAX</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span><span style=\"--0:#AE4B07;--1:#FFAB70\">b</span><span style=\"--0:#24292E;--1:#E1E4E8\">) ((a) </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> (b) </span><span style=\"--0:#BF3441;--1:#F97583\">?</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (a) </span><span style=\"--0:#BF3441;--1:#F97583\">:</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (b))</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>使用宏来定义简单计算而不是函数有两个优点：</p><ol>\n<li>用于调用和从函数返回的代码可能比实际执行这个小型计算工作的代码更大，所以对于简单函数使用宏比使用函数在<em><strong>程序的规模和速度方面都更胜一筹</strong></em>。</li>\n<li>函数的参数必须声明一种特定的类型，上面这个宏定义可以用于整型、长整型、单浮点型、双浮点型等其他的类型。<em><strong>宏是与类型无关的</strong></em>。</li>\n</ol><p>还有一些任务无法用函数实现只能用宏定义实现。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:41ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">MALLOC</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">n</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#AE4B07;--1:#FFAB70\">type</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">( (type</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span><span style=\"--0:#6F42C1;--1:#B392F0\">malloc</span><span style=\"--0:#24292E;--1:#E1E4E8\">( (n) </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(type)))</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 被转换为</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">pi </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">MALLOC</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">25</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">pi </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ((</span><span style=\"--0:#BF3441;--1:#F97583\">int*</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span><span style=\"--0:#6F42C1;--1:#B392F0\">malloc</span><span style=\"--0:#24292E;--1:#E1E4E8\">((</span><span style=\"--0:#005CC5;--1:#79B8FF\">25</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">)));</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>请注意宏定义并没有用一个分号结尾。分号出现在调用这个宏的语句中。</p>\n</blockquote></section><section><h3 id=\"1424-带副作用的宏参数\">14.2.4 带副作用的宏参数<a class=\"anchor\" href=\"#1424-带副作用的宏参数\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>当宏参数在宏定义中出现的次数超过一次时，如果这个参数具有副作用那么当你使用这个宏时就可能出现危险，导致不可预料的结果。<strong>副作用</strong>就是在表达式求值时出现的永久性效果。例如 :</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:5ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">x </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>可以重复执行几百次，它每次获得的结果都是一样的。这个表达式不具有副作用。但是：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:3ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">x</span><span style=\"--0:#BF3441;--1:#F97583\">++</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>就具有副作用：它增加<code>x</code>的值。当这个值在下一次执行时，它将产生不同的结果。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:44ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">MAX</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span><span style=\"--0:#AE4B07;--1:#FFAB70\">b</span><span style=\"--0:#24292E;--1:#E1E4E8\">) ((a) </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> (b) </span><span style=\"--0:#BF3441;--1:#F97583\">?</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (a) </span><span style=\"--0:#BF3441;--1:#F97583\">:</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (b))</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">...</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">x </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">5</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">y </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">8</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">z </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">MAX</span><span style=\"--0:#24292E;--1:#E1E4E8\">( x</span><span style=\"--0:#BF3441;--1:#F97583\">++</span><span style=\"--0:#24292E;--1:#E1E4E8\">, y</span><span style=\"--0:#BF3441;--1:#F97583\">++</span><span style=\"--0:#24292E;--1:#E1E4E8\"> );</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"x=</span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\">, y=</span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\">, z=</span><span style=\"--0:#005CC5;--1:#79B8FF\">%d\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, x, y, z);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// MAX的结果执行后 x = 6, y = 10, z = 9</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 虽然那个较小的值只增加了一次，但那个较大的值却增加了两次(y++) ? (y++)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">z </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ((x</span><span style=\"--0:#BF3441;--1:#F97583\">++</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> (y</span><span style=\"--0:#BF3441;--1:#F97583\">++</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#BF3441;--1:#F97583\">?</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (x</span><span style=\"--0:#BF3441;--1:#F97583\">++</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#BF3441;--1:#F97583\">:</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (y</span><span style=\"--0:#BF3441;--1:#F97583\">++</span><span style=\"--0:#24292E;--1:#E1E4E8\">));</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"1425-命名约定\">14.2.5 命名约定<a class=\"anchor\" href=\"#1425-命名约定\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>为了区分宏定义和函数的区别需要一个<strong>命名约定</strong>，最明显的区别就是函数名一般用全小写字母，宏定义用全大写字母。</p><p><em><strong>宏和函数的不同之处</strong></em></p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\">属性</th><th align=\"center\">#define宏</th><th align=\"center\">函数</th></tr></thead><tbody><tr><td align=\"center\">代码长度</td><td align=\"center\">每次使用时，宏代码都被插入到程序中。除了非常小的宏之外，程序的长度将大幅度增长</td><td align=\"center\">函数代码之处限于一个地方；每次使用这个函数时，都调用那个地方的同一份代码</td></tr><tr><td align=\"center\">执行速度</td><td align=\"center\">更快</td><td align=\"center\">存在函数调用/返回的额外开销</td></tr><tr><td align=\"center\">操作符/优先级</td><td align=\"center\">宏参数的求值是在所有周围表达式的上下文环境里，除非它们加上括号，否则邻近操作符的优先级可能会产生不可预料的结果</td><td align=\"center\">函数参数只在函数调用时求值一次，它的结果值传递给函数。表达式的求值结果更容易预测</td></tr><tr><td align=\"center\">参数求值</td><td align=\"center\">参数每次用于宏定义时，它们都将重新求值。由于多次求值，具有副作用的参数可能会产生不可预测的结果</td><td align=\"center\">参数在函数被调用前只求值一次。在函数中多次使用参数并不会导致多种求值过程。参数的副作用并不会造成任何特殊的问题</td></tr><tr><td align=\"center\">参数类型</td><td align=\"center\">宏与类型无关。只要对参数的操作是合法的，它可以使用于任何参数类型</td><td align=\"center\">函数的参数是与类型有关的。如果参数的类型不同，就需要使用不同的函数，即使它们执行的任务是相同的</td></tr></tbody></table></section><section><h3 id=\"1426-undef\">14.2.6 #undef<a class=\"anchor\" href=\"#1426-undef\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>这条预处理指令用于移除一个宏定义。</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:11ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#undef</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">name</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>如果一个现存的名字需要被重新定义，那么它的旧定义首先必须用<code>#undef</code>移除。</p></section><section><h3 id=\"1427-命令行定义\">14.2.7 命令行定义<a class=\"anchor\" href=\"#1427-命令行定义\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>许多C编译器提供了在命令行中定义符号，用于启动编译过程。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:26ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">array</span><span style=\"--0:#24292E;--1:#E1E4E8\">[ARRAY_SIZE];</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">Dname</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">Dname</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\">stuff</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">cc </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">DARRAY_SIZE</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#005CC5;--1:#79B8FF\">100</span><span style=\"--0:#24292E;--1:#E1E4E8\"> prog.c</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section><section><h2 id=\"143-条件编译\">14.3 条件编译<a class=\"anchor\" href=\"#143-条件编译\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>只用于调试程序的语句就是一个明显的例子它们不应该出现在程序的产品版本中，<strong>但是你可能并不想把这些语句从源代码中物理删除，因为如果需要一些维护性修改时，你可能需要重新调试这个程序，还需要这些语句</strong>。</li>\n<li>条件编译(conditional compilation)就是用于实现这个目的。</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:23ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">constant</span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#6F42C1;--1:#B392F0\">expression</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">statements</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#endif</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>其中<code>constant-expression</code>（常量表达式）由预处理器进行求值。如果它的值是非零值（真），那么<code>statements</code>部分就被正常编译，否则预处理器就安静地删除它们。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:21ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">DEBUG</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">DEBUG</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(statements);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#endif</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>一个简单的使用条件编译</p><p><code>#if</code>的子句<code>#elif</code>和<code>#else</code></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:26ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">constant</span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#6F42C1;--1:#B392F0\">expression</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">statements</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#elif</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">constant</span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#6F42C1;--1:#B392F0\">expression</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">other statements ...</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#else</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">other statements</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#endif</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><section><h3 id=\"1431-是否被定义\">14.3.1 是否被定义<a class=\"anchor\" href=\"#1431-是否被定义\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:20ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">defined</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">symbol</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#ifdef</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">symbol</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">!defined</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">symbol</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#ifndef</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">symbol</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>#if</code>形式的语句功能更强。因为常量表达式可能包含额外的条件</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:41ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">X</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">||</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">defined</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">ABC</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">defined</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">BCD</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>一些老K&#x26;R C编译器并未包含所有功能。</p>\n</blockquote></section><section><h3 id=\"1432-嵌套指令\">14.3.2 嵌套指令<a class=\"anchor\" href=\"#1432-嵌套指令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:29ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">defined</span><span style=\"--0:#24292E;--1:#E1E4E8\">( </span><span style=\"--0:#6F42C1;--1:#B392F0\">OS_UNIX</span><span style=\"--0:#24292E;--1:#E1E4E8\"> )</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">#ifdef</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">OPTION1</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">unix_version_of_option1</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">#endif</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">#ifdef</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">OPTION2</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">unix_version_of_option2</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">#ifdef</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">OPTION3</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">unix_version_of_option3</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#elif</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">defined</span><span style=\"--0:#24292E;--1:#E1E4E8\">( </span><span style=\"--0:#6F42C1;--1:#B392F0\">OS_MSDOS</span><span style=\"--0:#24292E;--1:#E1E4E8\"> )</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">#ifdef</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">OPTION2</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">msdos_version_of_option2</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">#endif</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#endif</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>在每个#endif 后添加一个注释标签可以很好地区分每个嵌套的指令</p>\n</blockquote></section></section><section><h2 id=\"144-文件包含\">14.4 文件包含<a class=\"anchor\" href=\"#144-文件包含\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>一个头文件如果被包含到10个源文件中，它实际上被编译了10次。</li>\n</ul><blockquote>\n<p>但实际上这种额外开销实际上并不大。</p>\n</blockquote><section><h3 id=\"1441-函数库文件包含\">14.4.1 函数库文件包含<a class=\"anchor\" href=\"#1441-函数库文件包含\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>头文件包含语法</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:19ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;filename></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>UNIX 系统上使用<code>&#x3C;></code>包含的头文件一般在目录<code>/usr/include</code>查找</p>\n<blockquote>\n<p>编译器有一个选项<code>-I</code>允许把其他目录添加到这个列表中</p>\n</blockquote>\n</blockquote></section><section><h3 id=\"1442-本地文件包含\">14.4.2 本地文件包含<a class=\"anchor\" href=\"#1442-本地文件包含\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:19ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"filename\"</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>优先从.c文件或.h文件所在的当前目录查找</p>\n</blockquote></section><section><h3 id=\"1443-嵌套文件包含\">14.4.3 嵌套文件包含<a class=\"anchor\" href=\"#1443-嵌套文件包含\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:49ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"a.h\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"b.h\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 如果b.h 文件里包含了a.h，那么a.h在当前文件就被包含了两次</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">--------</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// another file</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#ifndef</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">_HEADERNAME_H</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">_HEADERNAME_H</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#616972;--1:#99A0A6\"> // #define _HEADERNAME_H</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// All the stuff that you want in the header file</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#endif</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 使用这种方法并不能直接不调用第二次该文件，但是文件内的所有文件会在第二次调用被弃用</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>这种处理将拖慢编译速度，所以可能尽量避免出现多重包含</p>\n</blockquote></section></section><section><h2 id=\"145-其他指令\">14.5 其他指令<a class=\"anchor\" href=\"#145-其他指令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"1451-error\">14.5.1 #error<a class=\"anchor\" href=\"#1451-error\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>当程序编译之后，<code>#error</code>指令允许你生成错误信息，并强制终止编译过程。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:47ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#error</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">text of error message</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 使用案例</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">defined</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">OPTION_A</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">stuff needed </span><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\"> optionA</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#elif</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">defined</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">OPTION_B</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">stuff needed </span><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\"> optionA</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#elif</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">defined</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">OPTION_C</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">stuff needed </span><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\"> optionC</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#else</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">#error</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">No option selected!</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#endif</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 检查 C 标准版本</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">__STDC_VERSION__</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">199901</span><span style=\"--0:#BF3441;--1:#F97583\">L</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#error</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"本项目要求 C99 或更高版本的编译器！\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#endif</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#ifdef</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">WINDOWS_ENV</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 针对 Windows的代码...</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#elif</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">defined</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#6F42C1;--1:#B392F0\">LINUX_ENV</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 针对 Linux的代码...</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#else</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#error</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"必须定义 WINDOWS_ENV 或 LINUX_ENV 宏以指定编译环境！\"</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"1452-line\">14.5.2 #line<a class=\"anchor\" href=\"#1452-line\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>#line</code>指令用于改变编译器对当前代码行号和文件名的追踪。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:56ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#line</span><span style=\"--0:#24292E;--1:#E1E4E8\"> number </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"string\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// number 将当前源代码行的行号设置为这个数字</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// string 可选，将编译器追踪的文件名设置为这个字符串</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 例子</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 原始文件名 line.c  假设</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> a </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">DEBUG</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#undef</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">DEBUG</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// gcc -std=c11 -g -Wall -DDEBUG=0 line.c</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// gcc -std=c11 -g -Wall -DDEBUG=1 line.c</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 使用-DNAME 控制定义名的值</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">DEBUG</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#line</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">100</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"generated_code.c\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#endif</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">func</span><span style=\"--0:#24292E;--1:#E1E4E8\">() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> b </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span><span style=\"--0:#616972;--1:#99A0A6\">       // 编译器现在认为这是 generated_code.c 的 101 行</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> c </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"error\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span><span style=\"--0:#616972;--1:#99A0A6\"> // 故意制造一个错误</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 恢复到当前文件的实际行号</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#line</span><span style=\"--0:#24292E;--1:#E1E4E8\"> __LINE__</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">func</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"1453-progma\">14.5.3 #progma<a class=\"anchor\" href=\"#1453-progma\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>一种特殊的预处理器指令，用于向编译器发出特殊指令或特定于实现的功能。</li>\n<li><code>#progma</code> 的行为完全取决于编译器。</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:47ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">#progma 记号序列</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// -------------</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">#progma once</span><span style=\"--0:#616972;--1:#99A0A6\"> // 非标准但广泛使用，确保头文件只被编译一次，防止重复包含错误。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 不是C标准的一部分，但是几乎所有的现代编译器(GCC, Clang, MSVC)都支持。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">#progma STDC</span><span style=\"--0:#616972;--1:#99A0A6\"> // C99/C11 标准用于控制浮点运算和线程。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">#progma </span><span style=\"--0:#6F42C1;--1:#B392F0\">pack</span><span style=\"--0:#24292E;--1:#E1E4E8\">(n)</span><span style=\"--0:#616972;--1:#99A0A6\"> // 控制结构体对齐</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 改变结构体的内存对齐方式</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> DefaultStruct {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> c;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> i;</span><span style=\"--0:#616972;--1:#99A0A6\"> // 4 字节，可能有三字节的填充</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">};</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 设置对齐为 1字节</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">#progma </span><span style=\"--0:#6F42C1;--1:#B392F0\">pack</span><span style=\"--0:#24292E;--1:#E1E4E8\">(push, </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> PackedStruct {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> c;</span><span style=\"--0:#616972;--1:#99A0A6\"> // 1字节</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> i;</span><span style=\"--0:#616972;--1:#99A0A6\"> // 4 字节，紧跟在 c 之后，没有填充</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">};</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">#progma </span><span style=\"--0:#6F42C1;--1:#B392F0\">pack</span><span style=\"--0:#24292E;--1:#E1E4E8\">(pop)</span><span style=\"--0:#616972;--1:#99A0A6\"> // 恢复默认对齐设置</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section></section>\n<section><h1 id=\"-输入输出函数\">🎶 输入/输出函数<a class=\"anchor\" href=\"#-输入输出函数\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><ul>\n<li>ANSI C和早期C相比的最大优点之一就是它在规范里所包含的函数库。每个ANSI编译器必须支持一组规定的函数，并具备规范所要求的接口，而且按照规定的行为工作。</li>\n</ul><section><h2 id=\"151-错误报告\">15.1 错误报告<a class=\"anchor\" href=\"#151-错误报告\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><code>perror</code>函数以一种简单、统一的方式报告错误。（原型定义于stdio.h）</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:33ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">perror</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">message</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>标准库函数在程序存在错误时在一个外部整型变量<code>errno</code>（在errno.h中定义）中保存错误代码后把这个信息传递给用户程序，提示操作失败的准确原因。</p>\n<blockquote>\n<p>perror最大的优点就是容易使用。</p>\n</blockquote>\n</blockquote></section><section><h2 id=\"152-终止执行\">15.2 终止执行<a class=\"anchor\" href=\"#152-终止执行\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><code>exit</code>函数用于终止一个程序的执行。（原型定义于stdlib.h）</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:22ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">exit</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">status</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>status</code>参数返回给操作系统，用于提示程序是否正常完成。</p><blockquote>\n<p>预定义符号EXIT_SUCCESS 和 EXIT_FAILURE 分别提示程序的终止是成功还是失败。</p>\n<blockquote>\n<p>一般执行完<code>perror</code>后都会执行<code>exit</code></p>\n</blockquote>\n</blockquote></section><section><h2 id=\"153-标准io函数库\">15.3 标准I/O函数库<a class=\"anchor\" href=\"#153-标准io函数库\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>标准I/O函数库是在原先I/O库基础上的实现和扩展，例如为printf创建了不同的版本。且函数库引入了缓冲I/O的概念，提高了绝大多数程序的效率。</li>\n</ul><blockquote>\n<p>但是标准函数库是在某台特定类型机器上实现的，在其他不同类型的机器上运行相同的程序会出现无法运行的情况。</p>\n</blockquote><ul>\n<li>ANSI C函数库中的I/O函数在可移植性和完整性上更加完善。</li>\n</ul><blockquote>\n<p>ANSI C的一个主要优点就是这些修改是通过<strong>增加不同的函数</strong>方式实现，而不是通过对现存函数进行修改来实现，保证了程序的可移植性。</p>\n</blockquote></section><section><h2 id=\"154-ansi-io概念\">15.4 ANSI I/O概念<a class=\"anchor\" href=\"#154-ansi-io概念\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>头文件<code>&#x3C;stdio.h></code>包含了与ANSI函数库的I/O部分有关的声明。</li>\n</ul><blockquote>\n<p>尽管不包含这个头文件也能使用某些I/O函数，但绝大多数函数都需要包含这个头文件。</p>\n</blockquote><section><h3 id=\"1541-流\">15.4.1 流<a class=\"anchor\" href=\"#1541-流\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>ANSI C对I/O的概念进行抽象，所有的I/O操作只是简单的移入/移出字节。这种字节流便称为<strong>流(stream)</strong>。</li>\n</ul><ol>\n<li>核心概念：抽象(Abstraction)</li>\n</ol><ul>\n<li><strong>流的本质</strong>：流是对所有I/O操作的抽象</li>\n<li><strong>统一接口</strong>：所有的I/O设备都被视为类似的设备。</li>\n<li><strong>程序视角</strong>：对C程序而言，所有的I/O操作都只是在流上进行字节的移进或移出。</li>\n<li><strong>细节隐藏</strong>：特定的I/O设备的细节对程序员是隐藏的。</li>\n</ul><ol start=\"2\">\n<li>核心机制：缓冲(Buffering)</li>\n</ol><p>大多数流是<em><strong>完全缓冲的(fully buffered)</strong></em></p><ul>\n<li><strong>读取操作</strong>：当进行”读取”时，实际上是从一块较大的缓冲区(buffer)中读取数据。当缓冲区空时，程序才通过设备或文件读取下一块较大的输入数据并重新填充缓冲区。</li>\n<li><strong>写入操作</strong>：“写入”也是先写入到内存中的缓冲区，直到缓冲区写满时，数据才被一次性写入(flush,冲洗或刷新)到设备或文件。</li>\n<li><strong>效率优势</strong>：这种块状写入和读取操作由于减少了与设备或文件的交互次数，能够实现更快速的I/O。</li>\n</ul><p>解决输出延迟</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:29ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"something or other\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">fflush</span><span style=\"--0:#24292E;--1:#E1E4E8\">(stdout);</span><span style=\"--0:#616972;--1:#99A0A6\"> // 立即将缓冲区内容写出</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>在通常的编程测试中，stdout默认是行缓冲模式。</p>\n</blockquote><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:32ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 没有\\n触发自动刷新，会暂停五秒后再执行printf</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;unistd.h></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#616972;--1:#99A0A6\">// for sleep</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 1. 没有 \\n，数据进入缓冲区，但不会自动刷新</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"等待 5 秒，你可能看不到我...\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 2. 暂停执行</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">sleep</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">5</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 3. 补上 \\n</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">我现在出来了。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:40ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 有\\n触发自动刷新，会先执行printf后等待五秒后执行另一个printf</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;unistd.h></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#616972;--1:#99A0A6\">// for sleep</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"等待 5 秒，你应该能看到我...</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 2. 暂停执行</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">sleep</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">5</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 3. 补上 \\n</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">我现在出来了。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>stdin是类似的，都是行缓冲模式。</p>\n</blockquote><ul>\n<li>对于输入流来说，只有缓冲区空了，程序才会从外部设备获取新的数据来填充它。</li>\n<li>对于输出流来说，只有缓冲区满了，缓冲区中的数据才会被写入到外部设备，进行刷新。</li>\n</ul><section><h4 id=\"一文本流text-stream\">一、文本流(Text Stream)<a class=\"anchor\" href=\"#一文本流text-stream\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>流分为两种，<strong>文本(text)流</strong> 和 <strong>二进制(binary)</strong> 流。文本流的有些特性在不同的系统中可能不同。其中之一就是文本行的最大长度。标准规定至少允许254个字符。另一个可能不同的特性是文本行的结束方式。例如在<em><strong>MS-DOS</strong></em>系统中，文本文件约定以一个回车符和一个换行符（或称为行反馈符）结尾。但是<em><strong>UNIX</strong></em>系统只使用一个换行符结尾。</p><ul>\n<li>核心特点：字符翻译</li>\n</ul><p>文本流在数据传输中会引入一个<strong>翻译层</strong>，主要针对换行符(<code>\\n</code>)：</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\">操作</th><th align=\"center\">C程序中的表示</th><th align=\"center\">操作系统/文件中实际存储的表示</th></tr></thead><tbody><tr><td align=\"center\">写入(<code>fprintf</code>,<code>fputs</code>)</td><td align=\"center\">写入一个换行符(<code>\\n</code>)</td><td align=\"center\">操作系统可能会将其翻译成一个或多个字符序列(例如Windows下的<code>\\r\\n</code>)</td></tr><tr><td align=\"center\">读取(<code>fscanf</code>,<code>fgets</code>)</td><td align=\"center\">从文件中读取多个字符序列（例如Windows下的<code>\\r\\n</code>）</td><td align=\"center\">C运行时库会将这个序列翻译回单个换行符(<code>\\n</code>)供C程序使用。</td></tr></tbody></table><ul>\n<li>优点：保持了跨平台的<strong>文本文件兼容性</strong>。可以在任何系统上打开并正确显示用文本模式创建的文件。</li>\n<li>缺点：传输的数据量可能与文件中实际存储的字节数<strong>不一致</strong>（因为翻译），且性能略低于二进制流。</li>\n</ul></section><section><h4 id=\"二二进制流binary-stream\">二、二进制流(Binary Stream)<a class=\"anchor\" href=\"#二二进制流binary-stream\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>二进制流中的字节将完全根据程序编写它们的形式写入到文件或设备中，而且完全根据它们从文件或设备读取的形式读入到程序中。并未做任何改变。</p><ul>\n<li>核心特点：无翻译</li>\n</ul><p>二进制流是<strong>透明的</strong>，它绕过了C运行时库的任何翻译：</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\">操作</th><th align=\"center\">C程序中的表示</th><th align=\"center\">操作系统/文件中实际存储的表示</th></tr></thead><tbody><tr><td align=\"center\">写入(<code>fwrite</code>)</td><td align=\"center\">写入N个字节</td><td align=\"center\">文件中精确存储N个字节，不做任何修改。</td></tr><tr><td align=\"center\">读取(<code>fread</code>)</td><td align=\"center\">读取N个字节</td><td align=\"center\">从文件中读取N个原始字节到内存中，不做任何修改。</td></tr></tbody></table><ul>\n<li>优点：1.精确性：文件中的字节数与程序处理的字节数总是精准匹配。适用于存储图片、音频、结构体、加密数据等。2.性能：由于没有翻译开销，I/O操作通常更快。</li>\n<li>缺点：<strong>缺乏可移植性</strong>。如果直接将C结构体写入二进制文件，文件将依赖于机器的字节序(Endianness)和数据类型大小。</li>\n</ul></section><section><h4 id=\"三编程实现上的区别\">三、编程实现上的区别<a class=\"anchor\" href=\"#三编程实现上的区别\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>在C语言中，你通过<code>fopen()</code>函数的第二个参数（模式字符串）来指定使用哪种流模式：</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"left\">模式</th><th align=\"left\">描述</th></tr></thead><tbody><tr><td align=\"left\"><code>\"r\"</code>/<code>\"w\"</code>/<code>\"a\"</code></td><td align=\"left\">文本模式(默认)</td></tr><tr><td align=\"left\"><code>\"rb\"</code>/<code>\"wb\"</code>/<code>\"ab\"</code></td><td align=\"left\">二进制模式(加<code>b</code>)</td></tr></tbody></table></section></section><section><h3 id=\"1542-文件\">15.4.2 文件<a class=\"anchor\" href=\"#1542-文件\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>stdio.h</code>所包含的声明之一就是<code>FILE</code>结构。<code>FILE</code>是一个数据结构，用于访问一个流。如果同时激活几个流每个流都有一个相应的<code>FILE</code>与它关联。</p><ul>\n<li>对于每个ANSI C程序，运行时系统必须提供至少三个流：<strong>标准输入(standard input)</strong>、<strong>标准输出(standard output)<strong>和</strong>标准错误(standard error)</strong>。名字分别为<code>stdin</code>、<code>stdout</code>、<code>stderr</code>。这三个流都是指向<code>FILE</code>结构的指针。</li>\n</ul><blockquote>\n<p>标准输入是缺省输入来源，标准输出是缺省输出设置，标准错误是缺省错误设置。通常标准输入为键盘设置，标准输出为终端或屏幕。\n可以将标准输入和标准输出设置为其他设备。</p>\n</blockquote></section><section><h3 id=\"1543-标准io常量\">15.4.3 标准I/O常量<a class=\"anchor\" href=\"#1543-标准io常量\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>EOF</code>是许多函数的返回值，提示达到了文件尾。<strong>EOF所选择的实际值比一个字符多几位，这是为了避免二进制被错误地解释为EOF。</strong></p><ul>\n<li>输入函数返回<code>int</code>类型：<code>getchar()</code>和<code>fgetc()</code>等函数被设计为返回<code>int</code>(32位或16位)，而不是<code>char</code>(8位)。</li>\n<li>EOF的值：一般为负整数<code>-1</code>。</li>\n</ul>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\">状态</th><th align=\"center\">返回值</th><th align=\"center\">位宽利用</th></tr></thead><tbody><tr><td align=\"center\">成功读取有效字符</td><td align=\"center\">返回值是一个0到255之间的整数</td><td align=\"center\">仅使用了<code>int</code>的低8位来存储字符代码，其余位是0。</td></tr><tr><td align=\"center\">遇到文件结束(EOF)</td><td align=\"center\">返回值是一个负整数(-1)</td><td align=\"center\"><code>int</code>的所有位都被设置成-1的二进制表示(所有32位都是1)</td></tr></tbody></table><blockquote>\n<p>一个程序至少可以打开<strong>FOPEN_MAX</strong>个文件，至少是8。有一个常量<strong>FILENAME_MAX</strong>提示字符数组应该多大以便容纳编译器所支持的最长合法文件名。</p>\n</blockquote></section></section><section><h2 id=\"155-流io总览\">15.5 流I/O总览<a class=\"anchor\" href=\"#155-流io总览\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>对于文件流或设备流</p><ol>\n<li>使用<code>FILE*</code>将处于活动状态的文件选择使用。</li>\n<li>流通过调用<code>fopen</code>函数打开。为了打开一个流必须指定要访问的文件或设备以及他们的访问方式。<code>fopen</code>和操作系统验证文件或设备确实存在并初始化FILE结构。</li>\n<li>对文件或设备读取写入。</li>\n<li>最后调用<code>fclose</code>函数关闭流。防止被再次访问，保证任何存储于缓冲区的数据被正确地写到文件中，并且释放FILE结构使它可以用于另外的文件。</li>\n</ol><blockquote>\n<p>标准流不需要打开或关闭。</p>\n</blockquote><p><strong>执行字符、文本行和二进制I/O的函数</strong></p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"left\">数据类型</th><th align=\"left\">输入</th><th align=\"left\">输出</th><th align=\"left\">描述</th></tr></thead><tbody><tr><td align=\"left\">字符</td><td align=\"left\">getchar</td><td align=\"left\">putchar</td><td align=\"left\">读取(写入)单个字符</td></tr><tr><td align=\"left\">文本行</td><td align=\"left\">gets/scanf</td><td align=\"left\">puts/printf</td><td align=\"left\">文本行未格式化的输入(输出)/格式化的输入(输出)</td></tr><tr><td align=\"left\">二进制数据</td><td align=\"left\">fread</td><td align=\"left\">fwrite</td><td align=\"left\">读取(写入)二进制数据</td></tr></tbody></table><blockquote>\n<p>带f前缀的输入输出函数可以用于所有流。</p>\n</blockquote></section><section><h2 id=\"156-打开流\">15.6 打开流<a class=\"anchor\" href=\"#156-打开流\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><code>fopen</code>函数用于创建并打开一个新流。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:48ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#6F42C1;--1:#B392F0\">fopen</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">name</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">mode</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>mode</code>参数上面编程实现给出</p><blockquote>\n<p>在mode 中添加 <code>a+</code>表示该文件打开用于更新，并且流既允许读也允许写。\n但是在向流写入数据前必须调用其中一个文件定位函数(<code>fseek</code>、<code>fsetpos</code>、<code>rewind</code>)。\n在写后又想读取数据首先必须调用<code>fflush</code>函数或文件定位函数之一。</p>\n</blockquote><p>应该始终检查<code>fopen</code>函数的返回值！如果函数失败，它会返回一个NULL值。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:51ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">input;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">input </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">fopen</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"data3\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"r\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span><span style=\"--0:#616972;--1:#99A0A6\"> // 文本只读</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (input </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">perror</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"failed to open file data3, Quitting...\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">exit</span><span style=\"--0:#24292E;--1:#E1E4E8\">(EXIT_FAILURE);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 在终端报错类似：data3: No such file or directory</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>freopen</code>函数用于打开（或重新打开）一个特定的文件流。原型如下：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:68ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">FILE</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">freopen</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">filename</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">mode</span><span style=\"--0:#24292E;--1:#E1E4E8\">, FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">stream</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>最大的作用是改变流的输入输出</p><blockquote>\n<p><code>freopen</code>函数在执行成功时，它返回的指针和传入的第三个参数<code>stream</code>是同一个指针，即它们都指向同一个<code>FILE</code>结构体。</p>\n</blockquote><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:62ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdlib.h></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#616972;--1:#99A0A6\">// 用于 EXIT_FAILURE</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 1. 初始状态：printf 输出到终端</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"--- 程序开始 ---</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"这条信息应该显示在终端上。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// =======================================================</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 2. 使用 freopen 重定向标准输出 (stdout)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">//    参数:</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">//      \"log.txt\": 新的文件名</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">//      \"w\": 写入模式 (会覆盖文件原有内容)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">//      stdout: 要重定向的目标流</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// =======================================================</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">original_stdout </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">freopen</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"log.txt\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"w\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, stdout);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 检查重定向是否成功</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (original_stdout </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#616972;--1:#99A0A6\">// 如果重定向失败，通常是文件路径问题</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#6F42C1;--1:#B392F0\">perror</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"freopen 失败\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EXIT_FAILURE;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 3. 重定向后的状态：printf 输出到 log.txt 文件</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"这条信息不会显示在终端，而是写入 log.txt。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"freopen 成功地将标准输出改变了方向。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"--- 程序结束 ---</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 4. 关闭文件流并返回</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// freopen 已经关闭了旧的 stdout（终端），并打开了新的文件。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 程序结束时会自动关闭 log.txt，但明确关闭是好习惯</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">fclose</span><span style=\"--0:#24292E;--1:#E1E4E8\">(stdout) </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#6F42C1;--1:#B392F0\">perror</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"关闭 stdout 失败\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 注意：程序不会输出任何成功信息到终端，因为它被重定向了</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"157-关闭流\">15.7 关闭流<a class=\"anchor\" href=\"#157-关闭流\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>使用<code>fclose</code>关闭流</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:20ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">fclose</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">f</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>fclose</code>函数在文件关闭前刷新缓冲区。执行成功返回0值，否则返回EOF。</p><blockquote>\n<p>是否应该对fclose(或其他操作)进行错误检查？</p>\n<blockquote>\n<ol>\n<li>\n<p>如果操作成功应该执行什么？</p>\n</li>\n<li>\n<p>如果操作失败应该执行什么？</p>\n</li>\n</ol>\n<blockquote>\n<p>如果这两个答案是不同的，应该进行错误检查；如果是相同的，跳过错误检查才是合理的。</p>\n</blockquote>\n</blockquote>\n</blockquote></section><section><h2 id=\"158-字符io\">15.8 字符I/O<a class=\"anchor\" href=\"#158-字符io\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>字符输入</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:24ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">fgetc</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">stream</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">getc</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">stream</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">getchar</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>字符输出</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:38ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">fputc</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">character</span><span style=\"--0:#24292E;--1:#E1E4E8\">,FILE</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">stream</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">putc</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">character</span><span style=\"--0:#24292E;--1:#E1E4E8\">,FILE</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">stream</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">putchar</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">character</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><section><h3 id=\"1581-字符io宏\">15.8.1 字符I/O宏<a class=\"anchor\" href=\"#1581-字符io宏\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>除了<code>fgetc</code>和<code>fputc</code>其他都是<code>#define</code>指令定义的宏，两种实现为了不同的场景，但是实际两种操作相差甚微。</p></section><section><h3 id=\"1582-撤销字符io\">15.8.2 撤销字符I/O<a class=\"anchor\" href=\"#1582-撤销字符io\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>在流读取时总有一个不想读取的字符，但使用流逐个读取没有条件判断一定会读到一个不满足的字符，为了不丢弃这个字符，使用<code>ungetc</code>函数将这个字符从参数中推回stream中。</p><blockquote>\n<p><code>ungetc</code>函数主要的应用场景是<strong>超前扫描</strong>或<strong>令牌解析</strong></p>\n</blockquote><p>读取一个整数，直到遇到非数字或EOF</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:53ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;ctype.h></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#616972;--1:#99A0A6\">// 用于 isdigit()</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 函数：从标准输入读取一个整数</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">read_integer</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">stream</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ch;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> value </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 1. 跳过开始的空白字符</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">do</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">ch </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">fgetc</span><span style=\"--0:#24292E;--1:#E1E4E8\">(stream);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">while</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">isspace</span><span style=\"--0:#24292E;--1:#E1E4E8\">(ch));</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 2. 检查第一个非空白字符是否是数字</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#BF3441;--1:#F97583\">!</span><span style=\"--0:#6F42C1;--1:#B392F0\">isdigit</span><span style=\"--0:#24292E;--1:#E1E4E8\">(ch)) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#616972;--1:#99A0A6\">// 如果第一个字符不是数字，就把它放回流中</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (ch </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EOF) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#6F42C1;--1:#B392F0\">ungetc</span><span style=\"--0:#24292E;--1:#E1E4E8\">(ch, stream);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span><span style=\"--0:#616972;--1:#99A0A6\"> // 或者返回一个错误代码</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 3. 读取数字部分</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">while</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">isdigit</span><span style=\"--0:#24292E;--1:#E1E4E8\">(ch)) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">value </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> value </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">10</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (ch </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'0'</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">        </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">ch </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">fgetc</span><span style=\"--0:#24292E;--1:#E1E4E8\">(stream);</span><span style=\"--0:#616972;--1:#99A0A6\"> // 超前读取下一个字符</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 4. 【核心步骤】</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 循环停止是因为 ch 遇到了第一个非数字字符（或者 EOF）。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 这个非数字字符（例如一个字母 'A'）不属于当前的整数，它属于流的下一个部分。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (ch </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EOF) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#6F42C1;--1:#B392F0\">ungetc</span><span style=\"--0:#24292E;--1:#E1E4E8\">(ch, stream);</span><span style=\"--0:#616972;--1:#99A0A6\"> // 将这个超前读取的字符放回流中</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> value;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> num1, num2;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"请输入数据 (例如: 123ABC456)</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 假设用户输入: 123ABC456\\n</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">46</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 第一次调用：读取 123</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">47</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">num1 </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">read_integer</span><span style=\"--0:#24292E;--1:#E1E4E8\">(stdin);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">48</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"读取到第一个整数: </span><span style=\"--0:#005CC5;--1:#79B8FF\">%d\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, num1);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">49</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 此时字符 'A' 被 read_integer 读走后又放回了 stdin。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">50</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">51</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 第二次调用：读取下一个字符，它将是 'A'</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">52</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"下一个字符是: </span><span style=\"--0:#005CC5;--1:#79B8FF\">%c\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#6F42C1;--1:#B392F0\">fgetc</span><span style=\"--0:#24292E;--1:#E1E4E8\">(stdin));</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">53</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">54</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 第三次调用：读取 456</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">55</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// read_integer 会消耗 'B', 'C'，直到 456</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">56</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// num2 = read_integer(stdin); // 错误：会消耗 'B', 'C'</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">57</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">58</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"流中剩余字符:</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">59</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 清空并打印剩余部分，以验证 ungetc 后的字符 'A' 确实被读取了</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">60</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ch;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">61</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">while</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ((ch </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">getchar</span><span style=\"--0:#24292E;--1:#E1E4E8\">()) </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EOF) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">62</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#6F42C1;--1:#B392F0\">putchar</span><span style=\"--0:#24292E;--1:#E1E4E8\">(ch);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">63</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">64</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">65</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">66</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>退回字符和流的当前位置有关，如果使用<code>fseek</code>,<code>fsetpos</code>或<code>rewind</code>函数改变了流的位置，所有退回的字符都要被丢弃。</p>\n</blockquote></section></section><section><h2 id=\"159-未格式化的行io\">15.9 未格式化的行I/O<a class=\"anchor\" href=\"#159-未格式化的行io\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>行I/O可以使用两种方式执行————未格式化的和格式化的。这两种形式都用于操作字符串。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:57ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#6F42C1;--1:#B392F0\">fgets</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">buffer</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">buffer_size</span><span style=\"--0:#24292E;--1:#E1E4E8\">, FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">stream</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#6F42C1;--1:#B392F0\">gets</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">buffer</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">fputs</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">buffer</span><span style=\"--0:#24292E;--1:#E1E4E8\">, FILE</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">stream</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">puts</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">buffer</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>fgets</code>从指定的stream读取字符并把它们复制到buffer中。在读取到换行符或缓冲区内存储的字符达到<code>buffer_size - 1</code>时停止读取。</p><blockquote>\n<p>gets在C99后不推荐使用，C11后已经完全抛弃！在任何情况下<code>fgets</code>都会在末尾添加NUL字节表示字符串结束；puts会自动在尾部添加换行符；fputs不会添加换行符。</p>\n</blockquote><p>常见错误</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:56ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">data</span><span style=\"--0:#24292E;--1:#E1E4E8\">[</span><span style=\"--0:#005CC5;--1:#79B8FF\">5</span><span style=\"--0:#24292E;--1:#E1E4E8\">];</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 错误操作：数组只有5个字节，但写入了6个字符，没有留空间给 '\\0'</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 实际上是写入了 'H', 'e', 'l', 'l', 'o'，'\\0' 溢出到了 data 之外</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 但在这个例子中，我们假设用 memcpy 或其它方式精确地填满 data，没有 \\0</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#AE4B07;--1:#FFAB70\">data</span><span style=\"--0:#24292E;--1:#E1E4E8\">[</span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">] </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'A'</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#AE4B07;--1:#FFAB70\">data</span><span style=\"--0:#24292E;--1:#E1E4E8\">[</span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">] </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'B'</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#AE4B07;--1:#FFAB70\">data</span><span style=\"--0:#24292E;--1:#E1E4E8\">[</span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\">] </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'C'</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#AE4B07;--1:#FFAB70\">data</span><span style=\"--0:#24292E;--1:#E1E4E8\">[</span><span style=\"--0:#005CC5;--1:#79B8FF\">3</span><span style=\"--0:#24292E;--1:#E1E4E8\">] </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'D'</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#AE4B07;--1:#FFAB70\">data</span><span style=\"--0:#24292E;--1:#E1E4E8\">[</span><span style=\"--0:#005CC5;--1:#79B8FF\">4</span><span style=\"--0:#24292E;--1:#E1E4E8\">] </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'E'</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span><span style=\"--0:#616972;--1:#99A0A6\"> // &#x3C;--- 数组已满，没有空终止符</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"尝试写入一个非终止字符串...</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// fputs 将会从 data[0] 开始一直读到内存中找到 \\0 为止</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 这将是 UB！</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">fputs</span><span style=\"--0:#24292E;--1:#E1E4E8\">(data, stdout);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">程序可能崩溃，或者输出了乱码。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p><code>fgets</code>第二个参数虽然能指定传入的元素个数，但是如果参数过大溢出它的缓冲区，<code>fgets</code>不会引起错误。</p>\n</blockquote><p>一个例子</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:55ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">/*</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\">  </span></span><span style=\"--0:#616972;--1:#99A0A6\">把标准输入读取的文本行逐行复制到标准输出。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">*/</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">MAX_LINE_LENGTH</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1024</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">copylines</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">input</span><span style=\"--0:#24292E;--1:#E1E4E8\">, FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">output</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">buffer</span><span style=\"--0:#24292E;--1:#E1E4E8\">[MAX_LINE_LENGTH];</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">while</span><span style=\"--0:#24292E;--1:#E1E4E8\">( </span><span style=\"--0:#6F42C1;--1:#B392F0\">fgets</span><span style=\"--0:#24292E;--1:#E1E4E8\">(buffer, MAX_LINE_LENGTH, input) </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">fputs</span><span style=\"--0:#24292E;--1:#E1E4E8\">(buffer, output);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"1510-格式化的行io\">15.10 格式化的行I/O<a class=\"anchor\" href=\"#1510-格式化的行io\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>“格式化的行I/O”这个名字从某种意义上并不准确，因为 <code>scanf</code> 和 <code>printf</code> 函数家族并不仅限于单行。它们也可以在行的一部分或多行上执行I/O操作。</li>\n</ul><section><h3 id=\"15101-scanf家族\">15.10.1 scanf家族<a class=\"anchor\" href=\"#15101-scanf家族\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:56ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">fscanf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">stream</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">format</span><span style=\"--0:#24292E;--1:#E1E4E8\">, ...);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">scanf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">format</span><span style=\"--0:#24292E;--1:#E1E4E8\">, ...);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">sscanf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">string</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">format</span><span style=\"--0:#24292E;--1:#E1E4E8\">, ...);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><em><strong>函数无法验证对应的指针参数输入是否是对应格式代码的正确类型。函数会假定它们是正确的，于是继续执行并使用它们。</strong></em></p></section><section><h3 id=\"15102-scanf格式代码\">15.10.2 scanf格式代码<a class=\"anchor\" href=\"#15102-scanf格式代码\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li><strong>空白字符</strong>————与输入中的零个或多个空白字符相匹配，在处理过程中将被忽略。</li>\n<li><strong>格式代码</strong>————它们指定函数如何解释接下来的输入字符。</li>\n<li><strong>其他字符</strong>————当任何其他字符出现在格式字符串时，下一个输入字符必须与它匹配。如果匹配，该输入字符随后被丢弃；如果不匹配，函数就不再读取直接返回。</li>\n</ul><section><h4 id=\"格式代码格式\">格式代码格式<a class=\"anchor\" href=\"#格式代码格式\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><ul>\n<li>\n<p>格式代码都是以一个百分号开头，后面可以是</p>\n<ul>\n<li>一个可选的星号（赋值抑制符）</li>\n<li>一个可选的宽度</li>\n<li>一个可选的限定符</li>\n<li>格式代码</li>\n</ul>\n</li>\n<li>\n<p>可选的星号具体使用方法\n假输入流中有数据：<code>Item_A: 100, Item_B: 200</code></p>\n</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:46ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> val_b;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 使用 %*s 跳过 \"Item_A:\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 使用 %*d 跳过 100</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 使用 %*c 跳过 逗号和空格</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// Item_B: 选项被匹配后丢弃</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 只读取Item_B 的值</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">scanf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">%*s</span><span style=\"--0:#032F62;--1:#9ECBFF\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">%*d</span><span style=\"--0:#032F62;--1:#9ECBFF\">, Item_B: </span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;</span><span style=\"--0:#AE4B07;--1:#FFAB70\">val_b</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 结果：val_b 将被赋值为 200，流中的 \"Item_A: 100, \"部分被跳过</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h4 id=\"scanf限定符\">scanf限定符<a class=\"anchor\" href=\"#scanf限定符\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\">限定符</th><th align=\"left\">作用 (用于指定参数大小)</th><th align=\"left\">适用的类型码</th><th align=\"left\">对应的 C 类型</th></tr></thead><tbody><tr><td align=\"center\"><strong><code>h</code></strong></td><td align=\"left\">读取短整数（Half word size）</td><td align=\"left\"><code>d</code>, <code>i</code>, <code>u</code>, <code>o</code>, <code>x</code>, <code>n</code></td><td align=\"left\"><code>short int</code>, <code>unsigned short int</code></td></tr><tr><td align=\"center\"><strong><code>hh</code></strong></td><td align=\"left\">读取字符大小的整数</td><td align=\"left\"><code>d</code>, <code>i</code>, <code>u</code>, <code>o</code>, <code>x</code>, <code>n</code></td><td align=\"left\"><code>signed char</code>, <code>unsigned char</code></td></tr><tr><td align=\"center\"><strong><code>l</code></strong></td><td align=\"left\">读取长整数</td><td align=\"left\"><code>d</code>, <code>i</code>, <code>u</code>, <code>o</code>, <code>x</code>, <code>n</code></td><td align=\"left\"><code>long int</code>, <code>unsigned long int</code></td></tr><tr><td align=\"center\"><strong><code>ll</code></strong></td><td align=\"left\">读取超长整数</td><td align=\"left\"><code>d</code>, <code>i</code>, <code>u</code>, <code>o</code>, <code>x</code>, <code>n</code></td><td align=\"left\"><code>long long int</code>, <code>unsigned long long int</code></td></tr><tr><td align=\"center\"><strong><code>l</code></strong></td><td align=\"left\">读取双精度浮点数</td><td align=\"left\"><code>f</code>, <code>e</code>, <code>g</code>, <code>a</code></td><td align=\"left\"><code>double</code> (注意：<code>%f</code> 读取 <code>float</code>)</td></tr><tr><td align=\"center\"><strong><code>L</code></strong></td><td align=\"left\">读取超长双精度浮点数</td><td align=\"left\"><code>f</code>, <code>e</code>, <code>g</code>, <code>a</code></td><td align=\"left\"><code>long double</code></td></tr><tr><td align=\"center\"><strong><code>z</code></strong></td><td align=\"left\">读取 <code>size_t</code> 类型（无符号）</td><td align=\"left\"><code>d</code>, <code>i</code>, <code>u</code>, <code>o</code>, <code>x</code>, <code>n</code></td><td align=\"left\"><code>size_t</code></td></tr><tr><td align=\"center\"><strong><code>j</code></strong></td><td align=\"left\">读取最大宽度整数</td><td align=\"left\"><code>d</code>, <code>i</code>, <code>u</code>, <code>o</code>, <code>x</code>, <code>n</code></td><td align=\"left\"><code>intmax_t</code>, <code>uintmax_t</code></td></tr><tr><td align=\"center\"><strong><code>t</code></strong></td><td align=\"left\">读取指针差值类型</td><td align=\"left\"><code>d</code>, <code>i</code>, <code>u</code>, <code>o</code>, <code>x</code>, <code>n</code></td><td align=\"left\"><code>ptrdiff_t</code></td></tr></tbody></table><p>一个不能总是正确接收参数的<code>fscanf()</code></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:79ch\"><code><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> a, b, c;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">a </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> b </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> c </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">f </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span><span style=\"--0:#6F42C1;--1:#B392F0\">fopen</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"./test.txt\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"r+\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">f1 </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span><span style=\"--0:#6F42C1;--1:#B392F0\">fopen</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"./testout.txt\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"r+\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (f </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">||</span><span style=\"--0:#24292E;--1:#E1E4E8\"> f1 </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">perror</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Failed to read from stream test.txt.</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EXIT_FAILURE;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">fscanf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(f, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;</span><span style=\"--0:#AE4B07;--1:#FFAB70\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;</span><span style=\"--0:#AE4B07;--1:#FFAB70\">b</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#BF3441;--1:#F97583\">==</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span><span style=\"--0:#616972;--1:#99A0A6\"> // 这里如果接收的不是两个整型变量就会导致循环终止，且fscanf跳过空白字符，</span></div></div><div class=\"ec-line\" style=\"--ecIndent:11ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">           </span><span style=\"--0:#616972;--1:#99A0A6\">// 所以它没有办法验证这两个值是位于同一行还是分属于两个不同的输入行</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">fprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(stdout, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Two number i got from stream f to stdout is </span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\"> - </span><span style=\"--0:#005CC5;--1:#79B8FF\">%d\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, a,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">b);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 重置文件指针到文件开头</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">rewind</span><span style=\"--0:#24292E;--1:#E1E4E8\">(f);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> nfield </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">fscanf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(f, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">%4d</span><span style=\"--0:#032F62;--1:#9ECBFF\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">%4d</span><span style=\"--0:#032F62;--1:#9ECBFF\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">%4d</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;</span><span style=\"--0:#AE4B07;--1:#FFAB70\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;</span><span style=\"--0:#AE4B07;--1:#FFAB70\">b</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;</span><span style=\"--0:#AE4B07;--1:#FFAB70\">c</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (nfield </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">fprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(f1, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Two number i got from stream f to f1 is </span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\"> - </span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, a, b);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">else</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (nfield </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">3</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">fprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(f1, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Three number i got from stream f to f1 is </span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\"> - </span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\"> - </span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, a, b,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">c);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fclose</span><span style=\"--0:#24292E;--1:#E1E4E8\">(f1);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fclose</span><span style=\"--0:#24292E;--1:#E1E4E8\">(f);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>一个更为可靠的方法读取这种类型的<code>fscanf()</code></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:65ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">BUFFER_SIZE</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">100</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">function</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">input</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> a, b, c, d, e;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">buffer</span><span style=\"--0:#24292E;--1:#E1E4E8\">[BUFFER_SIZE];</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">while</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">fgets</span><span style=\"--0:#24292E;--1:#E1E4E8\">(buffer, BUFFER_SIZE, input) </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">sscanf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(buffer,</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\">a, </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\">b, </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\">c, </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\">d, </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\">e) </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">4</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#6F42C1;--1:#B392F0\">fprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(stderr,</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Bad input skipped: </span><span style=\"--0:#005CC5;--1:#79B8FF\">%s</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, buffer);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#BF3441;--1:#F97583\">continue</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 处理这组输入</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section><section><h3 id=\"15103-printf家族\">15.10.3 printf家族<a class=\"anchor\" href=\"#15103-printf家族\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:51ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">fprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">stream</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">format</span><span style=\"--0:#24292E;--1:#E1E4E8\">, ...);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">format</span><span style=\"--0:#24292E;--1:#E1E4E8\">, ...);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">sprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">buffer</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">format</span><span style=\"--0:#24292E;--1:#E1E4E8\">, ...);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p><code>sprintf()</code>被认为是有缺陷的(不安全的)，主要因为它存在固有的缓冲区溢出(Buffer Overflow)风险。</p>\n<p>当 buffer被设置为一个固定大小的缓冲区时会有可能超出限制，且无法阻止其<strong>继续覆盖相邻的内存</strong>。</p>\n<blockquote>\n<p>C99 标准引入了 <code>snprintf</code> 解决<code>sprintf</code>的安全问题。</p>\n</blockquote>\n</blockquote><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:62ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">snprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">str</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">size</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">format</span><span style=\"--0:#24292E;--1:#E1E4E8\">, ...);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"15104-printf-格式代码\">15.10.4 printf 格式代码<a class=\"anchor\" href=\"#15104-printf-格式代码\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong><code>printf</code>家族格式代码和<code>scanf</code>格式代码类似</strong></p><p>几个使用<code>printf</code>格式代码的例子</p><ol>\n<li>用<code>printf</code>格式字符串</li>\n</ol>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\">格式代码</th><th align=\"center\">转换后的字符串</th><th align=\"center\"></th><th align=\"center\"></th></tr></thead><tbody><tr><td align=\"center\">%s</td><td align=\"center\">A</td><td align=\"center\">ABC</td><td align=\"center\">ABCDEFGH</td></tr><tr><td align=\"center\">%5s</td><td align=\"center\">[][][][]A</td><td align=\"center\">[][]ABC</td><td align=\"center\">ABCDEFGH</td></tr><tr><td align=\"center\">%.5s</td><td align=\"center\">A</td><td align=\"center\">ABC</td><td align=\"center\">ABCDE</td></tr><tr><td align=\"center\">%5.5s</td><td align=\"center\">[][][][]A</td><td align=\"center\">[][]ABC</td><td align=\"center\">ABCDE</td></tr><tr><td align=\"center\">%-5s</td><td align=\"center\">A[][][][]</td><td align=\"center\">ABC[][]</td><td align=\"center\">ABCDEFGH</td></tr></tbody></table><blockquote>\n<p><code>%.5s</code> 中的<code>.5</code>是限制精度(限制字符数)，<code>%.5d</code>中的<code>.5</code>是限制宽度的，而<code>%5d</code>是限制精度(限制数字位数)。</p>\n</blockquote><ol start=\"2\">\n<li>用<code>printf</code>格式化整数</li>\n</ol>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\">格式代码</th><th align=\"center\">转换后的数值</th><th align=\"center\"></th><th align=\"center\"></th><th align=\"center\"></th></tr></thead><tbody><tr><td align=\"center\">%d</td><td align=\"center\">1</td><td align=\"center\">-12</td><td align=\"center\">12345</td><td align=\"center\">123456789</td></tr><tr><td align=\"center\">%6d</td><td align=\"center\">[][][][][]1</td><td align=\"center\">[][][]-12</td><td align=\"center\">[]12345</td><td align=\"center\">123456789</td></tr><tr><td align=\"center\">%.4d</td><td align=\"center\">0001</td><td align=\"center\">-0012</td><td align=\"center\">12345</td><td align=\"center\">123456789</td></tr><tr><td align=\"center\">%6.4d</td><td align=\"center\">[][]0001</td><td align=\"center\">[]-0012</td><td align=\"center\">[]12345</td><td align=\"center\">123456789</td></tr><tr><td align=\"center\">%-4d</td><td align=\"center\">1[][][][]</td><td align=\"center\">-12[]</td><td align=\"center\">12345</td><td align=\"center\">123456789</td></tr><tr><td align=\"center\">%04d</td><td align=\"center\">0001</td><td align=\"center\">-012</td><td align=\"center\">12345</td><td align=\"center\">123456789</td></tr><tr><td align=\"center\">%+d</td><td align=\"center\">+1</td><td align=\"center\">-12</td><td align=\"center\">+12345</td><td align=\"center\">+123456789</td></tr></tbody></table><ol start=\"3\">\n<li>用<code>printf</code>格式化浮点数</li>\n</ol>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\">格式代码</th><th align=\"center\">转换后的数值</th><th align=\"center\"></th><th align=\"center\"></th><th align=\"center\"></th></tr></thead><tbody><tr><td align=\"center\"></td><td align=\"center\">1</td><td align=\"center\">.01</td><td align=\"center\">.00012345</td><td align=\"center\">12345.6789</td></tr><tr><td align=\"center\">%f</td><td align=\"center\">1.000000</td><td align=\"center\">0.010000</td><td align=\"center\">0.000123</td><td align=\"center\">12345.678900</td></tr><tr><td align=\"center\">%10.2f</td><td align=\"center\">[][][][][][]1.00</td><td align=\"center\">[][][][][][]0.01</td><td align=\"center\">[][][][][][]0.00</td><td align=\"center\">[][]12345.67</td></tr><tr><td align=\"center\">%e</td><td align=\"center\">1.000000e+00</td><td align=\"center\">1.000000e-02</td><td align=\"center\">1.234500e-04</td><td align=\"center\">1.234568e+04</td></tr><tr><td align=\"center\">%.4e</td><td align=\"center\">1.0000e+00</td><td align=\"center\">1.0000e-02</td><td align=\"center\">1.2345e-04</td><td align=\"center\">1.2346e+04</td></tr><tr><td align=\"center\">%g</td><td align=\"center\">1</td><td align=\"center\">0.01</td><td align=\"center\">0.00012345</td><td align=\"center\">12345.7</td></tr></tbody></table><ol start=\"4\">\n<li>用<code>printf</code>格式化大浮点值</li>\n</ol>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\">格式代码</th><th align=\"center\">转换后的数值</th></tr></thead><tbody><tr><td align=\"center\"></td><td align=\"center\">6.023e23</td></tr><tr><td align=\"center\">%f</td><td align=\"center\">6.02299999999999975882752.000000</td></tr><tr><td align=\"center\">%10.2f</td><td align=\"center\">6.02299999999999975882752.000000</td></tr><tr><td align=\"center\">%e</td><td align=\"center\">6.023000e+23</td></tr><tr><td align=\"center\">%.4e</td><td align=\"center\">6.0230e+23</td></tr><tr><td align=\"center\">%g</td><td align=\"center\">6.023e+23</td></tr></tbody></table></section></section><section><h2 id=\"1511-二进制io\">15.11 二进制I/O<a class=\"anchor\" href=\"#1511-二进制io\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>把数据写到文件效率最高的方法是用二进制形式写入。二进制输出<strong>避免了在数值转换为字符串过程中所涉及的开销和精度损失</strong>。但二进制数据并非人眼所能阅读，所以这个技巧只有<strong>当数据将被另一个程序按顺序读取时</strong>才能使用。</li>\n</ul><p><code>fread</code>函数用于读取二进制数据，<code>fwrite</code>函数用于写入二进制数据。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:69ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">fread</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">buffer</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">size</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">count</span><span style=\"--0:#24292E;--1:#E1E4E8\">, FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">stream</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">fwrite</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">buffer</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">size</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">count</span><span style=\"--0:#24292E;--1:#E1E4E8\">, FILE</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">stream</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>buffer</code>是一个指向用于保存数据的内存位置的指针，<code>size</code>是缓冲区中每个元素的字节数，<code>count</code>是读取或写入的元素数，当然<code>stream</code>是数据读取或写入的流。</p><p>一个例子</p><div class=\"expressive-code\"><figure class=\"frame\" style=\"--lnWidth:3ch\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:77ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdlib.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;string.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 1. 定义一个存储数据的结构体</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">typedef</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> id;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">name</span><span style=\"--0:#24292E;--1:#E1E4E8\">[</span><span style=\"--0:#005CC5;--1:#79B8FF\">20</span><span style=\"--0:#24292E;--1:#E1E4E8\">];</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">float</span><span style=\"--0:#24292E;--1:#E1E4E8\"> salary;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">} Employee;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 辅助函数：打印结构体内容</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">print_employee</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Employee </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">e</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span><span style=\"--0:#616972;--1:#99A0A6\"> // const *类型 指向常量的指针</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(stdout, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"ID: </span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\">, Name: </span><span style=\"--0:#005CC5;--1:#79B8FF\">%-20s</span><span style=\"--0:#032F62;--1:#9ECBFF\">, Salary: </span><span style=\"--0:#005CC5;--1:#79B8FF\">%.2f\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, e->id, e->name,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:10ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">          </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">e->salary);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 定义文件名</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">DATA_FILE</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"employees.bin\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 2. 准备数据：一个结构体数组</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">Employee staff_data</span><span style=\"--0:#BF3441;--1:#F97583\">[]</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {{</span><span style=\"--0:#005CC5;--1:#79B8FF\">101</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Alice Johnson\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#005CC5;--1:#79B8FF\">60000.00</span><span style=\"--0:#BF3441;--1:#F97583\">f</span><span style=\"--0:#24292E;--1:#E1E4E8\">},</span></div></div><div class=\"ec-line\" style=\"--ecIndent:27ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                           </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span><span style=\"--0:#005CC5;--1:#79B8FF\">102</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Bob Smith\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#005CC5;--1:#79B8FF\">75000.50</span><span style=\"--0:#BF3441;--1:#F97583\">f</span><span style=\"--0:#24292E;--1:#E1E4E8\">},</span></div></div><div class=\"ec-line\" style=\"--ecIndent:27ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">                           </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span><span style=\"--0:#005CC5;--1:#79B8FF\">103</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Charlie Brown\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#005CC5;--1:#79B8FF\">50000.25</span><span style=\"--0:#BF3441;--1:#F97583\">f</span><span style=\"--0:#24292E;--1:#E1E4E8\">}};</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> num_employees </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(staff_data) </span><span style=\"--0:#BF3441;--1:#F97583\">/</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(Employee);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// ------------------------------------------------------------------------</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 第一步：使用 fwrite 将结构体数组写入文件（输出流）</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// ------------------------------------------------------------------------</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">output_file </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">fopen</span><span style=\"--0:#24292E;--1:#E1E4E8\">(DATA_FILE, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"wb\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span><span style=\"--0:#616972;--1:#99A0A6\"> // write binary</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (output_file </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">perror</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Error opening output file\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EXIT_FAILURE;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// fwrite(ptr, size, count, stream)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// ptr: 要写入的数据块的起始地址</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// size: 每个数据块的大小（这里是 Employee 结构体的大小）</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// count: 要写入的数据块的数量（这里是数组元素的数量）</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// stream: 文件流指针</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> written_count </span><span style=\"--0:#BF3441;--1:#F97583\">=</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">46</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#6F42C1;--1:#B392F0\">fwrite</span><span style=\"--0:#24292E;--1:#E1E4E8\">(staff_data, </span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(Employee), num_employees, output_file);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">47</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">48</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (written_count </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> num_employees) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">49</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">fprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(stdout, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"成功将 </span><span style=\"--0:#005CC5;--1:#79B8FF\">%zu</span><span style=\"--0:#032F62;--1:#9ECBFF\"> 个 Employee 记录写入文件：</span><span style=\"--0:#005CC5;--1:#79B8FF\">%s\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, written_count,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">50</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">DATA_FILE);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">51</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">else</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">52</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">fprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(stderr, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"警告：写入失败或部分失败。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">53</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">54</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">55</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fclose</span><span style=\"--0:#24292E;--1:#E1E4E8\">(output_file);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">56</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">57</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// ------------------------------------------------------------------------</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">58</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 第二步：使用 fread 从文件中读取结构体数组（输入流）</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">59</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// ------------------------------------------------------------------------</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">60</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">61</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">input_file </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">fopen</span><span style=\"--0:#24292E;--1:#E1E4E8\">(DATA_FILE, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"rb\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span><span style=\"--0:#616972;--1:#99A0A6\"> // read binary</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">62</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (input_file </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">63</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">perror</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Error opening input file for reading\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">64</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EXIT_FAILURE;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">65</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">66</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">67</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 3. 准备接收数据的缓冲区（创建一个新的数组来存储读取的数据）</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">68</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">Employee </span><span style=\"--0:#AE4B07;--1:#FFAB70\">read_data</span><span style=\"--0:#24292E;--1:#E1E4E8\">[num_employees];</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">69</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">70</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(stdout, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">从文件读取数据并输出到标准输出(stdout)：</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">71</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"--------------------------------------------------------</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">72</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">73</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// fread(ptr, size, count, stream)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">74</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// ptr: 存储读取数据的内存地址</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">75</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// size: 每个数据块的大小（这里是 Employee 结构体的大小）</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">76</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// count: 尝试读取的数据块的数量</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">77</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// stream: 文件流指针</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">78</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> read_count </span><span style=\"--0:#BF3441;--1:#F97583\">=</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">79</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#6F42C1;--1:#B392F0\">fread</span><span style=\"--0:#24292E;--1:#E1E4E8\">(read_data, </span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(Employee), num_employees, input_file);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">80</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">81</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (read_count </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> num_employees) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">82</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"成功读取 </span><span style=\"--0:#005CC5;--1:#79B8FF\">%zu</span><span style=\"--0:#032F62;--1:#9ECBFF\"> 个 Employee 记录。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, read_count);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">83</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">84</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 4. 将读取到的结构体数组元素输出到标准输出</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">85</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#BF3441;--1:#F97583\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> i </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">; i </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> read_count; i</span><span style=\"--0:#BF3441;--1:#F97583\">++</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">86</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Record </span><span style=\"--0:#005CC5;--1:#79B8FF\">%zu</span><span style=\"--0:#032F62;--1:#9ECBFF\">: \"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, i </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">87</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#6F42C1;--1:#B392F0\">print_employee</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;</span><span style=\"--0:#AE4B07;--1:#FFAB70\">read_data</span><span style=\"--0:#24292E;--1:#E1E4E8\">[i]);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">88</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">89</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">else</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">90</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">fprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(stderr, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"警告：尝试读取 </span><span style=\"--0:#005CC5;--1:#79B8FF\">%zu</span><span style=\"--0:#032F62;--1:#9ECBFF\"> 个记录，但只读取了 </span><span style=\"--0:#005CC5;--1:#79B8FF\">%zu</span><span style=\"--0:#032F62;--1:#9ECBFF\"> 个。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">91</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">            </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">num_employees, read_count);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">92</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">93</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">94</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fclose</span><span style=\"--0:#24292E;--1:#E1E4E8\">(input_file);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">95</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">96</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 清理创建的文件（可选）</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">97</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// remove(DATA_FILE);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">98</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">99</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EXIT_SUCCESS;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">100</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"1512-刷新和定位数据\">15.12 刷新和定位数据<a class=\"anchor\" href=\"#1512-刷新和定位数据\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>当我们需要立即把输出缓冲区的数据进行物理写入时，应该使用<code>fflush</code>这个函数。例如，调用<code>fflush</code>函数保证调试信息实际打印出来，而不是保存在缓冲区中直到以后才打印。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:25ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">fflush</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">stream</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>在正常情况下，数据以线性的方式写入，这意味着后面写入的数据在文件中的位置是在以前所有写入数据的后面。C同时支持随机访问I/O，也就是以任意顺序访问文件的不同位置。\n<code>ftell</code>和<code>fseek</code>函数支持上面的操作。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:47ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">long</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ftell</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">stream</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">fseek</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">stream</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">long</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">offset</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">from</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>ftell</code>返回流的当前位置，也就是说，下一个读取或写入将要开始的位置距离文件起始位置的偏移量(offset)。这个函数允许你保存一个文件的当前位置，这样你可能在将来回到这个位置。在二进制流中这个值就是当前位置距离文件其实位置之间的字节数。</p><p>在文本流中这个值表示一个位置，但它并不一定准确地表示当前位置和文件起始位置之间的字符数，因为有些系统将对行末字符进行翻译转换。但是，<code>ftell</code>函数返回的值总是可以用于<code>fseek</code>函数中，作为一个距离文件起始位置的偏移量。</p><p><code>fseek</code>函数运行你在一个流中定位。这个操作将改变下一个读取或写入操作的位置。它的第一个参数是需要改变的流，第二个和第三个参数标识文件中需要定位的位置。</p><p>试图定位到一个文件的起始位置之前是一个错误。定位到文件尾之后并进行写入将扩展这个文件。定位到文件尾之后并进行读取将导致返回一条“到达文件尾”的信息。在二进制流中，从<strong>SEEK_END</strong>进行定位可能不被支持，所以应该避免。在文本流中，如果from是<strong>SEEK_CUR</strong>或<strong>SEEK_END</strong>，offset必须是零。如果from是<strong>SEEK_SET</strong>，offset必须是一个从同一个流中以前调用<code>ftell</code>所返回的值。</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\">如果from是</th><th align=\"center\">你将定位到…</th></tr></thead><tbody><tr><td align=\"center\">SEEK_SET</td><td align=\"center\">从流的起始位置起offset个字节，offset必须是一个非负值</td></tr><tr><td align=\"center\">SEEK_CUR</td><td align=\"center\">从流的当前位置起offset个字节，offset可正可负</td></tr><tr><td align=\"center\">SEEK_END</td><td align=\"center\">从流的尾部位置起offset个字节，offset可正可负。如果是正值它将定位到文件尾的后面</td></tr></tbody></table><p>另外还有三个额外的函数，用一些限制更严的方式指执行相同的任务。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:50ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">rewind</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">stream</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">fgetpos</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">stream</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#005CC5;--1:#79B8FF\">fpos_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">position</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">fsetpos</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">stream</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#005CC5;--1:#79B8FF\">fpos_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">position</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>rewind</code>函数将读/写指针设置回指定流的起始位置。它同时清除流的错误提示标志。<code>fgetpos</code>和<code>fsetpos</code>函数分别是<code>ftell</code>和<code>fseek</code>函数的替代方案。</p><p>它们的主要区别在于这对函数接受一个指向<code>fpos_t</code>的指针作为参数。<code>fgetpos</code>在这个位置存储文件的当前位置，<code>fsetpos</code>把文件位置设置为存储在这个位置的值。</p><p>一个使用这些定位函数的例子</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:72ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdlib.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;string.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">FILENAME</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"demo_file.txt\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">fp;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// ===================================================================</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 1. 打开文件并写入数据 (使用 \"w+\" 模式允许读写)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// ===================================================================</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">fp </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">fopen</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILENAME, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"w+\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (fp </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">perror</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Error opening file\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EXIT_FAILURE;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"--- 开始写入和控制文件指针 ---</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 写入第一个字符串</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fputs</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"ABCDEFGHIJKLMNOP\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, fp);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"1. 写入 'ABCDEFGHIJKLMNOP'</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// -- fflush 示例 --</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 尽管没有换行符，fflush 也会强制将数据从缓冲区写入磁盘</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fflush</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp);</span><span style=\"--0:#616972;--1:#99A0A6\"> // fputs没有写入换行符，这里本来fputs的</span></div></div><div class=\"ec-line\" style=\"--ecIndent:14ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\">              </span><span style=\"--0:#616972;--1:#99A0A6\">// 第一个参数写入到缓冲区还未到fp中，但是</span></div></div><div class=\"ec-line\" style=\"--ecIndent:14ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\">              </span><span style=\"--0:#616972;--1:#99A0A6\">// 执行fflush可以强制从缓冲区写入磁盘</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"2. 使用fflush 强制刷新数据到文件。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// -- ftell 和 fgetpos 示例 --</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">long</span><span style=\"--0:#24292E;--1:#E1E4E8\"> initial_pos </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ftell</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp);</span><span style=\"--0:#616972;--1:#99A0A6\"> // 记录当前位置 （通常是16，即字符串末尾）</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#005CC5;--1:#79B8FF\">fpos_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> saved_fpos;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fgetpos</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp, </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\">saved_fpos);</span><span style=\"--0:#616972;--1:#99A0A6\"> // 记录当前位置到 fpos_t 结构体中</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"3. 当前文件指针位置(ftell): </span><span style=\"--0:#005CC5;--1:#79B8FF\">%ld\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, initial_pos);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 写入第二个字符串</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fputs</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"XYZ\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, fp);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"4. 写入 'XYZ'。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// -- fssek 示例 --</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">46</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// fseek(stream, offset, origin);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">47</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// origin: SEEK_SET 从文件开头， SEEK_CUR 从当前位置，SEEK_END 从文件末尾</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">48</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">49</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 将指针 重新定位到第五个字符(索引5)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">50</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fseek</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp, </span><span style=\"--0:#005CC5;--1:#79B8FF\">5</span><span style=\"--0:#24292E;--1:#E1E4E8\">, SEEK_SET);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">51</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"5. 使用 fseek(5, SEEK_SET) 跳转到索引5。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">52</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">53</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 写入新数据 ，会覆盖掉原有的 'FGHI'</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">54</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fputs</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"1234\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, fp);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">55</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"6. 写入 '1234' (覆盖掉原有的 'FGHI').</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">56</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">57</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// -- fsetpos 示例 --</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">58</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">59</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 将指针重新定位回之前 fgetpos 记录的位置 (initial_pos = 16)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">60</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fsetpos</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp, </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\">saved_fpos);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">61</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"7. 使用 fsetpos 跳转回保存的位置(</span><span style=\"--0:#005CC5;--1:#79B8FF\">%ld</span><span style=\"--0:#032F62;--1:#9ECBFF\">)。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, initial_pos);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">62</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">63</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 写入数据，会在 16 处 继续 写入</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">64</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fputs</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"999\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, fp);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">65</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"8. 写入'999'。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">66</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">67</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// --- rewind 示例 ---</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">68</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">rewind</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">69</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"9. 使用 rewind 将指针 重置到文件开头。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">70</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">71</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// ===================================================================</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">72</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 2. 从开头读取最终文件内容</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">73</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// ===================================================================</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">74</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">75</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">--- 读取文件内容进行验证 ---</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">76</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">buffer</span><span style=\"--0:#24292E;--1:#E1E4E8\">[</span><span style=\"--0:#005CC5;--1:#79B8FF\">50</span><span style=\"--0:#24292E;--1:#E1E4E8\">];</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">77</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">78</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 尝试从头读取整个文件</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">79</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">fgets</span><span style=\"--0:#24292E;--1:#E1E4E8\">(buffer, </span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(buffer), fp) </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">80</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"文件最终内容：</span><span style=\"--0:#005CC5;--1:#79B8FF\">%s\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, buffer);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">81</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">else</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">82</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"读取文件失败</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">83</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">84</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fclose</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">85</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">86</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EXIT_SUCCESS;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">87</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"1513-改变缓冲方式\">15.13 改变缓冲方式<a class=\"anchor\" href=\"#1513-改变缓冲方式\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>两种改变流缓冲方式的函数</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:60ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">setbuf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILE</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">stream</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">buf</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">setvbuf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILE</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">stream</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">buf</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">mode</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">size</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>setbuf</code> 设置了另一个数组，用于对流进行缓冲。这个数组的字符长度必须为BUFSIZ(在stdio.h中定义)。为一个流自行指定缓冲区可以防I/O函数库为它动态分配一个缓冲区。如果用一个NULL参数调用这个函数，<code>setbuf</code>函数将关闭流的所有缓冲方式。字符准确地将程序所规定的方式进行读取和写入。</p><blockquote>\n<p>一个流缓冲区使用一个自动数组是很危险的。</p>\n</blockquote><p><code>setvbuf</code>函数更为通用。<code>mode</code>参数用于指定缓冲的类型。<strong>_IONBF</strong>指定一个不缓冲的流，<strong>_IOLBF</strong>指定一个行缓冲流，<strong>_IOLBF</strong>指定一个行缓冲流。所谓行缓冲，就是每当一个换行符写入到缓冲区时，缓冲区便进行刷新。</p><p><code>buf</code>和<code>size</code>参数用于指定需要使用的缓冲区。如果<code>buf</code>为NULL，那么<code>size</code>的值必须是0。\n一般而言，最好用一个长度为BUFSIZ的字符数组作为缓冲区。</p><p>一个例子</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:67ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdlib.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;string.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">FILENAME</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"big_buffer_test.txt\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">CUSTOM_BUF_SIZE</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">4096</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">4</span><span style=\"--0:#616972;--1:#99A0A6\"> // 16 KB 的缓冲区大小</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">fp;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">custom_buffer</span><span style=\"--0:#24292E;--1:#E1E4E8\">[CUSTOM_BUF_SIZE];</span><span style=\"--0:#616972;--1:#99A0A6\"> // 声明自定义的内存缓冲区</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 1. 打开文件进行写入</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">fp </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">fopen</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILENAME, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"w\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (fp </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">perror</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Error opening file.\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EXIT_FAILURE;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 2. 使用 setvbuf 设置为全缓冲模式， 并指定自定义缓冲区</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 目标：只有当 16KB 缓冲区写满时，才进行一次磁盘写入操作</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> result </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">setvbuf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp, custom_buffer, _IOFBF, CUSTOM_BUF_SIZE);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (result </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">fprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(stderr, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"setvbuf 设置失败!</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">fclose</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EXIT_FAILURE;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"文件流已设置为 </span><span style=\"--0:#005CC5;--1:#79B8FF\">%zu</span><span style=\"--0:#032F62;--1:#9ECBFF\"> 字节的全缓冲模式。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, (</span><span style=\"--0:#BF3441;--1:#F97583\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span><span style=\"--0:#AE4B07;--1:#FFAB70\">CUSTOM_BUF_SIZE</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 3. 写入数据</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> i </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">; i </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">100</span><span style=\"--0:#24292E;--1:#E1E4E8\">; i</span><span style=\"--0:#BF3441;--1:#F97583\">++</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">fprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Line </span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\"> : This is buffered data.</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, i);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"数据已写入缓冲区，但可能尚未写入磁盘。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 此时，数据仍在内存中的 custom_buffer 中，直到缓冲区满或关闭。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 4. 关闭文件(关闭时会自动冲刷缓冲区)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fclose</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"文件已关闭，缓冲区内容已冲刷到磁盘。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// remove(FILENAME); // 清理原文件(可选)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EXIT_FAILURE;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">46</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"1514-流错误函数\">15.14 流错误函数<a class=\"anchor\" href=\"#1514-流错误函数\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>下面的函数用于判断和管理流的状态</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:28ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">feof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">stream</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ferror</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">stream</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">clearerr</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILE</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">stream</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>如果流当前处于文件尾，<code>feof</code>函数返回真。这个状态可以通过对流执行<code>fseek</code>、<code>rewind</code>或<code>fsetpos</code>函数来清除。<code>ferror</code>函数报告流的错误状态，如果出现任何读/写错误函数就返回真。最后<code>clearerr</code>函数对指定流的错误标志进行重置。</p><p>一个例子</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:72ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdlib.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">FILENAME</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"status_demo.txt\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 辅助函数：检查并报告文件状态</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">report_status</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">fp</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">message</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">fp </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> c;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 1. 创建并初始化文件</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">fp </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">fopen</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILENAME, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"w\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (fp </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EXIT_FAILURE;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fputs</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Hello C I/O.</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, fp);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fclose</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// ===================================================================</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 步骤 A: 正常读取直到 EOF (feof 示例)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// ===================================================================</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">fp </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">fopen</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILENAME, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"r\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (fp </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EXIT_FAILURE;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"1. 首次打开文件，指针位于开头。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">report_status</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"状态A - 读取前\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 读取所有字符直到文件结束</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">while</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ((c </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">fgetc</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp)) </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EOF) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 确保所有数据都被消耗</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">2. 已读取文件所有内容(fgetc 返回 EOF)。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 此时，文件指针越界，EOF标志被设置</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">report_status</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"状态B - 读取到 EOF 之后\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// ===================================================================</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 步骤 B: 制造错误并清除 (ferror 和 clearerr 示例)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// ===================================================================</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 使用 fseek 强制将指针移动到文件末尾（但文件仍然是只读模式）</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">46</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 尝试在只读文件上写入数据，在某些系统上会设置错误标志。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">47</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fseek</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp, </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">, SEEK_END);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">48</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">49</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 尝试写入数据，由于文件以 \"r\" 模式打开（只读），这将失败，并设置错误标志</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">50</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 注意：虽然不能写入，但 ferror 通常在尝试一个非法操作后被设置。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">51</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 在本例中，我们尝试在只读文件上使用 fputc，它会失败并设置 ferror 标志。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">52</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">c </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">fputc</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">'X'</span><span style=\"--0:#24292E;--1:#E1E4E8\">, fp);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">53</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">54</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 检查 fputc 是否失败(通常返回 EOF)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">55</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (c </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EOF) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">56</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">3. 尝试在只读流上写入数据(fputc)失败。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">57</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">58</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">59</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 此时，错误标志 ferror 被设置</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">60</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">report_status</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"状态C - 尝试非法写入后\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">61</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">62</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// clearerr 示例</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">63</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">clearerr</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">64</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"4. 使用 clearerr() 清除了 EOF 和错误标志。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">65</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">66</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">report_status</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"状态D - clearerr() 之后\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">67</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">68</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fclose</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">69</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">remove</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILENAME);</span><span style=\"--0:#616972;--1:#99A0A6\"> // 清理文件</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">70</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">71</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EXIT_FAILURE;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">72</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">73</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">74</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">report_status</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">fp</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">message</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">75</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">--- </span><span style=\"--0:#005CC5;--1:#79B8FF\">%s</span><span style=\"--0:#032F62;--1:#9ECBFF\"> ---</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, message);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">76</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">77</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// feof(fp): 检测是否到达文件末尾</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">78</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">feof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp)) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">79</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"FE_EOF: 文件流已到达文件末尾 (EOF)。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">80</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">else</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">81</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"FE_EOF: 文件流未到达文件末尾。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">82</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">83</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">84</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// ferror(fp)：检测是否发生了 I/O 错误</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">85</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">ferror</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp)) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">86</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"F_ERROR: 文件流发生 I/O 错误。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">87</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">else</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">88</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"F_ERROR: 文件流状态正常。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">89</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">90</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"1515-临时文件\">15.15 临时文件<a class=\"anchor\" href=\"#1515-临时文件\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>使用<code>tempfile()</code>函数创建一个以<code>wb+</code>模式打开的文本文件用来临时保存数据。当程序结束时这个文件便被删除<code>自动被执行remove()</code>函数。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:20ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#6F42C1;--1:#B392F0\">tmpfile</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>如果想要文件以只读模式打开或不以<code>wb+</code>模式打开必须使用<code>fopen()</code>函数操作</p>\n</blockquote><p>可以使用<code>tmpnam()</code>函数为临时文件创建一个文件名</p><blockquote>\n<p>tmpnam() 仅仅是生成一个唯一的文件名字符串，但不创建文件。你需要手动使用 fopen() 来创建和打开文件，并负责在程序结束时手动删除它。且<strong>tmpnam</strong>不安全！</p>\n</blockquote><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:25ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#6F42C1;--1:#B392F0\">tmpnam</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">name</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>两个例子</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:64ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\"># include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\"># include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdlib.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\"># include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;string.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">tmp_fp;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> write_data</span><span style=\"--0:#BF3441;--1:#F97583\">[]</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Temporary data buffer\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">read_buffer</span><span style=\"--0:#24292E;--1:#E1E4E8\">[</span><span style=\"--0:#005CC5;--1:#79B8FF\">100</span><span style=\"--0:#24292E;--1:#E1E4E8\">];</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 1. 创建临时文件流</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// FILE* tmpfile(void);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">tmp_fp </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">tmpfile</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (tmp_fp </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">perror</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Failed to open tmpfile.</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EXIT_FAILURE;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"成功创建临时文件流。该文件将在程序退出时自动删除。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 2. 写入数据到临时文件</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">fputs</span><span style=\"--0:#24292E;--1:#E1E4E8\">(write_data, tmp_fp) </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EOF) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"写入数据成功：</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\\"%s\\\"\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, write_data);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">else</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">perror</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Error writing to temporary file\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 3. 将文件指针重置到开头</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">rewind</span><span style=\"--0:#24292E;--1:#E1E4E8\">(tmp_fp);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 4. 从临时文件读取数据</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">fgets</span><span style=\"--0:#24292E;--1:#E1E4E8\">(read_buffer, </span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(read_buffer), tmp_fp) </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"从临时文件读取数据：</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\\"%s\\\"\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, read_buffer);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">else</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">perror</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Error reading from temporary file\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 5. 关闭文件流</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 当文件流关闭时，操作系统会自动删除这个临时文件</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">fclose</span><span style=\"--0:#24292E;--1:#E1E4E8\">(tmp_fp) </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">临时文件流关闭成功，临时文件已被删除。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">else</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">perror</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Error closing temporary file\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">46</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EXIT_SUCCESS;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">47</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:67ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\"># include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\"># include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdlib.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\"># include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;string.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\"># include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;time.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">char</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#AE4B07;--1:#FFAB70\">temp_filename</span><span style=\"--0:#24292E;--1:#E1E4E8\">[L_tmpnam];</span><span style=\"--0:#616972;--1:#99A0A6\"> // L_tmpnam 是 &#x3C;stdio.h> 中的宏，保证缓冲区足够大</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">fp;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 1. 生成一个唯一的文件名</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 如果传入NULL， tmpnam 会使用 内部静态缓冲区，但我们使用局部数组更安全</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">tmpnam</span><span style=\"--0:#24292E;--1:#E1E4E8\">(temp_filename) </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"生成的临时文件名是：</span><span style=\"--0:#005CC5;--1:#79B8FF\">%s\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, temp_filename);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">else</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">fprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(stderr, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"tmpnam failed to generate temporary file.\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EXIT_FAILURE;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 2. 手动创建和打开文件</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">fp </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">fopen</span><span style=\"--0:#24292E;--1:#E1E4E8\">(temp_filename, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"w\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (fp </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">perror</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Error opening the generated temporary file\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EXIT_FAILURE;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"手动创建并打开了文件。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 3. 写入和关闭文件...</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"This is manually managed temporary data.</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fclose</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 4. 【重要】手动删除文件</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">remove</span><span style=\"--0:#24292E;--1:#E1E4E8\">(temp_filename) </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"手动删除了临时文件：</span><span style=\"--0:#005CC5;--1:#79B8FF\">%s\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, temp_filename);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">else</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">perror</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Error deleting temporary file\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EXIT_SUCCESS;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"1516-文件操纵函数\">15.16 文件操纵函数<a class=\"anchor\" href=\"#1516-文件操纵函数\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>有两个函数用于操纵文件但不执行任何输入/输出操作。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:53ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">remove</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">filename</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">rename</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">oldname</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">newname</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>remove</code>函数删除一个指定的文件。如果当remove被调用时文件处于打开状态，其结果取决于编译器。</p><p><code>rename</code>函数用于改变一个文件的名字，从<strong>oldname</strong>改为<strong>newname</strong>。如果已经有一个<strong>newname</strong>的文件存在，其结果取决于编译器。</p><blockquote>\n<p>Tips</p>\n<blockquote>\n<ol>\n<li>调试用<code>printf</code>后加<code>fflush</code></li>\n<li>检查<code>fopen</code>返回值</li>\n<li>改变文件的位置将<strong>丢弃</strong>任何被退回到流的字符</li>\n<li>在使用<code>fgets</code>时指定较大的缓冲区</li>\n<li><code>gets</code>,<code>sprintf</code>溢出检测</li>\n<li>使用自动数组作为流的缓冲区时应多加小心</li>\n<li>使用<code>mkstemp</code>替代<code>tmpnam</code></li>\n</ol>\n</blockquote>\n</blockquote></section></section>\n<section><h1 id=\"-标准函数库\">🤤 标准函数库<a class=\"anchor\" href=\"#-标准函数库\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h2 id=\"161-整型函数\">16.1 整型函数<a class=\"anchor\" href=\"#161-整型函数\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>这组函数返回整型值。这些函数分为三类：<strong>算术</strong>、<strong>随机数</strong>和<strong>字符串转换</strong>。</li>\n</ul><section><h3 id=\"1611-算数stdlibh\">16.1.1 算数&#x3C;stdlib.h><a class=\"anchor\" href=\"#1611-算数stdlibh\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>标准库函数包含了4个整型算数函数。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:44ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">abs</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">value</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">long</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">labs</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">long</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">value</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">div_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">div</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">numerator</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">denominator</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#005CC5;--1:#79B8FF\">ldiv_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ldiv</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">long</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">numer</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">long</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">denom</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>abs</code>函数返回它的参数的绝对值。如果其结果不能用一个整数表示，这个行为是未定义的。\n<code>labs</code>用于执行相同的任务，但它作用的对象是长整数。</p><p><code>div</code>函数把它的第二个参数(分母)除以第一个参数(分子)，产生商和余数，用一个<code>div_t</code>结构返回。这个结构包含下面两个字段。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:14ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> quot;</span><span style=\"--0:#616972;--1:#99A0A6\"> // 商</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> rem;</span><span style=\"--0:#616972;--1:#99A0A6\"> // 余数</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>这两个字段并不一定以这个顺序出现。</p>\n</blockquote></section><section><h3 id=\"1621-随机数stdlibh\">16.2.1 随机数&#x3C;stdlib.h><a class=\"anchor\" href=\"#1621-随机数stdlibh\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>两个函数可以产生<strong>伪随机数(pseudo-random number)</strong>。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:30ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">rand</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">srand</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">unsigned</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">seed</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>rand</code> 返回一个 范围在 0 和 RAND_MAX(至少为32767)之间的伪随机数。\n使用<code>srand</code> 获取随机数数列。</p><p>常见用法</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:32ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdlib.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;string.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;time.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> i, n;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">time_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> t;</span><span style=\"--0:#616972;--1:#99A0A6\"> // &#x3C;time.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">n </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">5</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 初始化随机数发生器</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">srand</span><span style=\"--0:#24292E;--1:#E1E4E8\">((</span><span style=\"--0:#BF3441;--1:#F97583\">unsigned</span><span style=\"--0:#24292E;--1:#E1E4E8\">) </span><span style=\"--0:#6F42C1;--1:#B392F0\">time</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\">t));</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 输出 0 到 49 之间的 5 个随机数</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (i </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">; i </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> n; i</span><span style=\"--0:#BF3441;--1:#F97583\">++</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">%d\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#6F42C1;--1:#B392F0\">rand</span><span style=\"--0:#24292E;--1:#E1E4E8\">() </span><span style=\"--0:#BF3441;--1:#F97583\">%</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">50</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:80ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdlib.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;time.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">TRUE</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">FALSE</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">PRINT_ARR</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">ARR</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#AE4B07;--1:#FFAB70\">SIZE</span><span style=\"--0:#24292E;--1:#E1E4E8\">)                                                   </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">do</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {                                                                         </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> __i;                                                                   </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (__i </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">; __i </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (SIZE); __i</span><span style=\"--0:#BF3441;--1:#F97583\">++</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {                                       </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">%-4d</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, (ARR)[__i]);                                              </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}                                                                          </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);                                                              </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">while</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">shuffle</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">deck</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">n_cards</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">cards</span><span style=\"--0:#24292E;--1:#E1E4E8\">[</span><span style=\"--0:#005CC5;--1:#79B8FF\">10</span><span style=\"--0:#24292E;--1:#E1E4E8\">] </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#005CC5;--1:#79B8FF\">3</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#005CC5;--1:#79B8FF\">4</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#005CC5;--1:#79B8FF\">5</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#005CC5;--1:#79B8FF\">6</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#005CC5;--1:#79B8FF\">7</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#005CC5;--1:#79B8FF\">8</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#005CC5;--1:#79B8FF\">9</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#005CC5;--1:#79B8FF\">10</span><span style=\"--0:#24292E;--1:#E1E4E8\">};</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fputs</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Before shuffle: \"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, stdout);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">PRINT_ARR</span><span style=\"--0:#24292E;--1:#E1E4E8\">(cards, </span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(cards) </span><span style=\"--0:#BF3441;--1:#F97583\">/</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">cards</span><span style=\"--0:#24292E;--1:#E1E4E8\">[</span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">]));</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">shuffle</span><span style=\"--0:#24292E;--1:#E1E4E8\">(cards, </span><span style=\"--0:#005CC5;--1:#79B8FF\">10</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fputs</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"After shuffle: \"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, stdout);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">PRINT_ARR</span><span style=\"--0:#24292E;--1:#E1E4E8\">(cards, </span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(cards) </span><span style=\"--0:#BF3441;--1:#F97583\">/</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">cards</span><span style=\"--0:#24292E;--1:#E1E4E8\">[</span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">]));</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">shuffle</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">deck</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">n_cards</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> i;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> first_time </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">TRUE</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 如果尚未初始化，用当天的当前时间作为随机数发生器</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (first_time) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">first_time </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">FALSE</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">srand</span><span style=\"--0:#24292E;--1:#E1E4E8\">((</span><span style=\"--0:#BF3441;--1:#F97583\">unsigned</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span><span style=\"--0:#6F42C1;--1:#B392F0\">time</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">));</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 通过交换随机对的牌进行 \"洗牌\"</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (i </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> n_cards </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">; i </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">; i </span><span style=\"--0:#BF3441;--1:#F97583\">-=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> where;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> temp;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">46</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">where </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">rand</span><span style=\"--0:#24292E;--1:#E1E4E8\">() </span><span style=\"--0:#BF3441;--1:#F97583\">%</span><span style=\"--0:#24292E;--1:#E1E4E8\"> i;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">47</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">temp </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">deck</span><span style=\"--0:#24292E;--1:#E1E4E8\">[where];</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">48</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#AE4B07;--1:#FFAB70\">deck</span><span style=\"--0:#24292E;--1:#E1E4E8\">[where] </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">deck</span><span style=\"--0:#24292E;--1:#E1E4E8\">[i];</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">49</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#AE4B07;--1:#FFAB70\">deck</span><span style=\"--0:#24292E;--1:#E1E4E8\">[i] </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> temp;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">50</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">51</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"1613-字符串转换-stdlibh\">16.1.3 字符串转换 &#x3C;stdlib.h><a class=\"anchor\" href=\"#1613-字符串转换-stdlibh\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>字符串转换函数把字符串转换为数值。其中最简单的函数<code>atoi</code>和<code>atol</code>。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:71ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">atoi</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">string</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">long</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">atol</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">string</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">long</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">strtol</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">string</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">**</span><span style=\"--0:#AE4B07;--1:#FFAB70\">unused</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">base</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">unsigned</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">long</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">strtoul</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">string</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">**</span><span style=\"--0:#AE4B07;--1:#FFAB70\">unused</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">base</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>对于上面四个函数第一个参数来说，如果包含了前导空白字符将被跳过；函数把剩余的合法字符转换为指定类型的值。在尾部存在非法缀尾字符也将被忽略。</p>\n</blockquote><blockquote>\n<p><code>atoi</code>和<code>atol</code>分别把字符转换为整数和长整数值。<code>strtol</code>和<code>atol</code>一样把参数字符串转换为long。但是<code>strtol</code>保存一个指向转换值后面第一个字符的指针。如果函数的第二个参数并非NULL，这个指针便保存在第二个参数所指向的位置。<code>strtoul</code>和<code>strtol</code>的执行方式相同，但它产生一个无符号长整数。</p>\n</blockquote><blockquote>\n<p>后两个函数的第三个参数是转换所指向的基数(即进制数)。如果基数为0，任何在程序中用于书写整数字面值的形式都将被接收如<code>0x2af4</code>和<code>0377</code>。</p>\n</blockquote><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:36ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">x </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">strtol</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"    590bear\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, next, </span><span style=\"--0:#005CC5;--1:#79B8FF\">12</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>上面的表达式x的值为9947，并把一个指向字母e的指针保存在next所指向的变量中。</p><section><h4 id=\"strtol-和-strtoul-返回的错误值\">strtol 和 strtoul 返回的错误值<a class=\"anchor\" href=\"#strtol-和-strtoul-返回的错误值\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\">函数</th><th align=\"center\">返回值</th></tr></thead><tbody><tr><td align=\"center\">strtol</td><td align=\"center\">如果值太大且为负数，返回LONG_MIN。如果值太大且为正数，返回LONG_MAX</td></tr><tr><td align=\"center\">strtoul</td><td align=\"center\">如果值太大返回ULONG_MAX</td></tr></tbody></table></section></section></section><section><h2 id=\"162-浮点型函数\">16.2 浮点型函数<a class=\"anchor\" href=\"#162-浮点型函数\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>头文件<code>math.h</code>包含了函数库中剩余的数学函数的声明。这些函数的返回值以及绝大多数参数都是double类型。</li>\n</ul><p>几种错误</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:28ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#005CC5;--1:#79B8FF\">1.</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 未包含头文件math.h</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> x;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">x </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">sqrt</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">5.5</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 编译器在此之前未曾见到过sqrt函数的原型。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#005CC5;--1:#79B8FF\">2.</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 定义域错误(domain error)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sqrt</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#005CC5;--1:#79B8FF\">5.0</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#005CC5;--1:#79B8FF\">3.</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 范围错误(range error)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">exp</span><span style=\"--0:#24292E;--1:#E1E4E8\">(DBL_MAX);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 因为结果值太大，这种情况函数会返回HUGE_VAL</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><section><h3 id=\"1621-三角函数mathh\">16.2.1 三角函数&#x3C;math.h><a class=\"anchor\" href=\"#1621-三角函数mathh\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>标准函数库提供了常见的三角函数。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:33ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">sin</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">angle</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">cos</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">angle</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">tan</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">angle</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">asin</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">value</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">acos</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">value</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">atan</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">value</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">atan2</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">x</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">y</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>sin</code>,<code>cos</code>和<code>tan</code>函数的参数是一个用弧度表示的角度，这些函数分别返回这个角度的正弦、余弦和正切值。</p><p><code>asin</code>,<code>acos</code>和<code>atan</code>函数分别返回它们参数的反正弦、反余弦和反正切值。也会出现定义域错误(比如<code>asin</code>和<code>acos</code>的参数并不位于-1和1之间，就会出现一个定义域错误)。</p></section><section><h3 id=\"1622-双曲函数mathh\">16.2.2 双曲函数&#x3C;math.h><a class=\"anchor\" href=\"#1622-双曲函数mathh\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:26ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">sinh</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">angle</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">cosh</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">angle</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">tanh</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">angle</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>这些函数分别返回它们的参数的双曲正弦、双曲余弦和双曲正切值。</p></section><section><h3 id=\"1623-对数和指数函数mathh\">16.2.3 对数和指数函数&#x3C;math.h><a class=\"anchor\" href=\"#1623-对数和指数函数mathh\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:23ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">exp</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">x</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">log</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">x</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">log10</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">x</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>exp</code>函数返回e值的x次幂，也就是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>e</mi><mi>x</mi></msup></mrow><annotation encoding=\"application/x-tex\">e^x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6644em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">x</span></span></span></span></span></span></span></span></span></span></span><br>\n<code>log</code>函数返回x以e为底的对数，也就是自然对数<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ln</mi><mo>⁡</mo><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">{\\ln x}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord\"><span class=\"mop\">ln</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span></span>；<code>log10</code>函数返回x以10为底的对数，也就是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>lg</mi><mo>⁡</mo><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">{\\lg x}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mop\">l<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span></span></p><blockquote>\n<p>任何一个以<code>b</code>为底的对数可以通过下面的公式转换</p>\n</blockquote><p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><msub><mi>g</mi><mi>b</mi></msub><mi>x</mi><mo>=</mo><mfrac><mrow><mi>ln</mi><mo>⁡</mo><mi>x</mi></mrow><mrow><mi>ln</mi><mo>⁡</mo><mi>b</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">log_b x = \\frac{\\ln x} {\\ln b}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">o</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.2251em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mtight\">l</span><span class=\"mtight\">n</span></span><span class=\"mspace mtight\" style=\"margin-right:0.1952em;\"></span><span class=\"mord mathnormal mtight\">b</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mtight\">l</span><span class=\"mtight\">n</span></span><span class=\"mspace mtight\" style=\"margin-right:0.1952em;\"></span><span class=\"mord mathnormal mtight\">x</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></p><p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><msub><mi>g</mi><mi>b</mi></msub><mi>x</mi><mo>=</mo><mfrac><mrow><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mi>e</mi></msub><mi>x</mi></mrow><mrow><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mi>e</mi></msub><mi>b</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">log_b x = \\frac{\\log_e x} {\\log_e b}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">o</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.5133em;vertical-align:-0.5311em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9822em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mop mtight\"><span class=\"mtight\">l</span><span class=\"mtight\">o</span><span class=\"mtight\" style=\"margin-right:0.01389em;\">g</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.0417em;\"><span style=\"top:-2.2341em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">e</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2659em;\"><span></span></span></span></span></span></span><span class=\"mspace mtight\" style=\"margin-right:0.1952em;\"></span><span class=\"mord mathnormal mtight\">b</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.4961em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mop mtight\"><span class=\"mtight\">l</span><span class=\"mtight\">o</span><span class=\"mtight\" style=\"margin-right:0.01389em;\">g</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.0417em;\"><span style=\"top:-2.2341em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">e</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2659em;\"><span></span></span></span></span></span></span><span class=\"mspace mtight\" style=\"margin-right:0.1952em;\"></span><span class=\"mord mathnormal mtight\">x</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5311em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></p><blockquote>\n<p>如果它们的参数为负数，两个对数函数都将出现定义域错误。</p>\n</blockquote></section><section><h3 id=\"1624-浮点表示形式mathh\">16.2.4 浮点表示形式&#x3C;math.h><a class=\"anchor\" href=\"#1624-浮点表示形式mathh\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:44ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">frexp</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">value</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">exponent</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ldexp</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">fraction</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">exponent</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">modf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">value</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">ipart</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>frexp</code>函数计算一个<strong>指数(exponent)<strong>和</strong>小数(fraction)</strong>，这样<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mtext>fraction</mtext><mo>×</mo><msup><mn>2</mn><mtext>exponent</mtext></msup><mo>=</mo><mtext>value</mtext></mrow><annotation encoding=\"application/x-tex\">\\text{fraction} \\times 2^\n\\text{exponent} = \\text{value}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7778em;vertical-align:-0.0833em;\"></span><span class=\"mord text\"><span class=\"mord\">fraction</span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7936em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7936em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">exponent</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord text\"><span class=\"mord\">value</span></span></span></span></span>，其中 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0.5</mn><mo>&#x3C;</mo><mo>=</mo><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>&#x3C;</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">0.5 &#x3C;= fraction &#x3C; 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6835em;vertical-align:-0.0391em;\"></span><span class=\"mord\">0.5</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&#x3C;=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&#x3C;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span>，<code>exponent</code>是一个整数。exponent存储于第二个参数所指向的内存的位置。函数返回fraction的值。与它相关的函数<code>ldexp</code>的返回值是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mtext>fraction</mtext><mo>×</mo><msup><mn>2</mn><mtext>exponent</mtext></msup></mrow><annotation encoding=\"application/x-tex\">\\text{fraction} \\times 2^\\text{exponent}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7778em;vertical-align:-0.0833em;\"></span><span class=\"mord text\"><span class=\"mord\">fraction</span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7936em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7936em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">exponent</span></span></span></span></span></span></span></span></span></span></span></span>也就是它原先的值。当需要在那些浮点格式不兼容的机器之间传递浮点数时，这些函数非常有用。</p><p><code>modf</code>函数把一个浮点值分成整数和小数两个部分，每个部分都具有和原值一样的符号。整数部分以double类型存储于第二个参数错指向的内存位置，小数部分作为函数的返回值返回。</p><blockquote>\n<p>frexp 和 ldexp 函数通常用于浮点数的内部处理，例如实现快速幂或进行高精度计算。</p>\n</blockquote></section><section><h3 id=\"1625-幂mathh\">16.2.5 幂&#x3C;math.h><a class=\"anchor\" href=\"#1625-幂mathh\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:31ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">pow</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">x</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">y</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">sqrt</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">x</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>pow</code>函数会返回<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mtext>x</mtext><mtext>y</mtext></msup></mrow><annotation encoding=\"application/x-tex\">\\text{x}^\\text{y}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6644em;\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">y</span></span></span></span></span></span></span></span></span></span></span></span>的值。由于在计算这个值时可能要用到对数，如果x是一个负数且y不是一个整数会出现一个定义域错误。</p><p><code>sqrt</code>函数返回其参数的平方根。如果参数为负，就会出现一个定义域错误。</p></section><section><h3 id=\"1626-底数顶数绝对值和余数mathh\">16.2.6 底数、顶数、绝对值和余数&#x3C;math.h><a class=\"anchor\" href=\"#1626-底数顶数绝对值和余数mathh\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:32ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">floor</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">x</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ceil</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">x</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">fabs</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">x</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">fmod</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">x</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">y</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>这些函数都是用来处理浮点数的函数，分别用于取整和求模运算。</p><p><code>floor</code>函数为传入的double值向下取整，<code>ceil</code>向上取整，<code>fmod</code>返回x除以y所产生的余数，\n<code>fabs</code>返回双精度浮点数绝对值。</p></section><section><h3 id=\"1627-字符串转换-stdlibh\">16.2.7 字符串转换 &#x3C;stdlib.h><a class=\"anchor\" href=\"#1627-字符串转换-stdlibh\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:49ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">atof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">string</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">strtod</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">string</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">**</span><span style=\"--0:#AE4B07;--1:#FFAB70\">unused</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>和<code>strtol</code>,<code>atol</code>类似，任一函数参数包含了前导空白字符，这些字符将被忽略。函数随后将合法的字符转换为一个double值并忽略任何缀尾的非法字符。</p><p><code>strtod</code>函数把参数字符串转换为一个double值，其方法和<code>atof</code>类似，但保存一个指向字符串中被转换的值后面的第一个字符的指针。</p><blockquote>\n<p>值太大会返回 HUGE_VAL，值太小会返回0。这两种情况<code>errno</code>都会被设置为<code>ERANGE</code></p>\n</blockquote></section></section><section><h2 id=\"163-日期和时间函数\">16.3 日期和时间函数<a class=\"anchor\" href=\"#163-日期和时间函数\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>函数库提供了一组非常丰富的函数，用于简化日期和时间的处理。它们的原型位于<code>time.h</code>。</p><section><h3 id=\"1631-处理器时间-timeh\">16.3.1 处理器时间 &#x3C;time.h><a class=\"anchor\" href=\"#1631-处理器时间-timeh\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>clock</code>函数返回从程序开始执行起处理器所消耗的时间。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:20ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">clock_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">clock</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>clock</code>函数返回一个数字，由编译器定义。通常是处理器时钟滴答的次数，将这个值除以<strong>CLOCKS_PER_SEC</strong>可以得到秒数。</p><p>一个例子</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:69ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdlib.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;time.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 设置一个工作的函数</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">run_program_logic</span><span style=\"--0:#24292E;--1:#E1E4E8\">() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">long</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">long</span><span style=\"--0:#24292E;--1:#E1E4E8\"> sum </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> i </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">; i </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">500000000</span><span style=\"--0:#24292E;--1:#E1E4E8\">; i</span><span style=\"--0:#BF3441;--1:#F97583\">++</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">sum </span><span style=\"--0:#BF3441;--1:#F97583\">+=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> i;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"计算结果: </span><span style=\"--0:#005CC5;--1:#79B8FF\">%lld\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, sum);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 模拟程序执行过程中可能发生的 I/O等待</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// sleep(1); // 如果加上这行，CPU时间不会等待但实际时间会增加1秒</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// clock不是一个常用的计算墙上时钟时间的好方法</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// time() 适用于秒级精度</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// gettimeofday() POSIX: 适用于微秒级精度(更常用)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// clock_gettime() POSIX/C11: 更现代，支持纳秒级精度和</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 多种时钟类型(推荐用于高性能测量)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// clock返回的是处理器时钟滴答的次数。把这个值转换成秒要</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 除以常量 CLOCKS_PER_SEC</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">clock_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> start_time, end_time;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> cpu_time_used;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 1. 记录开始时间</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">start_time </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">clock</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 运行程序</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">run_program_logic</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 2. 记录结束时间</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">end_time </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">clock</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 3. 计算CPU耗时（以秒为单位）</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 要将clock_t 转换为 double 才能进行浮点除法</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">cpu_time_used </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ((</span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\">)(end_time </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> start_time)) </span><span style=\"--0:#BF3441;--1:#F97583\">/</span><span style=\"--0:#24292E;--1:#E1E4E8\"> CLOCKS_PER_SEC;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">--- 运行时间结果 ---</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"总的 CPU 滴答数：</span><span style=\"--0:#005CC5;--1:#79B8FF\">%ld\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, (</span><span style=\"--0:#BF3441;--1:#F97583\">long</span><span style=\"--0:#24292E;--1:#E1E4E8\">)(end_time </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> start_time));</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"每秒滴答数(CLOCKS_PER_SEC)： </span><span style=\"--0:#005CC5;--1:#79B8FF\">%ld\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, (</span><span style=\"--0:#BF3441;--1:#F97583\">long</span><span style=\"--0:#24292E;--1:#E1E4E8\">)CLOCKS_PER_SEC);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"程序 CPU 运行时间：</span><span style=\"--0:#005CC5;--1:#79B8FF\">%f</span><span style=\"--0:#032F62;--1:#9ECBFF\"> 秒</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, cpu_time_used);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EXIT_SUCCESS;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">46</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"1632-当天时间timeh\">16.3.2 当天时间&#x3C;time.h><a class=\"anchor\" href=\"#1632-当天时间timeh\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>time</code>函数返回当前的日期和时间。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:36ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">time_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">time</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">time_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">returned_value</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>如果参数是一个非NULL的指针，时间值也将通过这个指针进行存储。<br>\n如果机器无法提供当前日期和时间或时间值太大无法用<code>time_t</code>变量表示，函数返回-1。</p><ul>\n<li>标准并未规定时间的编码方式，所以不应该使用字面值常量。因为它们在不同的编译器中可能具有不同的含义。</li>\n<li>一种常见的表示形式是返回从一个任意选定的时刻开始流逝的秒数。在<strong>MS-DOS</strong>和<strong>UNIX</strong>中，这个时刻是<em>1970年1月1日 00:00:00</em></li>\n</ul><blockquote>\n<p>调用time函数两次并把两个值相减由此判断时间是很有诱惑力的。但这个技巧是很危险的，因为标准<strong>并未要求函数的结果用秒表示</strong>。使用<code>difftime</code>函数计算两次时间差值。</p>\n</blockquote><section><h4 id=\"日期和时间的转换timeh\">日期和时间的转换&#x3C;time.h><a class=\"anchor\" href=\"#日期和时间的转换timeh\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>用于操作<code>time_t</code>的函数</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:44ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#6F42C1;--1:#B392F0\">ctime</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">time_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">time_value</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">difftime</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">time_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">time1</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">time_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">time2</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>ctime</code>函数的参数是一个指向<code>time_t</code>的指针，并返回一个指向字符串的指针，字符串格式为<code>Sun Jul 4 04:02:48 1976\\n\\0</code>。字符串内部空格是固定的。</p><blockquote>\n<p>ctime 返回的是一个存储在由编译器分配的静态字符数组的首地址，也就是存储在一个外部静态缓冲区(运行时库的静态/全局区域)，不是由调用者定义和分配的空间。</p>\n</blockquote><blockquote>\n<p>ctime 的设计模式在多线程中存在数据覆盖的风险。</p>\n</blockquote><p>将调用<code>ctime</code>函数的返回值立即拷贝到一个由调用者分配的字符数组中</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:65ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">my_buffer</span><span style=\"--0:#24292E;--1:#E1E4E8\">[</span><span style=\"--0:#005CC5;--1:#79B8FF\">50</span><span style=\"--0:#24292E;--1:#E1E4E8\">];</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">memset</span><span style=\"--0:#24292E;--1:#E1E4E8\">(mybuffer,</span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(my_buffer) </span><span style=\"--0:#BF3441;--1:#F97583\">/</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">my_buffer</span><span style=\"--0:#24292E;--1:#E1E4E8\">[</span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">]));</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">time_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> t </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">time</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">s </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ctime</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;</span><span style=\"--0:#AE4B07;--1:#FFAB70\">t</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span><span style=\"--0:#616972;--1:#99A0A6\"> // 这里的指针s 只是指向了由编译器分配的一个静态字符数组并不是创建了一个新的存储区域</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">strcpy</span><span style=\"--0:#24292E;--1:#E1E4E8\">(my_buffer,s,</span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(my_buffer) </span><span style=\"--0:#BF3441;--1:#F97583\">/</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">my_buffer</span><span style=\"--0:#24292E;--1:#E1E4E8\">[</span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">]));</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>ctime 也可能以 <code>asctime(localtime(time_value))</code>实现。</p>\n</blockquote><p><code>difftime</code>函数计算<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mn>1</mn><mo>−</mo><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">time1 - time2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7429em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">im</span><span class=\"mord mathnormal\">e</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">im</span><span class=\"mord mathnormal\">e</span><span class=\"mord\">2</span></span></span></span>的差，并把结果值转换为秒。返回值是<strong>double</strong>类型</p><p>一个例子</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:53ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;time.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;unistd.h></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#616972;--1:#99A0A6\">// POSIX sleep() 函数</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 模拟一段耗时的操作</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">heavy_operation</span><span style=\"--0:#24292E;--1:#E1E4E8\">() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"开始执行耗时操作...</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 让程序暂停 2 秒，模拟实际经过的时间</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// time() 和 difftime 测量的是这个实际暂停的时间</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">sleep</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"操作完成。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">time_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> start_time, end_time;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">double</span><span style=\"--0:#24292E;--1:#E1E4E8\"> elapsed_time;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 1. 记录开始时间</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">time</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\">start_time);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 执行需要计时的程序段</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">heavy_operation</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 2. 记录结束时间</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">time</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\">end_time);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 3. 计算时间差</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// difftime(结束时间, 开始时间)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">elapsed_time </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">difftime</span><span style=\"--0:#24292E;--1:#E1E4E8\">(end_time, start_time);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">--- 计时结果 ---</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"开始时间 (time_t): </span><span style=\"--0:#005CC5;--1:#79B8FF\">%ld\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, (</span><span style=\"--0:#BF3441;--1:#F97583\">long</span><span style=\"--0:#24292E;--1:#E1E4E8\">)start_time);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"结束时间 (time_t): </span><span style=\"--0:#005CC5;--1:#79B8FF\">%ld\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, (</span><span style=\"--0:#BF3441;--1:#F97583\">long</span><span style=\"--0:#24292E;--1:#E1E4E8\">)end_time);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"实际经过时间 (秒): </span><span style=\"--0:#005CC5;--1:#79B8FF\">%.2f\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, elapsed_time);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>两个把time_t值转换为一个tm结构的函数，tm结构更方便访问日期和时间的各个组成部分。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:47ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> tm </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#6F42C1;--1:#B392F0\">gmtime</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">time_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">time_value</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> tm </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#6F42C1;--1:#B392F0\">localtime</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">time_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">time_value</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>gmtime</code>函数把时间值转换为<strong>世界协调时间(Coordinated Universal Time, UTC)</strong>。<strong>UTC</strong>以前被称为<strong>格林尼治标准时间(Greenwich Mean Time)</strong>，这也是gmtime这个名字的来历。\n<code>localtime</code>函数把一个时间值转换为当地时间。</p><p><code>struct tm</code>结构体成员(字段)</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\">成员名</th><th align=\"center\">类型</th><th align=\"center\">含义</th><th align=\"center\">范围/备注</th></tr></thead><tbody><tr><td align=\"center\"><strong><code>tm_sec</code></strong></td><td align=\"center\"><code>int</code></td><td align=\"center\"><strong>秒</strong></td><td align=\"center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span> 到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>60</mn></mrow><annotation encoding=\"application/x-tex\">60</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">60</span></span></span></span> (允许 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>60</mn></mrow><annotation encoding=\"application/x-tex\">60</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">60</span></span></span></span> 来处理闰秒)</td></tr><tr><td align=\"center\"><strong><code>tm_min</code></strong></td><td align=\"center\"><code>int</code></td><td align=\"center\"><strong>分</strong></td><td align=\"center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span> 到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>59</mn></mrow><annotation encoding=\"application/x-tex\">59</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">59</span></span></span></span></td></tr><tr><td align=\"center\"><strong><code>tm_hour</code></strong></td><td align=\"center\"><code>int</code></td><td align=\"center\"><strong>时</strong></td><td align=\"center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span> 到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>23</mn></mrow><annotation encoding=\"application/x-tex\">23</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">23</span></span></span></span></td></tr><tr><td align=\"center\"><strong><code>tm_mday</code></strong></td><td align=\"center\"><code>int</code></td><td align=\"center\"><strong>月中的第几天（日期）</strong></td><td align=\"center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span> 到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>31</mn></mrow><annotation encoding=\"application/x-tex\">31</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">31</span></span></span></span></td></tr><tr><td align=\"center\"><strong><code>tm_mon</code></strong></td><td align=\"center\"><code>int</code></td><td align=\"center\"><strong>月</strong></td><td align=\"center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span> 到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>11</mn></mrow><annotation encoding=\"application/x-tex\">11</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">11</span></span></span></span> ( <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span> 代表一月， <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>11</mn></mrow><annotation encoding=\"application/x-tex\">11</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">11</span></span></span></span> 代表十二月)</td></tr><tr><td align=\"center\"><strong><code>tm_year</code></strong></td><td align=\"center\"><code>int</code></td><td align=\"center\"><strong>年</strong></td><td align=\"center\"><strong>从 1900 年开始计算的年数</strong>。例如，如果年份是 2025，则 <code>tm_year</code> 为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>125</mn></mrow><annotation encoding=\"application/x-tex\">125</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">125</span></span></span></span>。</td></tr><tr><td align=\"center\"><strong><code>tm_wday</code></strong></td><td align=\"center\"><code>int</code></td><td align=\"center\"><strong>周中的第几天</strong></td><td align=\"center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span> 到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>6</mn></mrow><annotation encoding=\"application/x-tex\">6</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">6</span></span></span></span> ( <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span> 代表星期日， <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>6</mn></mrow><annotation encoding=\"application/x-tex\">6</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">6</span></span></span></span> 代表星期六)</td></tr><tr><td align=\"center\"><strong><code>tm_yday</code></strong></td><td align=\"center\"><code>int</code></td><td align=\"center\"><strong>年中的第几天</strong></td><td align=\"center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span> 到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>365</mn></mrow><annotation encoding=\"application/x-tex\">365</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">365</span></span></span></span> ( <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span> 代表 1 月 1 日)</td></tr><tr><td align=\"center\"><strong><code>tm_isdst</code></strong></td><td align=\"center\"><code>int</code></td><td align=\"center\"><strong>夏令时标志</strong></td><td align=\"center\">如果夏令时生效，值为正；如果未生效，值为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span>；如果信息不可用，值为负（通常是 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span></span></span></span>）。</td></tr></tbody></table><p>当有了一个tm结构之后，既可以直接使用tm结构变量内成员值，也可以把它作为参数传递给下面的函数之一。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:65ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#6F42C1;--1:#B392F0\">asctime</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> tm </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">tm_ptr</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">strftime</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">string</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">maxsize</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">format</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">                </span><span style=\"--0:#BF3441;--1:#F97583\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> tm </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">tm_ptr</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>asctime</code>函数把参数所表示的时间值转换为一个以<code>Sun Jul 4 04:02:48 1976\\n\\0</code>格式表示的字符串。</p><p><code>strftime</code>函数把一个tm结构转换为一个根据某个格式字符串而定的字符串。<em>这个函数在格式化日期方面提供了令人难以置信的灵活性</em>。如果转换结果字符串的长度小于<code>maxsize</code>参数，那么该字符就被复制到第一个参数所指向的数组中，<code>strftime</code>函数返回字符串的长度。否则，函数返回-1且数组的内容是未定义的。</p><p>格式字符串包含了普通字符和格式代码。普通字符被复制到它们原先在字符串中出现的位置。\n格式代码则被一个日期或时间值代替。格式代码包含一个<code>%</code>字符，后面跟一个表示所需值的字符。</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\">代码</th><th align=\"center\">含义</th><th align=\"center\">示例输出</th><th align=\"center\">备注</th></tr></thead><tbody><tr><td align=\"center\"><strong>年/世纪</strong></td><td align=\"center\"></td><td align=\"center\"></td><td align=\"center\"></td></tr><tr><td align=\"center\"><code>%Y</code></td><td align=\"center\">带世纪的年份</td><td align=\"center\"><code>2025</code></td><td align=\"center\">四位数字</td></tr><tr><td align=\"center\"><code>%y</code></td><td align=\"center\">不带世纪的年份</td><td align=\"center\"><code>25</code></td><td align=\"center\">两位数字 (00-99)</td></tr><tr><td align=\"center\"><code>%C</code></td><td align=\"center\">世纪数</td><td align=\"center\"><code>20</code></td><td align=\"center\">(2025 年属于第 20 世纪)</td></tr><tr><td align=\"center\"><strong>月</strong></td><td align=\"center\"></td><td align=\"center\"></td><td align=\"center\"></td></tr><tr><td align=\"center\"><code>%m</code></td><td align=\"center\">月份</td><td align=\"center\"><code>11</code></td><td align=\"center\">两位数字 (01-12)</td></tr><tr><td align=\"center\"><code>%B</code></td><td align=\"center\">完整的月份名称</td><td align=\"center\"><code>November</code></td><td align=\"center\">依赖本地环境 (Locale)</td></tr><tr><td align=\"center\"><code>%b</code>, <code>%h</code></td><td align=\"center\">缩写的月份名称</td><td align=\"center\"><code>Nov</code></td><td align=\"center\">依赖本地环境</td></tr><tr><td align=\"center\"><strong>日/周</strong></td><td align=\"center\"></td><td align=\"center\"></td><td align=\"center\"></td></tr><tr><td align=\"center\"><code>%d</code></td><td align=\"center\">月份中的日期</td><td align=\"center\"><code>15</code></td><td align=\"center\">两位数字 (01-31)</td></tr><tr><td align=\"center\"><code>%A</code></td><td align=\"center\">完整的星期几名称</td><td align=\"center\"><code>Saturday</code></td><td align=\"center\">依赖本地环境</td></tr><tr><td align=\"center\"><code>%a</code></td><td align=\"center\">缩写的星期几名称</td><td align=\"center\"><code>Sat</code></td><td align=\"center\">依赖本地环境</td></tr><tr><td align=\"center\"><code>%w</code></td><td align=\"center\">周中的第几天</td><td align=\"center\"><code>6</code></td><td align=\"center\">数字 (0=Sunday, 6=Saturday)</td></tr><tr><td align=\"center\"><code>%u</code></td><td align=\"center\">ISO 8601 周中的第几天</td><td align=\"center\"><code>6</code></td><td align=\"center\">数字 (1=Monday, 7=Sunday)</td></tr><tr><td align=\"center\"><code>%j</code></td><td align=\"center\">年中的第几天</td><td align=\"center\"><code>319</code></td><td align=\"center\">三位数字 (001-366)</td></tr><tr><td align=\"center\"><strong>时</strong></td><td align=\"center\"></td><td align=\"center\"></td><td align=\"center\"></td></tr><tr><td align=\"center\"><code>%H</code></td><td align=\"center\">小时 (24 小时制)</td><td align=\"center\"><code>17</code></td><td align=\"center\">两位数字 (00-23)</td></tr><tr><td align=\"center\"><code>%I</code></td><td align=\"center\">小时 (12 小时制)</td><td align=\"center\"><code>05</code></td><td align=\"center\">两位数字 (01-12)</td></tr><tr><td align=\"center\"><code>%p</code></td><td align=\"center\">上午/下午标志</td><td align=\"center\"><code>PM</code></td><td align=\"center\">依赖本地环境</td></tr><tr><td align=\"center\"><strong>分/秒</strong></td><td align=\"center\"></td><td align=\"center\"></td><td align=\"center\"></td></tr><tr><td align=\"center\"><code>%M</code></td><td align=\"center\">分钟</td><td align=\"center\"><code>12</code></td><td align=\"center\">两位数字 (00-59)</td></tr><tr><td align=\"center\"><code>%S</code></td><td align=\"center\">秒</td><td align=\"center\"><code>26</code></td><td align=\"center\">两位数字 (00-60)</td></tr><tr><td align=\"center\"><strong>日期/时间组合</strong></td><td align=\"center\"></td><td align=\"center\"></td><td align=\"center\"></td></tr><tr><td align=\"center\"><code>%x</code></td><td align=\"center\">本地日期表示</td><td align=\"center\"><code>11/15/25</code></td><td align=\"center\">依赖本地环境</td></tr><tr><td align=\"center\"><code>%X</code></td><td align=\"center\">本地时间表示</td><td align=\"center\"><code>17:12:26</code></td><td align=\"center\">依赖本地环境</td></tr><tr><td align=\"center\"><code>%c</code></td><td align=\"center\">本地日期和时间</td><td align=\"center\"><code>Sat Nov 15 17:12:26 2025</code></td><td align=\"center\">依赖本地环境</td></tr><tr><td align=\"center\"><strong>时区/其他</strong></td><td align=\"center\"></td><td align=\"center\"></td><td align=\"center\"></td></tr><tr><td align=\"center\"><code>%Z</code></td><td align=\"center\">时区名称</td><td align=\"center\"><code>JST</code> 或 <code>CST</code></td><td align=\"center\">依赖本地环境</td></tr><tr><td align=\"center\"><code>%%</code></td><td align=\"center\">百分号符号</td><td align=\"center\"><code>%</code></td><td align=\"center\"></td></tr></tbody></table>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\">格式字符串</th><th align=\"center\">示例输出</th><th align=\"center\">解释</th></tr></thead><tbody><tr><td align=\"center\"><code>\"%Y-%m-%d %H:%M:%S\"</code></td><td align=\"center\"><code>2025-11-15 17:12:26</code></td><td align=\"center\">国际通用日期和时间格式</td></tr><tr><td align=\"center\"><code>\"%a, %b %d, %Y\"</code></td><td align=\"center\"><code>Sat, Nov 15, 2025</code></td><td align=\"center\">英文习惯日期格式</td></tr><tr><td align=\"center\"><code>\"%I:%M %p\"</code></td><td align=\"center\"><code>05:12 PM</code></td><td align=\"center\">12 小时制时间</td></tr></tbody></table><p><code>mktime</code>函数用于把一个tm结构转换为一个time_t值。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:33ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">time_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">mktime</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> tm </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">tm_ptr</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>一个例子</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:71ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdlib.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;time.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 1. mktime 手动构建时间结构体</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> tm time_info </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">.tm_year </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">2025</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1900</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span><span style=\"--0:#616972;--1:#99A0A6\"> // 年份从 1900 开始算</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">.tm_mon </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">10</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span><span style=\"--0:#616972;--1:#99A0A6\">       // 月份 0 - 11</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">.tm_mday </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">27</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span><span style=\"--0:#616972;--1:#99A0A6\">          // 日</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">.tm_hour </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">23</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">.tm_min </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">14</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">.tm_sec </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">30</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">.tm_isdst </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#616972;--1:#99A0A6\"> // 自动判断夏令时</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">};</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">time_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> timestamp </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">mktime</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\">time_info);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"mktime生成的时间戳：</span><span style=\"--0:#005CC5;--1:#79B8FF\">%ld\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, timestamp);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 2. asctime：时间结构体转字符串(固定格式)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">ascii_time </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">asctime</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\">time_info);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"asctime输出：</span><span style=\"--0:#005CC5;--1:#79B8FF\">%s</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, ascii_time);</span><span style=\"--0:#616972;--1:#99A0A6\"> // 自带换行</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 3. strftime：自定义格式化时间(最常用)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">buffer</span><span style=\"--0:#24292E;--1:#E1E4E8\">[</span><span style=\"--0:#005CC5;--1:#79B8FF\">100</span><span style=\"--0:#24292E;--1:#E1E4E8\">];</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">strftime</span><span style=\"--0:#24292E;--1:#E1E4E8\">(buffer, </span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(buffer), </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#B31D28;--0fs:italic;--1:#FDAEB7;--1fs:italic\">%</span><span style=\"--0:#032F62;--1:#9ECBFF\">Y-</span><span style=\"--0:#B31D28;--0fs:italic;--1:#FDAEB7;--1fs:italic\">%</span><span style=\"--0:#032F62;--1:#9ECBFF\">m-</span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\"> </span><span style=\"--0:#B31D28;--0fs:italic;--1:#FDAEB7;--1fs:italic\">%</span><span style=\"--0:#032F62;--1:#9ECBFF\">H:</span><span style=\"--0:#B31D28;--0fs:italic;--1:#FDAEB7;--1fs:italic\">%</span><span style=\"--0:#032F62;--1:#9ECBFF\">M:</span><span style=\"--0:#005CC5;--1:#79B8FF\">%S</span><span style=\"--0:#032F62;--1:#9ECBFF\"> 星期</span><span style=\"--0:#B31D28;--0fs:italic;--1:#FDAEB7;--1fs:italic\">%</span><span style=\"--0:#032F62;--1:#9ECBFF\">w\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span><span style=\"--0:#616972;--1:#99A0A6\"> // 格式串自由组合</span></div></div><div class=\"ec-line\" style=\"--ecIndent:11ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\">           </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\">time_info);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"strftime自定义：</span><span style=\"--0:#005CC5;--1:#79B8FF\">%s\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, buffer);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EXIT_SUCCESS;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>其实在这个例子里面使用 asctime非常危险，在编写C语言代码时遇到返回值为指针类型的函数多半要小心是否是返回了一个编译器分配的静态数组指针给你，这会导致在下一次调用这个函数时修改你用指针接收的值，也就是线程不安全的函数，遇到这种情况要及时将静态内存的内容复制出来。</p>\n</blockquote><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"C\" class=\"wrap\" style=\"--ecMaxLine:71ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">time_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> time1 </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">time</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">buffer</span><span style=\"--0:#24292E;--1:#E1E4E8\">[</span><span style=\"--0:#005CC5;--1:#79B8FF\">26</span><span style=\"--0:#24292E;--1:#E1E4E8\">];</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">strncpy</span><span style=\"--0:#24292E;--1:#E1E4E8\">(buffer, </span><span style=\"--0:#6F42C1;--1:#B392F0\">asctime</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;</span><span style=\"--0:#AE4B07;--1:#FFAB70\">time1</span><span style=\"--0:#24292E;--1:#E1E4E8\">), </span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(buffer));</span><span style=\"--0:#616972;--1:#99A0A6\"> // 以后直接使用buffer就不会变化了</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section></section><section><h2 id=\"164-非本地跳转setjmph\">16.4 非本地跳转&#x3C;setjmp.h><a class=\"anchor\" href=\"#164-非本地跳转setjmph\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><code>setjmp</code>和<code>longjmp</code>函数提供了一种类似goto语句的机制，但它并不局限于一个函数的作用域之内。这些函数常用于深层嵌套的函数调用链。如果在某个低层的函数中检测到一个错误，可以立即返回到顶层函数，不必向调用链中的每个中间层函数返回一个错误标志。</p><p>为了使用这些函数必须包含包含头文件&#x3C;setjmp.h></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:39ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">setjmp</span><span style=\"--0:#24292E;--1:#E1E4E8\">(jmp_buf </span><span style=\"--0:#AE4B07;--1:#FFAB70\">state</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">longjmp</span><span style=\"--0:#24292E;--1:#E1E4E8\">(jmp_buf </span><span style=\"--0:#AE4B07;--1:#FFAB70\">state</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">value</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>声明一个<code>jmp_buf</code>变量，调用<code>setjmp</code>函数初始化，<code>setjmp</code>返回值为零。<code>setjmp</code>把程序的状态信息（例如，堆栈指针的当前位置和程序的计数器）保存到跳转缓冲区。调用<code>setjmp</code>时所处的函数便称为“顶层”函数。</p><p>以后，在顶层函数或其他任何它所调用的函数内的任何地方调用<code>longjmp</code>函数，将导致这个被保存的状态重新恢复。<code>longjmp</code>的效果就是使执行流通过再次从<code>setjmp</code>函数返回，从而立即跳回到顶层函数。</p><p>区分<code>setjmp</code>函数的两种不同返回方式，当<code>setjmp</code>函数第一次被调用时，返回0。当<code>setjmp</code>作为<code>longjmp</code>的执行结果再次返回时，它的返回值是<code>longjmp</code>的第二个参数，它必须是个非0值。通过检查它的返回值可以判断是否调用<code>longjmp</code>以及存在多个<code>longjmp</code>可以判断是哪个<code>longjmp</code>被调用。</p><section><h3 id=\"1641-实例\">16.4.1 实例<a class=\"anchor\" href=\"#1641-实例\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:56ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;setjmp.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdlib.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 1. 声明一个 jmp_buf 变量，用于在不同函数之间共享执行环境</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 必须在 setjmp 和 longjmp 都能访问到的作用域内声明（通常是全局或静态）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">jmp_buf environment;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 错误代码定义</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ERROR_FILE_NOT_FOUND</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">ERROR_DATA_CORRUPTED</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 模拟一个可能失败的深层函数</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">process_data</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">step</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 模拟一个中介函数</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">intermediate_function</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 第一次调用 setjmp, 设置跳转恢复点。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> jump_val </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">setjmp</span><span style=\"--0:#24292E;--1:#E1E4E8\">(environment);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (jump_val </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 路径A：正常执行</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"【Main】：第一次调用 setjmp，设置了错误处理点。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">intermediate_function</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span><span style=\"--0:#616972;--1:#99A0A6\"> // 开始执行正常业务逻辑</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"【Main】：所有功能正常完成。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">else</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 路径B，从longjmp跳转回来</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">【Main】：发生了非局部跳转！</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">switch</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (jump_val) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">case</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ERROR_DATA_CORRUPTED:</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"错误处理：代码</span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\">，数据处理失败，程序安全终止。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, jump_val);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#BF3441;--1:#F97583\">break</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">case</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ERROR_FILE_NOT_FOUND:</span></div></div><div class=\"ec-line\" style=\"--ecIndent:1ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\"><span class=\"indent\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"错误处理：代码</span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\">，文件未找到。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, jump_val);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#BF3441;--1:#F97583\">break</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">default</span><span style=\"--0:#24292E;--1:#E1E4E8\">:</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"错误处理：发生了未知错误。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#BF3441;--1:#F97583\">break</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EXIT_SUCCESS;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">46</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">47</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">48</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">process_data</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">step</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">49</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"--- Function: process_data ---</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">50</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">51</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (step </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">52</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Step 1: 正在读取配置文件...</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">53</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">else</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (step </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">54</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Step 2: 正在处理数据块...</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">55</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">56</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 假设这里发生了致命错误！</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">57</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"致命错误：数据损坏！</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">58</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 立即跳转回 setjmp的位置，并将 ERROR_DATA_CORRUPTED 作为返回值传递</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">59</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">longjmp</span><span style=\"--0:#24292E;--1:#E1E4E8\">(environment, ERROR_DATA_CORRUPTED);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">60</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">61</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 注意：longjmp 后的代码不会被执行</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">62</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"这行代码永远不会被执行。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">63</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">64</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">65</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">66</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">intermediate_function</span><span style=\"--0:#24292E;--1:#E1E4E8\">() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">67</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">--- Function: intermediate_function ---</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">68</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">process_data</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">69</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">process_data</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span><span style=\"--0:#616972;--1:#99A0A6\"> // 这一步将触发 longjmp</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">70</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Intermediate Function 正常结束。</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">71</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"1642-何时使用非本地跳转\">16.4.2 何时使用非本地跳转<a class=\"anchor\" href=\"#1642-何时使用非本地跳转\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>setjmp</code>和<code>longjmp</code>并不是绝对必需的，因为总是可以通过返回一个错误代码并在调用函数中对其进行检查来实现相同的效果。返回错误代码的方法有时候不是很方便，特别是当函数已经返回了一些值的时候。</p><blockquote>\n<p>使用setjmp和longjmp必须要遵循某些戒律。不然会像goto一样使用一多会让代码难以理解。</p>\n</blockquote></section></section><section><h2 id=\"165-信号\">16.5 信号<a class=\"anchor\" href=\"#165-信号\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>程序中所发生的事件绝大多数都是由<strong>程序本身所引发的</strong>，例如执行各种语句和请求输入。但是，有些程序必须遇到的事件却不是程序本身所引发的。一个常见的例子就是用户中断了程序。如果部分计算好的结果必须进行保存以避免数据的丢失，程序必须预备对这类事件做出反应，虽然它并没有办法预测什么时候会发生这种情况。</p><p>信号就是用于这种目的。<strong>信号(Signal)</strong> 表示一种事件，它可能异步发生，也就是并不与程序执行过程的任何事件同步。如果程序并未安排怎样处理一个特定信号，那么当该信号出现时程序就做出一个缺省的反应。标准并未定义这个缺省反应是什么，但绝大多数编译器都选择终止程序。另外，程序可以调用signal函数，或者忽略这个信号，或者设置一个<strong>信号处理函数(signal handler)</strong>，当信号发生时程序就调用这个函数。</p><section><h3 id=\"1651-信号名-signalh\">16.5.1 信号名 &#x3C;signal.h><a class=\"anchor\" href=\"#1651-信号名-signalh\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\">信号</th><th align=\"center\">含义</th></tr></thead><tbody><tr><td align=\"center\">SIGABRT</td><td align=\"center\">程序请求异常终止</td></tr><tr><td align=\"center\">SIGFPE</td><td align=\"center\">发生一个算数错误</td></tr><tr><td align=\"center\">SIGILL</td><td align=\"center\">检测到非法指令</td></tr><tr><td align=\"center\">SIGSEGV</td><td align=\"center\">检测到对内存的非法访问</td></tr><tr><td align=\"center\">SIGINT</td><td align=\"center\">收到一个交互性注意信号</td></tr><tr><td align=\"center\">SIGTERM</td><td align=\"center\">收到一个终止程序的请求</td></tr></tbody></table><p><strong>SIGABRT</strong>是一个由<code>abort</code>函数所引发的信号，用于终止程序。</p><p>至于哪些错误将引发<strong>SIGFPE</strong>信号则取决于编译器。常见的有算术上溢或下溢以及除零错误。有些编译器对这个信号进行了扩展，提供了关于引发这个信号的操作的特定信息。可能对可移植性有影响。</p><p><strong>SIGILL</strong>信号提示CPU试图执行一条非法的指令。这个错误可能由于不正确的编译器设置导致。</p><p><strong>SIGSEGV</strong>信号提示程序试图非法访问内存。有两个最常见的原因：一个是程序试图访问未安装于机器上的内存或者访问操作系统未曾分配给这个程序的内存；另一个是程序违反了内存访问的边界要求。后者可能在那些要求数据边界对齐的机器上发生。</p><p>前几个信号是<em>同步</em>的，因为它们都是<em>在程序内部发生的</em>。尽管无法预测一个算数错误何时将会发生，如所使用相同的数据反复运行这个程序，每次都会在相同的地方发生相同的错误。</p><p>最后两个信号<strong>SIGINT</strong>和<strong>SIGTERM</strong>则是<em>异步</em>的。它们在<em>程序的外部产生</em>，通常是由程序的用户所触发，表示用户试图向程序传达一些信息。</p><p><strong>SIGINT</strong>信号在绝大多数机器中都是当用户试图中断程序时发生的。</p><p><strong>SIGTERM</strong>则是另一种用于请求终止程序的信号。</p><p>一种常用的策略是为<strong>SIGINT</strong>定义一个信号处理函数，目的是执行一些日常维护工作并在程序退出前保存数据。但<strong>SIGTERM</strong>则不配备信号处理函数，这样当程序终止时便不必执行这些日常维护工作。</p></section><section><h3 id=\"1652-处理信号-signalh\">16.5.2 处理信号 &#x3C;signal.h><a class=\"anchor\" href=\"#1652-处理信号-signalh\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>通常我们关心的是怎样处理那些自主发生的信号，也就是无法预测其什么时候会发生的信号。<strong>raise</strong>函数用于显式地引发一个信号。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:19ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">raise</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">sig</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>调用这个函数将引发它的参数所指定的信号。程序对这类信号的反应和那些自主发生的信号是相同的。可以调用这个函数对信号处理函数进行测试。</p><blockquote>\n<p>如果误用可能会实现一种非局部的goto效果。</p>\n</blockquote><p>当一个信号发生时，程序可以使用三种方式对它做出反应。缺省的反应是由编译器定义的，通常是终止程序。程序也可以指定其他行为对信号做出反应：信号可以被忽略，或者程序可以设置一个信号处理函数，当信号发生时调用这个函数。signal函数用于指定程序希望采取的反应。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:51ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#6F42C1;--1:#B392F0\">signal</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">sig</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">handler)(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">)))(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>分析这个函数原型，首先省略返回类型，对参数进行研究。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:38ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">signal</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">sig</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">handler)(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">));</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>第一个参数是信号类型，第二个参数是希望为这个信号设置的信号处理函数。这个处理函数是一个函数指针，它所指向的函数接受一个整型参数且没有返回值。当信号发生时，信号的代码作为参数传递给信号处理函数。这个参数运行一个处理函数处理几种不同的信号。</p><p>现在将从原型中的去掉参数</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:22ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#6F42C1;--1:#B392F0\">signal</span><span style=\"--0:#24292E;--1:#E1E4E8\">())(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>signal</strong>是一个函数，它返回一个函数指针，后者所指向的函数接受一个整型参数且无返回值。事实上signal函数返回一个指向该信号以前的处理函数的指针（被替换前的信号处理函数指针）。如果调用signal失败，例如由于非法的信号代码所致，函数将返回SIG_ERR值。这个值是个宏，在<code>signal.h</code>头文件中定义。</p><p><code>signal.h</code>头文件海定义了另外两个宏，<strong>SIG_DFL</strong>和<strong>SIG_IGN</strong>，它们可以作为signal函数的第二个参数。<strong>SIG_DFL</strong>恢复对该信号的缺省反应，<strong>SIG_IGN</strong>使该信号被忽略。</p><p>总之信号处理函数原型<code>void (*signal(int sig, void (*handler)(int)))(int);</code>声明了一个名为signal的函数，它：</p><ol>\n<li>接受一个信号编号<code>int sig</code></li>\n<li>接受一个指向信号处理函数的函数指针<code>void (*handler)(int)</code></li>\n<li>返回一个指向旧的信号处理函数的函数指针</li>\n</ol><p>用途就是利用<code>signal()</code>函数来设置新的信号处理方式，并保留旧的处理函数地址，方便之后恢复。</p></section><section><h3 id=\"1653-信号处理函数\">16.5.3 信号处理函数<a class=\"anchor\" href=\"#1653-信号处理函数\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>当一个已经设置了信号处理函数的信号发生时，系统首先恢复对该信号的缺省行为。这样做是为了防止如果信号处理函数内部也发生这个信号可能导致的无限循环。然后，信号处理函数被调用，信号代码作为参数传递给函数。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:39ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">my_handler</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">sig</span><span style=\"--0:#24292E;--1:#E1E4E8\">){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 假设在这里执行了很复杂的操作，并意外再次触发了 SIGINT</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 如果系统没有恢复缺省行为，my_handler 就会再次被调用，</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 可能导致堆栈溢出或无限递归，喵！</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 第一次调用signal(), 设置 my_handler</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">signal</span><span style=\"--0:#24292E;--1:#E1E4E8\">(SIGINT, my_handler);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// ...</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li>安全机制：当<strong>SIGINT</strong>发生时，系统内部会执行类似<code>signal(SIGINT,SIG_DFL);</code>的操作，然后再调用<code>my_handler</code>。</li>\n<li>如果要保持处理：在信号处理函数的第一行或某处重新调用<code>signal()</code></li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:25ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">my_handler</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">sig</span><span style=\"--0:#24292E;--1:#E1E4E8\">){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">signal</span><span style=\"--0:#24292E;--1:#E1E4E8\">(sig,my_handler);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 其他处理逻辑</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>信号处理函数可能执行的工作类型是非常有限的。如果信号是异步的，也就是说不是由于调用<code>abort</code>或<code>raise</code>函数引起的，信号处理函数便不应该调用除signal之外的任何库函数，因为在这种情况下是未定义的。而且信号处理函数除了能向一个类型为<code>volatile sig_atomic_t</code>的静态变量赋一个值以外，可能无法访问其他任何静态数据。为了保证真正的安全，信号处理函数所能做的就是对这些变量之一进行设置然后返回。程序的剩余部分必须定期检查变量的值，看看是否有信号发生。</p><p>如果信号是异步的（比如硬件错误、来自操作系统的中断，而不是自己调用 raise() 或 abort() 触发的），那么您的信号处理函数几乎不能调用任何标准库函数，除了 signal() 自身。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:47ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">unsafe_handler</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">sig</span><span style=\"--0:#24292E;--1:#E1E4E8\">){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 🚨 危险！在异步信号处理中，调用 printf 是未定义行为！</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 运行时环境可能不安全，可能破坏 stdio 库的内部状态。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Oops! Signal </span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\"> received.</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, sig);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 🚨 危险！</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">malloc</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">10</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span><span style=\"--0:#616972;--1:#99A0A6\"> // 堆栈可能处于不完整状态，malloc内部状态可能混乱！</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 应该调用什么？只有极少数函数安全，比如 _Exit 或 signal 本身。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>这些严格的限制是由于信号处理的本质产生的。信号通常用于提示发生了错误。在这些情况下，CPU的行为是精确定义的，在程序中，错误所处的上下文环境可能很不相同，因为它们并不一定能够良好定义。例如当<code>strcpy</code>函数正在执行时如果产生一个信号，可能当时目标字符串暂时未以NUL字节终结；或者当一个函数被调用时如果产生一个信号，当时堆栈可能处于不完整的状态。如果依赖这种上下文环境的库函数被调用它们就可能以不可预料的方式失败，很可能引发另一个信号。</p><p>访问限制定义了在信号处理函数中保证能够运行的最小功能。类型<code>sig_atomic_t</code>定义了一种CPU可以以原子方式访问的数据类型，也就是不可分割的访问单位。例如一台16位的机器可以以原子方式访问一个16位整数，但访问一个32位整数可能需要两个操作。在访问非原子数据的中间步骤时如果产生一个信号可能导致不一致的结果，在信号处理函数中把数据访问限制为原子单位可以消除这种可能性。</p><ul>\n<li>对特定类型静态变量<code>volatile sig_atomic_t</code>的测试</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:64ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;signal.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdlib.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 🐱 最佳实践：使用 volatile sig_atomic_t</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 保证了原子性 (CPU 一次操作完成) 和可见性 (防止编译器优化)。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">volatile</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">sig_atomic_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> g_signal_flag </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 静态变量默认是0，但如果变量在别的文件，需要声明为 static volatile</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// sig_atomic_t</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">safe_handler</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">sig</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 这是信号处理函数唯一应该做的事情：设置标志并快速返回</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">g_signal_flag </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> sig;</span><span style=\"--0:#616972;--1:#99A0A6\"> // 赋值是原子性的</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 最好不要做其他事情了！</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">signal</span><span style=\"--0:#24292E;--1:#E1E4E8\">(SIGINT, safe_handler);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">while</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 程序的其余部分必须定期检查这个标志！</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (g_signal_flag </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#6F42C1;--1:#B392F0\">fprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(stdout, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">捕捉到信号 </span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\">, 正在安全退出...</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, g_signal_flag);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#616972;--1:#99A0A6\">// 安全地调用库函数进行清理工作</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#6F42C1;--1:#B392F0\">exit</span><span style=\"--0:#24292E;--1:#E1E4E8\">(g_signal_flag);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 程序正常运行逻辑</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>标准表示信号处理函数可以通过调用exit终止程序。用于处理除了<strong>SIGABRT</strong>之外的所有信号的处理函数也可以通过调用abort终止程序。但是由于这两个都是库函数，所以当它们被异步信号处理函数调用时可能无法正常运行。如果必须用这种方式终止程序，注意仍然存在一种微小的可能性导致它失败。如果发生这种情况，函数的失败可能破坏数据或者表现出奇怪的症状，但程序最终将终止。</p>\n</blockquote></section></section><section><h2 id=\"166-打印可变参数列表stdargh\">16.6 打印可变参数列表&#x3C;stdarg.h><a class=\"anchor\" href=\"#166-打印可变参数列表stdargh\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>这组函数可用于可变参数列表必须被打印的场合。要求包含头文件<code>&#x3C;stdio.h></code> <code>&#x3C;stdarg.h></code></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:60ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">vprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">format</span><span style=\"--0:#24292E;--1:#E1E4E8\">, va_list </span><span style=\"--0:#AE4B07;--1:#FFAB70\">arg</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">vfprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">stream</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">format</span><span style=\"--0:#24292E;--1:#E1E4E8\">, va_list </span><span style=\"--0:#AE4B07;--1:#FFAB70\">arg</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">vsprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">buffer</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">format</span><span style=\"--0:#24292E;--1:#E1E4E8\">, va_list </span><span style=\"--0:#AE4B07;--1:#FFAB70\">arg</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>推荐使用内存更安全的<code>int vsnprintf(char *str, size_t size, const char *format, va_list ap)</code>而不是<code>vsprintf</code></p>\n</blockquote><section><h4 id=\"例子\">例子<a class=\"anchor\" href=\"#例子\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>用<code>vprintf</code>实现打印格式化的log</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:37ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdarg.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">my_log</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">format</span><span style=\"--0:#24292E;--1:#E1E4E8\">, ...){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">va_list args;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">va_start</span><span style=\"--0:#24292E;--1:#E1E4E8\">(args,format);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 使用vprintf 将格式化字符串和参数列表打印到标准输出</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"LOG: \"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">vprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(format,args);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">va_end</span><span style=\"--0:#24292E;--1:#E1E4E8\">(args);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>用<code>vfprintf</code>实现打印格式化log到文本流</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:58ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdarg.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdlib.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;string.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">file_log</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">stream</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">format</span><span style=\"--0:#24292E;--1:#E1E4E8\">, ...);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">remove_line</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">str</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">log </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"app.log\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">fp </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">fopen</span><span style=\"--0:#24292E;--1:#E1E4E8\">(log,</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"w\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (fp </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">fprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(stdout,</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Failed to open file </span><span style=\"--0:#005CC5;--1:#79B8FF\">%s</span><span style=\"--0:#032F62;--1:#9ECBFF\">,exit...\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">,log);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">fclose</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">exit</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">name</span><span style=\"--0:#24292E;--1:#E1E4E8\">[</span><span style=\"--0:#005CC5;--1:#79B8FF\">20</span><span style=\"--0:#24292E;--1:#E1E4E8\">],</span><span style=\"--0:#AE4B07;--1:#FFAB70\">passwd</span><span style=\"--0:#24292E;--1:#E1E4E8\">[</span><span style=\"--0:#005CC5;--1:#79B8FF\">20</span><span style=\"--0:#24292E;--1:#E1E4E8\">];</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">memset</span><span style=\"--0:#24292E;--1:#E1E4E8\">(name,</span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(name));</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">memset</span><span style=\"--0:#24292E;--1:#E1E4E8\">(passwd,</span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(passwd));</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fputs</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Please input your Loginname: </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">,stdout);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fgets</span><span style=\"--0:#24292E;--1:#E1E4E8\">(name,</span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(name) </span><span style=\"--0:#BF3441;--1:#F97583\">/</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">name</span><span style=\"--0:#24292E;--1:#E1E4E8\">[</span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">]), stdin);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">remove_line</span><span style=\"--0:#24292E;--1:#E1E4E8\">(name);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fputs</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Please input your Loginpasswd: </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">,stdout);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fgets</span><span style=\"--0:#24292E;--1:#E1E4E8\">(passwd,</span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(passwd) </span><span style=\"--0:#BF3441;--1:#F97583\">/</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">passwd</span><span style=\"--0:#24292E;--1:#E1E4E8\">[</span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">]), stdin);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">remove_line</span><span style=\"--0:#24292E;--1:#E1E4E8\">(passwd);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">file_log</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Everything I found great was sunfaded.\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">file_log</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"LoginName: </span><span style=\"--0:#005CC5;--1:#79B8FF\">%s</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, name);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">file_log</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"LoginPasswd: </span><span style=\"--0:#005CC5;--1:#79B8FF\">%s</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, passwd);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fclose</span><span style=\"--0:#24292E;--1:#E1E4E8\">(fp);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">file_log</span><span style=\"--0:#24292E;--1:#E1E4E8\">(FILE </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">stream</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">format</span><span style=\"--0:#24292E;--1:#E1E4E8\">, ...){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">va_list args;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">va_start</span><span style=\"--0:#24292E;--1:#E1E4E8\">(args,format);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(stream,</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"LOG: \"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">vfprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(stream,format,args);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(stream,</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">va_end</span><span style=\"--0:#24292E;--1:#E1E4E8\">(args);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">46</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">remove_line</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">str</span><span style=\"--0:#24292E;--1:#E1E4E8\">){</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">47</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> size </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">strlen</span><span style=\"--0:#24292E;--1:#E1E4E8\">(str);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">48</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (size </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">str</span><span style=\"--0:#24292E;--1:#E1E4E8\">[size </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">] </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">'</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">49</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#AE4B07;--1:#FFAB70\">str</span><span style=\"--0:#24292E;--1:#E1E4E8\">[size </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">] </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\0</span><span style=\"--0:#032F62;--1:#9ECBFF\">'</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">50</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>使用<code>vsnprintf</code> 将格式输出到字符数组内</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:66ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\"># include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdarg.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdlib.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;string.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">MAX_BUFFER</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">256</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 封装函数：将格式化输出写入到字符串</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">/*</span></div></div><div class=\"ec-line\" style=\"--ecIndent:1ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\"> </span></span><span style=\"--0:#616972;--1:#99A0A6\">*  @brief package function and write down output format to string</span></div></div><div class=\"ec-line\" style=\"--ecIndent:1ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\"> </span></span><span style=\"--0:#616972;--1:#99A0A6\">*  @param  buffer is the container of format string</span></div></div><div class=\"ec-line\" style=\"--ecIndent:1ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\"> </span></span><span style=\"--0:#616972;--1:#99A0A6\">*  @param  format is the requirement value of vsprintf function</span></div></div><div class=\"ec-line\" style=\"--ecIndent:1ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\"> </span></span><span style=\"--0:#616972;--1:#99A0A6\">*  @param  ... is variables argument list</span></div></div><div class=\"ec-line\" style=\"--ecIndent:1ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\"> </span></span><span style=\"--0:#616972;--1:#99A0A6\">*  @return return actual format with va_list length</span></div></div><div class=\"ec-line\" style=\"--ecIndent:1ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\"> </span></span><span style=\"--0:#616972;--1:#99A0A6\">* */</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">format_message</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">buffer</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">format</span><span style=\"--0:#24292E;--1:#E1E4E8\">, ...);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">output</span><span style=\"--0:#24292E;--1:#E1E4E8\">[MAX_BUFFER];</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">memset</span><span style=\"--0:#24292E;--1:#E1E4E8\">(output, </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(output));</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">format_message</span><span style=\"--0:#24292E;--1:#E1E4E8\">(output, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\"> is the real value of world!</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#005CC5;--1:#79B8FF\">42</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(stdout, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">%s</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, output);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EXIT_SUCCESS;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">format_message</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">buffer</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">format</span><span style=\"--0:#24292E;--1:#E1E4E8\">, ...) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">va_list args;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">va_start</span><span style=\"--0:#24292E;--1:#E1E4E8\">(args, format);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 使用 vsnprintf 代替 vsprintf，因为它接受缓冲区大小参数，更安全</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// vsnprintf 是 vprintf 系列中用于写入字符串的最佳实践</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> result </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">vsnprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(buffer, MAX_BUFFER, format, args);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">va_end</span><span style=\"--0:#24292E;--1:#E1E4E8\">(args);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> result;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section><section><h2 id=\"167-执行环境\">16.7 执行环境<a class=\"anchor\" href=\"#167-执行环境\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"1671-终止执行stdlibh\">16.7.1 终止执行&#x3C;stdlib.h><a class=\"anchor\" href=\"#1671-终止执行stdlibh\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>这三个函数与正常或不正常的程序终止有关。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:32ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">abort</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">atexit</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">func)(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">));</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">exit</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">status</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>abort</code>函数用于不正常地终止一个正在执行的程序。由于这个函数将引发SIGABRT信号，可以在程序中为这个信号设置一个信号处理函数。</p><p><code>atexit</code>函数可以把一些函数注册为<strong>退出函数(exit function)</strong>。当程序将要正常终止时（或者由于调用exit，或者由于main函数返回），退出函数将被调用，退出函数不能接受任何参数。</p><p><code>exit</code>函数用于正常终止程序。</p><p>当<code>exit</code>函数被调用时，所有被<code>atexit</code>函数注册为退出函数的函数将按照它们所注册的顺序被反序依次调用。然后所有用于流的缓冲区被刷新，所有打开的文件被关闭。用<code>tmpfile</code>函数创建的文件被删除。然后，退出状态返回给宿主环境，程序停止执行。</p><blockquote>\n<p>不要在atexit注册的退出函数内再次调用exit函数，其效果未定义会导致一个无限循环，很可能只有当堆栈的内存耗尽后才会终止。</p>\n</blockquote></section><section><h3 id=\"1672-断言asserth\">16.7.2 断言&#x3C;assert.h><a class=\"anchor\" href=\"#1672-断言asserth\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>断言就是声明某种东西应该为真。ANSI C实现了一个assert宏，在调试程序时很有用。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:28ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">assert</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">expression</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>当它被执行时，这个宏对表达式参数进行测试。如果它的值为假（零），它就向标准错误打印一条诊断信息并终止程序。这条信息格式是由编译器定义的，为真则则不打印任何东西继续执行。</p><p>这个宏提供了一种方便的方法，对应该是真的东西进行检。例如，如果一个函数必须用一个不为NULL的指针参数进行调用，那么函数可以用断言验证这个值：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:22ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">assert</span><span style=\"--0:#24292E;--1:#E1E4E8\">(value </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>如果函数错误地接受了一个<strong>NULL</strong>参数，程序就会打印一条类型下面形式的信息：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:48ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">Assertion failed: value </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">, file.c line </span><span style=\"--0:#005CC5;--1:#79B8FF\">274</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>用这种方法使用断言使调试变得更容易，因为一旦出现错误，程序就会停止。而且，这条信息准确地提示了症状出现地点。</p>\n</blockquote><blockquote>\n<p>asser只适用于验证必须为真的表达式。</p>\n</blockquote><p>可以在编译时通过定义<strong>NDEBUG</strong>消除所有的断言。使用编译器命令<code>-DNDEBUG</code>或在源文件头文件<code>&#x3C;assert.h></code>被包含前增加下面这个定义。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:14ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">NDEBUG</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"1673-环境stdlibh\">16.7.3 环境&#x3C;stdlib.h><a class=\"anchor\" href=\"#1673-环境stdlibh\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>**环境(environment)**就是一个由编译器定义的名字/值对的列表，它由操作系统进行维护（就是系统的环境变量）。<code>getenv</code>函数在这个列表中查找一个特定的名字，如果找到，返回一个指向其对应值的指针。程序不能修改返回的字符串。如果名字未找到，函数就返回一个NULL指针。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:31ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#6F42C1;--1:#B392F0\">getenv</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">name</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><section><h4 id=\"使用两种不同的方法分配内存并输出映射的环境变量\">使用两种不同的方法分配内存并输出映射的环境变量<a class=\"anchor\" href=\"#使用两种不同的方法分配内存并输出映射的环境变量\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:78ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdlib.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;string.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">MAX_ENV_LEN</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">128</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">safe_getenv_copy</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">env_name</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">process_env_dup</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">env_name</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">safe_getenv_copy</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"HOME\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">process_env_dup</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"SHELL\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">safe_getenv_copy</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">env_name</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">env_value </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">getenv</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">env_name);</span><span style=\"--0:#616972;--1:#99A0A6\"> // 这里env_value</span></div></div><div class=\"ec-line\" style=\"--ecIndent:17ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">                 </span><span style=\"--0:#616972;--1:#99A0A6\">// 指向的是在静态存储区中有操作系统维护的一个环境变量表的内存</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (env_value </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 1. 在栈上分配缓冲区</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">local_buffer</span><span style=\"--0:#24292E;--1:#E1E4E8\">[MAX_ENV_LEN];</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 2. duplicate: use strncpy function to ensure local_buffer not to</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// overflow. attention:strncpy may lose end symbol \\0, so you need to make</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// sure manually</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">strncpy</span><span style=\"--0:#24292E;--1:#E1E4E8\">(local_buffer, env_value, MAX_ENV_LEN </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#AE4B07;--1:#FFAB70\">local_buffer</span><span style=\"--0:#24292E;--1:#E1E4E8\">[MAX_ENV_LEN </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">] </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\0</span><span style=\"--0:#032F62;--1:#9ECBFF\">'</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span><span style=\"--0:#616972;--1:#99A0A6\"> // ensure empty terminate</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Safely copied </span><span style=\"--0:#005CC5;--1:#79B8FF\">%s</span><span style=\"--0:#032F62;--1:#9ECBFF\">: </span><span style=\"--0:#005CC5;--1:#79B8FF\">%s\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, env_name, local_buffer);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 3. local_buffer will automatically released when leave function.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">else</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">%s</span><span style=\"--0:#032F62;--1:#9ECBFF\"> not found\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, env_name);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">process_env_dup</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">env_name</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">env_value </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">getenv</span><span style=\"--0:#24292E;--1:#E1E4E8\">(env_name);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">heap_copy </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (env_value </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// 1. duplicate: use strdup (or strncpy + malloc) to duplicate to heap</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#616972;--1:#99A0A6\">// strdup can automatically allocate enough memory and copy string</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">46</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">heap_copy </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">strdup</span><span style=\"--0:#24292E;--1:#E1E4E8\">(env_value);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">47</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">48</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (heap_copy </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">49</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Safely duplicated </span><span style=\"--0:#005CC5;--1:#79B8FF\">%s</span><span style=\"--0:#032F62;--1:#9ECBFF\">: </span><span style=\"--0:#005CC5;--1:#79B8FF\">%s\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, env_name, heap_copy);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">50</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">51</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#6F42C1;--1:#B392F0\">free</span><span style=\"--0:#24292E;--1:#E1E4E8\">(heap_copy);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">52</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">53</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">54</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section><section><h3 id=\"1674-执行系统命令stdlibh\">16.7.4 执行系统命令&#x3C;stdlib.h><a class=\"anchor\" href=\"#1674-执行系统命令stdlibh\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>system</code>函数把它的字符串参数传递给宿主操作系统，这样它就可以作为一条命令，由系统的命令处理器执行。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:33ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">system</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">command</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>这个任务执行的准确行为因编译器而异，返回值也是一样。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:23ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> val </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">system</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>一种用于查询命令处理器是否存在的调用，如果存在返回非零值，不存在则返回零。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:79ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdlib.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"1. Listing files using system():</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 调用 ls 命令列出当前目录文件</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">system</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"ls -l --color=auto\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">2. Changing terminal background to BLUE using system() and 'tput'</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Press Any key to continue...</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">getchar</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 使用 tput 命令</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// setab 4 = Set Background Color to Blue (ANSI color 4)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">system</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"tput setab 4\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 清屏</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">system</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"clear\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"The background should now be BLUE.</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"This was done by invoking the 'tput' and 'clear' shell commands.</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">3. Resetting using ANSI escape codes (via echo):</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"(Press Enter to reset...)</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">getchar</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 使用 echo 发送 ANSI 转义字符 (SGR 0 重置属性)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// \\033[0m 是重置所有属性的转移码</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">system</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"echo -e </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\\"\\\\</span><span style=\"--0:#032F62;--1:#9ECBFF\">033[0m</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\\"</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">system</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"clear\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Back to normal!</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"1675-排序和查找stdlibh\">16.7.5 排序和查找&#x3C;stdlib.h><a class=\"anchor\" href=\"#1675-排序和查找stdlibh\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>qsort</code>函数在一个数组中以升序的方式对数据进行排序。由于它是和类型无关的，所以可以使用qsort排序任意类型的数据，只是数组中元素的长度是固定的。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:56ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">qsort</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">base</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span><span style=\"--0:#BF3441;--1:#F97583\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">n_elements</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">el_size</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:11ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">           </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">compare)(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const*</span><span style=\"--0:#24292E;--1:#E1E4E8\">));</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>第一个参数指向需要排序的数组，第二个参数指定数组中元素的数目，第三个参数指定每个元素的长度（以字符为单位），第四个参数是一个函数指针，用于对需要排序的元素进行比较。在排序时，<code>qsort</code>调用这个函数对数组中的数据进行比较。通过传递一个指向合适的比较函数的指针，可以用<code>qsort</code>排序任意类型值的数组。</p><p>比较函数接受两个参数，它们是指向两个需要进行比较的值的指针。函数应该返回一个整数，大于零、等于零和小于零分别表示第一个参数大于、等于和小于第二个参数。</p><section><h4 id=\"使用-qsort-对结构体数组按照结构体内成员进行排序\">使用 qsort 对结构体数组按照结构体内成员进行排序<a class=\"anchor\" href=\"#使用-qsort-对结构体数组按照结构体内成员进行排序\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><div class=\"expressive-code\"><figure class=\"frame\" style=\"--lnWidth:3ch\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:80ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdlib.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;time.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">strlen_my</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">str</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">remove_line</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">str</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">strcmp_my</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">s1</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">s2</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">INITMY_ARR</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">ARR</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#AE4B07;--1:#FFAB70\">SIZE</span><span style=\"--0:#24292E;--1:#E1E4E8\">)                                                  </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">do</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {                                                                         </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> __i;                                                                   </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (__i </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">; __i </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (SIZE); __i</span><span style=\"--0:#BF3441;--1:#F97583\">++</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {                                       </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#6F42C1;--1:#B392F0\">fprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(stdout, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"put No </span><span style=\"--0:#005CC5;--1:#79B8FF\">%d</span><span style=\"--0:#032F62;--1:#9ECBFF\"> key string:</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, __i);                         </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#6F42C1;--1:#B392F0\">fgets</span><span style=\"--0:#24292E;--1:#E1E4E8\">((ARR)[__i].key, </span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">((ARR)[__i].key), stdin);                    </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#6F42C1;--1:#B392F0\">remove_line</span><span style=\"--0:#24292E;--1:#E1E4E8\">((ARR)[__i].key);                                             </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">      </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">(ARR)[__i].other_data </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">rand</span><span style=\"--0:#24292E;--1:#E1E4E8\">() </span><span style=\"--0:#BF3441;--1:#F97583\">%</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">100</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">;                                </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}                                                                          </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">while</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#define</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">PRINT_ARR</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#AE4B07;--1:#FFAB70\">ARR</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#AE4B07;--1:#FFAB70\">SIZE</span><span style=\"--0:#24292E;--1:#E1E4E8\">)                                                   </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">do</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {                                                                         </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> __i;                                                                   </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (__i </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">; __i </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (SIZE); __i</span><span style=\"--0:#BF3441;--1:#F97583\">++</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {                                       </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\">      </span><span style=\"--0:#6F42C1;--1:#B392F0\">fprintf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(stdout, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">%s</span><span style=\"--0:#032F62;--1:#9ECBFF\"> -> </span><span style=\"--0:#005CC5;--1:#79B8FF\">%d\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, (ARR)[__i].key, (ARR)[__i].other_data);    </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}                                                                          </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">while</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">typedef</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">key</span><span style=\"--0:#24292E;--1:#E1E4E8\">[</span><span style=\"--0:#005CC5;--1:#79B8FF\">10</span><span style=\"--0:#24292E;--1:#E1E4E8\">];</span><span style=\"--0:#616972;--1:#99A0A6\">   // 数组的排序关键字</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> other_data;</span><span style=\"--0:#616972;--1:#99A0A6\"> // 与关键字关联的数据</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">} Record;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 比较函数，只比较关键的值。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">/*</span></div></div><div class=\"ec-line\" style=\"--ecIndent:1ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\"> </span></span><span style=\"--0:#616972;--1:#99A0A6\">*  @brief compare function：only compare key value</span></div></div><div class=\"ec-line\" style=\"--ecIndent:1ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\"> </span></span><span style=\"--0:#616972;--1:#99A0A6\">*  @param two void const* variable can execute force transfer for val</span></div></div><div class=\"ec-line\" style=\"--ecIndent:1ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\"> </span></span><span style=\"--0:#616972;--1:#99A0A6\">*  @return positive means val1 large than val2 zero means val1 equals to val2</span></div></div><div class=\"ec-line\" style=\"--ecIndent:1ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\"> </span></span><span style=\"--0:#616972;--1:#99A0A6\">* negative means val1 less than val2</span></div></div><div class=\"ec-line\" style=\"--ecIndent:1ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#616972;--1:#99A0A6\"> </span></span><span style=\"--0:#616972;--1:#99A0A6\">* */</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">r_compare</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">b</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">time_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> t;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">srand</span><span style=\"--0:#24292E;--1:#E1E4E8\">((</span><span style=\"--0:#BF3441;--1:#F97583\">unsigned</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span><span style=\"--0:#6F42C1;--1:#B392F0\">time</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\">t));</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">46</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> length </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">5</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">47</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">48</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">Record </span><span style=\"--0:#AE4B07;--1:#FFAB70\">array</span><span style=\"--0:#24292E;--1:#E1E4E8\">[length];</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">49</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">INITMY_ARR</span><span style=\"--0:#24292E;--1:#E1E4E8\">(array, length);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">50</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">51</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fputs</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"before qsort:</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, stdout);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">52</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">PRINT_ARR</span><span style=\"--0:#24292E;--1:#E1E4E8\">(array, length);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">53</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">qsort</span><span style=\"--0:#24292E;--1:#E1E4E8\">(array, length, </span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(Record), r_compare);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">54</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">55</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fputs</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"after qsort:</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, stdout);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">56</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">PRINT_ARR</span><span style=\"--0:#24292E;--1:#E1E4E8\">(array, length);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">57</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">58</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">Record target;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">59</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">Record </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">result;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">60</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">61</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 查找</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">62</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">请输入要查找的字符串：</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">63</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">fgets</span><span style=\"--0:#24292E;--1:#E1E4E8\">(target.key, </span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(target.key), stdin);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">64</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">remove_line</span><span style=\"--0:#24292E;--1:#E1E4E8\">(target.key);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">65</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">66</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 使用 bsearch 执行二分查找</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">67</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">result </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (Record </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span><span style=\"--0:#6F42C1;--1:#B392F0\">bsearch</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\">target, array, length, </span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(Record), r_compare);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">68</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">69</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (result </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">70</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"找到！key: </span><span style=\"--0:#005CC5;--1:#79B8FF\">%s</span><span style=\"--0:#032F62;--1:#9ECBFF\">, other_data: </span><span style=\"--0:#005CC5;--1:#79B8FF\">%d\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, result->key, result->other_data);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">71</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"在数组中内存地址偏移量: </span><span style=\"--0:#005CC5;--1:#79B8FF\">%ld\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, result </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> array);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">72</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">} </span><span style=\"--0:#BF3441;--1:#F97583\">else</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">73</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"未找到 key 为 </span><span style=\"--0:#005CC5;--1:#79B8FF\">%s</span><span style=\"--0:#032F62;--1:#9ECBFF\"> 的元素</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, target.key);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">74</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">75</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">76</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> EXIT_SUCCESS;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">77</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">78</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">79</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">strlen_my</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">str</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">80</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">p </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> str;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">81</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">while</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">p </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\0</span><span style=\"--0:#032F62;--1:#9ECBFF\">'</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">82</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">p</span><span style=\"--0:#BF3441;--1:#F97583\">++</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">83</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> p </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> str;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">84</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">85</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">86</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">strcmp_my</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">s1</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">s2</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">87</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">while</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">s1 </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\0</span><span style=\"--0:#032F62;--1:#9ECBFF\">'</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">s1 </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">s2) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">88</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">s1</span><span style=\"--0:#BF3441;--1:#F97583\">++</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">89</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">s2</span><span style=\"--0:#BF3441;--1:#F97583\">++</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">90</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">91</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">92</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 为什么强制转换为 unsigned char？</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">93</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// C 语言标准规定 strcmp 比较时应将字符视为 unsigned char。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">94</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 如果不转，对于扩展 ASCII 码（如大于 127 的字符），</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">95</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 可能会被当成负数，导致比较结果错误。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">96</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">97</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">unsigned</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">)s1 </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">unsigned</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">)s2;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">98</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">99</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">100</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">remove_line</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">str</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">101</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> size </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">strlen_my</span><span style=\"--0:#24292E;--1:#E1E4E8\">(str);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">102</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (size </span><span style=\"--0:#BF3441;--1:#F97583\">!=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">str</span><span style=\"--0:#24292E;--1:#E1E4E8\">[size </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">] </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">'</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">103</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#AE4B07;--1:#FFAB70\">str</span><span style=\"--0:#24292E;--1:#E1E4E8\">[size </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">] </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\0</span><span style=\"--0:#032F62;--1:#9ECBFF\">'</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">104</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">105</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">106</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">107</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">r_compare</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">a</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">b</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">108</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">strcmp_my</span><span style=\"--0:#24292E;--1:#E1E4E8\">(((</span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Record </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">)a)->key, ((</span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> Record </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">)b)->key);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">109</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section></section><section><h2 id=\"168-locale\">16.8 locale<a class=\"anchor\" href=\"#168-locale\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>为了使C语言在全世界的范围内更为通用，标准定义了locale，这是一组特定的参数，每个国家可能不同。在缺省的情况下是 <strong>“C”locale</strong>，编译器也可以定义其他的locale。修改locale可能影响库函数的运行方式。</p><p><code>setlocale</code>函数的原型如下所示，它用于修改整个或部分locale</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:50ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#6F42C1;--1:#B392F0\">setlocale</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">category</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">locale</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>category</code>参数指定locale的哪个部分需要进行修改。所允许出现的值于下表</p><p><strong></strong></p><center><strong>setlocale 类型</strong></center><p></p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\">值</th><th align=\"center\">修改</th></tr></thead><tbody><tr><td align=\"center\">LC_ALL</td><td align=\"center\">整个locale</td></tr><tr><td align=\"center\">LC_COLLATE</td><td align=\"center\">对照序列，它将影响strcoll和strxfrm函数的行为</td></tr><tr><td align=\"center\">LC_CTYPE</td><td align=\"center\">定义于ctype.h中的函数所使用的字符类型分类信息</td></tr><tr><td align=\"center\">LC_MONETARY</td><td align=\"center\">在格式化货币值时使用的字符</td></tr><tr><td align=\"center\">LC_NUMERIC</td><td align=\"center\">在格式化非货币值时使用的字符。同时修改由格式化输入/输出函数和字符串转换函数所使用的小数点符号</td></tr><tr><td align=\"center\">LC_TIME</td><td align=\"center\">strftime函数的行为</td></tr></tbody></table><p>如果<code>setlocale</code>的第二个参数为NULL，函数将返回一个指向给定类型的当前的locale的名字的指针。这个值可能被保存并在后续的<code>setlocale</code>函数中使用，用来恢复以前的locale的值。</p><blockquote>\n<p>这里<code>setlocale</code>函数返回的也是一个静态内存中的值，和ctime，strftime一样最好用一个字符数组接收当前返回的值，否则后续调用<code>setlocale</code>函数这个值可能会发生改变。</p>\n</blockquote><blockquote>\n<p>使用<code>strdup</code>或<code>strncpy</code>复制到堆内存或栈内存上。</p>\n</blockquote><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:78ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;locale.h></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#616972;--1:#99A0A6\">// setlocale</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdlib.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;string.h></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#616972;--1:#99A0A6\">// strdup (POSIX)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\">// 打印浮点数，观察小数点是 '.' 还是 ','</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">inline</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">print_number</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 1. 显式设置初始环境为 \"C\" (标准 C 模式，小数点是点)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">setlocale</span><span style=\"--0:#24292E;--1:#E1E4E8\">(LC_NUMERIC, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"C\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"1. Initial state (C locale):</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">print_number</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 获取当前 locale 名称</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">current_ptr </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">setlocale</span><span style=\"--0:#24292E;--1:#E1E4E8\">(LC_NUMERIC, </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 必须拷贝字符串</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">saved_locale </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">strdup</span><span style=\"--0:#24292E;--1:#E1E4E8\">(current_ptr);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">[System] Saved old locale: '</span><span style=\"--0:#005CC5;--1:#79B8FF\">%s</span><span style=\"--0:#032F62;--1:#9ECBFF\">'</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, saved_locale);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 切换到新环境</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">new_loc </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">setlocale</span><span style=\"--0:#24292E;--1:#E1E4E8\">(LC_NUMERIC, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"de_DE.UTF-8\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (new_loc </span><span style=\"--0:#BF3441;--1:#F97583\">==</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">NULL</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">(de_DE.UTF-8 not found, trying system default...)</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">    </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">new_loc </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">setlocale</span><span style=\"--0:#24292E;--1:#E1E4E8\">(LC_NUMERIC, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span><span style=\"--0:#616972;--1:#99A0A6\"> // 尝试系统默认</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">2. Temporary state (Changed to '</span><span style=\"--0:#005CC5;--1:#79B8FF\">%s</span><span style=\"--0:#032F62;--1:#9ECBFF\">'):</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, new_loc);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">print_number</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 恢复原来的环境</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">[System] Restoring previous locale...</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">setlocale</span><span style=\"--0:#24292E;--1:#E1E4E8\">(LC_NUMERIC, saved_locale);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">3. Restored state:</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">print_number</span><span style=\"--0:#24292E;--1:#E1E4E8\">();</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 别忘了释放拷贝字符串的内存</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">free</span><span style=\"--0:#24292E;--1:#E1E4E8\">(saved_locale);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">46</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">inline</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">static</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">print_number</span><span style=\"--0:#24292E;--1:#E1E4E8\">() { </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\" Current Output: </span><span style=\"--0:#005CC5;--1:#79B8FF\">%.2f\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#005CC5;--1:#79B8FF\">3.14</span><span style=\"--0:#24292E;--1:#E1E4E8\">); }</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><section><h3 id=\"1681-数值和货币格式-localeh\">16.8.1 数值和货币格式 &#x3C;locale.h><a class=\"anchor\" href=\"#1681-数值和货币格式-localeh\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>localeconv</code>函数用于获得根据当前的<code>locale</code>对非货币值和货币值进行合适的格式化所需要的信息。这个函数并不实际执行格式化任务，它只是提供一些如何进行格式化的信息。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:31ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">struct</span><span style=\"--0:#24292E;--1:#E1E4E8\"> lconv </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#6F42C1;--1:#B392F0\">localeconv</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">void</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>lconv</code>结构包含两种类型的参数：字符和字符指针。</p></section><section><h3 id=\"1682-字符串和-localestringh\">16.8.2 字符串和 locale&#x3C;string.h><a class=\"anchor\" href=\"#1682-字符串和-localestringh\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>一台机器的字符集的对照序列是固定的，但locale提供了一种方法指定不同的序列。当你必须使用一个并非缺省的对照序列时，可以使用下列两个函数。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:54ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">strcoll</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">s1</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">s2</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">strxfrm</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">s1</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#AE4B07;--1:#FFAB70\">s2</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#BF3441;--1:#F97583\">size_t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">size</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>strcoll</code>函数用法和<code>strcmp</code>类似，对两个字符串根据当前的locale的LC_COLLATE类型参数指定的字符串进行比较。它返回一个大于、等于或小于零的值。</p><blockquote>\n<p>这个比较函数所需的计算量可能比<code>strcmp</code>需要多的多的计算量。因为它需要遵循一个并非是本地机器的对照序列。</p>\n</blockquote><p>当字符串必须以这种方式反复进行比较时，可以使用<code>strxfrm</code>函数减少计算量。它根据当前的locale解释的第二个参数转换为另一个不依赖于locale的字符串。尽管转换后的字符串的内容是未确定的。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:71ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;locale.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;stdio.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">#include</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;string.h></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">main</span><span style=\"--0:#24292E;--1:#E1E4E8\">() {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// set local environment （to let program know the language habit now）</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">setlocale</span><span style=\"--0:#24292E;--1:#E1E4E8\">(LC_ALL, </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">s1 </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"apple\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">const</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">s2 </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Banana\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Comparing '</span><span style=\"--0:#005CC5;--1:#79B8FF\">%s</span><span style=\"--0:#032F62;--1:#9ECBFF\">' and '</span><span style=\"--0:#005CC5;--1:#79B8FF\">%s</span><span style=\"--0:#032F62;--1:#9ECBFF\">' :</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, s1, s2);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 1. 使用 strcmp (only compare ASCII code)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 'a' = 97, 'B' = 66, 97 > 66</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> res_cmp </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">strcmp</span><span style=\"--0:#24292E;--1:#E1E4E8\">(s1, s2);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"[strcmp] Result: </span><span style=\"--0:#005CC5;--1:#79B8FF\">%d\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, res_cmp);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (res_cmp </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\" -> 'apple' come AFTER 'Banana' (ASCII order)</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">else</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\" -> 'apple' comes BEFORE 'Banana'</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"-------------------------</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 2. 使用 strcoll （compare with dictionary order ）</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// in the habit of eng, a comes before b unless the lower and upper</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> res_coll </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">strcoll</span><span style=\"--0:#24292E;--1:#E1E4E8\">(s1, s2);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"[strcoll] Result: </span><span style=\"--0:#005CC5;--1:#79B8FF\">%d\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, res_coll);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (res_coll </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\" -> 'apple' comes AFTER 'Banana'</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">else</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\" -> 'apple' comes BEFORE 'Banana' (Dictionary order)</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// 3. strxfrm showcase</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">--- strxfrm Demo ---</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">char</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#AE4B07;--1:#FFAB70\">buf1</span><span style=\"--0:#24292E;--1:#E1E4E8\">[</span><span style=\"--0:#005CC5;--1:#79B8FF\">100</span><span style=\"--0:#24292E;--1:#E1E4E8\">], </span><span style=\"--0:#AE4B07;--1:#FFAB70\">buf2</span><span style=\"--0:#24292E;--1:#E1E4E8\">[</span><span style=\"--0:#005CC5;--1:#79B8FF\">100</span><span style=\"--0:#24292E;--1:#E1E4E8\">];</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// transform natural language into the compare 'key' used by strcmp</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">strxfrm</span><span style=\"--0:#24292E;--1:#E1E4E8\">(buf1, s1, </span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(buf1));</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">strxfrm</span><span style=\"--0:#24292E;--1:#E1E4E8\">(buf2, s2, </span><span style=\"--0:#BF3441;--1:#F97583\">sizeof</span><span style=\"--0:#24292E;--1:#E1E4E8\">(buf2));</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// the converted content might be a bunch of gibberish or a</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// specific sequence</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// the content after transform maybe a mess of damaged code</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#616972;--1:#99A0A6\">// or specific sequence we only care about the result of strcmp</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">46</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">int</span><span style=\"--0:#24292E;--1:#E1E4E8\"> res_xfrm </span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">strcmp</span><span style=\"--0:#24292E;--1:#E1E4E8\">(buf1, buf2);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">47</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"strcmp(xfrm(s1),xfrm(s2)) Result: </span><span style=\"--0:#005CC5;--1:#79B8FF\">%d\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">, res_xfrm);</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">48</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">49</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (res_coll </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x26;&#x26;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> res_xfrm </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">) {</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">50</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#6F42C1;--1:#B392F0\">printf</span><span style=\"--0:#24292E;--1:#E1E4E8\">(</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Verification: strxfrm result matches strcoll result!</span><span style=\"--0:#005CC5;--1:#79B8FF\">\\n</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">51</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">52</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#BF3441;--1:#F97583\">return</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">53</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p><code>strcoll</code>在只需比较少次数的字符串比<code>strxtrm</code>快，<code>strxtrm</code> + <code>strcmp</code>用空间换时间的策略。</p>\n</blockquote><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c\" class=\"wrap\" style=\"--ecMaxLine:53ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">详细对比：为什么会这样？</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">假设我们要排序 </span><span style=\"--0:#005CC5;--1:#79B8FF\">1000</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 个中文名字。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#005CC5;--1:#79B8FF\">1.</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 只用 </span><span style=\"--0:#6F42C1;--1:#B392F0\">strcoll</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (慢)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">排序算法（如 qsort）需要进行约 </span><span style=\"--0:#005CC5;--1:#79B8FF\">10</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span><span style=\"--0:#BF3441;--1:#F97583\">0</span><span style=\"--0:#005CC5;--1:#79B8FF\">00</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 次比较 ($N \\log N$)。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:3ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 第 </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 次比较：strcoll 查阅复杂的字典规则，算出 </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"张三\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">&#x3C;</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"李四\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:3ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 第 </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 次比较：strcoll 再次查阅规则，算出 </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"张三\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"安二\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:3ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ...</span></div></div><div class=\"ec-line\" style=\"--ecIndent:3ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 第 </span><span style=\"--0:#005CC5;--1:#79B8FF\">10</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span><span style=\"--0:#BF3441;--1:#F97583\">0</span><span style=\"--0:#005CC5;--1:#79B8FF\">00</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 次比较：strcoll 第 N 次查阅规则...</span></div></div><div class=\"ec-line\" style=\"--ecIndent:3ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 结果：同一个字符串的规则被重复解析了无数次，浪费大量 CPU。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">  </span><span style=\"--0:#005CC5;--1:#79B8FF\">2.</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 用 strxfrm </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">strcmp</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (快)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">这是“空间换时间”的策略。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:3ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 预处理阶段：调用 </span><span style=\"--0:#005CC5;--1:#79B8FF\">1000</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 次 strxfrm。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:7ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\">       </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 把 </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"张三\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 转换成二进制键值 \\x05\\x01... (假设值)。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:7ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\">       </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 把 </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"李四\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 转换成二进制键值 \\x08\\x02...。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:7ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\">       </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 这步虽然有开销，但每个字符串只做一次。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:3ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 排序阶段：进行 </span><span style=\"--0:#005CC5;--1:#79B8FF\">10</span><span style=\"--0:#24292E;--1:#E1E4E8\">,</span><span style=\"--0:#BF3441;--1:#F97583\">0</span><span style=\"--0:#005CC5;--1:#79B8FF\">00</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 次 strcmp。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:7ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\">       </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> strcmp 只需要比较 \\x05 和 \\x08，极其快（CPU 指令级别）。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:3ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 结果：最耗时的“查规则”只做了 N 次，而不是 $N \\log N$ 次。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:2ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292E;--1:#E1E4E8\">  </span></span><span style=\"--0:#24292E;--1:#E1E4E8\">总结公式</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:3ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 如果你只比较一次（比如 </span><span style=\"--0:#BF3441;--1:#F97583\">if</span><span style=\"--0:#24292E;--1:#E1E4E8\"> (</span><span style=\"--0:#6F42C1;--1:#B392F0\">strcoll</span><span style=\"--0:#24292E;--1:#E1E4E8\">(a, b) </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">)）：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:7ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\">       </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 直接用 strcoll 更快。因为 strxfrm 需要分配内存、转换，这本身也是开销。</span></div></div><div class=\"ec-line\" style=\"--ecIndent:3ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\">   </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 如果你要排序（比较次数远多于元素个数）：</span></div></div><div class=\"ec-line\" style=\"--ecIndent:7ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\">       </span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> strxfrm </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> strcmp 是王道。</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p><code>strxfrm</code>就是为了把昂贵的的逻辑判断“缓存”成廉价的二进制数据。</p>\n</blockquote></section><section><h3 id=\"1683-改变locale的效果\">16.8.3 改变locale的效果<a class=\"anchor\" href=\"#1683-改变locale的效果\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ol>\n<li>\n<p>locale可能向正在执行的程序所使用的字符集增加字符（但可能不会改变现存字符的含义）。\n例如许多欧洲语言使用了能够提示重音、货币符号和其他特殊符号的扩展字符集。</p>\n</li>\n<li>\n<p>打印的方向可能会改变。尤其是，locale决定一个字符应该根据前面一个被打印的字符的那个方向进行打印。</p>\n</li>\n<li>\n<p>printf和scanf函数家族使用当前locale定义的小数点符号。</p>\n</li>\n<li>\n<p>如果locale扩展了正在使用的字符集，isalpha、islower、isspace和isupper函数可能比以前包括更多的字符。</p>\n</li>\n<li>\n<p>正在使用的字符集的对照序列可能会改变。这个序列由strcoll函数使用，用于字符串之间的相互比较。</p>\n</li>\n<li>\n<p>strftime函数所产生的日期和时间格式的许多方面都是特定于locale的。</p>\n</li>\n</ol></section></section></section>","metadata":{"headings":[{"depth":2,"slug":"111-空白和注释","text":"1.1.1 空白和注释#"},{"depth":2,"slug":"112-预处理指令","text":"1.1.2 预处理指令#"},{"depth":2,"slug":"113-main函数","text":"1.1.3 main函数#"},{"depth":2,"slug":"114-关于scanf的格式代码","text":"1.1.4 关于scanf的格式代码#"},{"depth":2,"slug":"21-环境","text":"2.1 环境#"},{"depth":2,"slug":"211-翻译","text":"2.1.1 翻译#"},{"depth":2,"slug":"212-执行","text":"2.1.2 执行#"},{"depth":2,"slug":"22-词法规则","text":"2.2 词法规则#"},{"depth":2,"slug":"221-字符","text":"2.2.1 字符#"},{"depth":2,"slug":"222-注释","text":"2.2.2 注释#"},{"depth":2,"slug":"223-自由形式的源代码","text":"2.2.3 自由形式的源代码#"},{"depth":2,"slug":"224-标识符identifier","text":"2.2.4 标识符(identifier)#"},{"depth":2,"slug":"225-程序的形式","text":"2.2.5 程序的形式#"},{"depth":2,"slug":"23-程序风格","text":"2.3 程序风格#"},{"depth":3,"slug":"1-代码缩进","text":"1. 代码缩进#"},{"depth":3,"slug":"2-大括号风格","text":"2. 大括号风格#"},{"depth":3,"slug":"3命名规范","text":"3.命名规范#"},{"depth":2,"slug":"24-总结","text":"2.4 总结#"},{"depth":2,"slug":"31-基本数据类型","text":"3.1 基本数据类型#"},{"depth":2,"slug":"311-整型家族","text":"3.1.1 整型家族#"},{"depth":2,"slug":"312-浮点类型","text":"3.1.2 浮点类型#"},{"depth":2,"slug":"313-指针","text":"3.1.3 指针#"},{"depth":2,"slug":"32-基本声明","text":"3.2 基本声明#"},{"depth":2,"slug":"324-隐式声明","text":"3.2.4 隐式声明#"},{"depth":2,"slug":"33-typedef","text":"3.3 typedef#"},{"depth":2,"slug":"34-常量","text":"3.4 常量#"},{"depth":2,"slug":"35-作用域scope","text":"3.5 作用域(scope)#"},{"depth":2,"slug":"351-代码块作用域","text":"3.5.1 代码块作用域#"},{"depth":2,"slug":"36-链接属性","text":"3.6 链接属性#"},{"depth":2,"slug":"37-存储类型","text":"3.7 存储类型#"},{"depth":2,"slug":"38-static关键字","text":"3.8 static关键字#"},{"depth":2,"slug":"310-总结","text":"3.10 总结#"},{"depth":2,"slug":"41-空语句","text":"4.1 空语句#"},{"depth":2,"slug":"42-表达式语句","text":"4.2 表达式语句#"},{"depth":2,"slug":"43-代码块","text":"4.3 代码块#"},{"depth":2,"slug":"44-if语句","text":"4.4 if语句#"},{"depth":2,"slug":"45-while语句","text":"4.5 while语句#"},{"depth":2,"slug":"49-goto语句","text":"4.9 goto语句#"},{"depth":2,"slug":"410-总结","text":"4.10 总结#"},{"depth":2,"slug":"51-运算符","text":"5.1 运算符#"},{"depth":2,"slug":"61-内存和地址","text":"6.1 内存和地址#"},{"depth":2,"slug":"62-值和类型","text":"6.2 值和类型#"},{"depth":2,"slug":"63-指针变量的内容","text":"6.3 指针变量的内容#"},{"depth":2,"slug":"64-间接访问操作符","text":"6.4 间接访问操作符#"},{"depth":2,"slug":"65-未初始化和非法的指针","text":"6.5 未初始化和非法的指针#"},{"depth":2,"slug":"66-null指针","text":"6.6 NULL指针#"},{"depth":2,"slug":"67-指针间接访问和左值","text":"6.7 指针、间接访问和左值#"},{"depth":2,"slug":"68-指针间接变量和变量","text":"6.8 指针、间接变量和变量#"},{"depth":2,"slug":"69-指针常量","text":"6.9 指针常量#"},{"depth":2,"slug":"610-指针的指针","text":"6.10 指针的指针#"},{"depth":2,"slug":"611-指针表达式","text":"6.11 指针表达式#"},{"depth":2,"slug":"612-实例","text":"6.12 实例#"},{"depth":2,"slug":"613-指针运算","text":"6.13 指针运算#"},{"depth":3,"slug":"6131-算数运算","text":"6.13.1 算数运算#"},{"depth":3,"slug":"6132-关系运算","text":"6.13.2 关系运算#"},{"depth":2,"slug":"614-总结","text":"6.14 总结#"},{"depth":1,"slug":"-函数","text":"😠 函数#"},{"depth":2,"slug":"71-函数定义","text":"7.1 函数定义#"},{"depth":2,"slug":"72-函数声明","text":"7.2 函数声明#"},{"depth":3,"slug":"722-函数的缺省认定","text":"7.2.2 函数的缺省认定#"},{"depth":2,"slug":"73-函数的参数","text":"7.3 函数的参数#"},{"depth":2,"slug":"74-adt和黑盒","text":"7.4 ADT和黑盒#"},{"depth":3,"slug":"adt的核心思想","text":"ADT的核心思想#"},{"depth":3,"slug":"示例一个简单的计数器模块","text":"示例：一个简单的计数器模块#"},{"depth":2,"slug":"75-递归","text":"7.5 递归#"},{"depth":3,"slug":"使用递归与迭代来表示阶乘的计算","text":"使用递归与迭代来表示阶乘的计算#"},{"depth":3,"slug":"使用递归与迭代来表示斐波那契数","text":"使用递归与迭代来表示斐波那契数#"},{"depth":2,"slug":"76-可变参数列表","text":"7.6 可变参数列表#"},{"depth":3,"slug":"计算标量参数平均值非可变参数","text":"计算标量参数平均值(非可变参数)#"},{"depth":3,"slug":"计算标量参数平均值可变参数","text":"计算标量参数平均值(可变参数)#"},{"depth":1,"slug":"-数组","text":"🖐 数组#"},{"depth":2,"slug":"81-一维数组","text":"8.1 一维数组#"},{"depth":3,"slug":"811-数组名","text":"8.1.1 数组名#"},{"depth":3,"slug":"812-下标引用","text":"8.1.2 下标引用#"},{"depth":3,"slug":"813-指针与下标","text":"8.1.3 指针与下标#"},{"depth":3,"slug":"814-指针的效率","text":"8.1.4 指针的效率#"},{"depth":3,"slug":"815-数组和指针","text":"8.1.5 数组和指针#"},{"depth":3,"slug":"816-作为函数参数的数组名","text":"8.1.6 作为函数参数的数组名#"},{"depth":3,"slug":"817-声明数组参数","text":"8.1.7 声明数组参数#"},{"depth":3,"slug":"818-初始化","text":"8.1.8 初始化#"},{"depth":4,"slug":"静态和自动初始化","text":"静态和自动初始化#"},{"depth":3,"slug":"819-不完整的初始化","text":"8.1.9 不完整的初始化#"},{"depth":3,"slug":"8110-自动计算数组长度","text":"8.1.10 自动计算数组长度#"},{"depth":3,"slug":"8111-字符数组的初始化","text":"8.1.11 字符数组的初始化#"},{"depth":2,"slug":"82-多维数组","text":"8.2 多维数组#"},{"depth":3,"slug":"821-存储顺序","text":"8.2.1 存储顺序#"},{"depth":3,"slug":"822-数组名","text":"8.2.2 数组名#"},{"depth":3,"slug":"823-下标","text":"8.2.3 下标#"},{"depth":3,"slug":"824-指向数组的指针","text":"8.2.4 指向数组的指针#"},{"depth":3,"slug":"825-作为函数参数的多维数组","text":"8.2.5 作为函数参数的多维数组#"},{"depth":3,"slug":"826-初始化","text":"8.2.6 初始化#"},{"depth":2,"slug":"83-指针数组","text":"8.3 指针数组#"},{"depth":2,"slug":"84-总结","text":"8.4 总结#"},{"depth":1,"slug":"-字符串字符和字节","text":"💝 字符串、字符和字节#"},{"depth":2,"slug":"91-字符串基础","text":"9.1 字符串基础#"},{"depth":2,"slug":"92-字符串长度","text":"9.2 字符串长度#"},{"depth":2,"slug":"93-不受限制的字符串函数","text":"9.3 不受限制的字符串函数#"},{"depth":3,"slug":"931-复制字符串","text":"9.3.1 复制字符串#"},{"depth":3,"slug":"932-连接字符串","text":"9.3.2 连接字符串#"},{"depth":3,"slug":"933-函数的返回值","text":"9.3.3 函数的返回值#"},{"depth":3,"slug":"934-字符串比较","text":"9.3.4 字符串比较#"},{"depth":2,"slug":"94-长度受限的字符串函数","text":"9.4 长度受限的字符串函数#"},{"depth":2,"slug":"95-字符串查找基础","text":"9.5 字符串查找基础#"},{"depth":3,"slug":"951-查找一个字符","text":"9.5.1 查找一个字符#"},{"depth":3,"slug":"952-查找任何几个字符","text":"9.5.2 查找任何几个字符#"},{"depth":3,"slug":"953-查找一个子串","text":"9.5.3 查找一个子串#"},{"depth":4,"slug":"自己实现一个-strtstr-和-strrpbrk-函数","text":"自己实现一个 strtstr 和 strrpbrk 函数#"},{"depth":2,"slug":"96-高级字符串查找","text":"9.6 高级字符串查找#"},{"depth":3,"slug":"961-查找一个字符串前缀","text":"9.6.1 查找一个字符串前缀#"},{"depth":3,"slug":"962-查找标记","text":"9.6.2 查找标记#"},{"depth":2,"slug":"97-错误信息","text":"9.7 错误信息#"},{"depth":2,"slug":"98-字符操作","text":"9.8 字符操作#"},{"depth":3,"slug":"981-字符分类","text":"9.8.1 字符分类#"},{"depth":3,"slug":"982-字符转换","text":"9.8.2 字符转换#"},{"depth":2,"slug":"99-内存操作","text":"9.9 内存操作#"},{"depth":2,"slug":"910-总结","text":"9.10 总结#"},{"depth":2,"slug":"913-问题","text":"9.13 问题#"},{"depth":1,"slug":"-结构和联合","text":"🤖 结构和联合#"},{"depth":2,"slug":"101-结构基础知识","text":"10.1 结构基础知识#"},{"depth":3,"slug":"1011-结构声明","text":"10.1.1 结构声明#"},{"depth":3,"slug":"1012-结构成员","text":"10.1.2 结构成员#"},{"depth":3,"slug":"1013-结构成员的直接访问","text":"10.1.3 结构成员的直接访问#"},{"depth":3,"slug":"1014-结构成员的间接访问","text":"10.1.4 结构成员的间接访问#"},{"depth":3,"slug":"1015-结构的自引用","text":"10.1.5 结构的自引用#"},{"depth":3,"slug":"1016-不完整的声明","text":"10.1.6 不完整的声明#"},{"depth":3,"slug":"1017-结构的初始化","text":"10.1.7 结构的初始化#"},{"depth":2,"slug":"102-结构指针和成员","text":"10.2 结构、指针和成员#"},{"depth":3,"slug":"1021-访问指针","text":"10.2.1 访问指针#"},{"depth":3,"slug":"1022-访问结构","text":"10.2.2 访问结构#"},{"depth":3,"slug":"1023-访问结构成员","text":"10.2.3 访问结构成员#"},{"depth":3,"slug":"1024-访问嵌套的结构","text":"10.2.4 访问嵌套的结构#"},{"depth":3,"slug":"1025-访问指针成员","text":"10.2.5 访问指针成员#"},{"depth":2,"slug":"103-结构的存储分配","text":"10.3 结构的存储分配#"},{"depth":2,"slug":"104-作为函数参数的结构","text":"10.4 作为函数参数的结构#"},{"depth":2,"slug":"105-位段","text":"10.5 位段#"},{"depth":2,"slug":"106-联合","text":"10.6 联合#"},{"depth":3,"slug":"1061-变体记录","text":"10.6.1 变体记录#"},{"depth":4,"slug":"一个存货系统的变体记录","text":"一个存货系统的变体记录#"},{"depth":3,"slug":"1062-联合的初始化","text":"10.6.2 联合的初始化#"},{"depth":1,"slug":"-动态内存分配","text":"♿ 动态内存分配#"},{"depth":2,"slug":"111-为什么使用动态内存分配","text":"11.1 为什么使用动态内存分配#"},{"depth":2,"slug":"112-malloc和free","text":"11.2 malloc和free#"},{"depth":2,"slug":"113-calloc和realloc","text":"11.3 calloc和realloc#"},{"depth":2,"slug":"114-使用动态分配的内存","text":"11.4 使用动态分配的内存#"},{"depth":2,"slug":"115-常见的动态内存错误","text":"11.5 常见的动态内存错误#"},{"depth":1,"slug":"使用结构和指针","text":"🤧使用结构和指针#"},{"depth":2,"slug":"121-链表","text":"12.1 链表#"},{"depth":2,"slug":"122-单链表","text":"12.2 单链表#"},{"depth":3,"slug":"1221-在单链表中插入","text":"12.2.1 在单链表中插入#"},{"depth":2,"slug":"123-双链表","text":"12.3 双链表#"},{"depth":3,"slug":"1231-在双链表中插入","text":"12.3.1 在双链表中插入#"},{"depth":4,"slug":"语句提炼statement-factoring","text":"语句提炼(statement factoring)#"},{"depth":1,"slug":"-预处理器","text":"🍋‍🟩 预处理器#"},{"depth":2,"slug":"141-预定义符号","text":"14.1 预定义符号#"},{"depth":2,"slug":"142-define","text":"14.2 #define#"},{"depth":3,"slug":"1421-宏","text":"14.2.1 宏#"},{"depth":3,"slug":"1422-define-替换","text":"14.2.2 #define 替换#"},{"depth":3,"slug":"1423-宏与函数","text":"14.2.3 宏与函数#"},{"depth":3,"slug":"1424-带副作用的宏参数","text":"14.2.4 带副作用的宏参数#"},{"depth":3,"slug":"1425-命名约定","text":"14.2.5 命名约定#"},{"depth":3,"slug":"1426-undef","text":"14.2.6 #undef#"},{"depth":3,"slug":"1427-命令行定义","text":"14.2.7 命令行定义#"},{"depth":2,"slug":"143-条件编译","text":"14.3 条件编译#"},{"depth":3,"slug":"1431-是否被定义","text":"14.3.1 是否被定义#"},{"depth":3,"slug":"1432-嵌套指令","text":"14.3.2 嵌套指令#"},{"depth":2,"slug":"144-文件包含","text":"14.4 文件包含#"},{"depth":3,"slug":"1441-函数库文件包含","text":"14.4.1 函数库文件包含#"},{"depth":3,"slug":"1442-本地文件包含","text":"14.4.2 本地文件包含#"},{"depth":3,"slug":"1443-嵌套文件包含","text":"14.4.3 嵌套文件包含#"},{"depth":2,"slug":"145-其他指令","text":"14.5 其他指令#"},{"depth":3,"slug":"1451-error","text":"14.5.1 #error#"},{"depth":3,"slug":"1452-line","text":"14.5.2 #line#"},{"depth":3,"slug":"1453-progma","text":"14.5.3 #progma#"},{"depth":1,"slug":"-输入输出函数","text":"🎶 输入/输出函数#"},{"depth":2,"slug":"151-错误报告","text":"15.1 错误报告#"},{"depth":2,"slug":"152-终止执行","text":"15.2 终止执行#"},{"depth":2,"slug":"153-标准io函数库","text":"15.3 标准I/O函数库#"},{"depth":2,"slug":"154-ansi-io概念","text":"15.4 ANSI I/O概念#"},{"depth":3,"slug":"1541-流","text":"15.4.1 流#"},{"depth":4,"slug":"一文本流text-stream","text":"一、文本流(Text Stream)#"},{"depth":4,"slug":"二二进制流binary-stream","text":"二、二进制流(Binary Stream)#"},{"depth":4,"slug":"三编程实现上的区别","text":"三、编程实现上的区别#"},{"depth":3,"slug":"1542-文件","text":"15.4.2 文件#"},{"depth":3,"slug":"1543-标准io常量","text":"15.4.3 标准I/O常量#"},{"depth":2,"slug":"155-流io总览","text":"15.5 流I/O总览#"},{"depth":2,"slug":"156-打开流","text":"15.6 打开流#"},{"depth":2,"slug":"157-关闭流","text":"15.7 关闭流#"},{"depth":2,"slug":"158-字符io","text":"15.8 字符I/O#"},{"depth":3,"slug":"1581-字符io宏","text":"15.8.1 字符I/O宏#"},{"depth":3,"slug":"1582-撤销字符io","text":"15.8.2 撤销字符I/O#"},{"depth":2,"slug":"159-未格式化的行io","text":"15.9 未格式化的行I/O#"},{"depth":2,"slug":"1510-格式化的行io","text":"15.10 格式化的行I/O#"},{"depth":3,"slug":"15101-scanf家族","text":"15.10.1 scanf家族#"},{"depth":3,"slug":"15102-scanf格式代码","text":"15.10.2 scanf格式代码#"},{"depth":4,"slug":"格式代码格式","text":"格式代码格式#"},{"depth":4,"slug":"scanf限定符","text":"scanf限定符#"},{"depth":3,"slug":"15103-printf家族","text":"15.10.3 printf家族#"},{"depth":3,"slug":"15104-printf-格式代码","text":"15.10.4 printf 格式代码#"},{"depth":2,"slug":"1511-二进制io","text":"15.11 二进制I/O#"},{"depth":2,"slug":"1512-刷新和定位数据","text":"15.12 刷新和定位数据#"},{"depth":2,"slug":"1513-改变缓冲方式","text":"15.13 改变缓冲方式#"},{"depth":2,"slug":"1514-流错误函数","text":"15.14 流错误函数#"},{"depth":2,"slug":"1515-临时文件","text":"15.15 临时文件#"},{"depth":2,"slug":"1516-文件操纵函数","text":"15.16 文件操纵函数#"},{"depth":1,"slug":"-标准函数库","text":"🤤 标准函数库#"},{"depth":2,"slug":"161-整型函数","text":"16.1 整型函数#"},{"depth":3,"slug":"1611-算数stdlibh","text":"16.1.1 算数<stdlib.h>#"},{"depth":3,"slug":"1621-随机数stdlibh","text":"16.2.1 随机数<stdlib.h>#"},{"depth":3,"slug":"1613-字符串转换-stdlibh","text":"16.1.3 字符串转换 <stdlib.h>#"},{"depth":4,"slug":"strtol-和-strtoul-返回的错误值","text":"strtol 和 strtoul 返回的错误值#"},{"depth":2,"slug":"162-浮点型函数","text":"16.2 浮点型函数#"},{"depth":3,"slug":"1621-三角函数mathh","text":"16.2.1 三角函数<math.h>#"},{"depth":3,"slug":"1622-双曲函数mathh","text":"16.2.2 双曲函数<math.h>#"},{"depth":3,"slug":"1623-对数和指数函数mathh","text":"16.2.3 对数和指数函数<math.h>#"},{"depth":3,"slug":"1624-浮点表示形式mathh","text":"16.2.4 浮点表示形式<math.h>#"},{"depth":3,"slug":"1625-幂mathh","text":"16.2.5 幂<math.h>#"},{"depth":3,"slug":"1626-底数顶数绝对值和余数mathh","text":"16.2.6 底数、顶数、绝对值和余数<math.h>#"},{"depth":3,"slug":"1627-字符串转换-stdlibh","text":"16.2.7 字符串转换 <stdlib.h>#"},{"depth":2,"slug":"163-日期和时间函数","text":"16.3 日期和时间函数#"},{"depth":3,"slug":"1631-处理器时间-timeh","text":"16.3.1 处理器时间 <time.h>#"},{"depth":3,"slug":"1632-当天时间timeh","text":"16.3.2 当天时间<time.h>#"},{"depth":4,"slug":"日期和时间的转换timeh","text":"日期和时间的转换<time.h>#"},{"depth":2,"slug":"164-非本地跳转setjmph","text":"16.4 非本地跳转<setjmp.h>#"},{"depth":3,"slug":"1641-实例","text":"16.4.1 实例#"},{"depth":3,"slug":"1642-何时使用非本地跳转","text":"16.4.2 何时使用非本地跳转#"},{"depth":2,"slug":"165-信号","text":"16.5 信号#"},{"depth":3,"slug":"1651-信号名-signalh","text":"16.5.1 信号名 <signal.h>#"},{"depth":3,"slug":"1652-处理信号-signalh","text":"16.5.2 处理信号 <signal.h>#"},{"depth":3,"slug":"1653-信号处理函数","text":"16.5.3 信号处理函数#"},{"depth":2,"slug":"166-打印可变参数列表stdargh","text":"16.6 打印可变参数列表<stdarg.h>#"},{"depth":4,"slug":"例子","text":"例子#"},{"depth":2,"slug":"167-执行环境","text":"16.7 执行环境#"},{"depth":3,"slug":"1671-终止执行stdlibh","text":"16.7.1 终止执行<stdlib.h>#"},{"depth":3,"slug":"1672-断言asserth","text":"16.7.2 断言<assert.h>#"},{"depth":3,"slug":"1673-环境stdlibh","text":"16.7.3 环境<stdlib.h>#"},{"depth":4,"slug":"使用两种不同的方法分配内存并输出映射的环境变量","text":"使用两种不同的方法分配内存并输出映射的环境变量#"},{"depth":3,"slug":"1674-执行系统命令stdlibh","text":"16.7.4 执行系统命令<stdlib.h>#"},{"depth":3,"slug":"1675-排序和查找stdlibh","text":"16.7.5 排序和查找<stdlib.h>#"},{"depth":4,"slug":"使用-qsort-对结构体数组按照结构体内成员进行排序","text":"使用 qsort 对结构体数组按照结构体内成员进行排序#"},{"depth":2,"slug":"168-locale","text":"16.8 locale#"},{"depth":3,"slug":"1681-数值和货币格式-localeh","text":"16.8.1 数值和货币格式 <locale.h>#"},{"depth":3,"slug":"1682-字符串和-localestringh","text":"16.8.2 字符串和 locale<string.h>#"},{"depth":3,"slug":"1683-改变locale的效果","text":"16.8.3 改变locale的效果#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"C与指针笔记","published":"2025-09-21T00:00:00.000Z","description":"我去是C语言大佬!?","image":"./cover.jpg","category":"C","tags":["c","language","programming","code"],"author":"Akeboshi Himari","draft":false,"minutes":240,"words":47958,"excerpt":"| 这五行被称为预处理指令，因为它们是由预处理器解释的。"},"imagePaths":[]}},"collection":"posts"}],"2025-09-02":[{"id":"ffmepg_related","data":{"title":"Useful FFmpeg commands","published":"2025-09-02T00:00:00.000Z","draft":false,"description":"Was it a cat i saw!?","image":"","tags":["FFmpeg","ffmpeg","video","audio","tools"],"category":"FFmpeg","lang":"","pinned":false,"author":"Akeboshi Himari","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"删除etc目录后如何把备份的etc目录重新恢复","prevSlug":"record_etc_deleted","nextTitle":"C与指针笔记","nextSlug":"c/c_pointer"},"body":"## FFmpeg 是音、视频处理的一个强大开源工具，它包含许多组件和扩展库，在视频网站和商业软件被大量应用。它还有一个命令行工具，在很多场景下直接使用FFmpeg命令行工具比桌面视频处理软件更简洁高效\n\n使用 `ffmpeg` 前，可先简单了解下视频处理的一些基本概念：\n\n**封装(Container)格式**：也可翻译为容器，里面包括了视频、音频、字幕等内容。对视频来说，封装格式是mp4、avi、mkv等格式。\n\n**流(Stream)**：stream是指媒体文件中的一个单独的数据通道。一个媒体文件可以包含多个流，如视频、音频、字幕等。ffmpeg本质上是操作和处理这些媒体流，比如提取、分离、合并、转码等。你可以选择特定的流进行处理，或者将多个流合并成一个新的媒体文件。\n\n**帧(Frame)**：帧代表最小数据单元，也是编解码器真正处理的最小处理单元。对于视频来说，帧(Frame)是编码器编码后的一个图像；对于音频来说，帧(Frame)是编码器编码后的一个声音。帧分为：I帧:关键帧、P帧:预测帧、B帧:双向预测帧。编解码(Codec)：编码是指对图像和声音的打包或压缩方法；解码就是把编码后的东西还原为原来的状态。编码格式：视频和音频都需要经过编码，才能保存成文件。不同的编码格式，有不同的压缩率，会导致文件大小和清晰度的差异。常用的编码格式有H.264、H.265等。\n\n# 🎞 视频处理\n\n## 1.转码为MP4\n\n~~~shell\nffmpeg -i input.mov -vcodec libx264 -acodec aac output.mp4\n~~~\n\n也可以添加额外参数\n\n~~~shell\nffmpeg -i input.mov -c:v libx264 -c:a aac -preset medium -crf 23 output.mp4\n~~~\n\n- `-c:v`和`-c:a`分别是`-vcodec`和`-acodec`的alias\n- `libx264`：转换为H.264（兼容性最好）\n- `aac`：音频转为AAC（兼容广泛）\n- `-crf 23`：保持较好画质，文件不会太大\n- `-preset medium`：转码速度与压缩比的平衡\n\n## 2.裁剪视频(不重新编码)\n\n~~~shell\nffmpeg -ss 00:00:10 -i input.mp4 -t 00:00:20 -c copy output.mp4\n~~~\n\n`-ss`是起始时间，`-t`是持续时间，`-c copy`表示不改变音频和视频的编码格式，直接拷贝\n\n## 3.修改分辨率\n\n~~~shell\nffmpeg -i input.mp4 -vf scale=1280:720 output_720p.mp4\n~~~\n\n## 4.提取指定时间段的视频(并重新编码)\n\n~~~shell\nffmpeg -ss 00:01:00 -to 00:02:00 -i input.mp4 -c:v libx264 -c:a aac output.mp4\n~~~\n\n## 5.加快或减慢播放速度\n\n- 快两倍：\n\n~~~shell\nffmpeg -i input.mp4 -vf \"setpts=0.5*PTS\" output_fast.mp4\n~~~\n\n~~~shell\n- 慢0.5倍：\nffmpeg -i input.mp4 -vf \"setpts=2.0*PTS\" output_slow.mp4\n~~~\n\n# 🔊 音频处理\n\n## 1.提取音频\n\n~~~shell\nffmpeg -i input.mp4 -vn -acodec copy output.aac\n~~~\n\n- `vn`: 不处理视频流（只提取音频）\n- `c:a aac`: 指定音频编码为 AAC（与 .aac 容器兼容）\n\n## 2.转换为MP3\n\n~~~shell\nffmpeg -i input.aac output.mp3\n~~~\n\n## 3.调整音量(放大一倍)\n\n~~~shell\nffmpeg -i input.mp3 -filter:a \"volume=2.0\" output.mp3\n~~~\n\n## 4.混合多个音轨\n\n~~~shell\nffmpeg -i audio1.mp3 -i audio2.mp3 -filter_complex amix=inputs=2:duration=longest output.mp3\n~~~\n\n# 🖼 图片处理\n\n## 1.从视频中导出每秒一张图片\n\n~~~shell\nffmpeg -i input.mp4 -vf fps=1 image_%03d.jpg\n~~~\n\n## 2.将图片序列合成为视频\n\n~~~shell\nffmpeg -framerate 24 -i image_%03d.jpg -c:v libx264 -pix_fmt yuv420p output.mp4\n~~~\n\n## 3.提取视频的第一帧为封面图\n\n~~~shell\nffmpeg -i input.mp4 -vf \"select=eq(n\\,0) -q:v 3 output.jpg\"\n~~~\n\n## extra. FFmpeg 在指定时间区间内按帧提取截图\n\n~~~cmd\nffmpeg -ss 00:00:05 -to 00:00:10 -i input.mp4 -vsync 0 -q:v 2 frame_%04d.png\n~~~\n\n## extra1. FFmpeg 指定NVIDIA GPU时间区间内按帧提取截图\n\n~~~cmd\nffmpeg -hwaccel cuda -ss 00:00:30 -to 00:00:40 -i input.mp4 -vf fps=1 output/frame_%04d.jpg\n~~~\n\n### 📌 参数说明\n\n| 参数                      | 说明                            |\n| ----------------------- | ----------------------------- |\n| `-hwaccel cuda`         | 使用 NVIDIA GPU 加速视频解码（通过 CUDA） |\n| `-i input.mp4`          | 输入视频                          |\n| `-vf fps=1`             | 每秒截一帧                         |\n| `output/frame_%04d.jpg` | 输出图像路径                        |\n\n## extra2. av1转码为 H.264，再截图（兼容 + 可加速）\n\n~~~cmd\nffmpeg -c:v libdav1d -i video.mp4 -c:v h264_nvenc -crf 23 -preset fast output_h264.mp4\n~~~\n\n然后截图：\n\n~~~cmd\nffmpeg -hwaccel cuda -ss 00:00:30 -to 00:00:40 -i output_h264.mp4 -vf fps=1 output/frame_%04d.jpg\n~~~\n\n这样截图过程可以启用 GPU 加速（因为 H.264 你支持 NVENC/NVDEC）\n\n✅ 可选：如果转码中出现 OBU 报错，使用 libaom-av1：\n\n~~~cmd\nffmpeg -c:v libaom-av1 -i video.mp4 -c:v h264_nvenc -preset fast output_h264.mp4\n~~~\n\n## 4.图片格式转换\n\n~~~shell\nffmpeg -i input.jfif output.png\n~~~\n\n- `-i input.jfif`：指定输入文件\n- `output.png`：自动根据后缀选择PNG编码器\n\n## 5.修改图片尺寸\n\n~~~shell\nffmpeg -i input.jfif -vf scale=800:600 output.png\n~~~\n\n- `scale=宽度:高度`，可用`-1`自动按比例缩放，比如：\n\n~~~shell\n-vf scale=800:-1\n~~~\n\n## 6.调整输出图片质量(对有压缩的格式如JPEG更有用)\n\n- 虽然 PNG 是无损格式，没压缩等级设置，但你可以用`-compression_level`控制压缩（越高体积越小，速度越慢）：\n\n~~~shell\nffmpeg -i input.jfif -compression_level 9 output.png\n~~~\n\n范围：`0`(最快)到`9`压缩最强\n\n## 7.裁剪图片\n\n~~~shell\nffmpeg -i input.jfif -vf \"crop=width:height:x:y\" output .png\n~~~\n\n例如从左上角开始裁剪300x300区域：\n\n~~~shell\n-vf \"crop=300:300:0:0\"\n~~~\n\n## 8.添加水印/叠加图层\n\n~~~shell\nffmpeg -i input.jfif -i logo.png -filter_complex \"overlay=10:10\" output.png\n~~~\n\n将`logo.png`叠加到输入图像的左上角(x=10,y=10)\n\n## 9.转换为带透明背景(alpha)的PNG\n\n如果原图没有alpha，但你希望创建带alpha通道的图(比如用于抠图后保存)：\n\n~~~shell\nffmpeg -i input.jfif -vf \"format=rgba\" output.png\n~~~\n\n## 10.更改颜色格式\n\n~~~shell\nffmpeg -i input.jfif -pix_fmt rgb24 output.png\n~~~\n\n常用像素格式:\n\n- `gray`：灰度图\n- `rgb24`：24位真彩色\n- `rgba`：含透明度通道\n- `pal8`：8位索引色(低色图)\n\n# ✅ 示例：高质量转换 + 改尺寸 + 添加水印\n\n~~~shell\nffmpeg -i input.jfif -i watermark.png -filter_complex \"[0][1]overlay=W-w-10:H-h-10,scale=1024:-1\" -compression_level 9 output.png\n~~~\n\n# 🔍 本地帮助手册\n\n~~~shell\nffmpeg -h           # 简略帮助\nffmpeg -filter      # 所有滤镜\nffmpeg -codecs      # 所有编解码器\nffmpeg -pix_fmts    # 所有像素格式  \nffmpeg -formats     # 所有支持的格式\n~~~\n\n# 📌 补充说明\n\n如果你要批量转换多个 .jfif 为 .png，也可以用批处理命令（例如在 Windows 批处理脚本中）：\n\n~~~shell\nfor %%f in (*.jfif) do ffmpeg -i \"%%f\" \"%%~nf.png\"\n~~~\n\n✅ 如果你直接在命令行中运行（不是 .bat 文件），要用 %f 而不是 %%f\n\n## 1. 图片转换选项\n\n### PNG(Portable Network Graphics) 可选的选项\n\n`-pix_fmt`：**控制像素格式**\n\n这个选项决定了输出 PNG 文件的颜色深度和通道数。它直接影响文件大小和颜色精度。\n\n- `rgba`: 这会创建一个带有 Alpha 通道（透明度）的真彩色 PNG 文件。如果你的输入图片包含透明度信息，这是最佳选择，因为它能完整保留透明度。\n- `rgb24`: 这会创建一个没有 Alpha 通道的真彩色 PNG 文件。文件会比 rgba 小，因为没有透明度数据。如果你不需要透明度，这是个好选择。\n- `gray`: 这会创建一个灰度 PNG 文件。文件最小，但会丢失所有颜色信息。\n- `graya`: 灰度文件，但包含一个 Alpha 通道。\n\n**示例**\n\n如果你想将一张 JPG 图片转换为带透明度的 PNG，你可以这样做：\n\n~~~shell\nffmpeg -i input.jpg -pix_fmt rgba output.png\n~~~\n\n**注意:** 如果输入图片没有透明度，`rgba`格式会添加一个全不透明的Alpha通道\n\n滤镜(**`-vf`**)：**图像处理选项**\n\n在将图片保存为PNG之前，你可以使用各种视频滤镜来处理图像\n\n- `scale`: 调整图片大小\n  - `ffmpeg -i input.jpg -vf \"scale=800:600\" output.png`\n- `crop`: 裁剪图片\n  - `ffmpeg -i input.jpg -vf \"crop=500:500:100:100\" output.png`\n- `format`: 类似于`-pix_fmt`,但更灵活，允许你强制转换像素格式\n  - `ffmpeg -i input.jpg -vf \"format=rgba\" output.png`\n\n### JPEG(Joint Photographic Experts Group) 可选的选项\n\n`-q:v`或`-qscale:v`：**控制质量(常用)**\n\n这是最常用的选项，用于直接控制 JPG 输出的质量。其值范围通常是 *2* 到 *31*。\n\n- `ffmpeg -i input.png -q:v 2 output.jpg`: `2`是最高质量，文件最大。\n- `ffmpeg -i input.png -q:v 31 output.jpg`: `31`是最低质量，文件最小。\n\n**建议：**\n\n- **高质量输出**：使用 `-q:v 2` 到 `-q:v 5`，这个范围能提供极好的画质，但文件较大。\n- **平衡质量与大小**：使用 `-q:v 6` 到 `-q:v 10`，这是一个很好的折衷方案。\n\n`-pix_fmt`：**像素格式**\n\n这个选项决定了输出JPG文件的颜色格式\n\n- `yuvj444p`: 提供了最好的颜色质量，是最高级别的色度采样(4:4:4)。文件最大。\n- `yuvj422p`: 提供了中等的颜色质量（4:2:2）。在大多数情况下画质和文件大小之间达到了很好的平衡。\n- `yuvj420p`: 提供了最低的颜色质量（4:2:0）。这是最常见的格式，文件最小，适用于网络传输。\n\n**示例：**\n\n以最高质量的像素格式输出 JPG。\n\n~~~shell\nffmpeg -i input.png -pix_fmt yuvj444p -q:v 2 output.jpg\n~~~\n\n`-ss`和`-t`：**从视频中提取帧**\n\n如果你从视频中提取帧并保存为 JPG，可以使用这两个选项来指定时间范围。\n\n- `-ss`: 指定开始时间，格式为`hh:mm:ss.sss`。\n- `-t`: 指定持续时间。\n- `-frame:v`: 指定要提取的帧数。\n\n**示例：**\n\n从 `video.mp4` 的第 **5** 秒开始，提取 **10** 帧并保存为 `frame%02d.jpg`。\n\n~~~cmd\nffmpeg -ss 5 -i video.mp4 -t 1 -frames:v 10 frame%02d.jpg\n~~~\n\n### WebP可选的选项\n\nWebP是一种为网络优化的新一代图片格式，支持有损和无损压缩，以及透明度。\n\n- `lossless 1`: 启用无损压缩模式。WebP的无损压缩通常比**PNG**更高效，文件更小。\n  - `ffmpeg -i input.png -lossless 1 output.webp`\n- ``-q:v`` 或 `-qscale:v`: 控制有损压缩的质量。值范围是 **0** 到 **100**，**100 是最高质量**。这与 JPEG 的质量选项类似，但范围相反。\n  - `ffmpeg -i input.jpg -q:v 80 output.webp`\n- `-compression_level`: 控制压缩速度与文件大小的平衡。值范围是 0 到 6，**6 是最慢、压缩率最高**。\n  - `ffmpeg -i input.png -compression_level 6 output.webp`\n\nWebP 格式的***独特之处***在于它能在一个文件中同时处理有损和无损压缩，并且透明度支持比 **JPEG** 更好。\n\n### AVIF可选的选项\n\nAVIF 是一种基于 AV1 视频编码的图片格式，旨在提供比 JPEG 和 WebP 更高的压缩效率。\n\n- `-crf`: 控制压缩质量。与 H.264 编码器类似，值越低，质量越高，文件越大。\n  - `ffmpeg -i input.jpg -c:v libsvtav1 -crf 20 output.avif`\n- `-tile-columns` 和 `-tile-rows`: 决定图像如何被分割成瓦片进行并行编码，可以提高编码速度。\n\n### TIFF可选的选项\n\nTIFF是一种灵活且兼容性强的无损(lossless)格式，常用于印刷和专业图像编辑。\n\n- `-compression_algo`: 控制压缩算法。TIFF 支持多种无损压缩算法，如 LZW、Deflate 和 RLE。\n  - `lzw`: 常用，无损压缩。\n  - `deflate`: 常用，通常比 LZW 效率更高。\n  - `none`: 无压缩，文件最大。\n  - `rle`: 适用于包含大片相同颜色的图像（如黑白图像）。\n  - `ffmpeg -i input.png -compression_algo lzw output.tif`\n- `-pix_fmt`: 支持广泛的像素格式，包括 48-bit RGB、浮点数等，这使得它在专业领域非常有用。\n  - `ffmpeg -i input.png -pix_fmt rgb48 output.tif`\n\n### BMP可选的选项\n\nBMP 是一种无压缩的位图格式，主要用于 Windows 系统，文件体积通常很大。\n\n- `pix_fmt`: BMP 支持多种像素格式，但通常没有压缩选项。\n  - `ffmpeg -i input.jpg -pix_fmt bgra bmp_with_alpha.bmp`\n\nBMP 格式的独特之处在于它几乎没有压缩，因此转换速度快，但文件巨大。\n\n# 💨其它补充\n\n### 🚀 1. 启用多线程（自动或手动指定）\n\nFFmpeg 默认会根据系统核心数自动使用多线程，但你也可以手动指定：\n\n~~~shell\nffmpeg -i input.mp4 -threads 8 -c:v libx264 -preset fast output.mp4\n~~~\n\n参数说明：\n\n- `-threads 8`：手动指定使用 8 个线程（可设为 auto）\n- `libx264` 本身是支持多线程的（默认会启用）\n- 一些滤镜（如 scale, hqdn3d）也会自动启用多线程\n\n📌 注意：某些滤镜不支持多线程，比如 drawtext，即使你开了 -threads 也可能没明显效果。\n\n### 🧠 2. 使用转码预设：`-preset`\n\n用于 libx264 和 libx265 编码器，会影响速度和压缩比：\n\n~~~shell\n-preset ultrafast\n-preset superfast\n-preset veryfast\n-preset fast\n-preset medium     # 默认值\n-preset slow\n~~~\n\n越“fast”，编码越快，但文件体积越大、画质压缩越弱\n\n### 😎 3. FFmpeg纯音频合成黑场视频\n\n~~~shell\nffmpeg -i your_audio.mp3 -f lavfi -i color=c=black:s=640x480:r=30 -c:v libx264 -pix_fmt yuv420p -c:a copy -shortest output_black_video.mp4\n~~~\n\n- `-i your_audio.mp3`: 指定你的输入音频文件。替换 `your_audio.mp3` 为你的实际音频文件路径。\n- `-f lavfi`:　告诉 FFmpeg 使用 `lavfi` (libavfilter input) 虚拟设备。\n- `-i color=...`: 这是 `lavfi`的一个源滤镜，用于生成一个纯色视频流。\n`c=black`: 设置颜色为黑色。你也可以使用其他颜色名称（如 white, red）或十六进制 RGB 值（如 c=0x000000）。\n`s=1920x1080`: 设置视频分辨率为 1920x1080 (Full HD)。你可以根据需要更改这个值，例如 1280x720 (HD)。\n`r=30`: 设置视频帧率为 30 fps。你也可以设置为其他帧率，例如 r=25 或 r=60。\n`-c:v libx264`: 指定视频编码器为 libx264，这是最常用的 H.264 编码器。\n`-pix_fmt yuv420p`: 指定像素格式为 yuv420p。这是 H.264 的标准像素格式，具有广泛的兼容性。\n`-c:a copy`: 复制音频流，不重新编码。这样可以保持原始音频的音质和编码格式（例如，如果你的输入是 AAC，输出的 MP4 中音频也会是 AAC）。\n`-shortest`: 这个非常重要！它告诉 FFmpeg 输出的视频时长应与最短的输入流（在这里就是你的音频文件）的持续时间保持一致。如果没有这个，FFmpeg 会生成一个无限长的黑屏视频。\n`output_black_video.mp4`: 指定输出的 MP4 文件名。\n\n### ✨ 4. 使用FFmpeg提取指定视频时间区域制作成GIF\n\n**基本命令(质量较低)**\n\n~~~shell\nffmpeg -ss [开始时间] -to [结束时间] -i input.mp4 -vf \"fps=10,scale=320:-1\" output.git\n~~~\n\n- `ss [开始时间]`: 指定视频的开始时间。格式可以是`HH:MM:SS`(小时:分钟:秒)或(SS)秒。例如：`00:00:10` 表示从视频的第 10 秒开始，``5`` 表示从视频的第 5 秒开始。\n- `to [结束时间]`：指定视频的结束时间。格式与` -ss `相同。\n- `i input.mp4`：指定输入视频文件。请将` input.mp4 `替换为你的视频文件路径。\n- `-vf \"fps=10,scale=320:-1\"`是视频滤镜选项：\n  - `fps=10`：设置 GIF 的帧率（每秒帧数）为 10。较低的帧率可以减小 GIF 的文件大小。你可以根据需要调整此值。\n  - `scale=320:-1`：设置 GIF 的宽度为 320 像素，高度会自动根据原始视频的宽高比进行调整（-1 表示保持宽高比）。你可以调整宽度来控制 GIF 的尺寸和文件大小。\n  - `output.gif`：指定输出 GIF 文件的名称。\n\n**高质量 GIF（两步法 - 推荐）**\n\n1. **生成调色板 (palettegen)：** FFmpeg 会分析视频中的颜色，生成一个最优的 256 色调色板。GIF 格式限制为 256 种颜色，所以使用一个定制的调色板可以显著提高图像质量。\n2. **使用调色板生成 GIF (paletteuse)：** 使用上一步生成的调色板来渲染 GIF。\n\n**步骤 1: 生成调色板**\n\n~~~shell\nffmpeg -ss [开始时间] -to [结束时间] -i input.mp4 -vf \"fps=10,scale=320:-1:flags=lanczos,palettegen\" palette.png\n~~~\n\n**与基本命令相比，新增和修改的参数：**\n\n- `flags=lanczos`：在缩放时使用 Lanczos 算法，通常能提供更好的缩放质量。\n- ``palettegen``：这是一个滤镜，用于生成调色板。\n- ``palette.png``：输出的调色板文件（临时文件）。\n**步骤 2: 使用调色板生成 GIF**\n\n~~~shell\nffmpeg -ss [开始时间] -to [结束时间] -i input.mp4 -i palette.png -filter_complex \"fps=10,scale=320:-1:flags=lanczos[x];[x]:[1:v]paletteuse\" output.gif\n~~~\n\n**新增和修改的参数：**\n\n- `-i palette.png`：将上一步生成的调色板文件作为第二个输入。\n- `-filter_complex \"fps=10,scale=320:-1:flags=lanczos[x];[x][1:v]paletteuse\"`：这是一个复杂的滤镜链：\n  - `fps=10,scale=320:-1:flags=lanczos`：与第一步相同，对视频进行帧率和尺寸调整，并将结果命名为 [x]。\n  - `[x][1:v]`：将处理后的视频流 [x] 和第二个输入（`palette.png`，即 `[1:v]` 视频流）作为输入。\n  - `paletteuse`：使用调色板将视频转换为 GIF。\n\n**额外优化和注意事项**\n\n- **文件大小**： GIF 文件的主要影响因素是**帧率(flame)**、**分辨率(resolution)**和**持续时间(durations)**。降低帧率 (`fps`)、缩小尺寸 (`scale`) 和缩短持续时间可以显著减小文件大小。\n- **循环播放**：GIF 默认是无限循环的。如果你想控制循环次数，可以在输出文件前添加`` -loop ``参数。\n- **开始时间` -ss `的位置：**\n- 将 `-ss` 放在 `-i` 之前：这样 FFmpeg 会在读取输入文件之前先定位到指定时间，这通常更快，但可能会导致起始时间略微不准确（它会寻找最近的关键帧）。\n- 将 `-ss` 放在 `-i` 之后：这样 FFmpeg 会从视频开头开始解码，然后在指定时间点开始处理，通常更精确，但对于大型视频文件可能会比较慢。对于 GIF 提取，通常精确度更重要，所以放在 `-i` 之后可能更合适。\n\n### 😤 5. 使用FFmpeg为MP4视频格式文件压入封面和硬字幕（重新编码）\n\n使用 FFmpeg 为 MP4 视频添加封面和硬字幕是一个复杂但可行的操作，它涉及到多个输入文件和流映射（`map`）的正确使用。\n\n要实现这个目标，你需要执行一个命令，该命令会同时处理以下三个流：\n\n1. **原始视频流**（需要重新编码来烧录字幕）。\n2. **原始音频流**（可以直接复制）。\n3. **封面图片流**（需要作为附加图片流复制）。\n\n**完整命令**\n\n三个文件：\n\n- `input.mp4`: 原始视频文件\n- `cover.jpg`: 作为封面的图片\n- `subtitle.ass`: 字幕文件\n\n**方法一：使用滤镜同时添加封面和字幕**\n\n~~~shell\nffmpeg -i input.mp4 -i cover.jpg -i subtitle.ass -filter_complex \"[0:v]ass=subtitle.ass[v]\" -map \"[v]\" -map 0:a -map 1:v -c:v libx264 -crf 18 -c:a copy -c:v:1 mjpeg -disposition:v:1 attached_pic output.mp4\n~~~\n\n- `-filter_complex \"[0:v]ass=subtitle.ass[v]\"`: This is the best practice for applying the `ass` filter.It explicitly takes the main video stream from the first input([0:v]), applies the `ass` filter (which automatically reads from `subtitle.ass`), and names the resulting filtered video stream `[v]`.This is much clearer and less prone to error\n\n- `-map [v]`: We then map this newly filtered video stream (`[v]`) to the output.This ensures that only the main video with the burned-in subtitles is included.\n- The other `-map` flags remain the same: `-map 0:a` for the audio and `-map 1:v` for the cover image.The `-c:v:1 mjpeg -disposition:v:1 attached_pic` part is now correctly applied to the mapped cover image stream.\n\n**方法二：先压入字幕后压入封面**\n\nSTEP1\n\n~~~shell\nffmpeg -i input.mp4 -vf \"ass=subtitle.ass\" -c:v libx264 -crf 18 -c:a copy output.mp4\n~~~\n\n- `-vf \"ass=subtitle.ass\"`: 这是关键的视频滤镜。ass 滤镜会读取.ass文件并将其内容绘制到视频帧上。\n\nSTEP2\n\n~~~shell\nffmpeg -i input.mp4 -i cover.jpg -map 0:v -map 0:a -map 1:v -c:v copy -c:a copy -c:v:1 mjpeg -disposition:v:1 attached_pic output.mp4\n~~~\n\n- `-c:v:1 mjpeg -disposition:v:1 attached_pic`：这些参数只作用于**第二个视频流（v:1）**，也就是你的封面图片，将其正确处理为内嵌封面。\n\n### 😇 6. 使用FFmpeg为MKV视频格式文件压入软字幕（不重新编码）\n\n~~~shell\nffmpeg -i input.mkv -i cover.jpg -i subtitle.ass -map 0:v -map 0:a -map 1:v -map 2:s -c copy -disposition:v:1 attached_pic output.mkv\n~~~\n\n- `-i input.mkv`: 你的第一个输入文件。\n\n- `-i cover.jpg`: 你的第二个输入文件，封面图片。\n\n- `-i subtitle.ass`: 你的第三个输入文件，字幕文件。\n\n- `-map 0:v`: 映射第一个输入文件（`input.mkv`）中的视频流。\n\n- `-map 0:a`: 映射第一个输入文件（`input.mkv`）中的音频流。\n\n- `-map 1:v`: 映射第二个输入文件（`cover.jpg`）中的视频流。\n\n- `-map 2:s`: 映射第三个输入文件（`subtitle.ass`）中的字幕流。\n\n- `-c copy`: 这是最重要的参数，它告诉 FFmpeg **直接复制所有流**，不进行任何重新编码。因为 MKV 容器支持将字幕和封面作为独立的流，所以无需进行耗时的转码。\n\n- `-disposition:v:1 attached_pic`: 这个参数是关键，它告诉 FFmpeg 将第二个输入文件（你的封面图片）标记为“附加图片”，这样播放器就能识别并显示它作为封面。\n\n- `output.mkv`: 最终输出的文件名。\n\n这个命令利用了 MKV 容器的灵活性，实现了**快速、无损地**添加封面和软字幕。","filePath":"src/content/posts/ffmepg_related.md","digest":"ac1df6669c9aec70","rendered":{"html":"<section><h2 id=\"ffmpeg-是音视频处理的一个强大开源工具它包含许多组件和扩展库在视频网站和商业软件被大量应用它还有一个命令行工具在很多场景下直接使用ffmpeg命令行工具比桌面视频处理软件更简洁高效\">FFmpeg 是音、视频处理的一个强大开源工具，它包含许多组件和扩展库，在视频网站和商业软件被大量应用。它还有一个命令行工具，在很多场景下直接使用FFmpeg命令行工具比桌面视频处理软件更简洁高效<a class=\"anchor\" href=\"#ffmpeg-是音视频处理的一个强大开源工具它包含许多组件和扩展库在视频网站和商业软件被大量应用它还有一个命令行工具在很多场景下直接使用ffmpeg命令行工具比桌面视频处理软件更简洁高效\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>使用 <code>ffmpeg</code> 前，可先简单了解下视频处理的一些基本概念：</p><p><strong>封装(Container)格式</strong>：也可翻译为容器，里面包括了视频、音频、字幕等内容。对视频来说，封装格式是mp4、avi、mkv等格式。</p><p><strong>流(Stream)</strong>：stream是指媒体文件中的一个单独的数据通道。一个媒体文件可以包含多个流，如视频、音频、字幕等。ffmpeg本质上是操作和处理这些媒体流，比如提取、分离、合并、转码等。你可以选择特定的流进行处理，或者将多个流合并成一个新的媒体文件。</p><p><strong>帧(Frame)</strong>：帧代表最小数据单元，也是编解码器真正处理的最小处理单元。对于视频来说，帧(Frame)是编码器编码后的一个图像；对于音频来说，帧(Frame)是编码器编码后的一个声音。帧分为：I帧:关键帧、P帧:预测帧、B帧:双向预测帧。编解码(Codec)：编码是指对图像和声音的打包或压缩方法；解码就是把编码后的东西还原为原来的状态。编码格式：视频和音频都需要经过编码，才能保存成文件。不同的编码格式，有不同的压缩率，会导致文件大小和清晰度的差异。常用的编码格式有H.264、H.265等。</p></section>\n<section><h1 id=\"-视频处理\">🎞 视频处理<a class=\"anchor\" href=\"#-视频处理\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h2 id=\"1转码为mp4\">1.转码为MP4<a class=\"anchor\" href=\"#1转码为mp4\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:58ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">input.mov</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-vcodec</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">libx264</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-acodec</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">aac</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">output.mp4</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>也可以添加额外参数</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:75ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">input.mov</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-c:v</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">libx264</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-c:a</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">aac</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-preset</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">medium</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-crf</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">23</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">output.mp4</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li><code>-c:v</code>和<code>-c:a</code>分别是<code>-vcodec</code>和<code>-acodec</code>的alias</li>\n<li><code>libx264</code>：转换为H.264（兼容性最好）</li>\n<li><code>aac</code>：音频转为AAC（兼容广泛）</li>\n<li><code>-crf 23</code>：保持较好画质，文件不会太大</li>\n<li><code>-preset medium</code>：转码速度与压缩比的平衡</li>\n</ul></section><section><h2 id=\"2裁剪视频不重新编码\">2.裁剪视频(不重新编码)<a class=\"anchor\" href=\"#2裁剪视频不重新编码\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:63ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-ss</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">00:00:10</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">input.mp4</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">00:00:20</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-c</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">copy</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">output.mp4</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>-ss</code>是起始时间，<code>-t</code>是持续时间，<code>-c copy</code>表示不改变音频和视频的编码格式，直接拷贝</p></section><section><h2 id=\"3修改分辨率\">3.修改分辨率<a class=\"anchor\" href=\"#3修改分辨率\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:54ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">input.mp4</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-vf</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">scale=1280:720</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">output_720p.mp4</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"4提取指定时间段的视频并重新编码\">4.提取指定时间段的视频(并重新编码)<a class=\"anchor\" href=\"#4提取指定时间段的视频并重新编码\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:78ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-ss</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">00:01:00</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-to</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">00:02:00</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">input.mp4</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-c:v</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">libx264</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-c:a</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">aac</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">output.mp4</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"5加快或减慢播放速度\">5.加快或减慢播放速度<a class=\"anchor\" href=\"#5加快或减慢播放速度\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>快两倍：</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:56ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">input.mp4</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-vf</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"setpts=0.5*PTS\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">output_fast.mp4</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:56ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">慢0.5倍：</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">input.mp4</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-vf</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"setpts=2.0*PTS\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">output_slow.mp4</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section>\n<section><h1 id=\"-音频处理\">🔊 音频处理<a class=\"anchor\" href=\"#-音频处理\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h2 id=\"1提取音频\">1.提取音频<a class=\"anchor\" href=\"#1提取音频\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:47ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">input.mp4</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-vn</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-acodec</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">copy</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">output.aac</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li><code>vn</code>: 不处理视频流（只提取音频）</li>\n<li><code>c:a aac</code>: 指定音频编码为 AAC（与 .aac 容器兼容）</li>\n</ul></section><section><h2 id=\"2转换为mp3\">2.转换为MP3<a class=\"anchor\" href=\"#2转换为mp3\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:30ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">input.aac</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">output.mp3</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"3调整音量放大一倍\">3.调整音量(放大一倍)<a class=\"anchor\" href=\"#3调整音量放大一倍\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:53ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">input.mp3</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-filter:a</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"volume=2.0\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">output.mp3</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"4混合多个音轨\">4.混合多个音轨<a class=\"anchor\" href=\"#4混合多个音轨\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:92ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">audio1.mp3</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">audio2.mp3</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-filter_complex</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">amix=inputs=2:duration=longest</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">output.mp3</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section>\n<section><h1 id=\"-图片处理\">🖼 图片处理<a class=\"anchor\" href=\"#-图片处理\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h2 id=\"1从视频中导出每秒一张图片\">1.从视频中导出每秒一张图片<a class=\"anchor\" href=\"#1从视频中导出每秒一张图片\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:44ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">input.mp4</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-vf</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">fps=</span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">image_%03d.jpg</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"2将图片序列合成为视频\">2.将图片序列合成为视频<a class=\"anchor\" href=\"#2将图片序列合成为视频\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:79ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-framerate</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">24</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">image_%03d.jpg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-c:v</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">libx264</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-pix_fmt</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">yuv420p</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">output.mp4</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"3提取视频的第一帧为封面图\">3.提取视频的第一帧为封面图<a class=\"anchor\" href=\"#3提取视频的第一帧为封面图\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:59ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">input.mp4</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-vf</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"select=eq(n\\,0) -q:v 3 output.jpg\"</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"extra-ffmpeg-在指定时间区间内按帧提取截图\">extra. FFmpeg 在指定时间区间内按帧提取截图<a class=\"anchor\" href=\"#extra-ffmpeg-在指定时间区间内按帧提取截图\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:76ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">ffmpeg </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">ss </span><span style=\"--0:#005CC5;--1:#79B8FF\">00</span><span style=\"--0:#24292E;--1:#E1E4E8\">:</span><span style=\"--0:#005CC5;--1:#79B8FF\">00</span><span style=\"--0:#24292E;--1:#E1E4E8\">:</span><span style=\"--0:#005CC5;--1:#79B8FF\">05</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-to</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">00</span><span style=\"--0:#24292E;--1:#E1E4E8\">:</span><span style=\"--0:#005CC5;--1:#79B8FF\">00</span><span style=\"--0:#24292E;--1:#E1E4E8\">:</span><span style=\"--0:#005CC5;--1:#79B8FF\">10</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">i input.mp4 </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">vsync </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">q:v </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> frame_</span><span style=\"--0:#BF3441;--1:#F97583\">%</span><span style=\"--0:#24292E;--1:#E1E4E8\">04d.png</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"extra1-ffmpeg-指定nvidia-gpu时间区间内按帧提取截图\">extra1. FFmpeg 指定NVIDIA GPU时间区间内按帧提取截图<a class=\"anchor\" href=\"#extra1-ffmpeg-指定nvidia-gpu时间区间内按帧提取截图\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:91ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">ffmpeg </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">hwaccel cuda </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">ss </span><span style=\"--0:#005CC5;--1:#79B8FF\">00</span><span style=\"--0:#24292E;--1:#E1E4E8\">:</span><span style=\"--0:#005CC5;--1:#79B8FF\">00</span><span style=\"--0:#24292E;--1:#E1E4E8\">:</span><span style=\"--0:#005CC5;--1:#79B8FF\">30</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-to</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">00</span><span style=\"--0:#24292E;--1:#E1E4E8\">:</span><span style=\"--0:#005CC5;--1:#79B8FF\">00</span><span style=\"--0:#24292E;--1:#E1E4E8\">:</span><span style=\"--0:#005CC5;--1:#79B8FF\">40</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">i input.mp4 </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">vf fps</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> output/frame_</span><span style=\"--0:#BF3441;--1:#F97583\">%</span><span style=\"--0:#24292E;--1:#E1E4E8\">04d.jpg</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><section><h3 id=\"-参数说明\">📌 参数说明<a class=\"anchor\" href=\"#-参数说明\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td><code>-hwaccel cuda</code></td><td>使用 NVIDIA GPU 加速视频解码（通过 CUDA）</td></tr><tr><td><code>-i input.mp4</code></td><td>输入视频</td></tr><tr><td><code>-vf fps=1</code></td><td>每秒截一帧</td></tr><tr><td><code>output/frame_%04d.jpg</code></td><td>输出图像路径</td></tr></tbody></table></section></section><section><h2 id=\"extra2-av1转码为-h264再截图兼容--可加速\">extra2. av1转码为 H.264，再截图（兼容 + 可加速）<a class=\"anchor\" href=\"#extra2-av1转码为-h264再截图兼容--可加速\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:86ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">ffmpeg </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">c:v libdav1d </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">i video.mp4 </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">c:v h264_nvenc </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">crf </span><span style=\"--0:#005CC5;--1:#79B8FF\">23</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">preset fast output_h264.mp4</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>然后截图：</p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:97ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">ffmpeg </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">hwaccel cuda </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">ss </span><span style=\"--0:#005CC5;--1:#79B8FF\">00</span><span style=\"--0:#24292E;--1:#E1E4E8\">:</span><span style=\"--0:#005CC5;--1:#79B8FF\">00</span><span style=\"--0:#24292E;--1:#E1E4E8\">:</span><span style=\"--0:#005CC5;--1:#79B8FF\">30</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-to</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">00</span><span style=\"--0:#24292E;--1:#E1E4E8\">:</span><span style=\"--0:#005CC5;--1:#79B8FF\">00</span><span style=\"--0:#24292E;--1:#E1E4E8\">:</span><span style=\"--0:#005CC5;--1:#79B8FF\">40</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">i output_h264.mp4 </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">vf fps</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> output/frame_</span><span style=\"--0:#BF3441;--1:#F97583\">%</span><span style=\"--0:#24292E;--1:#E1E4E8\">04d.jpg</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>这样截图过程可以启用 GPU 加速（因为 H.264 你支持 NVENC/NVDEC）</p><p>✅ 可选：如果转码中出现 OBU 报错，使用 libaom-av1：</p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:80ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">ffmpeg </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">c:v libaom</span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">av1 </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">i video.mp4 </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">c:v h264_nvenc </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">preset fast output_h264.mp4</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"4图片格式转换\">4.图片格式转换<a class=\"anchor\" href=\"#4图片格式转换\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:31ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">input.jfif</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">output.png</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li><code>-i input.jfif</code>：指定输入文件</li>\n<li><code>output.png</code>：自动根据后缀选择PNG编码器</li>\n</ul></section><section><h2 id=\"5修改图片尺寸\">5.修改图片尺寸<a class=\"anchor\" href=\"#5修改图片尺寸\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:49ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">input.jfif</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-vf</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">scale=800:600</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">output.png</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li><code>scale=宽度:高度</code>，可用<code>-1</code>自动按比例缩放，比如：</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:16ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">-vf</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">scale=800:-1</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"6调整输出图片质量对有压缩的格式如jpeg更有用\">6.调整输出图片质量(对有压缩的格式如JPEG更有用)<a class=\"anchor\" href=\"#6调整输出图片质量对有压缩的格式如jpeg更有用\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>虽然 PNG 是无损格式，没压缩等级设置，但你可以用<code>-compression_level</code>控制压缩（越高体积越小，速度越慢）：</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:52ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">input.jfif</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-compression_level</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">9</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">output.png</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>范围：<code>0</code>(最快)到<code>9</code>压缩最强</p></section><section><h2 id=\"7裁剪图片\">7.裁剪图片<a class=\"anchor\" href=\"#7裁剪图片\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:60ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">input.jfif</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-vf</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"crop=width:height:x:y\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">output</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">.png</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>例如从左上角开始裁剪300x300区域：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:22ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">-vf</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"crop=300:300:0:0\"</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"8添加水印叠加图层\">8.添加水印/叠加图层<a class=\"anchor\" href=\"#8添加水印叠加图层\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:75ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">input.jfif</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">logo.png</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-filter_complex</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"overlay=10:10\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">output.png</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>将<code>logo.png</code>叠加到输入图像的左上角(x=10,y=10)</p></section><section><h2 id=\"9转换为带透明背景alpha的png\">9.转换为带透明背景(alpha)的PNG<a class=\"anchor\" href=\"#9转换为带透明背景alpha的png\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>如果原图没有alpha，但你希望创建带alpha通道的图(比如用于抠图后保存)：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:49ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">input.jfif</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-vf</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"format=rgba\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">output.png</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"10更改颜色格式\">10.更改颜色格式<a class=\"anchor\" href=\"#10更改颜色格式\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:46ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">input.jfif</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-pix_fmt</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">rgb24</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">output.png</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>常用像素格式:</p><ul>\n<li><code>gray</code>：灰度图</li>\n<li><code>rgb24</code>：24位真彩色</li>\n<li><code>rgba</code>：含透明度通道</li>\n<li><code>pal8</code>：8位索引色(低色图)</li>\n</ul></section></section>\n<section><h1 id=\"-示例高质量转换--改尺寸--添加水印\">✅ 示例：高质量转换 + 改尺寸 + 添加水印<a class=\"anchor\" href=\"#-示例高质量转换--改尺寸--添加水印\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:129ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">input.jfif</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">watermark.png</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-filter_complex</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"[0][1]overlay=W-w-10:H-h-10,scale=1024:-1\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-compression_level</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">9</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">output.png</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>\n<section><h1 id=\"-本地帮助手册\">🔍 本地帮助手册<a class=\"anchor\" href=\"#-本地帮助手册\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:29ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-h</span><span style=\"--0:#24292E;--1:#E1E4E8\">           </span><span style=\"--0:#616972;--1:#99A0A6\"># 简略帮助</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-filter</span><span style=\"--0:#24292E;--1:#E1E4E8\">      </span><span style=\"--0:#616972;--1:#99A0A6\"># 所有滤镜</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-codecs</span><span style=\"--0:#24292E;--1:#E1E4E8\">      </span><span style=\"--0:#616972;--1:#99A0A6\"># 所有编解码器</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-pix_fmts</span><span style=\"--0:#24292E;--1:#E1E4E8\">    </span><span style=\"--0:#616972;--1:#99A0A6\"># 所有像素格式</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-formats</span><span style=\"--0:#24292E;--1:#E1E4E8\">     </span><span style=\"--0:#616972;--1:#99A0A6\"># 所有支持的格式</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>\n<section><h1 id=\"-补充说明\">📌 补充说明<a class=\"anchor\" href=\"#-补充说明\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><p>如果你要批量转换多个 .jfif 为 .png，也可以用批处理命令（例如在 Windows 批处理脚本中）：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:50ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">for</span><span style=\"--0:#24292E;--1:#E1E4E8\"> %%f in (</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\">.jfif) </span><span style=\"--0:#BF3441;--1:#F97583\">do</span><span style=\"--0:#24292E;--1:#E1E4E8\"> ffmpeg -i </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"%%f\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"%%~nf.png\"</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>✅ 如果你直接在命令行中运行（不是 .bat 文件），要用 %f 而不是 %%f</p><section><h2 id=\"1-图片转换选项\">1. 图片转换选项<a class=\"anchor\" href=\"#1-图片转换选项\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"pngportable-network-graphics-可选的选项\">PNG(Portable Network Graphics) 可选的选项<a class=\"anchor\" href=\"#pngportable-network-graphics-可选的选项\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>-pix_fmt</code>：<strong>控制像素格式</strong></p><p>这个选项决定了输出 PNG 文件的颜色深度和通道数。它直接影响文件大小和颜色精度。</p><ul>\n<li><code>rgba</code>: 这会创建一个带有 Alpha 通道（透明度）的真彩色 PNG 文件。如果你的输入图片包含透明度信息，这是最佳选择，因为它能完整保留透明度。</li>\n<li><code>rgb24</code>: 这会创建一个没有 Alpha 通道的真彩色 PNG 文件。文件会比 rgba 小，因为没有透明度数据。如果你不需要透明度，这是个好选择。</li>\n<li><code>gray</code>: 这会创建一个灰度 PNG 文件。文件最小，但会丢失所有颜色信息。</li>\n<li><code>graya</code>: 灰度文件，但包含一个 Alpha 通道。</li>\n</ul><p><strong>示例</strong></p><p>如果你想将一张 JPG 图片转换为带透明度的 PNG，你可以这样做：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:44ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">input.jpg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-pix_fmt</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">rgba</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">output.png</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>注意:</strong> 如果输入图片没有透明度，<code>rgba</code>格式会添加一个全不透明的Alpha通道</p><p>滤镜(<strong><code>-vf</code></strong>)：<strong>图像处理选项</strong></p><p>在将图片保存为PNG之前，你可以使用各种视频滤镜来处理图像</p><ul>\n<li><code>scale</code>: 调整图片大小\n<ul>\n<li><code>ffmpeg -i input.jpg -vf \"scale=800:600\" output.png</code></li>\n</ul>\n</li>\n<li><code>crop</code>: 裁剪图片\n<ul>\n<li><code>ffmpeg -i input.jpg -vf \"crop=500:500:100:100\" output.png</code></li>\n</ul>\n</li>\n<li><code>format</code>: 类似于<code>-pix_fmt</code>,但更灵活，允许你强制转换像素格式\n<ul>\n<li><code>ffmpeg -i input.jpg -vf \"format=rgba\" output.png</code></li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"jpegjoint-photographic-experts-group-可选的选项\">JPEG(Joint Photographic Experts Group) 可选的选项<a class=\"anchor\" href=\"#jpegjoint-photographic-experts-group-可选的选项\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>-q:v</code>或<code>-qscale:v</code>：<strong>控制质量(常用)</strong></p><p>这是最常用的选项，用于直接控制 JPG 输出的质量。其值范围通常是 <em>2</em> 到 <em>31</em>。</p><ul>\n<li><code>ffmpeg -i input.png -q:v 2 output.jpg</code>: <code>2</code>是最高质量，文件最大。</li>\n<li><code>ffmpeg -i input.png -q:v 31 output.jpg</code>: <code>31</code>是最低质量，文件最小。</li>\n</ul><p><strong>建议：</strong></p><ul>\n<li><strong>高质量输出</strong>：使用 <code>-q:v 2</code> 到 <code>-q:v 5</code>，这个范围能提供极好的画质，但文件较大。</li>\n<li><strong>平衡质量与大小</strong>：使用 <code>-q:v 6</code> 到 <code>-q:v 10</code>，这是一个很好的折衷方案。</li>\n</ul><p><code>-pix_fmt</code>：<strong>像素格式</strong></p><p>这个选项决定了输出JPG文件的颜色格式</p><ul>\n<li><code>yuvj444p</code>: 提供了最好的颜色质量，是最高级别的色度采样(4:4:4)。文件最大。</li>\n<li><code>yuvj422p</code>: 提供了中等的颜色质量（4:2:2）。在大多数情况下画质和文件大小之间达到了很好的平衡。</li>\n<li><code>yuvj420p</code>: 提供了最低的颜色质量（4:2:0）。这是最常见的格式，文件最小，适用于网络传输。</li>\n</ul><p><strong>示例：</strong></p><p>以最高质量的像素格式输出 JPG。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:55ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">input.png</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-pix_fmt</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">yuvj444p</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-q:v</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">output.jpg</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>-ss</code>和<code>-t</code>：<strong>从视频中提取帧</strong></p><p>如果你从视频中提取帧并保存为 JPG，可以使用这两个选项来指定时间范围。</p><ul>\n<li><code>-ss</code>: 指定开始时间，格式为<code>hh:mm:ss.sss</code>。</li>\n<li><code>-t</code>: 指定持续时间。</li>\n<li><code>-frame:v</code>: 指定要提取的帧数。</li>\n</ul><p><strong>示例：</strong></p><p>从 <code>video.mp4</code> 的第 <strong>5</strong> 秒开始，提取 <strong>10</strong> 帧并保存为 <code>frame%02d.jpg</code>。</p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:57ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">ffmpeg </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">ss </span><span style=\"--0:#005CC5;--1:#79B8FF\">5</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">i video.mp4 </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">t </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">frames:v </span><span style=\"--0:#005CC5;--1:#79B8FF\">10</span><span style=\"--0:#24292E;--1:#E1E4E8\"> frame</span><span style=\"--0:#BF3441;--1:#F97583\">%</span><span style=\"--0:#24292E;--1:#E1E4E8\">02d.jpg</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"webp可选的选项\">WebP可选的选项<a class=\"anchor\" href=\"#webp可选的选项\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>WebP是一种为网络优化的新一代图片格式，支持有损和无损压缩，以及透明度。</p><ul>\n<li><code>lossless 1</code>: 启用无损压缩模式。WebP的无损压缩通常比<strong>PNG</strong>更高效，文件更小。\n<ul>\n<li><code>ffmpeg -i input.png -lossless 1 output.webp</code></li>\n</ul>\n</li>\n<li><code>-q:v</code> 或 <code>-qscale:v</code>: 控制有损压缩的质量。值范围是 <strong>0</strong> 到 <strong>100</strong>，<strong>100 是最高质量</strong>。这与 JPEG 的质量选项类似，但范围相反。\n<ul>\n<li><code>ffmpeg -i input.jpg -q:v 80 output.webp</code></li>\n</ul>\n</li>\n<li><code>-compression_level</code>: 控制压缩速度与文件大小的平衡。值范围是 0 到 6，<strong>6 是最慢、压缩率最高</strong>。\n<ul>\n<li><code>ffmpeg -i input.png -compression_level 6 output.webp</code></li>\n</ul>\n</li>\n</ul><p>WebP 格式的<em><strong>独特之处</strong></em>在于它能在一个文件中同时处理有损和无损压缩，并且透明度支持比 <strong>JPEG</strong> 更好。</p></section><section><h3 id=\"avif可选的选项\">AVIF可选的选项<a class=\"anchor\" href=\"#avif可选的选项\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>AVIF 是一种基于 AV1 视频编码的图片格式，旨在提供比 JPEG 和 WebP 更高的压缩效率。</p><ul>\n<li><code>-crf</code>: 控制压缩质量。与 H.264 编码器类似，值越低，质量越高，文件越大。\n<ul>\n<li><code>ffmpeg -i input.jpg -c:v libsvtav1 -crf 20 output.avif</code></li>\n</ul>\n</li>\n<li><code>-tile-columns</code> 和 <code>-tile-rows</code>: 决定图像如何被分割成瓦片进行并行编码，可以提高编码速度。</li>\n</ul></section><section><h3 id=\"tiff可选的选项\">TIFF可选的选项<a class=\"anchor\" href=\"#tiff可选的选项\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>TIFF是一种灵活且兼容性强的无损(lossless)格式，常用于印刷和专业图像编辑。</p><ul>\n<li><code>-compression_algo</code>: 控制压缩算法。TIFF 支持多种无损压缩算法，如 LZW、Deflate 和 RLE。\n<ul>\n<li><code>lzw</code>: 常用，无损压缩。</li>\n<li><code>deflate</code>: 常用，通常比 LZW 效率更高。</li>\n<li><code>none</code>: 无压缩，文件最大。</li>\n<li><code>rle</code>: 适用于包含大片相同颜色的图像（如黑白图像）。</li>\n<li><code>ffmpeg -i input.png -compression_algo lzw output.tif</code></li>\n</ul>\n</li>\n<li><code>-pix_fmt</code>: 支持广泛的像素格式，包括 48-bit RGB、浮点数等，这使得它在专业领域非常有用。\n<ul>\n<li><code>ffmpeg -i input.png -pix_fmt rgb48 output.tif</code></li>\n</ul>\n</li>\n</ul></section><section><h3 id=\"bmp可选的选项\">BMP可选的选项<a class=\"anchor\" href=\"#bmp可选的选项\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>BMP 是一种无压缩的位图格式，主要用于 Windows 系统，文件体积通常很大。</p><ul>\n<li><code>pix_fmt</code>: BMP 支持多种像素格式，但通常没有压缩选项。\n<ul>\n<li><code>ffmpeg -i input.jpg -pix_fmt bgra bmp_with_alpha.bmp</code></li>\n</ul>\n</li>\n</ul><p>BMP 格式的独特之处在于它几乎没有压缩，因此转换速度快，但文件巨大。</p></section></section></section>\n<section><h1 id=\"其它补充\">💨其它补充<a class=\"anchor\" href=\"#其它补充\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h3 id=\"-1-启用多线程自动或手动指定\">🚀 1. 启用多线程（自动或手动指定）<a class=\"anchor\" href=\"#-1-启用多线程自动或手动指定\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>FFmpeg 默认会根据系统核心数自动使用多线程，但你也可以手动指定：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:67ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">input.mp4</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-threads</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">8</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-c:v</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">libx264</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-preset</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">fast</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">output.mp4</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>参数说明：</p><ul>\n<li><code>-threads 8</code>：手动指定使用 8 个线程（可设为 auto）</li>\n<li><code>libx264</code> 本身是支持多线程的（默认会启用）</li>\n<li>一些滤镜（如 scale, hqdn3d）也会自动启用多线程</li>\n</ul><p>📌 注意：某些滤镜不支持多线程，比如 drawtext，即使你开了 -threads 也可能没明显效果。</p></section><section><h3 id=\"-2-使用转码预设-preset\">🧠 2. 使用转码预设：<code>-preset</code><a class=\"anchor\" href=\"#-2-使用转码预设-preset\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>用于 libx264 和 libx265 编码器，会影响速度和压缩比：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:24ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">-preset</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">ultrafast</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">-preset</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">superfast</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">-preset</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">veryfast</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">-preset</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">fast</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">-preset</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">medium</span><span style=\"--0:#24292E;--1:#E1E4E8\">     </span><span style=\"--0:#616972;--1:#99A0A6\"># 默认值</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">-preset</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">slow</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>越“fast”，编码越快，但文件体积越大、画质压缩越弱</p></section><section><h3 id=\"-3-ffmpeg纯音频合成黑场视频\">😎 3. FFmpeg纯音频合成黑场视频<a class=\"anchor\" href=\"#-3-ffmpeg纯音频合成黑场视频\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:138ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">your_audio.mp3</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-f</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">lavfi</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">color=c=black:s=640x480:r=</span><span style=\"--0:#005CC5;--1:#79B8FF\">30</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-c:v</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">libx264</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-pix_fmt</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">yuv420p</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-c:a</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">copy</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-shortest</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">output_black_video.mp4</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li><code>-i your_audio.mp3</code>: 指定你的输入音频文件。替换 <code>your_audio.mp3</code> 为你的实际音频文件路径。</li>\n<li><code>-f lavfi</code>:　告诉 FFmpeg 使用 <code>lavfi</code> (libavfilter input) 虚拟设备。</li>\n<li><code>-i color=...</code>: 这是 <code>lavfi</code>的一个源滤镜，用于生成一个纯色视频流。\n<code>c=black</code>: 设置颜色为黑色。你也可以使用其他颜色名称（如 white, red）或十六进制 RGB 值（如 c=0x000000）。\n<code>s=1920x1080</code>: 设置视频分辨率为 1920x1080 (Full HD)。你可以根据需要更改这个值，例如 1280x720 (HD)。\n<code>r=30</code>: 设置视频帧率为 30 fps。你也可以设置为其他帧率，例如 r=25 或 r=60。\n<code>-c:v libx264</code>: 指定视频编码器为 libx264，这是最常用的 H.264 编码器。\n<code>-pix_fmt yuv420p</code>: 指定像素格式为 yuv420p。这是 H.264 的标准像素格式，具有广泛的兼容性。\n<code>-c:a copy</code>: 复制音频流，不重新编码。这样可以保持原始音频的音质和编码格式（例如，如果你的输入是 AAC，输出的 MP4 中音频也会是 AAC）。\n<code>-shortest</code>: 这个非常重要！它告诉 FFmpeg 输出的视频时长应与最短的输入流（在这里就是你的音频文件）的持续时间保持一致。如果没有这个，FFmpeg 会生成一个无限长的黑屏视频。\n<code>output_black_video.mp4</code>: 指定输出的 MP4 文件名。</li>\n</ul></section><section><h3 id=\"-4-使用ffmpeg提取指定视频时间区域制作成gif\">✨ 4. 使用FFmpeg提取指定视频时间区域制作成GIF<a class=\"anchor\" href=\"#-4-使用ffmpeg提取指定视频时间区域制作成gif\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>基本命令(质量较低)</strong></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:78ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-ss</span><span style=\"--0:#24292E;--1:#E1E4E8\"> [开始时间] -to [结束时间] -i input.mp4 -vf </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"fps=10,scale=320:-1\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> output.git</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li><code>ss [开始时间]</code>: 指定视频的开始时间。格式可以是<code>HH:MM:SS</code>(小时:分钟:秒)或(SS)秒。例如：<code>00:00:10</code> 表示从视频的第 10 秒开始，<code>5</code> 表示从视频的第 5 秒开始。</li>\n<li><code>to [结束时间]</code>：指定视频的结束时间。格式与<code>-ss</code>相同。</li>\n<li><code>i input.mp4</code>：指定输入视频文件。请将<code>input.mp4</code>替换为你的视频文件路径。</li>\n<li><code>-vf \"fps=10,scale=320:-1\"</code>是视频滤镜选项：\n<ul>\n<li><code>fps=10</code>：设置 GIF 的帧率（每秒帧数）为 10。较低的帧率可以减小 GIF 的文件大小。你可以根据需要调整此值。</li>\n<li><code>scale=320:-1</code>：设置 GIF 的宽度为 320 像素，高度会自动根据原始视频的宽高比进行调整（-1 表示保持宽高比）。你可以调整宽度来控制 GIF 的尺寸和文件大小。</li>\n<li><code>output.gif</code>：指定输出 GIF 文件的名称。</li>\n</ul>\n</li>\n</ul><p><strong>高质量 GIF（两步法 - 推荐）</strong></p><ol>\n<li><strong>生成调色板 (palettegen)：</strong> FFmpeg 会分析视频中的颜色，生成一个最优的 256 色调色板。GIF 格式限制为 256 种颜色，所以使用一个定制的调色板可以显著提高图像质量。</li>\n<li><strong>使用调色板生成 GIF (paletteuse)：</strong> 使用上一步生成的调色板来渲染 GIF。</li>\n</ol><p><strong>步骤 1: 生成调色板</strong></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:104ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-ss</span><span style=\"--0:#24292E;--1:#E1E4E8\"> [开始时间] -to [结束时间] -i input.mp4 -vf </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"fps=10,scale=320:-1:flags=lanczos,palettegen\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> palette.png</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>与基本命令相比，新增和修改的参数：</strong></p><ul>\n<li><code>flags=lanczos</code>：在缩放时使用 Lanczos 算法，通常能提供更好的缩放质量。</li>\n<li><code>palettegen</code>：这是一个滤镜，用于生成调色板。</li>\n<li><code>palette.png</code>：输出的调色板文件（临时文件）。\n<strong>步骤 2: 使用调色板生成 GIF</strong></li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:142ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-ss</span><span style=\"--0:#24292E;--1:#E1E4E8\"> [开始时间] -to [结束时间] -i input.mp4 -i palette.png -filter_complex </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"fps=10,scale=320:-1:flags=lanczos[x];[x]:[1:v]paletteuse\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> output.gif</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>新增和修改的参数：</strong></p><ul>\n<li><code>-i palette.png</code>：将上一步生成的调色板文件作为第二个输入。</li>\n<li><code>-filter_complex \"fps=10,scale=320:-1:flags=lanczos[x];[x][1:v]paletteuse\"</code>：这是一个复杂的滤镜链：\n<ul>\n<li><code>fps=10,scale=320:-1:flags=lanczos</code>：与第一步相同，对视频进行帧率和尺寸调整，并将结果命名为 [x]。</li>\n<li><code>[x][1:v]</code>：将处理后的视频流 [x] 和第二个输入（<code>palette.png</code>，即 <code>[1:v]</code> 视频流）作为输入。</li>\n<li><code>paletteuse</code>：使用调色板将视频转换为 GIF。</li>\n</ul>\n</li>\n</ul><p><strong>额外优化和注意事项</strong></p><ul>\n<li><strong>文件大小</strong>： GIF 文件的主要影响因素是<strong>帧率(flame)</strong>、<strong>分辨率(resolution)<strong>和</strong>持续时间(durations)</strong>。降低帧率 (<code>fps</code>)、缩小尺寸 (<code>scale</code>) 和缩短持续时间可以显著减小文件大小。</li>\n<li><strong>循环播放</strong>：GIF 默认是无限循环的。如果你想控制循环次数，可以在输出文件前添加<code>-loop</code>参数。</li>\n<li><strong>开始时间<code>-ss</code>的位置：</strong></li>\n<li>将 <code>-ss</code> 放在 <code>-i</code> 之前：这样 FFmpeg 会在读取输入文件之前先定位到指定时间，这通常更快，但可能会导致起始时间略微不准确（它会寻找最近的关键帧）。</li>\n<li>将 <code>-ss</code> 放在 <code>-i</code> 之后：这样 FFmpeg 会从视频开头开始解码，然后在指定时间点开始处理，通常更精确，但对于大型视频文件可能会比较慢。对于 GIF 提取，通常精确度更重要，所以放在 <code>-i</code> 之后可能更合适。</li>\n</ul></section><section><h3 id=\"-5-使用ffmpeg为mp4视频格式文件压入封面和硬字幕重新编码\">😤 5. 使用FFmpeg为MP4视频格式文件压入封面和硬字幕（重新编码）<a class=\"anchor\" href=\"#-5-使用ffmpeg为mp4视频格式文件压入封面和硬字幕重新编码\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>使用 FFmpeg 为 MP4 视频添加封面和硬字幕是一个复杂但可行的操作，它涉及到多个输入文件和流映射（<code>map</code>）的正确使用。</p><p>要实现这个目标，你需要执行一个命令，该命令会同时处理以下三个流：</p><ol>\n<li><strong>原始视频流</strong>（需要重新编码来烧录字幕）。</li>\n<li><strong>原始音频流</strong>（可以直接复制）。</li>\n<li><strong>封面图片流</strong>（需要作为附加图片流复制）。</li>\n</ol><p><strong>完整命令</strong></p><p>三个文件：</p><ul>\n<li><code>input.mp4</code>: 原始视频文件</li>\n<li><code>cover.jpg</code>: 作为封面的图片</li>\n<li><code>subtitle.ass</code>: 字幕文件</li>\n</ul><p><strong>方法一：使用滤镜同时添加封面和字幕</strong></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:205ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">input.mp4</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">cover.jpg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">subtitle.ass</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-filter_complex</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"[0:v]ass=subtitle.ass[v]\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-map</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"[v]\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-map</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">0:a</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-map</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">1:v</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-c:v</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">libx264</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-crf</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">18</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-c:a</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">copy</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-c:v:1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mjpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-disposition:v:1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">attached_pic</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">output.mp4</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li>\n<p><code>-filter_complex \"[0:v]ass=subtitle.ass[v]\"</code>: This is the best practice for applying the <code>ass</code> filter.It explicitly takes the main video stream from the first input([0<v></v>]), applies the <code>ass</code> filter (which automatically reads from <code>subtitle.ass</code>), and names the resulting filtered video stream <code>[v]</code>.This is much clearer and less prone to error</p>\n</li>\n<li>\n<p><code>-map [v]</code>: We then map this newly filtered video stream (<code>[v]</code>) to the output.This ensures that only the main video with the burned-in subtitles is included.</p>\n</li>\n<li>\n<p>The other <code>-map</code> flags remain the same: <code>-map 0:a</code> for the audio and <code>-map 1:v</code> for the cover image.The <code>-c:v:1 mjpeg -disposition:v:1 attached_pic</code> part is now correctly applied to the mapped cover image stream.</p>\n</li>\n</ul><p><strong>方法二：先压入字幕后压入封面</strong></p><p>STEP1</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:84ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">input.mp4</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-vf</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"ass=subtitle.ass\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-c:v</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">libx264</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-crf</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">18</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-c:a</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">copy</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">output.mp4</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li><code>-vf \"ass=subtitle.ass\"</code>: 这是关键的视频滤镜。ass 滤镜会读取.ass文件并将其内容绘制到视频帧上。</li>\n</ul><p>STEP2</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:133ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">input.mp4</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">cover.jpg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-map</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">0:v</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-map</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">0:a</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-map</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">1:v</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-c:v</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">copy</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-c:a</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">copy</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-c:v:1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mjpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-disposition:v:1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">attached_pic</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">output.mp4</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li><code>-c:v:1 mjpeg -disposition:v:1 attached_pic</code>：这些参数只作用于<strong>第二个视频流（v:1）</strong>，也就是你的封面图片，将其正确处理为内嵌封面。</li>\n</ul></section><section><h3 id=\"-6-使用ffmpeg为mkv视频格式文件压入软字幕不重新编码\">😇 6. 使用FFmpeg为MKV视频格式文件压入软字幕（不重新编码）<a class=\"anchor\" href=\"#-6-使用ffmpeg为mkv视频格式文件压入软字幕不重新编码\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"shell\" class=\"wrap\" style=\"--ecMaxLine:133ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">ffmpeg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">input.mkv</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">cover.jpg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-i</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">subtitle.ass</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-map</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">0:v</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-map</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">0:a</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-map</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">1:v</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-map</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">2:s</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-c</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">copy</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-disposition:v:1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">attached_pic</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">output.mkv</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li>\n<p><code>-i input.mkv</code>: 你的第一个输入文件。</p>\n</li>\n<li>\n<p><code>-i cover.jpg</code>: 你的第二个输入文件，封面图片。</p>\n</li>\n<li>\n<p><code>-i subtitle.ass</code>: 你的第三个输入文件，字幕文件。</p>\n</li>\n<li>\n<p><code>-map 0:v</code>: 映射第一个输入文件（<code>input.mkv</code>）中的视频流。</p>\n</li>\n<li>\n<p><code>-map 0:a</code>: 映射第一个输入文件（<code>input.mkv</code>）中的音频流。</p>\n</li>\n<li>\n<p><code>-map 1:v</code>: 映射第二个输入文件（<code>cover.jpg</code>）中的视频流。</p>\n</li>\n<li>\n<p><code>-map 2:s</code>: 映射第三个输入文件（<code>subtitle.ass</code>）中的字幕流。</p>\n</li>\n<li>\n<p><code>-c copy</code>: 这是最重要的参数，它告诉 FFmpeg <strong>直接复制所有流</strong>，不进行任何重新编码。因为 MKV 容器支持将字幕和封面作为独立的流，所以无需进行耗时的转码。</p>\n</li>\n<li>\n<p><code>-disposition:v:1 attached_pic</code>: 这个参数是关键，它告诉 FFmpeg 将第二个输入文件（你的封面图片）标记为“附加图片”，这样播放器就能识别并显示它作为封面。</p>\n</li>\n<li>\n<p><code>output.mkv</code>: 最终输出的文件名。</p>\n</li>\n</ul><p>这个命令利用了 MKV 容器的灵活性，实现了<strong>快速、无损地</strong>添加封面和软字幕。</p></section></section>","metadata":{"headings":[{"depth":2,"slug":"ffmpeg-是音视频处理的一个强大开源工具它包含许多组件和扩展库在视频网站和商业软件被大量应用它还有一个命令行工具在很多场景下直接使用ffmpeg命令行工具比桌面视频处理软件更简洁高效","text":"FFmpeg 是音、视频处理的一个强大开源工具，它包含许多组件和扩展库，在视频网站和商业软件被大量应用。它还有一个命令行工具，在很多场景下直接使用FFmpeg命令行工具比桌面视频处理软件更简洁高效#"},{"depth":1,"slug":"-视频处理","text":"🎞 视频处理#"},{"depth":2,"slug":"1转码为mp4","text":"1.转码为MP4#"},{"depth":2,"slug":"2裁剪视频不重新编码","text":"2.裁剪视频(不重新编码)#"},{"depth":2,"slug":"3修改分辨率","text":"3.修改分辨率#"},{"depth":2,"slug":"4提取指定时间段的视频并重新编码","text":"4.提取指定时间段的视频(并重新编码)#"},{"depth":2,"slug":"5加快或减慢播放速度","text":"5.加快或减慢播放速度#"},{"depth":1,"slug":"-音频处理","text":"🔊 音频处理#"},{"depth":2,"slug":"1提取音频","text":"1.提取音频#"},{"depth":2,"slug":"2转换为mp3","text":"2.转换为MP3#"},{"depth":2,"slug":"3调整音量放大一倍","text":"3.调整音量(放大一倍)#"},{"depth":2,"slug":"4混合多个音轨","text":"4.混合多个音轨#"},{"depth":1,"slug":"-图片处理","text":"🖼 图片处理#"},{"depth":2,"slug":"1从视频中导出每秒一张图片","text":"1.从视频中导出每秒一张图片#"},{"depth":2,"slug":"2将图片序列合成为视频","text":"2.将图片序列合成为视频#"},{"depth":2,"slug":"3提取视频的第一帧为封面图","text":"3.提取视频的第一帧为封面图#"},{"depth":2,"slug":"extra-ffmpeg-在指定时间区间内按帧提取截图","text":"extra. FFmpeg 在指定时间区间内按帧提取截图#"},{"depth":2,"slug":"extra1-ffmpeg-指定nvidia-gpu时间区间内按帧提取截图","text":"extra1. FFmpeg 指定NVIDIA GPU时间区间内按帧提取截图#"},{"depth":3,"slug":"-参数说明","text":"📌 参数说明#"},{"depth":2,"slug":"extra2-av1转码为-h264再截图兼容--可加速","text":"extra2. av1转码为 H.264，再截图（兼容 + 可加速）#"},{"depth":2,"slug":"4图片格式转换","text":"4.图片格式转换#"},{"depth":2,"slug":"5修改图片尺寸","text":"5.修改图片尺寸#"},{"depth":2,"slug":"6调整输出图片质量对有压缩的格式如jpeg更有用","text":"6.调整输出图片质量(对有压缩的格式如JPEG更有用)#"},{"depth":2,"slug":"7裁剪图片","text":"7.裁剪图片#"},{"depth":2,"slug":"8添加水印叠加图层","text":"8.添加水印/叠加图层#"},{"depth":2,"slug":"9转换为带透明背景alpha的png","text":"9.转换为带透明背景(alpha)的PNG#"},{"depth":2,"slug":"10更改颜色格式","text":"10.更改颜色格式#"},{"depth":1,"slug":"-示例高质量转换--改尺寸--添加水印","text":"✅ 示例：高质量转换 + 改尺寸 + 添加水印#"},{"depth":1,"slug":"-本地帮助手册","text":"🔍 本地帮助手册#"},{"depth":1,"slug":"-补充说明","text":"📌 补充说明#"},{"depth":2,"slug":"1-图片转换选项","text":"1. 图片转换选项#"},{"depth":3,"slug":"pngportable-network-graphics-可选的选项","text":"PNG(Portable Network Graphics) 可选的选项#"},{"depth":3,"slug":"jpegjoint-photographic-experts-group-可选的选项","text":"JPEG(Joint Photographic Experts Group) 可选的选项#"},{"depth":3,"slug":"webp可选的选项","text":"WebP可选的选项#"},{"depth":3,"slug":"avif可选的选项","text":"AVIF可选的选项#"},{"depth":3,"slug":"tiff可选的选项","text":"TIFF可选的选项#"},{"depth":3,"slug":"bmp可选的选项","text":"BMP可选的选项#"},{"depth":1,"slug":"其它补充","text":"💨其它补充#"},{"depth":3,"slug":"-1-启用多线程自动或手动指定","text":"🚀 1. 启用多线程（自动或手动指定）#"},{"depth":3,"slug":"-2-使用转码预设-preset","text":"🧠 2. 使用转码预设：-preset#"},{"depth":3,"slug":"-3-ffmpeg纯音频合成黑场视频","text":"😎 3. FFmpeg纯音频合成黑场视频#"},{"depth":3,"slug":"-4-使用ffmpeg提取指定视频时间区域制作成gif","text":"✨ 4. 使用FFmpeg提取指定视频时间区域制作成GIF#"},{"depth":3,"slug":"-5-使用ffmpeg为mp4视频格式文件压入封面和硬字幕重新编码","text":"😤 5. 使用FFmpeg为MP4视频格式文件压入封面和硬字幕（重新编码）#"},{"depth":3,"slug":"-6-使用ffmpeg为mkv视频格式文件压入软字幕不重新编码","text":"😇 6. 使用FFmpeg为MKV视频格式文件压入软字幕（不重新编码）#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"Useful FFmpeg commands","published":"2025-09-02T00:00:00.000Z","description":"Was it a cat i saw!?","category":"FFmpeg","tags":["FFmpeg","ffmpeg","video","audio","tools"],"author":"Akeboshi Himari","draft":false,"minutes":24,"words":4712,"excerpt":"使用 ffmpeg 前，可先简单了解下视频处理的一些基本概念："},"imagePaths":[]}},"collection":"posts"}],"2025-06-08":[{"id":"record_etc_deleted","data":{"title":"删除etc目录后如何把备份的etc目录重新恢复","published":"2025-06-08T00:00:00.000Z","draft":false,"description":"broken system recovery.","image":"","tags":["operating system","linux","etc"],"category":"linux","lang":"","pinned":false,"author":"Akeboshi Himari","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"鸟哥Linux笔记","prevSlug":"shell_command","nextTitle":"Useful FFmpeg commands","nextSlug":"ffmepg_related"},"body":"## 我是Retard\n\n### 删除/etc目录后如何使用LiveCD和已经备份的/etc目录恢复\n\n1. **准备一个 Linux Live CD/USB：**\n\n* 下载一个你常用的 Linux 发行版（如 Ubuntu, Fedora, Debian）的 ISO 镜像文件。\n* 使用工具（如 Rufus, Etcher, Ventoy, 或直接 dd 命令）将 ISO 镜像写入 USB 闪存盘，制作成启动盘。\n\n2. **从 Live CD/USB 启动计算机：**\n\n* 将制作好的 Live USB 插入计算机。\n重启计算机，并进入 BIOS/UEFI 设置，将启动顺序设置为从 USB 启动。\n* 选择“尝试 Ubuntu”（Try Ubuntu）或“救援模式”（Rescue Mode）等选项，进入 Live 环境。\n\n3. **识别并挂载你的根文件系统：**\n\n* 进入 Live 环境后，打开一个终端（通常在Applications -> Utilities -> Terminal）。\n* 使用 `lsblk` 或 `fdisk -l` 命令查看你的磁盘分区。你需要找到你的 Linux 根分区（通常是 / 目录所在的分区）。例如，它可能是 `/dev/sda1`、`/dev/nvme0n1p2` 等。\n* 创建一个挂载点，并挂载你的根分区。假设你的根分区是 `/dev/sda1`：\n\n~~~bash\nsudo mkdir /mnt/rootfs\nsudo mount /dev/sda1 /mnt/rootfs\n~~~\n\n_如果你的系统有单独的 `/boot`、`/var` 等分区，你可能也需要挂载它们到 `/mnt/rootfs` 下对应的位置。例如，如果 `/boot` 在 `/dev/sda2`：_\n\n~~~bash\nsudo mount /dev/sda2 /mnt/rootfs/boot\n~~~\n\n### 挂载 @ 和 @home 子卷的步骤\n\n**挂载 `@` 子卷：**\n\n你需要使用 subvol=@ 选项来指定挂载哪个子卷。\n\n~~~bash\nsudo mount -o subvol=@ /dev/sda1 /mnt/rootfs\n~~~\n* `-o subvol=@`：指定挂载名为 `@` 的子卷。\n* `/dev/sda1`：你的 Btrfs 文件系统所在的物理分区设备。\n* `/mnt/rootfs`：你为这个子卷创建的挂载点。\n\n**挂载 `@home` (主目录) 子卷：**\n\n~~~bash\nsudo mount -o subvol=@home /dev/sda1 /mnt/rootfs/home\n~~~\n\n* `-o subvol=@home`：指定挂载名为 `@home` 的子卷。\n* `/dev/sda1`：同样是你的 Btrfs 文件系统所在的物理分区设备。\n* `/mnt/rootfs/home`：这是 `@` 子卷内部的 `/home` 目录，现在 `@home` 子卷的内容会覆盖并显示在这个路径上。\n\n### 看看Gemini给的删除/etc的后果\n\n删除 Linux 系统中的 `/etc` 目录是一个**灾难性的操作**，会导致系统立即或在下次重启时**完全无法正常工作**。`/etc` 目录包含了几乎所有系统级别的配置文件，这些文件定义了系统如何运行、用户如何认证、网络如何配置、服务如何启动等等。\n\n### 后续操作（恢复或备份）\n\n~~~bash\nsudo rm -rf /mnt/rootfs/etc # 确保旧的 /etc 被彻底清除（如果还有残余）\nsudo tar -xzvpf /path/to/your/etc_backup.tar.gz -C /mnt/rootfs/\n# 确保 /path/to/your/etc_backup.tar.gz 是你备份文件在 Live 环境下的实际路径\n# 例如，如果备份在另一个U盘，它可能在 /media/ubuntu/YOUR_USB_LABEL/etc_backup.tar.gz\n~~~\n\n## 删除 `/etc`目录后会发生的一些严重后果\n\n#### 1. 系统立即失效或行为异常\n\n* **服务崩溃**： 大多数系统服务（如网络服务、SSH 服务器、Web 服务器、数据库等）的配置文件都存储在 `/etc` 中。删除 `/etc` 会导致这些服务无法找到其配置，从而停止运行或无法启动。\n* **网络中断**： 你的网络配置（如 IP 地址、DNS 服务器、路由表）通常在 `/etc/network/interfaces` (Debian/Ubuntu) 或 `/etc/sysconfig/network-scripts`(CentOS/RHEL) 等文件中。删除后，网络连接会立即中断或无法建立。\n* **用户认证失败**： 用户和组的信息（`/etc/passwd`, `/etc/shadow`, `/etc/group`）以及 `sudo` 配置（`/etc/sudoers`）都位于 `/etc`。你将无法登录到系统，或者即使能登录，也无法使用 `sudo` 命令提升权限。\n* **Shell 行为异常**： Shell 的配置文件（如 `/etc/bash.bashrc`, `/etc/profile`）也会丢失，导致命令行环境无法正常工作。\n* 日志和系统监控停止： 日志配置（`/etc/rsyslog.conf`, `/etc/logrotate.d`）和各种监控工具的配置也会丢失。\n\n#### 2. 无法重启或启动失败\n\n* **启动脚本丢失**： `/etc` 包含了系统启动时需要运行的大量脚本和配置，例如 `/etc/fstab`（文件系统挂载点）、`/etc/init.d` 或 `/etc/systemd`（服务启动配置）。没有这些文件，系统将无法正确挂载文件系统，也无法启动必要的系统服务。\n* **内核参数丢失**： 内核启动参数（`/etc/default/grub`）也可能受影响，导致引导加载程序（GRUB）无法找到正确的启动参数。\n* **重要库和程序配置丢失**： 许多程序和库也依赖 /etc 中的配置文件来正确加载和运行。\n\n#### 3. 数据恢复极其困难（通常不可行）\n\n* **没有简单的恢复方法**： `/etc` 目录下的文件数量庞大且复杂，每个文件都对系统的正常运行至关重要。没有备份的情况下，几乎不可能手动重新创建或恢复所有丢失的配置。\n* **软件包管理系统受损**： 像 `apt` (Debian/Ubuntu) 或 `yum/dnf` (CentOS/RHEL) 这样的包管理器本身也有很多配置在 `/etc` 下。即使你能勉强进入系统，包管理器也可能无法工作，导致无法通过重新安装软件包来恢复配置。\n* **唯一可靠的恢复方法是**：\n  * **从最近的备份中恢复**： 如果你有 `/etc` 目录的完整备份（强烈推荐！），这是唯一可靠的恢复方法。你需要通过 Live CD/USB 启动系统，然后将备份恢复到 `/etc` 目录。\n  * **重新安装操作系统**： 在大多数情况下，删除 `/etc` 后，最现实的解决方案是完全重新安装操作系统。这意味着你将丢失所有系统级别的配置和已安装的软件包。\n\n#### 4. 对其他分区的影响\n\n如果你的 `/home` 目录或其他数据分区是独立挂载的，那么这些数据本身不会被删除。但是，你将无法正常访问它们，因为文件系统的挂载信息 (`/etc/fstab`) 已经丢失。\n应用程序的配置可能存储在用户的 `~/.config` 或 `~/` 目录中，这些不会丢失，但由于系统环境的破坏，它们可能无法正常运行。\n\n#### 总结\n\n**删除 `/etc` 目录是 Linux 系统上最危险的操作之一，因为它会彻底破坏系统的核心配置，导致系统无法使用。** 永远不要随意删除此目录或其中的文件，除非你非常清楚你在做什么并且有完整的备份。\n\n**忠告**： 在对 `/etc` 目录进行任何操作之前，务必进行备份！`sudo cp -a /etc /etc_backup` 是一个简单的备份方法。","filePath":"src/content/posts/record_etc_deleted.md","digest":"3d36409dcea44aa7","rendered":{"html":"<section><h2 id=\"我是retard\">我是Retard<a class=\"anchor\" href=\"#我是retard\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"删除etc目录后如何使用livecd和已经备份的etc目录恢复\">删除/etc目录后如何使用LiveCD和已经备份的/etc目录恢复<a class=\"anchor\" href=\"#删除etc目录后如何使用livecd和已经备份的etc目录恢复\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ol>\n<li><strong>准备一个 Linux Live CD/USB：</strong></li>\n</ol><ul>\n<li>下载一个你常用的 Linux 发行版（如 Ubuntu, Fedora, Debian）的 ISO 镜像文件。</li>\n<li>使用工具（如 Rufus, Etcher, Ventoy, 或直接 dd 命令）将 ISO 镜像写入 USB 闪存盘，制作成启动盘。</li>\n</ul><ol start=\"2\">\n<li><strong>从 Live CD/USB 启动计算机：</strong></li>\n</ol><ul>\n<li>将制作好的 Live USB 插入计算机。\n重启计算机，并进入 BIOS/UEFI 设置，将启动顺序设置为从 USB 启动。</li>\n<li>选择“尝试 Ubuntu”（Try Ubuntu）或“救援模式”（Rescue Mode）等选项，进入 Live 环境。</li>\n</ul><ol start=\"3\">\n<li><strong>识别并挂载你的根文件系统：</strong></li>\n</ol><ul>\n<li>进入 Live 环境后，打开一个终端（通常在Applications -> Utilities -> Terminal）。</li>\n<li>使用 <code>lsblk</code> 或 <code>fdisk -l</code> 命令查看你的磁盘分区。你需要找到你的 Linux 根分区（通常是 / 目录所在的分区）。例如，它可能是 <code>/dev/sda1</code>、<code>/dev/nvme0n1p2</code> 等。</li>\n<li>创建一个挂载点，并挂载你的根分区。假设你的根分区是 <code>/dev/sda1</code>：</li>\n</ul><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:32ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mkdir</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/mnt/rootfs</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mount</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/sda1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/mnt/rootfs</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><em>如果你的系统有单独的 <code>/boot</code>、<code>/var</code> 等分区，你可能也需要挂载它们到 <code>/mnt/rootfs</code> 下对应的位置。例如，如果 <code>/boot</code> 在 <code>/dev/sda2</code>：</em></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:37ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mount</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/sda2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/mnt/rootfs/boot</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"挂载--和-home-子卷的步骤\">挂载 @ 和 @home 子卷的步骤<a class=\"anchor\" href=\"#挂载--和-home-子卷的步骤\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>挂载 <code>@</code> 子卷：</strong></p><p>你需要使用 subvol=@ 选项来指定挂载哪个子卷。</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:44ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mount</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-o</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">subvol=@</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/sda1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/mnt/rootfs</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li><code>-o subvol=@</code>：指定挂载名为 <code>@</code> 的子卷。</li>\n<li><code>/dev/sda1</code>：你的 Btrfs 文件系统所在的物理分区设备。</li>\n<li><code>/mnt/rootfs</code>：你为这个子卷创建的挂载点。</li>\n</ul><p><strong>挂载 <code>@home</code> (主目录) 子卷：</strong></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:53ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mount</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-o</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">subvol=@home</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/sda1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/mnt/rootfs/home</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li><code>-o subvol=@home</code>：指定挂载名为 <code>@home</code> 的子卷。</li>\n<li><code>/dev/sda1</code>：同样是你的 Btrfs 文件系统所在的物理分区设备。</li>\n<li><code>/mnt/rootfs/home</code>：这是 <code>@</code> 子卷内部的 <code>/home</code> 目录，现在 <code>@home</code> 子卷的内容会覆盖并显示在这个路径上。</li>\n</ul></section><section><h3 id=\"看看gemini给的删除etc的后果\">看看Gemini给的删除/etc的后果<a class=\"anchor\" href=\"#看看gemini给的删除etc的后果\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>删除 Linux 系统中的 <code>/etc</code> 目录是一个<strong>灾难性的操作</strong>，会导致系统立即或在下次重启时<strong>完全无法正常工作</strong>。<code>/etc</code> 目录包含了几乎所有系统级别的配置文件，这些文件定义了系统如何运行、用户如何认证、网络如何配置、服务如何启动等等。</p></section><section><h3 id=\"后续操作恢复或备份\">后续操作（恢复或备份）<a class=\"anchor\" href=\"#后续操作恢复或备份\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:67ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">rm</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-rf</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/mnt/rootfs/etc</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#616972;--1:#99A0A6\"># 确保旧的 /etc 被彻底清除（如果还有残余）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">tar</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-xzvpf</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/path/to/your/etc_backup.tar.gz</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-C</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/mnt/rootfs/</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 确保 /path/to/your/etc_backup.tar.gz 是你备份文件在 Live 环境下的实际路径</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 例如，如果备份在另一个U盘，它可能在 /media/ubuntu/YOUR_USB_LABEL/etc_backup.tar.gz</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section>\n<section><h2 id=\"删除-etc目录后会发生的一些严重后果\">删除 <code>/etc</code>目录后会发生的一些严重后果<a class=\"anchor\" href=\"#删除-etc目录后会发生的一些严重后果\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h4 id=\"1-系统立即失效或行为异常\">1. 系统立即失效或行为异常<a class=\"anchor\" href=\"#1-系统立即失效或行为异常\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><ul>\n<li><strong>服务崩溃</strong>： 大多数系统服务（如网络服务、SSH 服务器、Web 服务器、数据库等）的配置文件都存储在 <code>/etc</code> 中。删除 <code>/etc</code> 会导致这些服务无法找到其配置，从而停止运行或无法启动。</li>\n<li><strong>网络中断</strong>： 你的网络配置（如 IP 地址、DNS 服务器、路由表）通常在 <code>/etc/network/interfaces</code> (Debian/Ubuntu) 或 <code>/etc/sysconfig/network-scripts</code>(CentOS/RHEL) 等文件中。删除后，网络连接会立即中断或无法建立。</li>\n<li><strong>用户认证失败</strong>： 用户和组的信息（<code>/etc/passwd</code>, <code>/etc/shadow</code>, <code>/etc/group</code>）以及 <code>sudo</code> 配置（<code>/etc/sudoers</code>）都位于 <code>/etc</code>。你将无法登录到系统，或者即使能登录，也无法使用 <code>sudo</code> 命令提升权限。</li>\n<li><strong>Shell 行为异常</strong>： Shell 的配置文件（如 <code>/etc/bash.bashrc</code>, <code>/etc/profile</code>）也会丢失，导致命令行环境无法正常工作。</li>\n<li>日志和系统监控停止： 日志配置（<code>/etc/rsyslog.conf</code>, <code>/etc/logrotate.d</code>）和各种监控工具的配置也会丢失。</li>\n</ul></section><section><h4 id=\"2-无法重启或启动失败\">2. 无法重启或启动失败<a class=\"anchor\" href=\"#2-无法重启或启动失败\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><ul>\n<li><strong>启动脚本丢失</strong>： <code>/etc</code> 包含了系统启动时需要运行的大量脚本和配置，例如 <code>/etc/fstab</code>（文件系统挂载点）、<code>/etc/init.d</code> 或 <code>/etc/systemd</code>（服务启动配置）。没有这些文件，系统将无法正确挂载文件系统，也无法启动必要的系统服务。</li>\n<li><strong>内核参数丢失</strong>： 内核启动参数（<code>/etc/default/grub</code>）也可能受影响，导致引导加载程序（GRUB）无法找到正确的启动参数。</li>\n<li><strong>重要库和程序配置丢失</strong>： 许多程序和库也依赖 /etc 中的配置文件来正确加载和运行。</li>\n</ul></section><section><h4 id=\"3-数据恢复极其困难通常不可行\">3. 数据恢复极其困难（通常不可行）<a class=\"anchor\" href=\"#3-数据恢复极其困难通常不可行\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><ul>\n<li><strong>没有简单的恢复方法</strong>： <code>/etc</code> 目录下的文件数量庞大且复杂，每个文件都对系统的正常运行至关重要。没有备份的情况下，几乎不可能手动重新创建或恢复所有丢失的配置。</li>\n<li><strong>软件包管理系统受损</strong>： 像 <code>apt</code> (Debian/Ubuntu) 或 <code>yum/dnf</code> (CentOS/RHEL) 这样的包管理器本身也有很多配置在 <code>/etc</code> 下。即使你能勉强进入系统，包管理器也可能无法工作，导致无法通过重新安装软件包来恢复配置。</li>\n<li><strong>唯一可靠的恢复方法是</strong>：\n<ul>\n<li><strong>从最近的备份中恢复</strong>： 如果你有 <code>/etc</code> 目录的完整备份（强烈推荐！），这是唯一可靠的恢复方法。你需要通过 Live CD/USB 启动系统，然后将备份恢复到 <code>/etc</code> 目录。</li>\n<li><strong>重新安装操作系统</strong>： 在大多数情况下，删除 <code>/etc</code> 后，最现实的解决方案是完全重新安装操作系统。这意味着你将丢失所有系统级别的配置和已安装的软件包。</li>\n</ul>\n</li>\n</ul></section><section><h4 id=\"4-对其他分区的影响\">4. 对其他分区的影响<a class=\"anchor\" href=\"#4-对其他分区的影响\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>如果你的 <code>/home</code> 目录或其他数据分区是独立挂载的，那么这些数据本身不会被删除。但是，你将无法正常访问它们，因为文件系统的挂载信息 (<code>/etc/fstab</code>) 已经丢失。\n应用程序的配置可能存储在用户的 <code>~/.config</code> 或 <code>~/</code> 目录中，这些不会丢失，但由于系统环境的破坏，它们可能无法正常运行。</p></section><section><h4 id=\"总结\">总结<a class=\"anchor\" href=\"#总结\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p><strong>删除 <code>/etc</code> 目录是 Linux 系统上最危险的操作之一，因为它会彻底破坏系统的核心配置，导致系统无法使用。</strong> 永远不要随意删除此目录或其中的文件，除非你非常清楚你在做什么并且有完整的备份。</p><p><strong>忠告</strong>： 在对 <code>/etc</code> 目录进行任何操作之前，务必进行备份！<code>sudo cp -a /etc /etc_backup</code> 是一个简单的备份方法。</p></section></section>","metadata":{"headings":[{"depth":2,"slug":"我是retard","text":"我是Retard#"},{"depth":3,"slug":"删除etc目录后如何使用livecd和已经备份的etc目录恢复","text":"删除/etc目录后如何使用LiveCD和已经备份的/etc目录恢复#"},{"depth":3,"slug":"挂载--和-home-子卷的步骤","text":"挂载 @ 和 @home 子卷的步骤#"},{"depth":3,"slug":"看看gemini给的删除etc的后果","text":"看看Gemini给的删除/etc的后果#"},{"depth":3,"slug":"后续操作恢复或备份","text":"后续操作（恢复或备份）#"},{"depth":2,"slug":"删除-etc目录后会发生的一些严重后果","text":"删除 /etc目录后会发生的一些严重后果#"},{"depth":4,"slug":"1-系统立即失效或行为异常","text":"1. 系统立即失效或行为异常#"},{"depth":4,"slug":"2-无法重启或启动失败","text":"2. 无法重启或启动失败#"},{"depth":4,"slug":"3-数据恢复极其困难通常不可行","text":"3. 数据恢复极其困难（通常不可行）#"},{"depth":4,"slug":"4-对其他分区的影响","text":"4. 对其他分区的影响#"},{"depth":4,"slug":"总结","text":"总结#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"删除etc目录后如何把备份的etc目录重新恢复","published":"2025-06-08T00:00:00.000Z","description":"broken system recovery.","category":"linux","tags":["operating system","linux","etc"],"author":"Akeboshi Himari","draft":false,"minutes":8,"words":1565,"excerpt":"如果你的系统有单独的 /boot、/var 等分区，你可能也需要挂载它们到 /mnt/rootfs 下对应的位置。例如，如果 /boot 在 /dev/sda2："},"imagePaths":[]}},"collection":"posts"},{"id":"shell_command","data":{"title":"鸟哥Linux笔记","published":"2025-06-08T00:00:00.000Z","draft":false,"description":"Linux 是什么!?","image":"","tags":["linux","shell","command","fucntion","c"],"category":"Linux","lang":"","pinned":false,"author":"Akeboshi Himari","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"ssh-keygen generate","prevSlug":"ssh_keygen","nextTitle":"删除etc目录后如何把备份的etc目录重新恢复","nextSlug":"record_etc_deleted"},"body":"# Linux文件、目录与磁盘格式\n\n## 用户与用户组\n`useradd`、`groupadd`、`chown`、`chgrp`、`chmod`、`usermod`、`userdel`、`groupdel`\n### 🧑‍💻 一、useradd：添加用户\n~~~cmd\nsudo useradd [选项] 用户名\n~~~\n常用选项：\n| 选项             | 说明                       |\n| -------------- | ------------------------ |\n| `-m`           | 自动创建用户主目录（如 `/home/用户名`） |\n| `-s /bin/bash` | 指定默认 shell               |\n| `-g 组名`        | 指定主组                     |\n| `-G 组1,组2`     | 加入附加组                    |\n示例：\n~~~cmd\nsudo useradd -m -s /bin/bash -g users -G wheel,developers alice\n~~~\n然后设置密码：\n~~~cmd\nsudo passwd alice\n~~~\n### 👥 二、groupadd：添加用户组\n~~~cmd\nsudo groupadd 组名\n~~~\n示例：\n~~~cmd\nsudo groupadd developers\n~~~\n常用选项：\n| 选项             | 说明                       |\n| -------------- | ------------------------ |\n| `-g GID`           | 设置自定义的GID |\n| `-U users` |      设置组成员         |\n| `-f`        |      如果设定的GID已经存在则强制覆盖原组          |\n### 📂 三、chown：更改文件/目录的属主和属组（change owner）\n~~~cmd\nsudo chown [选项] 用户[:组] 文件\n~~~\n常用选项：\n| 选项   | 说明          |\n| ---- | ----------- |\n| `-R` | 递归更改目录下所有文件 |\n示例：\n~~~cmd\nsudo chown alice file.txt # 改文件属主为 alice\nsudo chown alice:developers file.txt # 改文件属主为 alice 属组为 developers \nsudo chown -R bob: /var/www/ # 递归更改整个目录\n~~~\n### 👪 四、chgrp：只更改属组（change group）\n~~~cmd\nsudo chgrp [选项] 组 文件\n~~~\n示例：\n~~~\nsudo chgrp developers file.txt\nsudo chgrp -R staff /opt/shared # 递归更改整个目录\n~~~\n### 🔐 五、chmod：更改权限（change mode）\n~~~cmd\nchmod [选项] 模式 文件\n~~~\n权限符号简记：\n| 符号  | 含义      |\n| --- | ------- |\n| `r` | 读权限（4）  |\n| `w` | 写权限（2）  |\n| `x` | 执行权限（1） |\n模式表示法：\n1. 数字表示法（常用）：\n~~~cmd\nchmod 755 file\n# 表示：\n# owner: rwx (7), group: rx (5), others: rx (5)\n~~~\n2. 符号表示法：\n~~~cmd\nchmod u+x file     # 给属主添加执行权限\nchmod g-w file     # 移除属组写权限\nchmod o=r file     # 设置其他用户为只读\n~~~\n递归修改目录：\n~~~cmd\nchmod -R 755 /some/dir\n~~~\n🎯 权限组合实例：\n| 权限    | 数字        | 含义            |\n| ----- | --------- | ------------- |\n| `777` | rwxrwxrwx | 所有人可读写执行（不安全） |\n| `755` | rwxr-xr-x | 常用于脚本或网站目录    |\n| `700` | rwx------ | 仅属主可读写执行      |\n| `644` | rw-r--r-- | 常用于文本配置文件     |\n| `600` | rw------- | 私密文件（如密钥）     |\n\n### 👤 六、usermod：修改用户信息\n~~~cmd\nusermod [选项] 用户名\n~~~\n常用选项：\n| 选项             | 功能                   |\n| -------------- | -------------------- |\n| `-l 新用户名`      | 修改用户名                |\n| `-d /新路径`      | 修改主目录（需配合 `-m` 移动内容） |\n| `-m`           | 移动用户主目录内容到新路径        |\n| `-s /bin/bash` | 修改默认 shell           |\n| `-g 组名`        | 设置主组                 |\n| `-G 组1,组2,...` | 设置附加组（会覆盖原有附加组）      |\n| `-aG 组名`       | 追加附加组（不删除原有附加组）      |\n| `-L` / `-U`    | 锁定/解锁账号（禁止/恢复登录）     |\n🧪 示例：\n➤ 添加用户 alice 到 `sudo` 组：\n~~~cmd\nsudo usermod -aG sudo alice\n~~~\n➤ 修改用户 shell 为 bash：\n~~~cmd\nsudo usermod -s /bin/bash alice\n~~~\n➤ 改用户名 alice 为 alina：\n~~~cmd\nsudo usermod -l alina alice\n~~~\n\n### ❌ 七、userdel：删除用户\n~~~cmd\nuserdel [选项] 用户名\n~~~\n常用选项：\n| 选项   | 功能              |\n| ---- | --------------- |\n| `-r` | 同时删除用户主目录、邮箱等文件 |\n🧪 示例：\n➤ 删除用户但保留主目录：\n~~~cmd\nsudo userdel alice\n~~~\n➤ 删除用户并清理其主目录：\n~~~cmd\nsudo userdel -r alice\n~~~\n> ⚠️ 注意：如果用户当前正在登录，userdel 会失败，需先 pkill -u alice 再删。\n\n### 👥 八、groupdel：删除组\n~~~cmd\nsudo groupdel 组名\n~~~\n> ⚠️ 不能删除有用户主组为该组的情况，需先修改相关用户的主组。\n🧪 示例：\n➤ 删除 developers 组：\n~~~cmd\nsudo groupdel developers\n~~~\n**🔍 用户和组信息查看补充命令**\n| 命令              | 功能                |\n| --------------- | ----------------- |\n| `id 用户名`        | 查看用户 UID/GID 和所属组 |\n| `groups 用户名`    | 查看该用户所属所有组        |\n| `getent passwd` | 列出所有用户            |\n| `getent group`  | 列出所有组             |\n\n**✅ 总结小贴士**\n| 目的       | 命令示例                           |\n| -------- | ------------------------------ |\n| 修改用户主目录  | `usermod -d /new/home -m user` |\n| 添加附加组    | `usermod -aG group user`       |\n| 删除用户和主目录 | `userdel -r user`              |\n| 删除无用组    | `groupdel group`               |\n\n\n### 🧪 示例：设置目录权限给指定用户和组：\n~~~cmd\nsudo useradd -m alice # -G devs\nsudo groupadd devs # -U alice\nsudo usermod -aG devs alice\n\nsudo mkdir /data/project\nsudo chown alice:devs /data/project\nsudo chmod 770 /data/project\n~~~\n此时 `/data/project`：\n- 属主是 `alice`；\n- 属组是 `devs`；\n- 只有属主和组用户有读写执行权限，其他用户无权访问。\n\n\n### 访问权限相关\n- 对文件来讲，权限的功能为：\n  - `r`：可读取此一文件的实际内容，如读取文本文件的文字内容等；\n  - `w`：可以编辑、新增或是修改该文件的内容(但不删除该文件)；\n  - `x`：该文件具有可以被系统执行的权限。\n- 对目录来说，权限的功能为：\n  - `r`：读取目录中的内容；\n  - `w`：修改目录中的内容；\n  - `x`：访问目录。\n\n---------------\n## 目录与路径\n~~~cmd\n.           代表此层目录。\n..          代表上一层目录。\n-           代表前一个工作目录。\n~           代表目前使用者身份所在的家目录。\n~username   代表username这个使用者的家目录\n~~~\n\n\n### 😎 cd - change directory\n<ins>cd changes the current working directory.</ins>\n~~~cmd\ncd /path/to/dir\n~~~\n\n### 😋 pwd - output the current working directory\n<ins>pwd outputs (prints) the current working directory</ins>\n\n**SYNOPSIS(摘要)**\n\n`pwd [-P | --physical]`<br>\n`pwd [-L | --logical]`\n~~~cmd\npwd # -p\n~~~\n\n### 🆕 mkdir - make directories\n<ins> Create the DIRECTORY(ies), if they do not already exist.</ins>\n~~~cmd\nmkdir [options] dirName\n~~~\n****Common options(常见选项)：****\n| 选项   | 含义                  |\n| ---- | ------------------- |\n| `-p` | 递归创建多级目录，不存在时自动建父目录 |\n| `-m`| 设置file mode 而不是使用umask |\n| `-v` | verbose: print a message for each created directory |\n\n### ❌ rmdir - remove empty directories\n<ins>Remove the DIRECTORY(ies), if they are empty.</ins>\n~~~cmd\nrmdir -p/-v emptyDir\n~~~\n**✅ 总结表：**\n| 命令      | 功能     | 常见用法示例                  |\n| ------- | ------ | ----------------------- |\n| `cd`    | 切换目录   | `cd /etc`, `cd ..`      |\n| `pwd`   | 显示当前路径 | `pwd`                   |\n| `mkdir` | 创建目录   | `mkdir -p my/data/logs` |\n| `rmdir` | 删除空目录  | `rmdir temp_dir`        |\n\n### 📁 一、文件与目录操作类\n**🔸ls：列出目录内容**\n~~~cmd\nls [选项] [目录]\n~~~\n- `-l`： 详细列表\n- `-a`： 显示隐藏文件\n- `-h`： 人类可读的文件大小\n- `-R`：递归列出子目录\n\n例：\n~~~cmd\nls -lah /etc\n~~~\n**🔸cp：复制文件或目录**\n~~~cmd\ncp [选项] 源文件 目标\n~~~\n- `-r`：递归复制目录\n- `-i`：覆盖前询问\n- `-u`：仅复制较新文件\n\n****其他选项：****\n`-a`:将原有属性复制和链接文件原带复制，\n`-p`:将文件属性一起复制，不复制链接文件(和`-a`的区别)，`-l`:硬链接文件建立，`-s`:软链接文件建立\n\n例：\n~~~cmd\ncp -ri ~/docs /mnt/usb/\ncp -rp ~/docs /mnt/usb/\ncp -a ~/docs /tmp\n~~~\n**🔸rm：删除文件或目录**\n~~~cmd\nrm [选项] 文件/目录\n~~~\n- `-r`：递归删除目录\n- `-f`：强制删除\n- `-i`：每次删除前确认\n\n[注释]: #\n\n例：\n~~~cmd\nrm -rf ~/temp/\n~~~\n**🔸mv：移动或重命名文件**\n~~~cmd\nmv [选项] 源 目标\n~~~\n- `-i`：覆盖时提示\n- `-u`：仅移动更新文件\n例：\n~~~cmd\nmv file.txt backup/file.txt\n~~~\n**🔸basename：获取路径中的文件名部分**\n~~~cmd\nbasename 路径 [后缀]\n~~~\n例：\n~~~cmd\nbasename /etc/passwd # 输出: passwd\nbasename /path/file.txt .txt # 输出: file\n~~~\n**🔸dirname：获取路径中的目录部分**\n~~~cmd\ndirname 路径\n~~~\n例：\n~~~cmd\ndirname /etc/passwd # 输出：/etc\n~~~\n**🔸touch：创建空文件或更新文件时间戳**\n~~~cmd\ntouch [-acdmt] 文件\n~~~\n- `-a`：仅自定义access time；\n- `-t`：后面可以接自定义的日期而不用目前的日期，格式为[YYYYMMDDhhmm];\n- `-d`：接自定义日期 \n\n例：\n~~~cmd\ntouch test\ntouch -d \"2 days ago\" bashrc\ntouch -t 202506051111 bashrc\n~~~\n> ⚠修改的是mtime和atime\n\n---------------\n### 📖 二、查看文件内容类\n**🔸cat：连接并显示文件内容**\n~~~cmd\ncat [-AbEnTv] files\n~~~\n- `-A`：相当于-vET的整合选项，可列出一些特殊字符而不是空白而已；\n- `-n`：打印出行号，连同空白行也有行号，与`-b`选项不同\n- `-b`：列出行号，空白行不列\n\n例：\n~~~cmd\ncat file.txt\ncat -n file.txt \ncat -b /etc/passwd\ncat -A /etc/pacman.conf\n~~~\n**🔸tac：逆序显示文件内容**\n~~~cmd\ntac file\n~~~\n**🔸more：分页显示（不能向上滚动）**\n> <ins>空格翻页，less同理</ins>\n\n**🔸less：分页显示（支持上下滚动）**\n> ❤ 支持向上向下翻动一行，`/`查找字符串，`n`向下查找，`?`向上查找\n>> <font color=\"red\">善用``man``和``tldr``指令</font>\n\n**🔸head：显示前几行**\n- `-n`：最常用，代表显示前几行\n~~~cmd\nhead -n 10 /etc/pacman.conf\n~~~\n显示文件前十行\n\n**🔸tail：显示末尾几行**\n- `-n`：显示末尾前几行\n- `-f`：跟踪文件变化\n> `-f`用于\n>> <p style=\"color:pink\"><ins>日志随时写入情况</ins></p>\n\n~~~cmd\ntail -n 20 /etc/passwd\ntail -f /var/log/syslog\n~~~\n> <font color=\"#E3A212\"><ins>tail常和head结合使用查找一个ascii文本文件区间范围文本</ins></font>\n>> **显示/etc/pacman.conf文件11到20行**\n>>> `head -n 20 /etc/pacman.conf | tail -n 10`\n>>>> _先显示前20行后显示后10行_ <br>\n\n>`cat -n /etc/passwd | head -n 10 | tail -n 5`\n>> _可以列出行号的截取_\n\n**🔸od（Octal Dump）：以八进制或十六进制显示文件内容（用于二进制分析）**\n~~~cmd\nod [-t type] 文件\n~~~\n`-t`后面可以接各种类型的输出，例如：\n\na   ：利用默认字符来输出 <br>\nc   ：使用ASCII字符来输出<br>\nd [size]  ：使用十进制(decimal)来输出数据，每个整数占用size Bytes；<br>\nf [size]  ：使用浮点数输出，其他同上<br>\no [size]  ：八进制<br>\nx [size]  ：十六进制<br>\n- 范例一：将`/usr/bin/passwd`的内容使用ASCII方式来显示。\n~~~cmd\nod -t c /usr/bin/passwd\n~~~\n- 范例二：将`/etc/issue`这个文件内容以八进制列出存储值\n~~~cmd\nod -t oCc /etc/issue\n~~~\n- 范例三：用作ascii对照表查找字符的ASCII码\n~~~cmd\necho password | od -t oCc\n~~~\n> 其实不用带`-t`也可以\n---------------\n\n### 🔒 三、权限与属性管理\n**🔸chattr：改变文件属性（适用于 ext 和部分文件系统）**\n~~~cmd\nchattr [+-=] [ASacdistu] 文件或目录名称\n~~~\n- `-i`：让一个文件「不能被删除，改名，设置链接也无法写入或新增数据」\n- `-c`：设置这个属性会使文件自动被压缩，读取时解压缩\n\n~~~cmd\nchattr +i file\nchattr -i file\nchattr +c file\nchattr -c file\n~~~\n**🔸lsattr：查看文件属性**\n~~~cmd\nlsattr [-adR] 文件或目录\n~~~\n> **man chattr** or *tldr lsattr*\n\n**🔸umask：显示或设置默认权限掩码**\n~~~cmd\numask / umask -S/s和-p都是显示隐藏的默认创建文件权限码\numask 022 设置创建文件时的文件权限\n~~~\n\n---------------\n### 🧩 四、文件类型与状态\n**🔸file：识别文件类型**\n~~~cmd\nfile /bin/ls\n~~~\n**🔸stat：查看详细状态（权限、大小、时间戳）**\n~~~cmd\nstat filename\n~~~\n\n---------------\n\n### 🔎 五、文件查找与定位\n**🔸which：查命令路径（依赖 $PATH）**\n~~~cmd\nwhich bash\n~~~\n**🔸whereis：查命令、源码、man 手册位置**\n~~~cmd\nwhereis ls\n~~~\n**🔸locate：快速查找文件（依赖数据库）**\n~~~cmd\nsudo updatedb\nlocate passwd\n~~~\n**🔸find：遍历文件系统查找文件(最常用)**\n`find 路径 条件 动作`\n1. **与时间有关的选项：`-atime`,`-citme`,`mtime`，以`mtime`举例**\n- `-mtime n`：n为数字，意义为在n天之前的「一天之内」被修改过内容的文件；\n- `-mtime +n`：列出在n天之前(不含n天本身)被修改过内容的文件；\n- `-mtime -n`：列出在n天之内(含n天本身)被修改过内容的文件；\n- `-newer file`：file为一个存在的文件，列出比file还要新的文件\n\n范例一：将系统上24小时内有修改过的文件列出\n\n`find / -mtime 0`\n\n将三天前那一天的24小时内有修改过的文件列出\n\n`find / -mtime 3`\n\n范例二：寻找`/etc`下的文件，如果文件日期比`/etc/passwd`新就列出\n\n`find /etc -newer /etc/passwd`\n\n三天内<br>\n`find / -mtime -3`\n\n三天外<br>\n`find / -mtime +3`\n\n\n2. **与使用者或用户组有关的参数：`-uid n`,`-gid n`,`-user name`,`-group name`,`-nouser`,`-nogroup`**\n\n范例三：查找/home下属于Nagisa的文件\n\n`find /home -user Nagisa`\n\n范例四：查找系统中不属于任何人的文件\n\n`find / -nouser`\n\n1. **与文件权限及名称有关的参数：`-name filename`,`-size [+-]SIZE`(查找比SIZE还要大(+)的或小(-)的文件,size规格为`c`Bytes和`k`KBytes),`-type TYPE`;`-perm -mode / /mode`;**\n范例五：找出文件名为passwd的文件\n\n`find / -name passwd`\n\n范例六：找出包含passwd关键字的文件\n\n`find / -name \"*passwd*\"`\n\n范例七：找出在`/run`目录下，文件类型为socket的文件名有哪些？\n\n`find /run -type s`\n\n范例八：查找文件当中含有SGID、SUID、SBIT属性的文件\n`find / -perm /7000`\n\n> 所谓的7000就是 ``---s--s--t``,那么只要含有s或t的就列出，所以当然要使用`/7000`\n>> 使用`-7000`需要同时含有这三个权限\n>>> -perm 亦可用于普通权限文件查找<br>\n>>  `find /usr/bin -perm 755`\n\n常用例：\n~~~cmd\nfind /usr/bin /usr/sbin -perm /6000 # 无SBIT权限\n\ninshell: $(find \"$WALLPAPER_DIR\" -type f \\( -iname \"*.jpg\" -o -iname \"*.png\" -o -iname \"*.jpeg\" -o \\) | shuf -n 1) \n# 随机抽取指定目录下的一张指定格式的图片\n\nfind . -type f \\( -name \"*.txt\" -o -name \"*.md\" \\) ! -name \"README.md\"\n# 查找当前目录下，**文件类型是普通文件**，扩展名为.txt 或 .md 但不包括 README.md的文件\n\nfind . -type f ! -name \"*.bak\"\n# 排除以.bak结尾的文件\n\nfind . -name \"*.tmp\" -delete\n# 删除文件 (-delete 一定要配合 -type f 使用防止误删文件)\n\nfind . -name \"*.log\" -exec rm {} \\; # 删除 .log 文件\nfind . -type f -exec chmod 644 {} \\; # 批量修改权限\nfind . -name \"*.txt\" -exec wc -l {} + # +可以批量处理 统计所有txt行数\n\nfind . -name \"*.log\" | xargs rm\n# 搭配xargs \n\nfind . -type f -empty # 空文件\nfind . -type d -empty # 空目录\n\nfind . -name \"*.mp3\" -exec mv {} /target/dir/ \\;\nfind . -name \".jpg\" -exec cp {} /backup/ \\;\n# 查找并移动/复制文件\n\nfind . -maxdepth 1 -name \"*.sh\" # 当前目录下查找\nfind . -mindepth 2 # 忽略前几层目录\n~~~\n\n\n| 场景         | 与 (AND)   | 或 (OR) | 非 (NOT)      |    |     |\n| ---------- | --------- | ------ | ------------ | -- | --- |\n| Shell 命令行  | `&&`      |  `\\|\\|`    |    `!` |\n| `find` 命令中 | `-a`（可省略） | `-o`   | `!` 或 `-not` |    |     |\n\n4.**额外可以进行的操作：`-exec command`(command为其他命令，-exec后面再接额外命令来处理查找到的结果),`-print`(将结果打印到屏幕上，默认操作)**\n\n范例九：将上个范例找到的文件使用ls -l列出来\n\n`find /usr/bin /usr/sbin -perm /7000 -exec ls -l {} \\;`\n> `ls -l`就是额外的command，命令不支持命令别名\n>> 所以只能用<ins>`ls -l`</ins>不可以使用<ins>`ll`</ins>\n\n范例十：找出系统中大于1MB的文件\n\n`find / -size +1M`\n\n范例十一：找出系统中小于1KB的文件\n\n`find / -size -1k`\n\n✅ 总结（速查）\n| 用法   | 示例                      |\n| ---- | ----------------------- |\n| 按名查  | `-name` / `-iname`      |\n| 按类型  | `-type f` / `-type d`   |\n| 按时间  | `-mtime -n` / `-newer`  |\n| 按大小  | `-size +100M`           |\n| 空文件  | `-empty`                |\n| 权限查  | `-perm 755`             |\n| 排除条件 | `! -name`               |\n| 删除   | `-delete`               |\n| 执行命令 | `-exec` 或配合 `xargs`     |\n| 限制深度 | `-maxdepth`、`-mindepth` |\n| 跳过目录 | `-prune`                |\n\n### 💨 Extra、文件特殊权限：SUID、SGID、SBIT\n~~~cmd\nchmod u+s # SUID设置\nchmod g+s # SGID设置\nchmod +t  # SBIT设置\n~~~\n- <font color=\"#8BDB67\">文件具有`SUID`的特殊权限时，代表当用户执行此二进制程序时，在执行过程中用户会暂时具有程序拥有者的权限</font>\n- <font color=\"#39DBB5\">目录具有`SGID`的特殊权限时，代表用户在这个目录下面新建的文件的用户组都会与该目录的组名相同</font>\n- <font color=\"#82DBA8\">目录具有`SBIT`的特殊权限时，代表在该目录下用户建立的文件只有自己与root能够删除</font>\n\n---------------\n\n## 磁盘与文件系统\n> MBR: Master Boot Record<br>\n> GPT: GUID Partition Table\n### 一、磁盘分区 (Partitioning)\n\n#### 1. 查看磁盘信息\n* **`lsblk`**: 列出所有块设备及其分区信息，包括设备名称、大小、挂载点、文件系统类型等。这是最常用且直观的命令。\n    ```bash\n    lsblk\n    ```\n* **`fdisk -l`**: 列出所有磁盘的分区表信息。\n    ```bash\n    sudo fdisk -l\n    ```\n* **`parted -l`**: 另一个查看分区表的工具，对于 GPT 分区表支持更好。\n    ```bash\n    sudo parted -l\n    ```\n\n#### 2. 分区工具\n\n* **`fdisk` (MBR 和 GPT):** 适用于传统的 MBR (Master Boot Record) 分区表，也支持 GPT (GUID Partition Table) 分区表。它是交互式的。\n    ```bash\n    sudo fdisk /dev/sdX  # 替换 /dev/sdX 为你的磁盘设备名，例如 /dev/sdb\n    ```\n    进入 `fdisk` 后，可以使用以下常用命令：\n    * `m`: 显示帮助信息。\n    * `p`: 打印当前磁盘的分区表。\n    * `n`: 创建新分区。\n    * `d`: 删除分区。\n    * `w`: 将更改写入磁盘并退出。\n    * `q`: 不保存更改并退出。\n\n* **`parted` (MBR 和 GPT):** 功能更强大，尤其在处理大容量磁盘和 GPT 分区时更为灵活。可以交互式使用，也可以通过命令行直接操作。\n    ```bash\n    sudo parted /dev/sdX  # 替换 /dev/sdX 为你的磁盘设备名\n    ```\n    进入 `parted` 后，可以使用以下常用命令：\n    * `print`: 打印分区表。\n    * `mklabel gpt` 或 `mklabel msdos`: 创建新的分区表类型 (GPT 或 MBR)。\n    * `mkpart primary ext4 0% 100%`: 创建一个主分区，文件系统类型为 ext4，从磁盘的0%到100%。你可以根据需要调整大小和文件系统类型。\n    * `resizepart`: 调整分区大小。\n    * `rm`: 删除分区。\n    * `quit`: 退出。\n\n---\n\n### 二、文件系统格式化 (Formatting File Systems)\n\n创建分区后，需要对其进行格式化以创建文件系统，才能存储数据。\n\n* **`mkfs` 系列命令：** `mkfs` 是一个通用命令，后面可以跟不同的文件系统类型。\n    * **Ext4 (Linux 常用):**\n        ```bash\n        sudo mkfs.ext4 /dev/sdXY  # 替换 /dev/sdXY 为你的分区名，例如 /dev/sdb1\n        ```\n        或者\n        ```bash\n        sudo mkfs -t ext4 /dev/sdXY\n        ```\n    * **XFS:**\n        ```bash\n        sudo mkfs.xfs /dev/sdXY\n        ```\n    * **FAT32 (兼容 Windows):**\n        ```bash\n        sudo mkfs.vfat /dev/sdXY  # 或者 mkfs.fat -F 32 /dev/sdXY\n        ```\n    * **NTFS (兼容 Windows):**\n        ```bash\n        sudo mkfs.ntfs /dev/sdXY\n        ```\n    * **Btrfs:**\n        ```bash\n        sudo mkfs.btrfs /dev/sdXY\n        ```\n\n---\n\n### 三、分区分卷 (Logical Volume Management - LVM)\n\nLVM 允许你将多个物理磁盘或分区组合成一个或多个逻辑卷，从而提供更大的灵活性，例如在线调整大小、创建快照等。\n\n#### LVM 基本概念\n\n* **PV (Physical Volume - 物理卷):** 物理磁盘或分区，LVM 的最基本单元。\n* **VG (Volume Group - 卷组):** 一个或多个 PV 的集合。\n* **LV (Logical Volume - 逻辑卷):** 在 VG 上创建的虚拟分区，可以像普通分区一样格式化和挂载。\n\n#### LVM 常用命令\n\n* **创建 PV:**\n    ```bash\n    sudo pvcreate /dev/sdXY  # 将分区标记为物理卷\n    ```\n* **查看 PV:**\n    ```bash\n    sudo pvs\n    sudo pvdisplay\n    ```\n* **创建 VG:**\n    ```bash\n    sudo vgcreate my_vg /dev/sdb1 /dev/sdc1  # 创建名为 my_vg 的卷组，包含 sdb1 和 sdc1\n    ```\n* **查看 VG:**\n    ```bash\n    sudo vgs\n    sudo vgdisplay\n    ```\n* **从 VG 中扩展/移除 PV:**\n    ```bash\n    sudo vgextend my_vg /dev/sdd1  # 将 sdd1 添加到 my_vg\n    sudo vgreduce my_vg /dev/sdd1  # 从 my_vg 移除 sdd1 (需确保上面没有 LV)\n    ```\n* **创建 LV:**\n    ```bash\n    sudo lvcreate -L 10G -n my_lv my_vg  # 在 my_vg 中创建名为 my_lv 的 10GB 逻辑卷\n    sudo lvcreate -l 100%FREE -n my_lv my_vg # 使用 VG 中所有可用空间创建 LV\n    ```\n* **查看 LV:**\n    ```bash\n    sudo lvs\n    sudo lvdisplay\n    ```\n* **调整 LV 大小 (扩展/收缩):**\n    ```bash\n    sudo lvextend -L +5G /dev/my_vg/my_lv  # 将 my_lv 扩展 5GB\n    sudo lvreduce -L -2G /dev/my_vg/my_lv  # 将 my_lv 缩小 2GB (有数据丢失风险，需先卸载和检查文件系统)\n    ```\n    * **注意：** 扩展逻辑卷后，需要同时扩展文件系统才能使用新增的空间。\n        * Ext4: `sudo resize2fs /dev/my_vg/my_lv`\n        * XFS: `sudo xfs_growfs /dev/my_vg/my_lv` (通常不需要卸载)\n* **删除 LV:**\n    ```bash\n    sudo lvremove /dev/my_vg/my_lv  # 删除逻辑卷\n    ```\n* **删除 VG:**\n    ```bash\n    sudo vgremove my_vg  # 删除卷组 (需确保卷组中没有 LV)\n    ```\n* **删除 PV:**\n    ```bash\n    sudo pvremove /dev/sdXY  # 删除物理卷 (需确保物理卷没有被任何 VG 使用)\n    ```\n> Btrfs分卷查看Archlinux系统安装-->[Why Btrfs](https://arch.icekylin.online/guide/rookie/basic-install-detail.html)\n---\n\n\n### 四、分区挂载 (Mounting)\n\n将格式化后的分区或逻辑卷连接到文件系统树中的一个目录，使其可以被访问。\n\n#### 1. 创建挂载点\n\n* 挂载点是一个普通的空目录。\n    ```bash\n    sudo mkdir /mnt/mydata  # 创建一个名为 mydata 的挂载点\n    ```\n\n#### 2. 临时挂载\n\n* **基本挂载：**\n    ```bash\n    sudo mount /dev/sdXY /mnt/mydata  # 挂载分区 /dev/sdXY 到 /mnt/mydata\n    ```\n* **指定文件系统类型：** (通常不需要，`mount` 命令可以自动识别)\n    ```bash\n    sudo mount -t ext4 /dev/sdXY /mnt/mydata\n    ```\n* **只读挂载：**\n    ```bash\n    sudo mount -o ro /dev/sdXY /mnt/mydata\n    ```\n* **重新挂载 (改变挂载选项)：**\n    ```bash\n    sudo mount -o remount,rw /mnt/mydata  # 将已挂载的 /mnt/mydata 重新挂载为读写模式\n    ```\n* **查看已挂载的文件系统：**\n    ```bash\n    mount          # 列出所有已挂载的文件系统\n    df -h          # 以人类可读的方式显示磁盘空间使用情况，包括挂载点\n    lsblk -f       # 显示块设备的文件系统信息和挂载点\n    ```\n\n#### 3. 卸载分区\n\n* 在卸载之前，确保没有程序正在使用该挂载点下的文件。\n    ```bash\n    sudo umount /mnt/mydata  # 卸载 /mnt/mydata 目录\n    sudo umount /dev/sdXY    # 卸载 /dev/sdXY 分区\n    ```\n* 如果无法卸载（“device is busy”），可以使用 `lsof` 或 `fuser` 命令查找占用进程：\n    ```bash\n    sudo lsof /mnt/mydata\n    sudo fuser -km /mnt/mydata  # 强制杀死占用进程并卸载\n    ```\n\n#### 4. 永久挂载 (`/etc/fstab`)\n\n* 为了在系统启动时自动挂载分区，需要编辑 `/etc/fstab` 文件。\n* **推荐使用 UUID (Universally Unique Identifier) 来标识分区，因为设备名（如 `/dev/sdb1`）可能会在重启后改变。**\n    * 查找分区的 UUID：\n        ```bash\n        sudo blkid /dev/sdXY\n        ```\n    * 编辑 `/etc/fstab` 文件：\n        ```bash\n        sudo nano /etc/fstab  # 或者使用 vi、vim 等编辑器\n        ```\n    * 在文件末尾添加一行，格式如下：\n        ```bash\n        UUID=<你的UUID>  /mnt/mydata  ext4  defaults  0  2\n        ```\n        * **`<你的UUID>`:** 替换为你的分区的实际 UUID。\n        * `/mnt/mydata`: 挂载点。\n        * `ext4`: 文件系统类型。\n        * `defaults`: 常用挂载选项 (rw, suid, dev, exec, auto, nouser, async)。\n        * `0`: dump 选项，通常为 0 (不备份)。\n        * `2`: fsck 检查顺序，根文件系统为 1，其他为 2，不检查为 0。\n* **测试 `/etc/fstab` 配置：**\n    ```bash\n    sudo mount -a  # 尝试挂载所有在 /etc/fstab 中列出的但尚未挂载的文件系统\n    ```\n    如果没有任何错误输出，说明配置正确。如果有错误，请检查 `/etc/fstab` 文件。\n\n---------------\n\n## 文件与文件系统的压缩\n<ins>Linux文件压缩技术的核心原理主要是通过消除数据冗余来实现的，通常采用无损压缩算法。简单来说，就是想办法用更少的位（bits）来表示相同的信息。</ins>\n\n## 核心原理\n\n1.  ### **数据冗余的消除**\n    文件中的数据往往存在大量的重复和可预测的模式。压缩算法会识别这些“冗余”并将其替换为更短的表示。\n\n    * **重复数据查找和替换：** 这是最直观的方法。如果文件中有大量重复的字符序列，例如“AAAAA”，压缩算法会用一个更短的编码来表示“5个A”，而不是重复写5次“A”。\n    * **字典编码（如LZ77/LZ78）：**\n        * **LZ77** 算法（Lempel-Ziv 77）通过在文件已处理的数据中查找与当前数据流的匹配项。如果找到一个匹配，它就用一个指向匹配位置和匹配长度的“指针”来替换重复数据。这就像建立了一个临时字典，引用已出现过的短语。\n        * **LZ78** 算法（Lempel-Ziv 78）则会构建一个显式的字典。它将文件中出现的新的字符串添加到字典中，并用字典中的索引来替换这些字符串。当遇到重复的字符串时，直接用字典索引表示。\n    * **熵编码（如霍夫曼编码、算术编码）：** 这种方法基于数据的统计特性。\n        * **频率分析：** 某些字符或模式在文件中出现的频率更高。\n        * **变长编码：** 熵编码利用这种频率差异，为出现频率高的字符分配更短的编码（例如，用1位表示最常见的字符），为出现频率低的字符分配更长的编码。这样一来，文件的平均编码长度就缩短了，从而实现压缩。**霍夫曼编码**就是典型的例子，它通过构建霍夫曼树来生成最优的变长编码。\n\n2.  ### **无损压缩 vs. 有损压缩**\n    * **无损压缩（Lossless Compression）：** Linux文件压缩主要采用的方式。这意味着**在压缩和解压缩后，原始数据可以完全、精确地恢复，没有任何信息损失**。这对于文本文件、程序代码等至关重要，因为任何一点数据丢失都可能导致文件损坏或程序无法运行。`gzip`、`bzip2`、`xz` 等 Linux 命令都属于无损压缩。\n    * **有损压缩（Lossy Compression）：** 这种压缩方式会在压缩过程中**舍弃一部分信息以达到更高的压缩比**。解压缩后的数据与原始数据会有所不同，但这种差异通常在特定应用场景下（如图像、音频、视频）是人眼或人耳难以察觉或可以接受的（例如 JPEG 图片和 MP3 音频）。文件压缩通常不使用有损压缩，因为它会改变文件内容。\n\n---\n\n## 常见的Linux压缩工具及其原理简述\n\n| 工具/后缀 | 核心算法                                     | 特点                                                                   |\n| :-------- | :------------------------------------------- | :--------------------------------------------------------------------- |\n| **gzip (.gz)** | **Deflate** (LZ77 + 霍夫曼编码)             | **速度快**，压缩比适中，应用最广泛。                                 |\n| **bzip2 (.bz2)** | **BWT (Burrows-Wheeler Transform)** + **MTF** + 霍夫曼/算术编码 | **压缩比通常比gzip高**，但压缩和解压缩**速度相对较慢**，更消耗CPU。 |\n| **xz (.xz)** | **LZMA (Lempel-Ziv-Markov chain Algorithm)** | **压缩比最高**，尤其适合大型文件。但压缩速度通常**最慢**，也更消耗内存。 |\n| **zip (.zip)** | 通常是 **Deflate** | **跨平台**压缩格式，可打包多个文件和目录。                            |\n\n**注意：** `tar` 命令 (`.tar` 文件) 本身不是压缩工具，它是一个“打包”工具，用于将多个文件和目录合并成一个单一的归档文件。通常会与 `gzip` (`.tar.gz` 或 `.tgz`)、`bzip2` (`.tar.bz2` 或 `.tbz`) 或 `xz` (`.tar.xz` 或 `.txz`) 结合使用，先打包再压缩。\n\n---\n\n### gzip、bzip2、xz、tar 命令详解\n\n### 1. `gzip` 命令\n\n`gzip`（GNU zip）是 Linux 中最常用的压缩工具之一，采用 **Deflate** 算法进行无损压缩。\n\n* **功能：** 压缩或解压缩文件。默认会生成 `.gz` 后缀的压缩文件并删除原文件。\n* **特点：** 压缩速度快，压缩比适中。\n\n**常用选项：**\n\n* `-d`, `--decompress`：解压缩。等同于 `gunzip`。\n* `-f`, `--force`：强制执行，覆盖同名文件。\n* `-k`, `--keep`：保留原始文件。\n* `-v`, `--verbose`：显示详细信息。\n* `-c`, `--stdout`：输出到标准输出，不创建文件。\n* `-num` (e.g., `-1` 到 `-9`)：设置压缩级别，`-1` 最快，`-9` 最佳（默认 `-6`）。\n\n**使用示例：**\n\n```bash\ngzip myfile.txt               # 压缩文件，生成 myfile.txt.gz\ngzip -k myfile.txt            # 压缩文件并保留原文件\ngzip -d myfile.txt.gz         # 解压缩文件\ngzip -l myfile.txt.gz         # 查看压缩信息\ngunzip myfile.txt.gz          # 不常用 多用 gzip -d\ngzip -v myfile.txt            # 显示压缩过程\nzcat myfile.txt.gz            # zcat和gzip -l一样可以查看压缩信息\ngzip -9 -c myfile.txt > myfile.txt.gz # 最佳压缩比压缩并保留原本文件\n```\n\n### 2. `bzip2`命令\n`bzip2`提供比`gzip`更高的**压缩比**，但压缩和解压缩速度相对较慢，且占用更多内存。\n* **功能：** 压缩或解压缩文件。默认会生成 .bz2 后缀的压缩文件并删除原文件。\n* **特点：**  压缩比高，速度慢，资源占用相对较高。\n\n**常用选项：**\n\n* `-d`, --decompress：解压缩。等同于 bunzip2。\n* `-f`, --force：强制执行。\n* `-k`, --keep：保留原始文件。\n* `-v`, --verbose：显示详细信息。\n* `-c`, --stdout：输出到标准输出。\n* `-num`，(e.g. -1 到 -9)：设置压缩级别，默认 -9。\n\n**使用示例：**\n\n~~~bash\nbzip2 mydocument.txt          # 压缩文件，生成 mydocument.txt.bz2\nbzip2 -k mydocument.txt       # 压缩文件并保留原文件\nbzip2 -d mydocument.txt.bz2   # 解压缩文件\nbzcat mydocument.txt.bz2      #  查看压缩文件内容（不解压）\nbzip2 -c -9 mydocument.txt > mydocument.txt.bz2 # 最佳压缩比压缩并保留原文件\n~~~\n\n### 3. `xz`命令\n`xz`\n* **功能**： 压缩或解压缩文件。默认会生成 `.xz` 后缀的压缩文件并删除原文件。\n* **特点**： 压缩比最高，速度最慢，压缩时内存消耗最大。\n\n**常用选项：**\n* `-d`, `--decompress`：解压缩。等同于 `unxz`。\n* `-f`, `--force`：强制执行。\n* `-k`, `--keep`：保留原始文件。\n* `-c`, `--stdout`：输出到标准输出。\n* `-v`, `--verbose`：显示详细信息。\n* `-num`, (e.g. -0 到 -9)：设置压缩级别，默认 -6。\n* `-l`, `--list`：列出压缩文件信息。\n\n**使用示例：**\n~~~bash\nxz mydata.log         # 压缩文件，生成 mydata.log.xz\nxz -k mydata.log      # 压缩文件并保留原文件\nxz -d mydata.log.xz   # 解压缩文件\nxzcat mydata.log.xz   # 查看压缩文件内容 (不解压)\nxz -l mydata.log.xz   # 列出压缩文件信息 \n~~~\n\n### 4. `tar`命令\n`tar`（Tape Archive）是一个归档（打包）工具，本身不进行压缩。它将多个文件和目录组合成一个单一的归档文件（“tarball”），常与 ``gzip``、`bzip2`、`xz` 结合使用。\n\n* **功能**： 创建归档文件、从归档中提取文件、列出归档内容。\n* **特点**： 仅打包，可与压缩工具结合。\n\n**常用选项：**\n* `-c`, `--create`：创建归档。\n* `-x`, `--extract`：提取（解包）文件。\n* `-t`, `--list`：列出归档内容。\n* `-f <archive-file>`：指定归档文件名。\n* `-v`, `--verbose`：显示详细信息。\n* `-z`, `--gzip`：使用 gzip 压缩/解压缩。\n* `-j`, `--bzip2`：使用 bzip2 压缩/解压缩。\n* `-J`, `--xz`：使用 xz 压缩/解压缩。\n* `-C <directory>`：提取时，将文件更改到指定目录。\n* `-p`, 保留备份数据的原本权限与属性，常用于备份(-c)重要的配置文件。\n* `-P`, 保留绝对路径，亦即允许备份数据中含有根目录存在之意。\n* `--exclude=FILE`, 在压缩的过程中不要将FILE打包。\n\n**常见组合和使用示例：**\n* `.tar.gz`或 `.tgz`：`tar + gzip`\n* `.tar.bz2`或`.tbz`：`tar + bzip2`\n* `.tar.xz`或 `.txz`：`tar + xz`\n\n**使用示例：**\n~~~bash\n# 打包并用gzip 压缩\ntar -czvf myarchive.tar.gz /path/to/my/directory file1.txt\n\n# 解压缩并解包 .tar.gz 文件\ntar -xzvf myarchive.tar.gz\n\n# 解压缩 .tar.gz 文件到指定目录\ntar -xzvf myarchive.tar.gz\n\n# 打包并用 bzip2 压缩\ntar -cjvf finalarchive.tar.bz2 /path/to/final/data\n\n# 打包并用 xz 压缩\ntar -cJvf finalarchive.tar.xz /path/to/final/data\n\n# 简建议-f单独写一个选项 (比较不会忘记)\n# 查询\ntar -jtv -f filename.tar.bz2\n\n# 备份/etc文件夹\ntime tar -czvp -f /root/etc.tar.gz /etc # 多了time会显示程序运行的时间\ntime tar -cjvp -f /root/etc.tar.bz2 /etc\ntime tar -cJvp -f /root/etc.tar.xz /etc\n\n# 仅解开单一文件的方法\n# 先找到我们要找的文件名，假设解开 shadow文件\ntar -jtv -f /root/etc.tar.bz2 | grep 'shadow'\ntar -jxv -f 打包文件.tar.bz2  待解开文件名\ntar -jxv -f  /root/etc.tar.bz2 etc/shadow \n\n# 打包某目录但不含该目录下的某些文件的做法\ntar -jcv -f /root/system.tar.bz2 --exclude=/root/etc* \\\n--exclude=/root/system.tar.bz2 /etc /root\n\n# 仅备份比某个时刻还要新的文件\nfind /etc -newer /etc/shadow\n# 找到一个指定的日期\ntar -jcv -f /root/etc.newer.then.passwd.tar.bz2 \\\n--newer-mtime=\"2025/06/06\" /etc/*\n\n# 标准输入输出流重定向和管道符结合 \n# 将/etc整个目录一边打包一边在/tmp解开\ncd /tmp\ntar -czvf - /etc | tar -xvf -\n# 这个操作有点像cp -r /etc /tmp \n~~~\n> 如果想要两行输入时，最后面加上反斜杠`\\`并立刻按下[Enter]就能够到第二行继续输入了。\n\n-------- \n## 光盘写入工具\n###  `mkisofs`、`cdrecord`\n\n### 1. `mkisofs` 命令\n\n`mkisofs` (或在新版系统上通常是 `genisoimage`) 用于从一个目录树创建 ISO 9660 文件系统映像文件。这种映像文件常用于制作 CD/DVD/BD 镜像，以便刻录或在虚拟机中使用。\n\n* **功能：** 将文件和目录打包成 ISO 格式的镜像文件。\n* **适用场景：** 制作可引导光盘镜像、数据光盘镜像、虚拟机安装盘等。\n\n**基本语法：**\n\n```bash\nmkisofs [选项] -o <输出文件名.iso> <源目录/文件>\n```\n**常用选项：**\n\n* `-o <输出文件名.iso>`：指定输出的 ISO 镜像文件名。这是最重要的选项，如果没有指定，输出会发送到标准输出。\n* `-r, --rock-ridge`：生成 Rock Ridge 扩展，保留 UNIX 文件权限、所有者、组、符号链接、长文件名等 POSIX 属性。强烈推荐使用，以便在 Linux/Unix 系统上正确读取。\n* `-J, --joliet`：生成 Joliet 扩展，支持 Windows 上的长文件名和 Unicode 字符。如果你希望在 Windows 和 Linux 上都能良好兼容，通常会同时使用 -r 和 -J。\n* `-V <卷标>, --volid <卷标>`：设置 ISO 镜像的卷标 (Volume ID)，即光盘插入系统后显示的名称。\n* `-b <引导文件>, --boot-image <引导文件>`：指定用于创建可引导光盘的引导镜像文件（通常是 isolinux/isolinux.bin 或 grub/efi.img）。需要配合其他选项使用，如 -c。\n* `-c <引导目录/文件>, --boot-info-table <引导目录/文件>`：指定引导信息目录或文件，通常与 -b 结合使用，用于生成引导目录。\n* `-udf`：生成 UDF 文件系统，通常用于 DVD 和蓝光。\n* `-m <模式>, --exclude <模式>`：排除与指定模式匹配的文件。\n* `-x <目录>, --exclude-dir <目录>`：排除指定的目录。\n\n**使用示例：**\n1. 创建最基本的 ISO 镜像：\n~~~bash\nmkdir my_iso_content\necho \"Hello world\" > my_iso_content/hello.txt\nmkdir my_iso_content/subdir\necho \"Another file\" > my_iso_content/subdir/another.txt\n\nmkisofs -o mydata.iso my_iso_content\n~~~\n2. 创建 Linux/Windows 兼容的 ISO 镜像 (常用)：\n~~~bash\nmkisofs -o my_cross_platform.iso -r -J -V \"MyDataDisk\" my_iso_content\n~~~\n`-r` (Rock Ridge) 用于 Linux/Unix 兼容，`-J`(Joliet) 用于 Windows 兼容，`-V` 设置卷标。\n\n### 2. `cdrecord` 命令\n`cdrecord` (现在通常是 `wodim` 或 `cdrskin` 的符号链接) 是一个用于刻录 CD、DVD、蓝光盘的命令行工具。它通常与 `mkisofs` 生成的 ISO 镜像配合使用。\n- **功能**： 将 ISO 镜像或其他数据刻录到光盘上。\n- **适用场景**： 制作物理光盘、备份数据到光盘、刻录音乐 CD。\n\n**基本语法：**\n~~~bash\ncdrecord [选项] <要刻录的文件.iso>\n~~~\n**常用选项：**\n- `dev=<scsi_id>|/dev/<device>`：指定刻录设备。这是最重要的选项。\n  - `<scsi_id>` 格式通常是 bus,target,lun (例如 0,0,0)，可以通过 cdrecord --scanbus 命令查找。\n  - `/dev/<device>` 格式是你的光驱设备文件（例如 /dev/sr0 或 /dev/cdrom）。\n- `speed=<速度>`：设置刻录速度（例如 `speed=4`，`speed=8`，`speed=max`）。\n- `-v`, `--verbose`：显示详细信息，包括刻录进度。\n- `blank=<模式>`：擦除可擦写光盘（CD-RW/DVD-RW）。\n  - `fast`：快速擦除，只擦除介质的引导区。\n  - `all`：完全擦除，擦除整个介质。\n- `-dummy`：进行一次虚拟刻录（测试刻录），不实际写入数据。用于在真正刻录前检查设置。\n- `-eject`：刻录完成后弹出光盘。\n\n**使用示例：**\n1. **查找刻录设备：**\n~~~bash\ncdrecord --scanbus\n~~~\n2. **刻录 ISO 镜像到光盘**\n```bash\nsudo cdrecord dev=/dev/sr0 speed=8 -v my_data.iso\n```\n3. **擦除 CD-RW 光盘**\n```bash\nsudo cdrecord dev=/dev/sr0 blank=fast\n```\n4. **测试刻录 (虚拟刻录)：**\n```bash\nsudo cdrecord dev=/dev/sr0 -dummy my_data.iso\n```\n## 其他压缩与备份工具\n### `dd` 命令\n`dd` 命令 (dataset definition) 是一个功能强大的块级数据复制工具。它以字节为单位复制数据，因此可以用于复制整个硬盘、分区、创建镜像文件、制作启动盘等。\n\n- **功能**： 按块复制数据。\n- **适用场景**： 磁盘克隆、分区备份与恢复、制作可引导 USB 驱动器、创建交换文件、安全擦除数据。\n\n**基本语法：**\n```bash\ndd if=<输入文件> of=<输出文件> [选项]\n```\n**使用示例：**\n1. **克隆整个硬盘 (数据备份/迁移)：**\n```bash\nsudo dd if=/dev/sda of=/dev/sdb bs=4M status=progress\n```\n2. **备份分区到文件：**\n```bash\nsudo dd if=/dev/sda1 of=/path/to/backup/sda1_backup.img bs=4M status=progress\n```\n3. **制作可引导 USB 驱动器 (从 ISO 镜像)：**\n```bash\nsudo dd if=ubuntu-24.04-desktop-amd64.iso of=/dev/sdX bs=4M status=progress\n```\n4. **创建大文件（例如用于交换文件或测试文件）：**\n```bash\ndd if=/dev/zero of=my_large_flie.img bs=1M count=1024\n```\n> `dd` 是一个**非常强大的命令**，也被称为<font color=\"red\"><ins>“数据毁灭者”</ins></font>。一个参数的错误就可能导致数据永久丢失。在使用 `dd` 时，请务必再三确认 `if` 和 `of` 参数。\n###\n-----\n\n# Shell 与 ShellScripts\n## Vi、Vim与程序编辑器","filePath":"src/content/posts/shell_command.md","digest":"15061cebd2985d5c","rendered":{"html":"<section><h1 id=\"linux文件目录与磁盘格式\">Linux文件、目录与磁盘格式<a class=\"anchor\" href=\"#linux文件目录与磁盘格式\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h2 id=\"用户与用户组\">用户与用户组<a class=\"anchor\" href=\"#用户与用户组\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><code>useradd</code>、<code>groupadd</code>、<code>chown</code>、<code>chgrp</code>、<code>chmod</code>、<code>usermod</code>、<code>userdel</code>、<code>groupdel</code></p><section><h3 id=\"-一useradd添加用户\">🧑‍💻 一、useradd：添加用户<a class=\"anchor\" href=\"#-一useradd添加用户\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:21ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">sudo useradd [选项] 用户名</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>常用选项：</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>选项</th><th>说明</th></tr></thead><tbody><tr><td><code>-m</code></td><td>自动创建用户主目录（如 <code>/home/用户名</code>）</td></tr><tr><td><code>-s /bin/bash</code></td><td>指定默认 shell</td></tr><tr><td><code>-g 组名</code></td><td>指定主组</td></tr><tr><td><code>-G 组1,组2</code></td><td>加入附加组</td></tr><tr><td>示例：</td><td></td></tr></tbody></table><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:63ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">sudo useradd </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">m </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">s /bin/bash </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">g users </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">G wheel,developers alice</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>然后设置密码：</p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:17ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">sudo passwd alice</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"-二groupadd添加用户组\">👥 二、groupadd：添加用户组<a class=\"anchor\" href=\"#-二groupadd添加用户组\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:16ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">sudo groupadd 组名</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>示例：</p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:24ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">sudo groupadd developers</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>常用选项：</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>选项</th><th>说明</th></tr></thead><tbody><tr><td><code>-g GID</code></td><td>设置自定义的GID</td></tr><tr><td><code>-U users</code></td><td>设置组成员</td></tr><tr><td><code>-f</code></td><td>如果设定的GID已经存在则强制覆盖原组</td></tr></tbody></table></section><section><h3 id=\"-三chown更改文件目录的属主和属组change-owner\">📂 三、chown：更改文件/目录的属主和属组（change owner）<a class=\"anchor\" href=\"#-三chown更改文件目录的属主和属组change-owner\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:25ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">sudo chown [选项] 用户[:组] 文件</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>常用选项：</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>选项</th><th>说明</th></tr></thead><tbody><tr><td><code>-R</code></td><td>递归更改目录下所有文件</td></tr><tr><td>示例：</td><td></td></tr></tbody></table><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:66ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">sudo chown alice file.txt # 改文件属主为 alice</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">sudo chown alice:developers file.txt # 改文件属主为 alice 属组为 developers</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">sudo chown </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">R bob: /var/www/ # 递归更改整个目录</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"-四chgrp只更改属组change-group\">👪 四、chgrp：只更改属组（change group）<a class=\"anchor\" href=\"#-四chgrp只更改属组change-group\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:20ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">sudo chgrp [选项] 组 文件</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>示例：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:42ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">sudo chgrp developers file.txt</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">sudo chgrp -R staff /opt/shared # 递归更改整个目录</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"-五chmod更改权限change-mode\">🔐 五、chmod：更改权限（change mode）<a class=\"anchor\" href=\"#-五chmod更改权限change-mode\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:16ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">chmod [选项] 模式 文件</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>权限符号简记：</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>符号</th><th>含义</th></tr></thead><tbody><tr><td><code>r</code></td><td>读权限（4）</td></tr><tr><td><code>w</code></td><td>写权限（2）</td></tr><tr><td><code>x</code></td><td>执行权限（1）</td></tr><tr><td>模式表示法：</td><td></td></tr></tbody></table><ol>\n<li>数字表示法（常用）：</li>\n</ol><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:47ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">chmod </span><span style=\"--0:#005CC5;--1:#79B8FF\">755</span><span style=\"--0:#24292E;--1:#E1E4E8\"> file</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\"># 表示：</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\"># owner: rwx (</span><span style=\"--0:#005CC5;--1:#79B8FF\">7</span><span style=\"--0:#24292E;--1:#E1E4E8\">), group: rx (</span><span style=\"--0:#005CC5;--1:#79B8FF\">5</span><span style=\"--0:#24292E;--1:#E1E4E8\">), others: rx (</span><span style=\"--0:#005CC5;--1:#79B8FF\">5</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ol start=\"2\">\n<li>符号表示法：</li>\n</ol><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:30ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">chmod u</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">x file     # 给属主添加执行权限</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">chmod g</span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">w file     # 移除属组写权限</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">chmod o</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\">r file     # 设置其他用户为只读</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>递归修改目录：</p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:22ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">chmod </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">R </span><span style=\"--0:#005CC5;--1:#79B8FF\">755</span><span style=\"--0:#24292E;--1:#E1E4E8\"> /some/dir</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>🎯 权限组合实例：</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>权限</th><th>数字</th><th>含义</th></tr></thead><tbody><tr><td><code>777</code></td><td>rwxrwxrwx</td><td>所有人可读写执行（不安全）</td></tr><tr><td><code>755</code></td><td>rwxr-xr-x</td><td>常用于脚本或网站目录</td></tr><tr><td><code>700</code></td><td>rwx------</td><td>仅属主可读写执行</td></tr><tr><td><code>644</code></td><td>rw-r—r—</td><td>常用于文本配置文件</td></tr><tr><td><code>600</code></td><td>rw-------</td><td>私密文件（如密钥）</td></tr></tbody></table></section><section><h3 id=\"-六usermod修改用户信息\">👤 六、usermod：修改用户信息<a class=\"anchor\" href=\"#-六usermod修改用户信息\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:16ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">usermod [选项] 用户名</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>常用选项：</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td><code>-l 新用户名</code></td><td>修改用户名</td></tr><tr><td><code>-d /新路径</code></td><td>修改主目录（需配合 <code>-m</code> 移动内容）</td></tr><tr><td><code>-m</code></td><td>移动用户主目录内容到新路径</td></tr><tr><td><code>-s /bin/bash</code></td><td>修改默认 shell</td></tr><tr><td><code>-g 组名</code></td><td>设置主组</td></tr><tr><td><code>-G 组1,组2,...</code></td><td>设置附加组（会覆盖原有附加组）</td></tr><tr><td><code>-aG 组名</code></td><td>追加附加组（不删除原有附加组）</td></tr><tr><td><code>-L</code> / <code>-U</code></td><td>锁定/解锁账号（禁止/恢复登录）</td></tr><tr><td>🧪 示例：</td><td></td></tr><tr><td>➤ 添加用户 alice 到 <code>sudo</code> 组：</td><td></td></tr></tbody></table><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:27ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">sudo usermod </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">aG sudo alice</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>➤ 修改用户 shell 为 bash：</p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:31ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">sudo usermod </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">s /bin/bash alice</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>➤ 改用户名 alice 为 alina：</p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:27ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">sudo usermod </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">l alina alice</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"-七userdel删除用户\">❌ 七、userdel：删除用户<a class=\"anchor\" href=\"#-七userdel删除用户\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:16ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">userdel [选项] 用户名</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>常用选项：</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td><code>-r</code></td><td>同时删除用户主目录、邮箱等文件</td></tr><tr><td>🧪 示例：</td><td></td></tr><tr><td>➤ 删除用户但保留主目录：</td><td></td></tr></tbody></table><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:18ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">sudo userdel alice</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>➤ 删除用户并清理其主目录：</p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:21ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">sudo userdel </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">r alice</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>⚠️ 注意：如果用户当前正在登录，userdel 会失败，需先 pkill -u alice 再删。</p>\n</blockquote></section><section><h3 id=\"-八groupdel删除组\">👥 八、groupdel：删除组<a class=\"anchor\" href=\"#-八groupdel删除组\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:16ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">sudo groupdel 组名</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>⚠️ 不能删除有用户主组为该组的情况，需先修改相关用户的主组。\n🧪 示例：\n➤ 删除 developers 组：</p>\n</blockquote><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:24ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">sudo groupdel developers</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>🔍 用户和组信息查看补充命令</strong></p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>命令</th><th>功能</th></tr></thead><tbody><tr><td><code>id 用户名</code></td><td>查看用户 UID/GID 和所属组</td></tr><tr><td><code>groups 用户名</code></td><td>查看该用户所属所有组</td></tr><tr><td><code>getent passwd</code></td><td>列出所有用户</td></tr><tr><td><code>getent group</code></td><td>列出所有组</td></tr></tbody></table><p><strong>✅ 总结小贴士</strong></p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>目的</th><th>命令示例</th></tr></thead><tbody><tr><td>修改用户主目录</td><td><code>usermod -d /new/home -m user</code></td></tr><tr><td>添加附加组</td><td><code>usermod -aG group user</code></td></tr><tr><td>删除用户和主目录</td><td><code>userdel -r user</code></td></tr><tr><td>删除无用组</td><td><code>groupdel group</code></td></tr></tbody></table></section><section><h3 id=\"-示例设置目录权限给指定用户和组\">🧪 示例：设置目录权限给指定用户和组：<a class=\"anchor\" href=\"#-示例设置目录权限给指定用户和组\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:35ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">sudo useradd </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">m alice # </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">G devs</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">sudo groupadd devs # </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">U alice</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">sudo usermod </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">aG devs alice</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">sudo mkdir /data/project</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">sudo chown alice:devs /data/project</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">sudo chmod </span><span style=\"--0:#005CC5;--1:#79B8FF\">770</span><span style=\"--0:#24292E;--1:#E1E4E8\"> /data/project</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>此时 <code>/data/project</code>：</p><ul>\n<li>属主是 <code>alice</code>；</li>\n<li>属组是 <code>devs</code>；</li>\n<li>只有属主和组用户有读写执行权限，其他用户无权访问。</li>\n</ul></section><section><h3 id=\"访问权限相关\">访问权限相关<a class=\"anchor\" href=\"#访问权限相关\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>对文件来讲，权限的功能为：\n<ul>\n<li><code>r</code>：可读取此一文件的实际内容，如读取文本文件的文字内容等；</li>\n<li><code>w</code>：可以编辑、新增或是修改该文件的内容(但不删除该文件)；</li>\n<li><code>x</code>：该文件具有可以被系统执行的权限。</li>\n</ul>\n</li>\n<li>对目录来说，权限的功能为：\n<ul>\n<li><code>r</code>：读取目录中的内容；</li>\n<li><code>w</code>：修改目录中的内容；</li>\n<li><code>x</code>：访问目录。</li>\n</ul>\n</li>\n</ul><hr></section></section><section><h2 id=\"目录与路径\">目录与路径<a class=\"anchor\" href=\"#目录与路径\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:31ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">.           代表此层目录。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">..          代表上一层目录。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">           代表前一个工作目录。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">~</span><span style=\"--0:#24292E;--1:#E1E4E8\">           代表目前使用者身份所在的家目录。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">~</span><span style=\"--0:#24292E;--1:#E1E4E8\">username   代表username这个使用者的家目录</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><section><h3 id=\"-cd---change-directory\">😎 cd - change directory<a class=\"anchor\" href=\"#-cd---change-directory\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><ins>cd changes the current working directory.</ins></p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:15ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">cd /path/</span><span style=\"--0:#BF3441;--1:#F97583\">to</span><span style=\"--0:#24292E;--1:#E1E4E8\">/dir</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"-pwd---output-the-current-working-directory\">😋 pwd - output the current working directory<a class=\"anchor\" href=\"#-pwd---output-the-current-working-directory\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><ins>pwd outputs (prints) the current working directory</ins></p><p><strong>SYNOPSIS(摘要)</strong></p><p><code>pwd [-P | --physical]</code><br>\n<code>pwd [-L | --logical]</code></p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:8ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">pwd # </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">p</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"-mkdir---make-directories\">🆕 mkdir - make directories<a class=\"anchor\" href=\"#-mkdir---make-directories\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><ins> Create the DIRECTORY(ies), if they do not already exist.</ins></p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:23ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">mkdir [options] dirName</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong><strong>Common options(常见选项)：</strong></strong></p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td><code>-p</code></td><td>递归创建多级目录，不存在时自动建父目录</td></tr><tr><td><code>-m</code></td><td>设置file mode 而不是使用umask</td></tr><tr><td><code>-v</code></td><td>verbose: print a message for each created directory</td></tr></tbody></table></section><section><h3 id=\"-rmdir---remove-empty-directories\">❌ rmdir - remove empty directories<a class=\"anchor\" href=\"#-rmdir---remove-empty-directories\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><ins>Remove the DIRECTORY(ies), if they are empty.</ins></p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:20ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">rmdir </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">p/</span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">v emptyDir</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>✅ 总结表：</strong></p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>命令</th><th>功能</th><th>常见用法示例</th></tr></thead><tbody><tr><td><code>cd</code></td><td>切换目录</td><td><code>cd /etc</code>, <code>cd ..</code></td></tr><tr><td><code>pwd</code></td><td>显示当前路径</td><td><code>pwd</code></td></tr><tr><td><code>mkdir</code></td><td>创建目录</td><td><code>mkdir -p my/data/logs</code></td></tr><tr><td><code>rmdir</code></td><td>删除空目录</td><td><code>rmdir temp_dir</code></td></tr></tbody></table></section><section><h3 id=\"-一文件与目录操作类\">📁 一、文件与目录操作类<a class=\"anchor\" href=\"#-一文件与目录操作类\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>🔸ls：列出目录内容</strong></p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:12ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">ls [选项] [目录]</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li><code>-l</code>： 详细列表</li>\n<li><code>-a</code>： 显示隐藏文件</li>\n<li><code>-h</code>： 人类可读的文件大小</li>\n<li><code>-R</code>：递归列出子目录</li>\n</ul><p>例：</p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:12ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">ls </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">lah /etc</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>🔸cp：复制文件或目录</strong></p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:14ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">cp [选项] 源文件 目标</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li><code>-r</code>：递归复制目录</li>\n<li><code>-i</code>：覆盖前询问</li>\n<li><code>-u</code>：仅复制较新文件</li>\n</ul><p><strong><strong>其他选项：</strong></strong>\n<code>-a</code>:将原有属性复制和链接文件原带复制，\n<code>-p</code>:将文件属性一起复制，不复制链接文件(和<code>-a</code>的区别)，<code>-l</code>:硬链接文件建立，<code>-s</code>:软链接文件建立</p><p>例：</p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:23ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">cp </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">ri </span><span style=\"--0:#BF3441;--1:#F97583\">~</span><span style=\"--0:#24292E;--1:#E1E4E8\">/docs /mnt/usb/</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">cp </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">rp </span><span style=\"--0:#BF3441;--1:#F97583\">~</span><span style=\"--0:#24292E;--1:#E1E4E8\">/docs /mnt/usb/</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">cp </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">a </span><span style=\"--0:#BF3441;--1:#F97583\">~</span><span style=\"--0:#24292E;--1:#E1E4E8\">/docs /tmp</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>🔸rm：删除文件或目录</strong></p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:13ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">rm [选项] 文件/目录</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li><code>-r</code>：递归删除目录</li>\n<li><code>-f</code>：强制删除</li>\n<li><code>-i</code>：每次删除前确认</li>\n</ul><p>例：</p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:14ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">rm </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">rf </span><span style=\"--0:#BF3441;--1:#F97583\">~</span><span style=\"--0:#24292E;--1:#E1E4E8\">/temp/</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>🔸mv：移动或重命名文件</strong></p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:12ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">mv [选项] 源 目标</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li><code>-i</code>：覆盖时提示</li>\n<li><code>-u</code>：仅移动更新文件\n例：</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:27ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">mv file.txt backup/file.txt</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>🔸basename：获取路径中的文件名部分</strong></p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:16ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">basename 路径 [后缀]</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>例：</p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:39ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">basename /etc/passwd # 输出: passwd</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">basename /path/file.txt .txt # 输出: file</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>🔸dirname：获取路径中的目录部分</strong></p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:10ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">dirname 路径</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>例：</p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:29ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">dirname /etc/passwd # 输出：/etc</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>🔸touch：创建空文件或更新文件时间戳</strong></p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:17ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">touch [</span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">acdmt] 文件</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li><code>-a</code>：仅自定义access time；</li>\n<li><code>-t</code>：后面可以接自定义的日期而不用目前的日期，格式为[YYYYMMDDhhmm];</li>\n<li><code>-d</code>：接自定义日期</li>\n</ul><p>例：</p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:28ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">touch test</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">touch </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">d </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"2 days ago\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> bashrc</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">touch </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">t </span><span style=\"--0:#005CC5;--1:#79B8FF\">202506051111</span><span style=\"--0:#24292E;--1:#E1E4E8\"> bashrc</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>⚠修改的是mtime和atime</p>\n</blockquote><hr></section><section><h3 id=\"-二查看文件内容类\">📖 二、查看文件内容类<a class=\"anchor\" href=\"#-二查看文件内容类\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>🔸cat：连接并显示文件内容</strong></p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:19ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">cat [</span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">AbEnTv] files</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li><code>-A</code>：相当于-vET的整合选项，可列出一些特殊字符而不是空白而已；</li>\n<li><code>-n</code>：打印出行号，连同空白行也有行号，与<code>-b</code>选项不同</li>\n<li><code>-b</code>：列出行号，空白行不列</li>\n</ul><p>例：</p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:23ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">cat file.txt</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">cat </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">n file.txt</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">cat </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">b /etc/passwd</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">cat </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">A /etc/pacman.conf</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>🔸tac：逆序显示文件内容</strong></p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:8ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">tac file</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>🔸more：分页显示（不能向上滚动）</strong></p><blockquote>\n<p><ins>空格翻页，less同理</ins></p>\n</blockquote><p><strong>🔸less：分页显示（支持上下滚动）</strong></p><blockquote>\n<p>❤ 支持向上向下翻动一行，<code>/</code>查找字符串，<code>n</code>向下查找，<code>?</code>向上查找</p>\n<blockquote>\n<p><font color=\"red\">善用<code>man</code>和<code>tldr</code>指令</font></p>\n</blockquote>\n</blockquote><p><strong>🔸head：显示前几行</strong></p><ul>\n<li><code>-n</code>：最常用，代表显示前几行</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:27ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">head </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">n </span><span style=\"--0:#005CC5;--1:#79B8FF\">10</span><span style=\"--0:#24292E;--1:#E1E4E8\"> /etc/pacman.conf</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>显示文件前十行</p><p><strong>🔸tail：显示末尾几行</strong></p><ul>\n<li><code>-n</code>：显示末尾前几行</li>\n<li><code>-f</code>：跟踪文件变化</li>\n</ul><blockquote>\n<p><code>-f</code>用于</p>\n<blockquote>\n<p style=\"color:pink\"><ins>日志随时写入情况</ins></p>\n</blockquote>\n</blockquote><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:23ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">tail </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">n </span><span style=\"--0:#005CC5;--1:#79B8FF\">20</span><span style=\"--0:#24292E;--1:#E1E4E8\"> /etc/passwd</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">tail </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">f /var/</span><span style=\"--0:#005CC5;--1:#79B8FF\">log</span><span style=\"--0:#24292E;--1:#E1E4E8\">/syslog</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p><font color=\"#E3A212\"><ins>tail常和head结合使用查找一个ascii文本文件区间范围文本</ins></font></p>\n<blockquote>\n<p><strong>显示/etc/pacman.conf文件11到20行</strong></p>\n<blockquote>\n<p><code>head -n 20 /etc/pacman.conf | tail -n 10</code></p>\n<blockquote>\n<p><em>先显示前20行后显示后10行</em> <br></p>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote><blockquote>\n<p><code>cat -n /etc/passwd | head -n 10 | tail -n 5</code></p>\n<blockquote>\n<p><em>可以列出行号的截取</em></p>\n</blockquote>\n</blockquote><p><strong>🔸od（Octal Dump）：以八进制或十六进制显示文件内容（用于二进制分析）</strong></p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:15ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">od [</span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">t type] 文件</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>-t</code>后面可以接各种类型的输出，例如：</p><p>a   ：利用默认字符来输出 <br>\nc   ：使用ASCII字符来输出<br>\nd [size]  ：使用十进制(decimal)来输出数据，每个整数占用size Bytes；<br>\nf [size]  ：使用浮点数输出，其他同上<br>\no [size]  ：八进制<br>\nx [size]  ：十六进制<br></p><ul>\n<li>范例一：将<code>/usr/bin/passwd</code>的内容使用ASCII方式来显示。</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:23ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">od </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">t c /usr/bin/passwd</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li>范例二：将<code>/etc/issue</code>这个文件内容以八进制列出存储值</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:20ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">od </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">t oCc /etc/issue</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li>范例三：用作ascii对照表查找字符的ASCII码</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:25ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">echo password | od </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">t oCc</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>其实不用带<code>-t</code>也可以</p>\n</blockquote><hr></section><section><h3 id=\"-三权限与属性管理\">🔒 三、权限与属性管理<a class=\"anchor\" href=\"#-三权限与属性管理\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>🔸chattr：改变文件属性（适用于 ext 和部分文件系统）</strong></p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:32ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">chattr [</span><span style=\"--0:#BF3441;--1:#F97583\">+-=</span><span style=\"--0:#24292E;--1:#E1E4E8\">] [ASacdistu] 文件或目录名称</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li><code>-i</code>：让一个文件「不能被删除，改名，设置链接也无法写入或新增数据」</li>\n<li><code>-c</code>：设置这个属性会使文件自动被压缩，读取时解压缩</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:14ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">chattr </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">i file</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">chattr </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">i file</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">chattr </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">c file</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">chattr </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">c file</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>🔸lsattr：查看文件属性</strong></p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:19ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">lsattr [</span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">adR] 文件或目录</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p><strong>man chattr</strong> or <em>tldr lsattr</em></p>\n</blockquote><p><strong>🔸umask：显示或设置默认权限掩码</strong></p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:37ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">umask / umask </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">S/s和</span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">p都是显示隐藏的默认创建文件权限码</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">umask </span><span style=\"--0:#005CC5;--1:#79B8FF\">022</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 设置创建文件时的文件权限</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><hr></section><section><h3 id=\"-四文件类型与状态\">🧩 四、文件类型与状态<a class=\"anchor\" href=\"#-四文件类型与状态\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>🔸file：识别文件类型</strong></p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:12ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">file /bin/ls</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>🔸stat：查看详细状态（权限、大小、时间戳）</strong></p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:13ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">stat filename</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><hr></section><section><h3 id=\"-五文件查找与定位\">🔎 五、文件查找与定位<a class=\"anchor\" href=\"#-五文件查找与定位\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><strong>🔸which：查命令路径（依赖 $PATH）</strong></p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:10ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">which bash</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>🔸whereis：查命令、源码、man 手册位置</strong></p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:10ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">whereis ls</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>🔸locate：快速查找文件（依赖数据库）</strong></p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:13ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">sudo updatedb</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">locate passwd</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>🔸find：遍历文件系统查找文件(最常用)</strong>\n<code>find 路径 条件 动作</code></p><ol>\n<li><strong>与时间有关的选项：<code>-atime</code>,<code>-citme</code>,<code>mtime</code>，以<code>mtime</code>举例</strong></li>\n</ol><ul>\n<li><code>-mtime n</code>：n为数字，意义为在n天之前的「一天之内」被修改过内容的文件；</li>\n<li><code>-mtime +n</code>：列出在n天之前(不含n天本身)被修改过内容的文件；</li>\n<li><code>-mtime -n</code>：列出在n天之内(含n天本身)被修改过内容的文件；</li>\n<li><code>-newer file</code>：file为一个存在的文件，列出比file还要新的文件</li>\n</ul><p>范例一：将系统上24小时内有修改过的文件列出</p><p><code>find / -mtime 0</code></p><p>将三天前那一天的24小时内有修改过的文件列出</p><p><code>find / -mtime 3</code></p><p>范例二：寻找<code>/etc</code>下的文件，如果文件日期比<code>/etc/passwd</code>新就列出</p><p><code>find /etc -newer /etc/passwd</code></p><p>三天内<br>\n<code>find / -mtime -3</code></p><p>三天外<br>\n<code>find / -mtime +3</code></p><ol start=\"2\">\n<li><strong>与使用者或用户组有关的参数：<code>-uid n</code>,<code>-gid n</code>,<code>-user name</code>,<code>-group name</code>,<code>-nouser</code>,<code>-nogroup</code></strong></li>\n</ol><p>范例三：查找/home下属于Nagisa的文件</p><p><code>find /home -user Nagisa</code></p><p>范例四：查找系统中不属于任何人的文件</p><p><code>find / -nouser</code></p><ol>\n<li><strong>与文件权限及名称有关的参数：<code>-name filename</code>,<code>-size [+-]SIZE</code>(查找比SIZE还要大(+)的或小(-)的文件,size规格为<code>c</code>Bytes和<code>k</code>KBytes),<code>-type TYPE</code>;<code>-perm -mode / /mode</code>;</strong>\n范例五：找出文件名为passwd的文件</li>\n</ol><p><code>find / -name passwd</code></p><p>范例六：找出包含passwd关键字的文件</p><p><code>find / -name \"*passwd*\"</code></p><p>范例七：找出在<code>/run</code>目录下，文件类型为socket的文件名有哪些？</p><p><code>find /run -type s</code></p><p>范例八：查找文件当中含有SGID、SUID、SBIT属性的文件\n<code>find / -perm /7000</code></p><blockquote>\n<p>所谓的7000就是 <code>---s--s--t</code>,那么只要含有s或t的就列出，所以当然要使用<code>/7000</code></p>\n<blockquote>\n<p>使用<code>-7000</code>需要同时含有这三个权限</p>\n<blockquote>\n<p>-perm 亦可用于普通权限文件查找<br>\n<code>find /usr/bin -perm 755</code></p>\n</blockquote>\n</blockquote>\n</blockquote><p>常用例：</p><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:114ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">find /usr/bin /usr/sbin </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">perm /</span><span style=\"--0:#005CC5;--1:#79B8FF\">6000</span><span style=\"--0:#24292E;--1:#E1E4E8\"> # 无SBIT权限</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">inshell: </span><span style=\"--0:#BF3441;--1:#F97583\">$</span><span style=\"--0:#24292E;--1:#E1E4E8\">(find </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"$WALLPAPER_DIR\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">type f \\( </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">iname </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"*.jpg\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">o </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">iname </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"*.png\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">o </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">iname </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"*.jpeg\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">o \\) | shuf </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">n </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\"># 随机抽取指定目录下的一张指定格式的图片</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">find . </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">type f \\( </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">name </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"*.txt\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">o </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">name </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"*.md\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> \\) </span><span style=\"--0:#BF3441;--1:#F97583\">!</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">name </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"README.md\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\"># 查找当前目录下，</span><span style=\"--0:#BF3441;--1:#F97583\">**</span><span style=\"--0:#24292E;--1:#E1E4E8\">文件类型是普通文件</span><span style=\"--0:#BF3441;--1:#F97583\">**</span><span style=\"--0:#24292E;--1:#E1E4E8\">，扩展名为.txt 或 .md 但不包括 README.md的文件</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">find . </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">type f </span><span style=\"--0:#BF3441;--1:#F97583\">!</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">name </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"*.bak\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\"># 排除以.bak结尾的文件</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">find . </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">name </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"*.tmp\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">delete</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\"># 删除文件 (</span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">delete 一定要配合 </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">type f 使用防止误删文件)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">find . </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">name </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"*.log\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">exec rm {} \\; # 删除 .</span><span style=\"--0:#005CC5;--1:#79B8FF\">log</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 文件</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">find . </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">type f </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">exec chmod </span><span style=\"--0:#005CC5;--1:#79B8FF\">644</span><span style=\"--0:#24292E;--1:#E1E4E8\"> {} \\; # 批量修改权限</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">find . </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">name </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"*.txt\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">exec wc </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">l {} </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\"> # </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">可以批量处理 统计所有txt行数</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">find . </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">name </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"*.log\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> | xargs rm</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\"># 搭配xargs</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">find . </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">type f </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#005CC5;--1:#79B8FF\">empty</span><span style=\"--0:#24292E;--1:#E1E4E8\"> # 空文件</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">find . </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">type d </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#005CC5;--1:#79B8FF\">empty</span><span style=\"--0:#24292E;--1:#E1E4E8\"> # 空目录</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">find . </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">name </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"*.mp3\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">exec mv {} /target/dir/ \\;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">find . </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">name </span><span style=\"--0:#032F62;--1:#9ECBFF\">\".jpg\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">exec cp {} /backup/ \\;</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\"># 查找并移动/复制文件</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">find . </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">maxdepth </span><span style=\"--0:#005CC5;--1:#79B8FF\">1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">name </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"*.sh\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> # 当前目录下查找</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">find . </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">mindepth </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> # 忽略前几层目录</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>场景</th><th>与 (AND)</th><th>或 (OR)</th><th>非 (NOT)</th><th></th><th></th></tr></thead><tbody><tr><td>Shell 命令行</td><td><code>&#x26;&#x26;</code></td><td><code>||</code></td><td><code>!</code></td><td></td><td></td></tr><tr><td><code>find</code> 命令中</td><td><code>-a</code>（可省略）</td><td><code>-o</code></td><td><code>!</code> 或 <code>-not</code></td><td></td><td></td></tr></tbody></table><p>4.<strong>额外可以进行的操作：<code>-exec command</code>(command为其他命令，-exec后面再接额外命令来处理查找到的结果),<code>-print</code>(将结果打印到屏幕上，默认操作)</strong></p><p>范例九：将上个范例找到的文件使用ls -l列出来</p><p><code>find /usr/bin /usr/sbin -perm /7000 -exec ls -l {} \\;</code></p><blockquote>\n<p><code>ls -l</code>就是额外的command，命令不支持命令别名</p>\n<blockquote>\n<p>所以只能用<ins><code>ls -l</code></ins>不可以使用<ins><code>ll</code></ins></p>\n</blockquote>\n</blockquote><p>范例十：找出系统中大于1MB的文件</p><p><code>find / -size +1M</code></p><p>范例十一：找出系统中小于1KB的文件</p><p><code>find / -size -1k</code></p><p>✅ 总结（速查）</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>用法</th><th>示例</th></tr></thead><tbody><tr><td>按名查</td><td><code>-name</code> / <code>-iname</code></td></tr><tr><td>按类型</td><td><code>-type f</code> / <code>-type d</code></td></tr><tr><td>按时间</td><td><code>-mtime -n</code> / <code>-newer</code></td></tr><tr><td>按大小</td><td><code>-size +100M</code></td></tr><tr><td>空文件</td><td><code>-empty</code></td></tr><tr><td>权限查</td><td><code>-perm 755</code></td></tr><tr><td>排除条件</td><td><code>! -name</code></td></tr><tr><td>删除</td><td><code>-delete</code></td></tr><tr><td>执行命令</td><td><code>-exec</code> 或配合 <code>xargs</code></td></tr><tr><td>限制深度</td><td><code>-maxdepth</code>、<code>-mindepth</code></td></tr><tr><td>跳过目录</td><td><code>-prune</code></td></tr></tbody></table></section><section><h3 id=\"-extra文件特殊权限suidsgidsbit\">💨 Extra、文件特殊权限：SUID、SGID、SBIT<a class=\"anchor\" href=\"#-extra文件特殊权限suidsgidsbit\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:18ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">chmod u</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">s # SUID设置</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">chmod g</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">s # SGID设置</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">chmod </span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">t  # SBIT设置</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li><font color=\"#8BDB67\">文件具有<code>SUID</code>的特殊权限时，代表当用户执行此二进制程序时，在执行过程中用户会暂时具有程序拥有者的权限</font></li>\n<li><font color=\"#39DBB5\">目录具有<code>SGID</code>的特殊权限时，代表用户在这个目录下面新建的文件的用户组都会与该目录的组名相同</font></li>\n<li><font color=\"#82DBA8\">目录具有<code>SBIT</code>的特殊权限时，代表在该目录下用户建立的文件只有自己与root能够删除</font></li>\n</ul><hr></section></section><section><h2 id=\"磁盘与文件系统\">磁盘与文件系统<a class=\"anchor\" href=\"#磁盘与文件系统\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><blockquote>\n<p>MBR: Master Boot Record<br>\nGPT: GUID Partition Table</p>\n</blockquote><section><h3 id=\"一磁盘分区-partitioning\">一、磁盘分区 (Partitioning)<a class=\"anchor\" href=\"#一磁盘分区-partitioning\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><section><h4 id=\"1-查看磁盘信息\">1. 查看磁盘信息<a class=\"anchor\" href=\"#1-查看磁盘信息\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><ul>\n<li><strong><code>lsblk</code></strong>: 列出所有块设备及其分区信息，包括设备名称、大小、挂载点、文件系统类型等。这是最常用且直观的命令。\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:5ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">lsblk</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li><strong><code>fdisk -l</code></strong>: 列出所有磁盘的分区表信息。\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:13ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">fdisk</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-l</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li><strong><code>parted -l</code></strong>: 另一个查看分区表的工具，对于 GPT 分区表支持更好。\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:14ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">parted</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-l</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h4 id=\"2-分区工具\">2. 分区工具<a class=\"anchor\" href=\"#2-分区工具\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><ul>\n<li>\n<p><strong><code>fdisk</code> (MBR 和 GPT):</strong> 适用于传统的 MBR (Master Boot Record) 分区表，也支持 GPT (GUID Partition Table) 分区表。它是交互式的。</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:55ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">fdisk</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/sdX</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#616972;--1:#99A0A6\"># 替换 /dev/sdX 为你的磁盘设备名，例如 /dev/sdb</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<p>进入 <code>fdisk</code> 后，可以使用以下常用命令：</p>\n<ul>\n<li><code>m</code>: 显示帮助信息。</li>\n<li><code>p</code>: 打印当前磁盘的分区表。</li>\n<li><code>n</code>: 创建新分区。</li>\n<li><code>d</code>: 删除分区。</li>\n<li><code>w</code>: 将更改写入磁盘并退出。</li>\n<li><code>q</code>: 不保存更改并退出。</li>\n</ul>\n</li>\n<li>\n<p><strong><code>parted</code> (MBR 和 GPT):</strong> 功能更强大，尤其在处理大容量磁盘和 GPT 分区时更为灵活。可以交互式使用，也可以通过命令行直接操作。</p>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:44ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">parted</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/sdX</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#616972;--1:#99A0A6\"># 替换 /dev/sdX 为你的磁盘设备名</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<p>进入 <code>parted</code> 后，可以使用以下常用命令：</p>\n<ul>\n<li><code>print</code>: 打印分区表。</li>\n<li><code>mklabel gpt</code> 或 <code>mklabel msdos</code>: 创建新的分区表类型 (GPT 或 MBR)。</li>\n<li><code>mkpart primary ext4 0% 100%</code>: 创建一个主分区，文件系统类型为 ext4，从磁盘的0%到100%。你可以根据需要调整大小和文件系统类型。</li>\n<li><code>resizepart</code>: 调整分区大小。</li>\n<li><code>rm</code>: 删除分区。</li>\n<li><code>quit</code>: 退出。</li>\n</ul>\n</li>\n</ul><hr></section></section><section><h3 id=\"二文件系统格式化-formatting-file-systems\">二、文件系统格式化 (Formatting File Systems)<a class=\"anchor\" href=\"#二文件系统格式化-formatting-file-systems\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>创建分区后，需要对其进行格式化以创建文件系统，才能存储数据。</p><ul>\n<li><strong><code>mkfs</code> 系列命令：</strong> <code>mkfs</code> 是一个通用命令，后面可以跟不同的文件系统类型。\n<ul>\n<li><strong>Ext4 (Linux 常用):</strong>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:60ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mkfs.ext4</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/sdXY</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#616972;--1:#99A0A6\"># 替换 /dev/sdXY 为你的分区名，例如 /dev/sdb1</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n或者\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:27ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mkfs</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">ext4</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/sdXY</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li><strong>XFS:</strong>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:23ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mkfs.xfs</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/sdXY</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li><strong>FAT32 (兼容 Windows):</strong>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:55ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mkfs.vfat</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/sdXY</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#616972;--1:#99A0A6\"># 或者 mkfs.fat -F 32 /dev/sdXY</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li><strong>NTFS (兼容 Windows):</strong>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:24ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mkfs.ntfs</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/sdXY</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li><strong>Btrfs:</strong>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:25ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mkfs.btrfs</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/sdXY</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul>\n</li>\n</ul><hr></section><section><h3 id=\"三分区分卷-logical-volume-management---lvm\">三、分区分卷 (Logical Volume Management - LVM)<a class=\"anchor\" href=\"#三分区分卷-logical-volume-management---lvm\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>LVM 允许你将多个物理磁盘或分区组合成一个或多个逻辑卷，从而提供更大的灵活性，例如在线调整大小、创建快照等。</p><section><h4 id=\"lvm-基本概念\">LVM 基本概念<a class=\"anchor\" href=\"#lvm-基本概念\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><ul>\n<li><strong>PV (Physical Volume - 物理卷):</strong> 物理磁盘或分区，LVM 的最基本单元。</li>\n<li><strong>VG (Volume Group - 卷组):</strong> 一个或多个 PV 的集合。</li>\n<li><strong>LV (Logical Volume - 逻辑卷):</strong> 在 VG 上创建的虚拟分区，可以像普通分区一样格式化和挂载。</li>\n</ul></section><section><h4 id=\"lvm-常用命令\">LVM 常用命令<a class=\"anchor\" href=\"#lvm-常用命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><ul>\n<li><strong>创建 PV:</strong>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:36ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">pvcreate</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/sdXY</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#616972;--1:#99A0A6\"># 将分区标记为物理卷</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li><strong>查看 PV:</strong>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:14ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">pvs</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">pvdisplay</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li><strong>创建 VG:</strong>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:72ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">vgcreate</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">my_vg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/sdb1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/sdc1</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#616972;--1:#99A0A6\"># 创建名为 my_vg 的卷组，包含 sdb1 和 sdc1</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li><strong>查看 VG:</strong>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:14ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">vgs</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">vgdisplay</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li><strong>从 VG 中扩展/移除 PV:</strong>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:61ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">vgextend</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">my_vg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/sdd1</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#616972;--1:#99A0A6\"># 将 sdd1 添加到 my_vg</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">vgreduce</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">my_vg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/sdd1</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#616972;--1:#99A0A6\"># 从 my_vg 移除 sdd1 (需确保上面没有 LV)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li><strong>创建 LV:</strong>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:69ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">lvcreate</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-L</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">10G</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-n</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">my_lv</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">my_vg</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#616972;--1:#99A0A6\"># 在 my_vg 中创建名为 my_lv 的 10GB 逻辑卷</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">lvcreate</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-l</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">100%FREE</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-n</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">my_lv</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">my_vg</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#616972;--1:#99A0A6\"># 使用 VG 中所有可用空间创建 LV</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li><strong>查看 LV:</strong>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:14ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">lvs</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">lvdisplay</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li><strong>调整 LV 大小 (扩展/收缩):</strong>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:77ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">lvextend</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-L</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">+5G</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/my_vg/my_lv</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#616972;--1:#99A0A6\"># 将 my_lv 扩展 5GB</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">lvreduce</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-L</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-2G</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/my_vg/my_lv</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#616972;--1:#99A0A6\"># 将 my_lv 缩小 2GB (有数据丢失风险，需先卸载和检查文件系统)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<ul>\n<li><strong>注意：</strong> 扩展逻辑卷后，需要同时扩展文件系统才能使用新增的空间。\n<ul>\n<li>Ext4: <code>sudo resize2fs /dev/my_vg/my_lv</code></li>\n<li>XFS: <code>sudo xfs_growfs /dev/my_vg/my_lv</code> (通常不需要卸载)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><strong>删除 LV:</strong>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:39ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">lvremove</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/my_vg/my_lv</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#616972;--1:#99A0A6\"># 删除逻辑卷</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li><strong>删除 VG:</strong>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:41ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">vgremove</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">my_vg</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#616972;--1:#99A0A6\"># 删除卷组 (需确保卷组中没有 LV)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li><strong>删除 PV:</strong>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:52ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">pvremove</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/sdXY</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#616972;--1:#99A0A6\"># 删除物理卷 (需确保物理卷没有被任何 VG 使用)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul><blockquote>\n<p>Btrfs分卷查看Archlinux系统安装—><a href=\"https://arch.icekylin.online/guide/rookie/basic-install-detail.html\">Why Btrfs</a></p>\n</blockquote><hr></section></section><section><h3 id=\"四分区挂载-mounting\">四、分区挂载 (Mounting)<a class=\"anchor\" href=\"#四分区挂载-mounting\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>将格式化后的分区或逻辑卷连接到文件系统树中的一个目录，使其可以被访问。</p><section><h4 id=\"1-创建挂载点\">1. 创建挂载点<a class=\"anchor\" href=\"#1-创建挂载点\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><ul>\n<li>挂载点是一个普通的空目录。\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:44ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mkdir</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/mnt/mydata</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#616972;--1:#99A0A6\"># 创建一个名为 mydata 的挂载点</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h4 id=\"2-临时挂载\">2. 临时挂载<a class=\"anchor\" href=\"#2-临时挂载\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><ul>\n<li><strong>基本挂载：</strong>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:64ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mount</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/sdXY</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/mnt/mydata</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#616972;--1:#99A0A6\"># 挂载分区 /dev/sdXY 到 /mnt/mydata</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li><strong>指定文件系统类型：</strong> (通常不需要，<code>mount</code> 命令可以自动识别)\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:40ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mount</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-t</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">ext4</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/sdXY</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/mnt/mydata</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li><strong>只读挂载：</strong>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:38ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mount</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-o</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">ro</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/sdXY</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/mnt/mydata</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li><strong>重新挂载 (改变挂载选项)：</strong>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:67ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mount</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-o</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">remount,rw</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/mnt/mydata</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#616972;--1:#99A0A6\"># 将已挂载的 /mnt/mydata 重新挂载为读写模式</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li><strong>查看已挂载的文件系统：</strong>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:41ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">mount</span><span style=\"--0:#24292E;--1:#E1E4E8\">          </span><span style=\"--0:#616972;--1:#99A0A6\"># 列出所有已挂载的文件系统</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">df</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-h</span><span style=\"--0:#24292E;--1:#E1E4E8\">          </span><span style=\"--0:#616972;--1:#99A0A6\"># 以人类可读的方式显示磁盘空间使用情况，包括挂载点</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">lsblk</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-f</span><span style=\"--0:#24292E;--1:#E1E4E8\">       </span><span style=\"--0:#616972;--1:#99A0A6\"># 显示块设备的文件系统信息和挂载点</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h4 id=\"3-卸载分区\">3. 卸载分区<a class=\"anchor\" href=\"#3-卸载分区\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><ul>\n<li>在卸载之前，确保没有程序正在使用该挂载点下的文件。\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:44ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">umount</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/mnt/mydata</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#616972;--1:#99A0A6\"># 卸载 /mnt/mydata 目录</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">umount</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/sdXY</span><span style=\"--0:#24292E;--1:#E1E4E8\">    </span><span style=\"--0:#616972;--1:#99A0A6\"># 卸载 /dev/sdXY 分区</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>如果无法卸载（“device is busy”），可以使用 <code>lsof</code> 或 <code>fuser</code> 命令查找占用进程：\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:41ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">lsof</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/mnt/mydata</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">fuser</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-km</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/mnt/mydata</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#616972;--1:#99A0A6\"># 强制杀死占用进程并卸载</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul></section><section><h4 id=\"4-永久挂载-etcfstab\">4. 永久挂载 (<code>/etc/fstab</code>)<a class=\"anchor\" href=\"#4-永久挂载-etcfstab\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><ul>\n<li>为了在系统启动时自动挂载分区，需要编辑 <code>/etc/fstab</code> 文件。</li>\n<li><strong>推荐使用 UUID (Universally Unique Identifier) 来标识分区，因为设备名（如 <code>/dev/sdb1</code>）可能会在重启后改变。</strong>\n<ul>\n<li>查找分区的 UUID：\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:20ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">blkid</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/dev/sdXY</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>编辑 <code>/etc/fstab</code> 文件：\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:40ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">nano</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/etc/fstab</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#616972;--1:#99A0A6\"># 或者使用 vi、vim 等编辑器</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n<li>在文件末尾添加一行，格式如下：\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:48ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">UUID</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#032F62;--1:#9ECBFF\">&#x3C;你的UUID></span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#6F42C1;--1:#B392F0\">/mnt/mydata</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#032F62;--1:#9ECBFF\">ext4</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#032F62;--1:#9ECBFF\">defaults</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#005CC5;--1:#79B8FF\">0</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#005CC5;--1:#79B8FF\">2</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n<ul>\n<li><strong><code>&#x3C;你的UUID></code>:</strong> 替换为你的分区的实际 UUID。</li>\n<li><code>/mnt/mydata</code>: 挂载点。</li>\n<li><code>ext4</code>: 文件系统类型。</li>\n<li><code>defaults</code>: 常用挂载选项 (rw, suid, dev, exec, auto, nouser, async)。</li>\n<li><code>0</code>: dump 选项，通常为 0 (不备份)。</li>\n<li><code>2</code>: fsck 检查顺序，根文件系统为 1，其他为 2，不检查为 0。</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><strong>测试 <code>/etc/fstab</code> 配置：</strong>\n<div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:50ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mount</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-a</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#616972;--1:#99A0A6\"># 尝试挂载所有在 /etc/fstab 中列出的但尚未挂载的文件系统</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n如果没有任何错误输出，说明配置正确。如果有错误，请检查 <code>/etc/fstab</code> 文件。</li>\n</ul><hr></section></section></section><section><h2 id=\"文件与文件系统的压缩\">文件与文件系统的压缩<a class=\"anchor\" href=\"#文件与文件系统的压缩\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><ins>Linux文件压缩技术的核心原理主要是通过消除数据冗余来实现的，通常采用无损压缩算法。简单来说，就是想办法用更少的位（bits）来表示相同的信息。</ins></p></section><section><h2 id=\"核心原理\">核心原理<a class=\"anchor\" href=\"#核心原理\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ol>\n<li>\n<section><h3 id=\"数据冗余的消除\"><strong>数据冗余的消除</strong><a class=\"anchor\" href=\"#数据冗余的消除\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>文件中的数据往往存在大量的重复和可预测的模式。压缩算法会识别这些“冗余”并将其替换为更短的表示。</p><ul>\n<li><strong>重复数据查找和替换：</strong> 这是最直观的方法。如果文件中有大量重复的字符序列，例如“AAAAA”，压缩算法会用一个更短的编码来表示“5个A”，而不是重复写5次“A”。</li>\n<li><strong>字典编码（如LZ77/LZ78）：</strong>\n<ul>\n<li><strong>LZ77</strong> 算法（Lempel-Ziv 77）通过在文件已处理的数据中查找与当前数据流的匹配项。如果找到一个匹配，它就用一个指向匹配位置和匹配长度的“指针”来替换重复数据。这就像建立了一个临时字典，引用已出现过的短语。</li>\n<li><strong>LZ78</strong> 算法（Lempel-Ziv 78）则会构建一个显式的字典。它将文件中出现的新的字符串添加到字典中，并用字典中的索引来替换这些字符串。当遇到重复的字符串时，直接用字典索引表示。</li>\n</ul>\n</li>\n<li><strong>熵编码（如霍夫曼编码、算术编码）：</strong> 这种方法基于数据的统计特性。\n<ul>\n<li><strong>频率分析：</strong> 某些字符或模式在文件中出现的频率更高。</li>\n<li><strong>变长编码：</strong> 熵编码利用这种频率差异，为出现频率高的字符分配更短的编码（例如，用1位表示最常见的字符），为出现频率低的字符分配更长的编码。这样一来，文件的平均编码长度就缩短了，从而实现压缩。<strong>霍夫曼编码</strong>就是典型的例子，它通过构建霍夫曼树来生成最优的变长编码。</li>\n</ul>\n</li>\n</ul></section>\n</li>\n<li>\n<section><h3 id=\"无损压缩-vs-有损压缩\"><strong>无损压缩 vs. 有损压缩</strong><a class=\"anchor\" href=\"#无损压缩-vs-有损压缩\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li><strong>无损压缩（Lossless Compression）：</strong> Linux文件压缩主要采用的方式。这意味着<strong>在压缩和解压缩后，原始数据可以完全、精确地恢复，没有任何信息损失</strong>。这对于文本文件、程序代码等至关重要，因为任何一点数据丢失都可能导致文件损坏或程序无法运行。<code>gzip</code>、<code>bzip2</code>、<code>xz</code> 等 Linux 命令都属于无损压缩。</li>\n<li><strong>有损压缩（Lossy Compression）：</strong> 这种压缩方式会在压缩过程中<strong>舍弃一部分信息以达到更高的压缩比</strong>。解压缩后的数据与原始数据会有所不同，但这种差异通常在特定应用场景下（如图像、音频、视频）是人眼或人耳难以察觉或可以接受的（例如 JPEG 图片和 MP3 音频）。文件压缩通常不使用有损压缩，因为它会改变文件内容。</li>\n</ul></section>\n</li>\n</ol><hr></section><section><h2 id=\"常见的linux压缩工具及其原理简述\">常见的Linux压缩工具及其原理简述<a class=\"anchor\" href=\"#常见的linux压缩工具及其原理简述\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"left\">工具/后缀</th><th align=\"left\">核心算法</th><th align=\"left\">特点</th></tr></thead><tbody><tr><td align=\"left\"><strong>gzip (.gz)</strong></td><td align=\"left\"><strong>Deflate</strong> (LZ77 + 霍夫曼编码)</td><td align=\"left\"><strong>速度快</strong>，压缩比适中，应用最广泛。</td></tr><tr><td align=\"left\"><strong>bzip2 (.bz2)</strong></td><td align=\"left\"><strong>BWT (Burrows-Wheeler Transform)</strong> + <strong>MTF</strong> + 霍夫曼/算术编码</td><td align=\"left\"><strong>压缩比通常比gzip高</strong>，但压缩和解压缩<strong>速度相对较慢</strong>，更消耗CPU。</td></tr><tr><td align=\"left\"><strong>xz (.xz)</strong></td><td align=\"left\"><strong>LZMA (Lempel-Ziv-Markov chain Algorithm)</strong></td><td align=\"left\"><strong>压缩比最高</strong>，尤其适合大型文件。但压缩速度通常<strong>最慢</strong>，也更消耗内存。</td></tr><tr><td align=\"left\"><strong>zip (.zip)</strong></td><td align=\"left\">通常是 <strong>Deflate</strong></td><td align=\"left\"><strong>跨平台</strong>压缩格式，可打包多个文件和目录。</td></tr></tbody></table><p><strong>注意：</strong> <code>tar</code> 命令 (<code>.tar</code> 文件) 本身不是压缩工具，它是一个“打包”工具，用于将多个文件和目录合并成一个单一的归档文件。通常会与 <code>gzip</code> (<code>.tar.gz</code> 或 <code>.tgz</code>)、<code>bzip2</code> (<code>.tar.bz2</code> 或 <code>.tbz</code>) 或 <code>xz</code> (<code>.tar.xz</code> 或 <code>.txz</code>) 结合使用，先打包再压缩。</p><hr><section><h3 id=\"gzipbzip2xztar-命令详解\">gzip、bzip2、xz、tar 命令详解<a class=\"anchor\" href=\"#gzipbzip2xztar-命令详解\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3></section><section><h3 id=\"1-gzip-命令\">1. <code>gzip</code> 命令<a class=\"anchor\" href=\"#1-gzip-命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>gzip</code>（GNU zip）是 Linux 中最常用的压缩工具之一，采用 <strong>Deflate</strong> 算法进行无损压缩。</p><ul>\n<li><strong>功能：</strong> 压缩或解压缩文件。默认会生成 <code>.gz</code> 后缀的压缩文件并删除原文件。</li>\n<li><strong>特点：</strong> 压缩速度快，压缩比适中。</li>\n</ul><p><strong>常用选项：</strong></p><ul>\n<li><code>-d</code>, <code>--decompress</code>：解压缩。等同于 <code>gunzip</code>。</li>\n<li><code>-f</code>, <code>--force</code>：强制执行，覆盖同名文件。</li>\n<li><code>-k</code>, <code>--keep</code>：保留原始文件。</li>\n<li><code>-v</code>, <code>--verbose</code>：显示详细信息。</li>\n<li><code>-c</code>, <code>--stdout</code>：输出到标准输出，不创建文件。</li>\n<li><code>-num</code> (e.g., <code>-1</code> 到 <code>-9</code>)：设置压缩级别，<code>-1</code> 最快，<code>-9</code> 最佳（默认 <code>-6</code>）。</li>\n</ul><p><strong>使用示例：</strong></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:54ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">gzip</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">myfile.txt</span><span style=\"--0:#24292E;--1:#E1E4E8\">               </span><span style=\"--0:#616972;--1:#99A0A6\"># 压缩文件，生成 myfile.txt.gz</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">gzip</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-k</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">myfile.txt</span><span style=\"--0:#24292E;--1:#E1E4E8\">            </span><span style=\"--0:#616972;--1:#99A0A6\"># 压缩文件并保留原文件</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">gzip</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-d</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">myfile.txt.gz</span><span style=\"--0:#24292E;--1:#E1E4E8\">         </span><span style=\"--0:#616972;--1:#99A0A6\"># 解压缩文件</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">gzip</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-l</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">myfile.txt.gz</span><span style=\"--0:#24292E;--1:#E1E4E8\">         </span><span style=\"--0:#616972;--1:#99A0A6\"># 查看压缩信息</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">gunzip</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">myfile.txt.gz</span><span style=\"--0:#24292E;--1:#E1E4E8\">          </span><span style=\"--0:#616972;--1:#99A0A6\"># 不常用 多用 gzip -d</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">gzip</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-v</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">myfile.txt</span><span style=\"--0:#24292E;--1:#E1E4E8\">            </span><span style=\"--0:#616972;--1:#99A0A6\"># 显示压缩过程</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">zcat</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">myfile.txt.gz</span><span style=\"--0:#24292E;--1:#E1E4E8\">            </span><span style=\"--0:#616972;--1:#99A0A6\"># zcat和gzip -l一样可以查看压缩信息</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">gzip</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-9</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-c</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">myfile.txt</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">myfile.txt.gz</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#616972;--1:#99A0A6\"># 最佳压缩比压缩并保留原本文件</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"2-bzip2命令\">2. <code>bzip2</code>命令<a class=\"anchor\" href=\"#2-bzip2命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>bzip2</code>提供比<code>gzip</code>更高的<strong>压缩比</strong>，但压缩和解压缩速度相对较慢，且占用更多内存。</p><ul>\n<li><strong>功能：</strong> 压缩或解压缩文件。默认会生成 .bz2 后缀的压缩文件并删除原文件。</li>\n<li><strong>特点：</strong>  压缩比高，速度慢，资源占用相对较高。</li>\n</ul><p><strong>常用选项：</strong></p><ul>\n<li><code>-d</code>, —decompress：解压缩。等同于 bunzip2。</li>\n<li><code>-f</code>, —force：强制执行。</li>\n<li><code>-k</code>, —keep：保留原始文件。</li>\n<li><code>-v</code>, —verbose：显示详细信息。</li>\n<li><code>-c</code>, —stdout：输出到标准输出。</li>\n<li><code>-num</code>，(e.g. -1 到 -9)：设置压缩级别，默认 -9。</li>\n</ul><p><strong>使用示例：</strong></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:63ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">bzip2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mydocument.txt</span><span style=\"--0:#24292E;--1:#E1E4E8\">          </span><span style=\"--0:#616972;--1:#99A0A6\"># 压缩文件，生成 mydocument.txt.bz2</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">bzip2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-k</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mydocument.txt</span><span style=\"--0:#24292E;--1:#E1E4E8\">       </span><span style=\"--0:#616972;--1:#99A0A6\"># 压缩文件并保留原文件</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">bzip2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-d</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mydocument.txt.bz2</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#616972;--1:#99A0A6\"># 解压缩文件</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">bzcat</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mydocument.txt.bz2</span><span style=\"--0:#24292E;--1:#E1E4E8\">      </span><span style=\"--0:#616972;--1:#99A0A6\">#  查看压缩文件内容（不解压）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">bzip2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-c</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-9</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mydocument.txt</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mydocument.txt.bz2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#616972;--1:#99A0A6\"># 最佳压缩比压缩并保留原文件</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"3-xz命令\">3. <code>xz</code>命令<a class=\"anchor\" href=\"#3-xz命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>xz</code></p><ul>\n<li><strong>功能</strong>： 压缩或解压缩文件。默认会生成 <code>.xz</code> 后缀的压缩文件并删除原文件。</li>\n<li><strong>特点</strong>： 压缩比最高，速度最慢，压缩时内存消耗最大。</li>\n</ul><p><strong>常用选项：</strong></p><ul>\n<li><code>-d</code>, <code>--decompress</code>：解压缩。等同于 <code>unxz</code>。</li>\n<li><code>-f</code>, <code>--force</code>：强制执行。</li>\n<li><code>-k</code>, <code>--keep</code>：保留原始文件。</li>\n<li><code>-c</code>, <code>--stdout</code>：输出到标准输出。</li>\n<li><code>-v</code>, <code>--verbose</code>：显示详细信息。</li>\n<li><code>-num</code>, (e.g. -0 到 -9)：设置压缩级别，默认 -6。</li>\n<li><code>-l</code>, <code>--list</code>：列出压缩文件信息。</li>\n</ul><p><strong>使用示例：</strong></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:45ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">xz</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mydata.log</span><span style=\"--0:#24292E;--1:#E1E4E8\">         </span><span style=\"--0:#616972;--1:#99A0A6\"># 压缩文件，生成 mydata.log.xz</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">xz</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-k</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mydata.log</span><span style=\"--0:#24292E;--1:#E1E4E8\">      </span><span style=\"--0:#616972;--1:#99A0A6\"># 压缩文件并保留原文件</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">xz</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-d</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mydata.log.xz</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#616972;--1:#99A0A6\"># 解压缩文件</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">xzcat</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mydata.log.xz</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#616972;--1:#99A0A6\"># 查看压缩文件内容 (不解压)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">xz</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-l</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mydata.log.xz</span><span style=\"--0:#24292E;--1:#E1E4E8\">   </span><span style=\"--0:#616972;--1:#99A0A6\"># 列出压缩文件信息</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"4-tar命令\">4. <code>tar</code>命令<a class=\"anchor\" href=\"#4-tar命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>tar</code>（Tape Archive）是一个归档（打包）工具，本身不进行压缩。它将多个文件和目录组合成一个单一的归档文件（“tarball”），常与 <code>gzip</code>、<code>bzip2</code>、<code>xz</code> 结合使用。</p><ul>\n<li><strong>功能</strong>： 创建归档文件、从归档中提取文件、列出归档内容。</li>\n<li><strong>特点</strong>： 仅打包，可与压缩工具结合。</li>\n</ul><p><strong>常用选项：</strong></p><ul>\n<li><code>-c</code>, <code>--create</code>：创建归档。</li>\n<li><code>-x</code>, <code>--extract</code>：提取（解包）文件。</li>\n<li><code>-t</code>, <code>--list</code>：列出归档内容。</li>\n<li><code>-f &#x3C;archive-file></code>：指定归档文件名。</li>\n<li><code>-v</code>, <code>--verbose</code>：显示详细信息。</li>\n<li><code>-z</code>, <code>--gzip</code>：使用 gzip 压缩/解压缩。</li>\n<li><code>-j</code>, <code>--bzip2</code>：使用 bzip2 压缩/解压缩。</li>\n<li><code>-J</code>, <code>--xz</code>：使用 xz 压缩/解压缩。</li>\n<li><code>-C &#x3C;directory></code>：提取时，将文件更改到指定目录。</li>\n<li><code>-p</code>, 保留备份数据的原本权限与属性，常用于备份(-c)重要的配置文件。</li>\n<li><code>-P</code>, 保留绝对路径，亦即允许备份数据中含有根目录存在之意。</li>\n<li><code>--exclude=FILE</code>, 在压缩的过程中不要将FILE打包。</li>\n</ul><p><strong>常见组合和使用示例：</strong></p><ul>\n<li><code>.tar.gz</code>或 <code>.tgz</code>：<code>tar + gzip</code></li>\n<li><code>.tar.bz2</code>或<code>.tbz</code>：<code>tar + bzip2</code></li>\n<li><code>.tar.xz</code>或 <code>.txz</code>：<code>tar + xz</code></li>\n</ul><p><strong>使用示例：</strong></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:58ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 打包并用gzip 压缩</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">tar</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-czvf</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">myarchive.tar.gz</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/path/to/my/directory</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">file1.txt</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 解压缩并解包 .tar.gz 文件</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">tar</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-xzvf</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">myarchive.tar.gz</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 解压缩 .tar.gz 文件到指定目录</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">tar</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-xzvf</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">myarchive.tar.gz</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 打包并用 bzip2 压缩</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">tar</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-cjvf</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">finalarchive.tar.bz2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/path/to/final/data</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 打包并用 xz 压缩</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">tar</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-cJvf</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">finalarchive.tar.xz</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/path/to/final/data</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 简建议-f单独写一个选项 (比较不会忘记)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 查询</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">tar</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-jtv</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-f</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">filename.tar.bz2</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 备份/etc文件夹</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">time</span><span style=\"--0:#24292E;--1:#E1E4E8\"> tar -czvp -f /root/etc.tar.gz /etc </span><span style=\"--0:#616972;--1:#99A0A6\"># 多了time会显示程序运行的时间</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">time</span><span style=\"--0:#24292E;--1:#E1E4E8\"> tar -cjvp -f /root/etc.tar.bz2 /etc</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span style=\"--0:#BF3441;--1:#F97583\">time</span><span style=\"--0:#24292E;--1:#E1E4E8\"> tar -cJvp -f /root/etc.tar.xz /etc</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 仅解开单一文件的方法</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 先找到我们要找的文件名，假设解开 shadow文件</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">tar</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-jtv</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-f</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/root/etc.tar.bz2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">|</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">grep</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">'shadow'</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">tar</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-jxv</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-f</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">打包文件.tar.bz2</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#032F62;--1:#9ECBFF\">待解开文件名</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">tar</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-jxv</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-f</span><span style=\"--0:#24292E;--1:#E1E4E8\">  </span><span style=\"--0:#032F62;--1:#9ECBFF\">/root/etc.tar.bz2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">etc/shadow</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 打包某目录但不含该目录下的某些文件的做法</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">tar</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-jcv</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-f</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/root/system.tar.bz2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">--exclude=/root/etc</span><span style=\"--0:#BF3441;--1:#F97583\">*</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">--exclude=/root/system.tar.bz2 </span><span style=\"--0:#032F62;--1:#9ECBFF\">/etc</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/root</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 仅备份比某个时刻还要新的文件</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">find</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/etc</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-newer</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/etc/shadow</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 找到一个指定的日期</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">tar</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-jcv</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-f</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/root/etc.newer.then.passwd.tar.bz2</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">\\</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">--newer-mtime=</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"2025/06/06\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/etc/</span><span style=\"--0:#005CC5;--1:#79B8FF\">*</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 标准输入输出流重定向和管道符结合</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 将/etc整个目录一边打包一边在/tmp解开</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\"><span style=\"--0:#005CC5;--1:#79B8FF\">cd</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/tmp</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">tar</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-czvf</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">/etc</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">|</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#6F42C1;--1:#B392F0\">tar</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-xvf</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">-</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\"><span style=\"--0:#616972;--1:#99A0A6\"># 这个操作有点像cp -r /etc /tmp</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>如果想要两行输入时，最后面加上反斜杠<code>\\</code>并立刻按下[Enter]就能够到第二行继续输入了。</p>\n</blockquote><hr></section></section><section><h2 id=\"光盘写入工具\">光盘写入工具<a class=\"anchor\" href=\"#光盘写入工具\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"mkisofscdrecord\"><code>mkisofs</code>、<code>cdrecord</code><a class=\"anchor\" href=\"#mkisofscdrecord\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3></section><section><h3 id=\"1-mkisofs-命令\">1. <code>mkisofs</code> 命令<a class=\"anchor\" href=\"#1-mkisofs-命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>mkisofs</code> (或在新版系统上通常是 <code>genisoimage</code>) 用于从一个目录树创建 ISO 9660 文件系统映像文件。这种映像文件常用于制作 CD/DVD/BD 镜像，以便刻录或在虚拟机中使用。</p><ul>\n<li><strong>功能：</strong> 将文件和目录打包成 ISO 格式的镜像文件。</li>\n<li><strong>适用场景：</strong> 制作可引导光盘镜像、数据光盘镜像、虚拟机安装盘等。</li>\n</ul><p><strong>基本语法：</strong></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:36ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">mkisofs</span><span style=\"--0:#24292E;--1:#E1E4E8\"> [选项] -o &#x3C;输出文件名.iso> &#x3C;源目录/文件></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>常用选项：</strong></p><ul>\n<li><code>-o &#x3C;输出文件名.iso></code>：指定输出的 ISO 镜像文件名。这是最重要的选项，如果没有指定，输出会发送到标准输出。</li>\n<li><code>-r, --rock-ridge</code>：生成 Rock Ridge 扩展，保留 UNIX 文件权限、所有者、组、符号链接、长文件名等 POSIX 属性。强烈推荐使用，以便在 Linux/Unix 系统上正确读取。</li>\n<li><code>-J, --joliet</code>：生成 Joliet 扩展，支持 Windows 上的长文件名和 Unicode 字符。如果你希望在 Windows 和 Linux 上都能良好兼容，通常会同时使用 -r 和 -J。</li>\n<li><code>-V &#x3C;卷标>, --volid &#x3C;卷标></code>：设置 ISO 镜像的卷标 (Volume ID)，即光盘插入系统后显示的名称。</li>\n<li><code>-b &#x3C;引导文件>, --boot-image &#x3C;引导文件></code>：指定用于创建可引导光盘的引导镜像文件（通常是 isolinux/isolinux.bin 或 grub/efi.img）。需要配合其他选项使用，如 -c。</li>\n<li><code>-c &#x3C;引导目录/文件>, --boot-info-table &#x3C;引导目录/文件></code>：指定引导信息目录或文件，通常与 -b 结合使用，用于生成引导目录。</li>\n<li><code>-udf</code>：生成 UDF 文件系统，通常用于 DVD 和蓝光。</li>\n<li><code>-m &#x3C;模式>, --exclude &#x3C;模式></code>：排除与指定模式匹配的文件。</li>\n<li><code>-x &#x3C;目录>, --exclude-dir &#x3C;目录></code>：排除指定的目录。</li>\n</ul><p><strong>使用示例：</strong></p><ol>\n<li>创建最基本的 ISO 镜像：</li>\n</ol><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:55ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">mkdir</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">my_iso_content</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#005CC5;--1:#79B8FF\">echo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Hello world\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">my_iso_content/hello.txt</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">mkdir</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">my_iso_content/subdir</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#005CC5;--1:#79B8FF\">echo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Another file\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#BF3441;--1:#F97583\">></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">my_iso_content/subdir/another.txt</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">mkisofs</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-o</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">mydata.iso</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">my_iso_content</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ol start=\"2\">\n<li>创建 Linux/Windows 兼容的 ISO 镜像 (常用)：</li>\n</ol><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:69ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">mkisofs</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-o</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">my_cross_platform.iso</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-r</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-J</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-V</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"MyDataDisk\"</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">my_iso_content</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><code>-r</code> (Rock Ridge) 用于 Linux/Unix 兼容，<code>-J</code>(Joliet) 用于 Windows 兼容，<code>-V</code> 设置卷标。</p></section><section><h3 id=\"2-cdrecord-命令\">2. <code>cdrecord</code> 命令<a class=\"anchor\" href=\"#2-cdrecord-命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>cdrecord</code> (现在通常是 <code>wodim</code> 或 <code>cdrskin</code> 的符号链接) 是一个用于刻录 CD、DVD、蓝光盘的命令行工具。它通常与 <code>mkisofs</code> 生成的 ISO 镜像配合使用。</p><ul>\n<li><strong>功能</strong>： 将 ISO 镜像或其他数据刻录到光盘上。</li>\n<li><strong>适用场景</strong>： 制作物理光盘、备份数据到光盘、刻录音乐 CD。</li>\n</ul><p><strong>基本语法：</strong></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:26ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">cdrecord</span><span style=\"--0:#24292E;--1:#E1E4E8\"> [选项] &#x3C;要刻录的文件.iso></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>常用选项：</strong></p><ul>\n<li><code>dev=&#x3C;scsi_id>|/dev/&#x3C;device></code>：指定刻录设备。这是最重要的选项。\n<ul>\n<li><code>&#x3C;scsi_id></code> 格式通常是 bus,target,lun (例如 0,0,0)，可以通过 cdrecord —scanbus 命令查找。</li>\n<li><code>/dev/&#x3C;device></code> 格式是你的光驱设备文件（例如 /dev/sr0 或 /dev/cdrom）。</li>\n</ul>\n</li>\n<li><code>speed=&#x3C;速度></code>：设置刻录速度（例如 <code>speed=4</code>，<code>speed=8</code>，<code>speed=max</code>）。</li>\n<li><code>-v</code>, <code>--verbose</code>：显示详细信息，包括刻录进度。</li>\n<li><code>blank=&#x3C;模式></code>：擦除可擦写光盘（CD-RW/DVD-RW）。\n<ul>\n<li><code>fast</code>：快速擦除，只擦除介质的引导区。</li>\n<li><code>all</code>：完全擦除，擦除整个介质。</li>\n</ul>\n</li>\n<li><code>-dummy</code>：进行一次虚拟刻录（测试刻录），不实际写入数据。用于在真正刻录前检查设置。</li>\n<li><code>-eject</code>：刻录完成后弹出光盘。</li>\n</ul><p><strong>使用示例：</strong></p><ol>\n<li><strong>查找刻录设备：</strong></li>\n</ol><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:18ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">cdrecord</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">--scanbus</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ol start=\"2\">\n<li><strong>刻录 ISO 镜像到光盘</strong></li>\n</ol><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:49ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">cdrecord</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">dev=/dev/sr0</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">speed=</span><span style=\"--0:#005CC5;--1:#79B8FF\">8</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-v</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">my_data.iso</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ol start=\"3\">\n<li><strong>擦除 CD-RW 光盘</strong></li>\n</ol><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:37ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">cdrecord</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">dev=/dev/sr0</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">blank=fast</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ol start=\"4\">\n<li><strong>测试刻录 (虚拟刻录)：</strong></li>\n</ol><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:45ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">cdrecord</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">dev=/dev/sr0</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">-dummy</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">my_data.iso</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section><section><h2 id=\"其他压缩与备份工具\">其他压缩与备份工具<a class=\"anchor\" href=\"#其他压缩与备份工具\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"dd-命令\"><code>dd</code> 命令<a class=\"anchor\" href=\"#dd-命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>dd</code> 命令 (dataset definition) 是一个功能强大的块级数据复制工具。它以字节为单位复制数据，因此可以用于复制整个硬盘、分区、创建镜像文件、制作启动盘等。</p><ul>\n<li><strong>功能</strong>： 按块复制数据。</li>\n<li><strong>适用场景</strong>： 磁盘克隆、分区备份与恢复、制作可引导 USB 驱动器、创建交换文件、安全擦除数据。</li>\n</ul><p><strong>基本语法：</strong></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:27ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">dd</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">if=&#x3C;输入文件></span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">of=&#x3C;输出文件></span><span style=\"--0:#24292E;--1:#E1E4E8\"> [选项]</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>使用示例：</strong></p><ol>\n<li><strong>克隆整个硬盘 (数据备份/迁移)：</strong></li>\n</ol><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:53ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">dd</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">if=/dev/sda</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">of=/dev/sdb</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">bs=4M</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">status=progress</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ol start=\"2\">\n<li><strong>备份分区到文件：</strong></li>\n</ol><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:77ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">dd</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">if=/dev/sda1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">of=/path/to/backup/sda1_backup.img</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">bs=4M</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">status=progress</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ol start=\"3\">\n<li><strong>制作可引导 USB 驱动器 (从 ISO 镜像)：</strong></li>\n</ol><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:75ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">sudo</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">dd</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">if=ubuntu-24.04-desktop-amd64.iso</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">of=/dev/sdX</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">bs=4M</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">status=progress</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ol start=\"4\">\n<li><strong>创建大文件（例如用于交换文件或测试文件）：</strong></li>\n</ol><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:53ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">dd</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">if=/dev/zero</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">of=my_large_flie.img</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">bs=1M</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#032F62;--1:#9ECBFF\">count=</span><span style=\"--0:#005CC5;--1:#79B8FF\">1024</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p><code>dd</code> 是一个<strong>非常强大的命令</strong>，也被称为<font color=\"red\"><ins>“数据毁灭者”</ins></font>。一个参数的错误就可能导致数据永久丢失。在使用 <code>dd</code> 时，请务必再三确认 <code>if</code> 和 <code>of</code> 参数。</p>\n</blockquote></section><section><h3 id=\"\"></h3><hr></section></section></section>\n<section><h1 id=\"shell-与-shellscripts\">Shell 与 ShellScripts<a class=\"anchor\" href=\"#shell-与-shellscripts\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h2 id=\"vivim与程序编辑器\">Vi、Vim与程序编辑器<a class=\"anchor\" href=\"#vivim与程序编辑器\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2></section></section>","metadata":{"headings":[{"depth":1,"slug":"linux文件目录与磁盘格式","text":"Linux文件、目录与磁盘格式#"},{"depth":2,"slug":"用户与用户组","text":"用户与用户组#"},{"depth":3,"slug":"-一useradd添加用户","text":"🧑‍💻 一、useradd：添加用户#"},{"depth":3,"slug":"-二groupadd添加用户组","text":"👥 二、groupadd：添加用户组#"},{"depth":3,"slug":"-三chown更改文件目录的属主和属组change-owner","text":"📂 三、chown：更改文件/目录的属主和属组（change owner）#"},{"depth":3,"slug":"-四chgrp只更改属组change-group","text":"👪 四、chgrp：只更改属组（change group）#"},{"depth":3,"slug":"-五chmod更改权限change-mode","text":"🔐 五、chmod：更改权限（change mode）#"},{"depth":3,"slug":"-六usermod修改用户信息","text":"👤 六、usermod：修改用户信息#"},{"depth":3,"slug":"-七userdel删除用户","text":"❌ 七、userdel：删除用户#"},{"depth":3,"slug":"-八groupdel删除组","text":"👥 八、groupdel：删除组#"},{"depth":3,"slug":"-示例设置目录权限给指定用户和组","text":"🧪 示例：设置目录权限给指定用户和组：#"},{"depth":3,"slug":"访问权限相关","text":"访问权限相关#"},{"depth":2,"slug":"目录与路径","text":"目录与路径#"},{"depth":3,"slug":"-cd---change-directory","text":"😎 cd - change directory#"},{"depth":3,"slug":"-pwd---output-the-current-working-directory","text":"😋 pwd - output the current working directory#"},{"depth":3,"slug":"-mkdir---make-directories","text":"🆕 mkdir - make directories#"},{"depth":3,"slug":"-rmdir---remove-empty-directories","text":"❌ rmdir - remove empty directories#"},{"depth":3,"slug":"-一文件与目录操作类","text":"📁 一、文件与目录操作类#"},{"depth":3,"slug":"-二查看文件内容类","text":"📖 二、查看文件内容类#"},{"depth":3,"slug":"-三权限与属性管理","text":"🔒 三、权限与属性管理#"},{"depth":3,"slug":"-四文件类型与状态","text":"🧩 四、文件类型与状态#"},{"depth":3,"slug":"-五文件查找与定位","text":"🔎 五、文件查找与定位#"},{"depth":3,"slug":"-extra文件特殊权限suidsgidsbit","text":"💨 Extra、文件特殊权限：SUID、SGID、SBIT#"},{"depth":2,"slug":"磁盘与文件系统","text":"磁盘与文件系统#"},{"depth":3,"slug":"一磁盘分区-partitioning","text":"一、磁盘分区 (Partitioning)#"},{"depth":4,"slug":"1-查看磁盘信息","text":"1. 查看磁盘信息#"},{"depth":4,"slug":"2-分区工具","text":"2. 分区工具#"},{"depth":3,"slug":"二文件系统格式化-formatting-file-systems","text":"二、文件系统格式化 (Formatting File Systems)#"},{"depth":3,"slug":"三分区分卷-logical-volume-management---lvm","text":"三、分区分卷 (Logical Volume Management - LVM)#"},{"depth":4,"slug":"lvm-基本概念","text":"LVM 基本概念#"},{"depth":4,"slug":"lvm-常用命令","text":"LVM 常用命令#"},{"depth":3,"slug":"四分区挂载-mounting","text":"四、分区挂载 (Mounting)#"},{"depth":4,"slug":"1-创建挂载点","text":"1. 创建挂载点#"},{"depth":4,"slug":"2-临时挂载","text":"2. 临时挂载#"},{"depth":4,"slug":"3-卸载分区","text":"3. 卸载分区#"},{"depth":4,"slug":"4-永久挂载-etcfstab","text":"4. 永久挂载 (/etc/fstab)#"},{"depth":2,"slug":"文件与文件系统的压缩","text":"文件与文件系统的压缩#"},{"depth":2,"slug":"核心原理","text":"核心原理#"},{"depth":3,"slug":"数据冗余的消除","text":"数据冗余的消除#"},{"depth":3,"slug":"无损压缩-vs-有损压缩","text":"无损压缩 vs. 有损压缩#"},{"depth":2,"slug":"常见的linux压缩工具及其原理简述","text":"常见的Linux压缩工具及其原理简述#"},{"depth":3,"slug":"gzipbzip2xztar-命令详解","text":"gzip、bzip2、xz、tar 命令详解#"},{"depth":3,"slug":"1-gzip-命令","text":"1. gzip 命令#"},{"depth":3,"slug":"2-bzip2命令","text":"2. bzip2命令#"},{"depth":3,"slug":"3-xz命令","text":"3. xz命令#"},{"depth":3,"slug":"4-tar命令","text":"4. tar命令#"},{"depth":2,"slug":"光盘写入工具","text":"光盘写入工具#"},{"depth":3,"slug":"mkisofscdrecord","text":"mkisofs、cdrecord#"},{"depth":3,"slug":"1-mkisofs-命令","text":"1. mkisofs 命令#"},{"depth":3,"slug":"2-cdrecord-命令","text":"2. cdrecord 命令#"},{"depth":2,"slug":"其他压缩与备份工具","text":"其他压缩与备份工具#"},{"depth":3,"slug":"dd-命令","text":"dd 命令#"},{"depth":3,"slug":"","text":""},{"depth":1,"slug":"shell-与-shellscripts","text":"Shell 与 ShellScripts#"},{"depth":2,"slug":"vivim与程序编辑器","text":"Vi、Vim与程序编辑器#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"鸟哥Linux笔记","published":"2025-06-08T00:00:00.000Z","description":"Linux 是什么!?","category":"Linux","tags":["linux","shell","command","fucntion","c"],"author":"Akeboshi Himari","draft":false,"minutes":42,"words":8308,"excerpt":"useradd、groupadd、chown、chgrp、chmod、usermod、userdel、groupdel"},"imagePaths":[]}},"collection":"posts"}],"2025-05-05":[{"id":"ssh_keygen","data":{"title":"ssh-keygen generate","published":"2025-05-05T00:00:00.000Z","draft":false,"description":"I have a key and you have a door.This key refers to private key and door are public key.","image":"","tags":["ssh","ssh-keygen","remote login"],"category":"ssh","lang":"","pinned":false,"author":"Akeboshi Himari","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"Bat编程中的参数修饰符","prevSlug":"bat_parameter_modifiers","nextTitle":"鸟哥Linux笔记","nextSlug":"shell_command"},"body":"# 🛠️ 一、在本地生成 SSH 密钥对\n\n## 打开终端，输入以下命令\n\n~~~\nssh-keygen -t rsa -b 4096 -C \"your_email@example.com\"\n~~~\n\n## 参数说明\n\n- `-t rsa`:指定密钥类型为RSA\n- `-b 4096`:指定密钥长度(4096比较安全)\n- `-C`:添加注释，可选\n\n## 然后会提示你保存路径，默认是\n\n`/home/your_user/.ssh/id_rsa`\n\n按回车即可（使用默认路径），然后设置密码（也可以直接回车跳过，无密码）\n\n# 📂 二、将公钥复制到服务器\n\n## 方法1：使用`ssh-copy-id`\n\n`ssh-copy-id username@server_ip`\n`ssh-copy-id Himari@106.15.58.39`\n\n它会自动把本地的 ~/.ssh/id_rsa.pub 添加到服务器的 ~/.ssh/authorized_keys 中。\n\n你会被要求输入服务器密码，配置成功后就可以免密登录了。\n\n## 方法2：手动复制公钥\n\n1. 查看本地公钥内容\n\n```\ncat ~/.ssh/id_rsa.pub\n```\n\n2. 登录远程服务器\n\n```\nssh username@server_ip\n```\n\n3. 在服务器上创建`.ssh`文件夹(如果没有):\n\n```\nmkdir -p ~/.ssh\nchmod 700 ~/.ssh\n```\n\n4. 编辑`authorized_keys`文件，将公钥粘贴进去\n\n```\nnvim ~/.ssh/authorized_keys\n```\n\n粘贴后保存，然后执行\n\n```\nchmod 600 ~/.ssh/authorized_keys\n```\n\n# 🔐 三、测试免密登录\n\n## 退出服务器，然后尝试重新连接\n\n```\nssh username@server_ip\n```\n\n如果一切配置正确，将无需输入密码，自动登录。","filePath":"src/content/posts/ssh_keygen.md","digest":"f2bf8e3c13e62739","rendered":{"html":"<section><h1 id=\"️-一在本地生成-ssh-密钥对\">🛠️ 一、在本地生成 SSH 密钥对<a class=\"anchor\" href=\"#️-一在本地生成-ssh-密钥对\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h2 id=\"打开终端输入以下命令\">打开终端，输入以下命令<a class=\"anchor\" href=\"#打开终端输入以下命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:53ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">ssh-keygen -t rsa -b 4096 -C \"your_email@example.com\"</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"参数说明\">参数说明<a class=\"anchor\" href=\"#参数说明\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li><code>-t rsa</code>:指定密钥类型为RSA</li>\n<li><code>-b 4096</code>:指定密钥长度(4096比较安全)</li>\n<li><code>-C</code>:添加注释，可选</li>\n</ul></section><section><h2 id=\"然后会提示你保存路径默认是\">然后会提示你保存路径，默认是<a class=\"anchor\" href=\"#然后会提示你保存路径默认是\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><code>/home/your_user/.ssh/id_rsa</code></p><p>按回车即可（使用默认路径），然后设置密码（也可以直接回车跳过，无密码）</p></section></section>\n<section><h1 id=\"-二将公钥复制到服务器\">📂 二、将公钥复制到服务器<a class=\"anchor\" href=\"#-二将公钥复制到服务器\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h2 id=\"方法1使用ssh-copy-id\">方法1：使用<code>ssh-copy-id</code><a class=\"anchor\" href=\"#方法1使用ssh-copy-id\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><code>ssh-copy-id username@server_ip</code>\n<code>ssh-copy-id Himari@106.15.58.39</code></p><p>它会自动把本地的 ~/.ssh/id_rsa.pub 添加到服务器的 ~/.ssh/authorized_keys 中。</p><p>你会被要求输入服务器密码，配置成功后就可以免密登录了。</p></section><section><h2 id=\"方法2手动复制公钥\">方法2：手动复制公钥<a class=\"anchor\" href=\"#方法2手动复制公钥\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ol>\n<li>查看本地公钥内容</li>\n</ol><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:21ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">cat ~/.ssh/id_rsa.pub</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ol start=\"2\">\n<li>登录远程服务器</li>\n</ol><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:22ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">ssh username@server_ip</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ol start=\"3\">\n<li>在服务器上创建<code>.ssh</code>文件夹(如果没有):</li>\n</ol><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:16ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">mkdir -p ~/.ssh</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">chmod 700 ~/.ssh</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ol start=\"4\">\n<li>编辑<code>authorized_keys</code>文件，将公钥粘贴进去</li>\n</ol><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:27ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">nvim ~/.ssh/authorized_keys</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>粘贴后保存，然后执行</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:32ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">chmod 600 ~/.ssh/authorized_keys</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section>\n<section><h1 id=\"-三测试免密登录\">🔐 三、测试免密登录<a class=\"anchor\" href=\"#-三测试免密登录\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h2 id=\"退出服务器然后尝试重新连接\">退出服务器，然后尝试重新连接<a class=\"anchor\" href=\"#退出服务器然后尝试重新连接\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:22ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">ssh username@server_ip</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>如果一切配置正确，将无需输入密码，自动登录。</p></section></section>","metadata":{"headings":[{"depth":1,"slug":"️-一在本地生成-ssh-密钥对","text":"🛠️ 一、在本地生成 SSH 密钥对#"},{"depth":2,"slug":"打开终端输入以下命令","text":"打开终端，输入以下命令#"},{"depth":2,"slug":"参数说明","text":"参数说明#"},{"depth":2,"slug":"然后会提示你保存路径默认是","text":"然后会提示你保存路径，默认是#"},{"depth":1,"slug":"-二将公钥复制到服务器","text":"📂 二、将公钥复制到服务器#"},{"depth":2,"slug":"方法1使用ssh-copy-id","text":"方法1：使用ssh-copy-id#"},{"depth":2,"slug":"方法2手动复制公钥","text":"方法2：手动复制公钥#"},{"depth":1,"slug":"-三测试免密登录","text":"🔐 三、测试免密登录#"},{"depth":2,"slug":"退出服务器然后尝试重新连接","text":"退出服务器，然后尝试重新连接#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"ssh-keygen generate","published":"2025-05-05T00:00:00.000Z","description":"I have a key and you have a door.This key refers to private key and door are public key.","category":"ssh","tags":["ssh","ssh-keygen","remote login"],"author":"Akeboshi Himari","draft":false,"minutes":1,"words":283,"excerpt":"/home/your_user/.ssh/id_rsa"},"imagePaths":[]}},"collection":"posts"}],"2025-05-04":[{"id":"bat_parameter_modifiers","data":{"title":"Bat编程中的参数修饰符","published":"2025-05-04T00:00:00.000Z","draft":false,"description":"也许是一个比较重要的东西?","image":"","tags":["bat","cmd"],"category":"Bat","lang":"","pinned":false,"author":"Akeboshi Himari","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"Windows Network Troubleshooting CheatSheet","prevSlug":"windows_network_troubleshooting_cheatsheet","nextTitle":"ssh-keygen generate","nextSlug":"ssh_keygen"},"body":"# Windows 批处理参数修饰符说明文档\n\n## 📌 什么是参数修饰符？\n\n参数修饰符用于提取文件路径变量中的特定部分，如文件名、扩展名、路径等。常用于批处理脚本中的 `%0`, `%1`, `%%F` 等参数。\n\n---\n\n## 🔧 常见语法格式\n\n```\n%~修饰符N%\n%%~修饰符F%%\n```\n## 🧩 参数修饰符一览表\n| 修饰符  | 含义               | 示例（输入：`C:\\Path\\file.txt`） | 输出示例                 |\n| ---- | ---------------- | ------------------------- | -------------------- |\n| `~f` | 全路径（Full Path）   | `%~f1`                    | `C:\\Path\\file.txt`   |\n| `~d` | 驱动器（Drive）       | `%~d1`                    | `C:`                 |\n| `~p` | 路径（Path）         | `%~p1`                    | `\\Path\\`             |\n| `~n` | 文件名（Name，无扩展）    | `%~n1`                    | `file`               |\n| `~x` | 扩展名（eXtension）   | `%~x1`                    | `.txt`               |\n| `~s` | 短文件名（8.3 格式）     | `%~s1`                    | `C:\\PATH\\FILE~1.TXT` |\n| `~a` | 文件属性（Attributes） | `%~a1`                    | `--a--------`        |\n| `~t` | 修改时间（Time）       | `%~t1`                    | `2025/05/02 12:00`   |\n| `~z` | 文件大小（siZe）       | `%~z1`                    | `15324`              |\n## 🧩 组合使用示例\n| 表达式       | 含义                   | 示例输出               |\n| --------- | -------------------- | ------------------ |\n| `%~dp1`   | 驱动器 + 路径             | `C:\\Path\\`         |\n| `%~nx1`   | 文件名 + 扩展名            | `file.txt`         |\n| `%~dpnx1` | 驱动器 + 路径 + 文件名 + 扩展名 | `C:\\Path\\file.txt` |\n## 📘 实用示例（在 FOR 循环中）\n~~~\n@echo off\nfor %%F in (*.txt) do (\n    echo 文件路径：%%~fF\n    echo 文件名：%%~nF\n    echo 扩展名：%%xF\n    echo --------    \n)\n~~~\n\n## 🧩 常见修饰符总览（适用于 %%F）\n| 写法       | 含义             |\n| -------- | -------------- |\n| `%%~fF`  | 全路径（Full path） |\n| `%%~dF`  | 驱动器盘符          |\n| `%%~pF`  | 路径（不含驱动器）      |\n| `%%~nF`  | 文件名（不含扩展名）     |\n| `%%~xF`  | 扩展名            |\n| `%%~nxF` | 文件名 + 扩展名      |\n| `%%~dpF` | 驱动器 + 路径       |\n## 🔍 示例脚本\n~~~\n@echo off\nfor %%F in (*.txt) do (\n    echo 文件完整路径:%%~fF\n    echo 文件名(无扩展名):%%~nF\n    echo ---------\n)\n~~~\n如果当前目录下有 report.txt 和 log.txt，输出大致如下：\n~~~\n文件完整路径：C:\\Test\\report.txt\n文件名（无扩展名）：report\n---------------\n文件完整路径：C:\\Test\\log.txt\n文件名（无扩展名）：log\n---------------\n~~~","filePath":"src/content/posts/bat_parameter_modifiers.md","digest":"ff0e38cc405e38a4","rendered":{"html":"<section><h1 id=\"windows-批处理参数修饰符说明文档\">Windows 批处理参数修饰符说明文档<a class=\"anchor\" href=\"#windows-批处理参数修饰符说明文档\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h2 id=\"-什么是参数修饰符\">📌 什么是参数修饰符？<a class=\"anchor\" href=\"#-什么是参数修饰符\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>参数修饰符用于提取文件路径变量中的特定部分，如文件名、扩展名、路径等。常用于批处理脚本中的 <code>%0</code>, <code>%1</code>, <code>%%F</code> 等参数。</p><hr></section><section><h2 id=\"-常见语法格式\">🔧 常见语法格式<a class=\"anchor\" href=\"#-常见语法格式\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:9ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">%~修饰符N%</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">%%~修饰符F%%</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"-参数修饰符一览表\">🧩 参数修饰符一览表<a class=\"anchor\" href=\"#-参数修饰符一览表\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>修饰符</th><th>含义</th><th>示例（输入：<code>C:\\Path\\file.txt</code>）</th><th>输出示例</th></tr></thead><tbody><tr><td><code>~f</code></td><td>全路径（Full Path）</td><td><code>%~f1</code></td><td><code>C:\\Path\\file.txt</code></td></tr><tr><td><code>~d</code></td><td>驱动器（Drive）</td><td><code>%~d1</code></td><td><code>C:</code></td></tr><tr><td><code>~p</code></td><td>路径（Path）</td><td><code>%~p1</code></td><td><code>\\Path\\</code></td></tr><tr><td><code>~n</code></td><td>文件名（Name，无扩展）</td><td><code>%~n1</code></td><td><code>file</code></td></tr><tr><td><code>~x</code></td><td>扩展名（eXtension）</td><td><code>%~x1</code></td><td><code>.txt</code></td></tr><tr><td><code>~s</code></td><td>短文件名（8.3 格式）</td><td><code>%~s1</code></td><td><code>C:\\PATH\\FILE~1.TXT</code></td></tr><tr><td><code>~a</code></td><td>文件属性（Attributes）</td><td><code>%~a1</code></td><td><code>--a--------</code></td></tr><tr><td><code>~t</code></td><td>修改时间（Time）</td><td><code>%~t1</code></td><td><code>2025/05/02 12:00</code></td></tr><tr><td><code>~z</code></td><td>文件大小（siZe）</td><td><code>%~z1</code></td><td><code>15324</code></td></tr></tbody></table></section><section><h2 id=\"-组合使用示例\">🧩 组合使用示例<a class=\"anchor\" href=\"#-组合使用示例\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>表达式</th><th>含义</th><th>示例输出</th></tr></thead><tbody><tr><td><code>%~dp1</code></td><td>驱动器 + 路径</td><td><code>C:\\Path\\</code></td></tr><tr><td><code>%~nx1</code></td><td>文件名 + 扩展名</td><td><code>file.txt</code></td></tr><tr><td><code>%~dpnx1</code></td><td>驱动器 + 路径 + 文件名 + 扩展名</td><td><code>C:\\Path\\file.txt</code></td></tr></tbody></table></section><section><h2 id=\"-实用示例在-for-循环中\">📘 实用示例（在 FOR 循环中）<a class=\"anchor\" href=\"#-实用示例在-for-循环中\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:23ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">@echo off</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">for %%F in (*.txt) do (</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">echo 文件路径：%%~fF</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">echo 文件名：%%~nF</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">echo 扩展名：%%xF</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">echo --------</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"-常见修饰符总览适用于-f\">🧩 常见修饰符总览（适用于 %%F）<a class=\"anchor\" href=\"#-常见修饰符总览适用于-f\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>写法</th><th>含义</th></tr></thead><tbody><tr><td><code>%%~fF</code></td><td>全路径（Full path）</td></tr><tr><td><code>%%~dF</code></td><td>驱动器盘符</td></tr><tr><td><code>%%~pF</code></td><td>路径（不含驱动器）</td></tr><tr><td><code>%%~nF</code></td><td>文件名（不含扩展名）</td></tr><tr><td><code>%%~xF</code></td><td>扩展名</td></tr><tr><td><code>%%~nxF</code></td><td>文件名 + 扩展名</td></tr><tr><td><code>%%~dpF</code></td><td>驱动器 + 路径</td></tr></tbody></table></section><section><h2 id=\"-示例脚本\">🔍 示例脚本<a class=\"anchor\" href=\"#-示例脚本\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:24ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">@echo off</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">for %%F in (*.txt) do (</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">echo 文件完整路径:%%~fF</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">echo 文件名(无扩展名):%%~nF</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">echo ---------</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>如果当前目录下有 report.txt 和 log.txt，输出大致如下：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:25ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">文件完整路径：C:\\Test\\report.txt</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">文件名（无扩展名）：report</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">---------------</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">文件完整路径：C:\\Test\\log.txt</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">文件名（无扩展名）：log</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">---------------</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section>","metadata":{"headings":[{"depth":1,"slug":"windows-批处理参数修饰符说明文档","text":"Windows 批处理参数修饰符说明文档#"},{"depth":2,"slug":"-什么是参数修饰符","text":"📌 什么是参数修饰符？#"},{"depth":2,"slug":"-常见语法格式","text":"🔧 常见语法格式#"},{"depth":2,"slug":"-参数修饰符一览表","text":"🧩 参数修饰符一览表#"},{"depth":2,"slug":"-组合使用示例","text":"🧩 组合使用示例#"},{"depth":2,"slug":"-实用示例在-for-循环中","text":"📘 实用示例（在 FOR 循环中）#"},{"depth":2,"slug":"-常见修饰符总览适用于-f","text":"🧩 常见修饰符总览（适用于 %%F）#"},{"depth":2,"slug":"-示例脚本","text":"🔍 示例脚本#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"Bat编程中的参数修饰符","published":"2025-05-04T00:00:00.000Z","description":"也许是一个比较重要的东西?","category":"Bat","tags":["bat","cmd"],"author":"Akeboshi Himari","draft":false,"minutes":2,"words":375,"excerpt":"参数修饰符用于提取文件路径变量中的特定部分，如文件名、扩展名、路径等。常用于批处理脚本中的 %0, %1, %%F 等参数。"},"imagePaths":[]}},"collection":"posts"},{"id":"windows_network_troubleshooting_cheatsheet","data":{"title":"Windows Network Troubleshooting CheatSheet","published":"2025-05-04T00:00:00.000Z","draft":false,"description":"How to find out network problem fast!?","image":"","tags":["bat","cmd"],"category":"Network","lang":"","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"Advanced Calculus Formulas","prevSlug":"advanced_calculus_formula","nextTitle":"Bat编程中的参数修饰符","nextSlug":"bat_parameter_modifiers"},"body":"# 🛠 Windows 网络排障命令速查合集\n\n---\n\n## 📡 1. `ipconfig` - 查看和管理 IP 配置\n\n```cmd\nipconfig                 :: 查看基本IP配置\nipconfig /all            :: 查看详细配置（MAC、DNS、租约时间）\nipconfig /release        :: 释放当前 IP（DHCP 模式）\nipconfig /renew          :: 重新申请 IP 地址\nipconfig /flushdns       :: 清除 DNS 缓存\nipconfig /displaydns     :: 显示 DNS 缓存\n```\n\n---\n\n## 📶 2. `ping` - 测试网络连通性和延迟\n\n```cmd\nping 8.8.8.8             :: 测试公网连通\nping www.baidu.com       :: 测试域名解析和连通\nping -n 5 192.168.1.1    :: 连续 ping 5 次\nping -t 192.168.1.1      :: 持续 ping（Ctrl+C 停止）\n```\n\n---\n\n## 🌐 3. `tracert` - 路由追踪（逐跳）\n\n```cmd\ntracert www.google.com   :: 查看数据包路由路径\ntracert /d www.baidu.com :: 不解析域名，加快速度\n```\n\n---\n\n## 🔍 4. `nslookup` - 域名解析诊断\n\n```cmd\nnslookup                 :: 进入交互模式\nnslookup www.baidu.com   :: 查询域名的 IP\nnslookup 8.8.8.8         :: 查询 IP 对应的域名\nnslookup -type=mx qq.com :: 查询邮件服务器记录\n```\n\n---\n\n## 📊 5. `netstat` - 查看网络连接状态\n\n```cmd\nnetstat -a               :: 所有连接和监听端口\nnetstat -n               :: 不解析域名（显示IP）\nnetstat -an | find \"80\"  :: 查找80端口使用情况\nnetstat -b               :: 查看使用端口的程序（需管理员）\n```\n\n---\n\n## 🛣 6. `route` - 查看/修改路由表\n\n```cmd\nroute print              :: 显示当前路由表\nroute add 0.0.0.0 mask 0.0.0.0 192.168.1.1 :: 添加默认路由\nroute delete 0.0.0.0     :: 删除默认路由\n```\n\n---\n\n## 🧰 7. 其他实用工具\n\n| 工具/命令                 | 功能                         |\n|--------------------------|------------------------------|\n| `tasklist`               | 查看所有进程                 |\n| `taskkill /PID 1234 /F`  | 强制结束指定进程             |\n| `arp -a`                 | 查看本地 ARP 缓存            |\n| `netsh interface ipv4 show config` | 查看网络接口详细配置 |\n| `netsh winsock reset`    | 重置网络组件（解决异常连接） |\n| `net use`                | 查看网络驱动器共享           |\n| `telnet IP port`         | 测试端口是否通（需启用 Telnet） |\n\n---\n\n## 🚨 使用技巧\n\n- **建议使用管理员 CMD 执行命令**\n- **分页查看长输出**：加 `| more`，如：\n\n  ```cmd\n  netstat -an | more\n  ```\n\n---","filePath":"src/content/posts/Windows_Network_Troubleshooting_CheatSheet.md","digest":"cfa367afa2f83b7e","rendered":{"html":"<section><h1 id=\"-windows-网络排障命令速查合集\">🛠 Windows 网络排障命令速查合集<a class=\"anchor\" href=\"#-windows-网络排障命令速查合集\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><hr><section><h2 id=\"-1-ipconfig---查看和管理-ip-配置\">📡 1. <code>ipconfig</code> - 查看和管理 IP 配置<a class=\"anchor\" href=\"#-1-ipconfig---查看和管理-ip-配置\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:48ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">ipconfig                 :: 查看基本IP配置</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">ipconfig /all            :: 查看详细配置（MAC、DNS、租约时间）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">ipconfig /release        :: 释放当前 IP（DHCP 模式）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">ipconfig /renew          :: 重新申请 IP 地址</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">ipconfig /flushdns       :: 清除 DNS 缓存</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">ipconfig /displaydns     :: 显示 DNS 缓存</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><hr></section><section><h2 id=\"-2-ping---测试网络连通性和延迟\">📶 2. <code>ping</code> - 测试网络连通性和延迟<a class=\"anchor\" href=\"#-2-ping---测试网络连通性和延迟\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:46ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">ping </span><span style=\"--0:#005CC5;--1:#79B8FF\">8.8.8.8</span><span style=\"--0:#24292E;--1:#E1E4E8\">             :: 测试公网连通</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">ping www.baidu.com       :: 测试域名解析和连通</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">ping </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">n </span><span style=\"--0:#005CC5;--1:#79B8FF\">5</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">192.168.1.1</span><span style=\"--0:#24292E;--1:#E1E4E8\">    :: 连续 ping </span><span style=\"--0:#005CC5;--1:#79B8FF\">5</span><span style=\"--0:#24292E;--1:#E1E4E8\"> 次</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">ping </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">t </span><span style=\"--0:#005CC5;--1:#79B8FF\">192.168.1.1</span><span style=\"--0:#24292E;--1:#E1E4E8\">      :: 持续 ping（Ctrl</span><span style=\"--0:#BF3441;--1:#F97583\">+</span><span style=\"--0:#24292E;--1:#E1E4E8\">C 停止）</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><hr></section><section><h2 id=\"-3-tracert---路由追踪逐跳\">🌐 3. <code>tracert</code> - 路由追踪（逐跳）<a class=\"anchor\" href=\"#-3-tracert---路由追踪逐跳\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:38ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">tracert www.google.com   :: 查看数据包路由路径</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">tracert /d www.baidu.com :: 不解析域名，加快速度</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><hr></section><section><h2 id=\"-4-nslookup---域名解析诊断\">🔍 4. <code>nslookup</code> - 域名解析诊断<a class=\"anchor\" href=\"#-4-nslookup---域名解析诊断\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:39ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">nslookup                 :: 进入交互模式</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">nslookup www.baidu.com   :: 查询域名的 IP</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">nslookup </span><span style=\"--0:#005CC5;--1:#79B8FF\">8.8.8.8</span><span style=\"--0:#24292E;--1:#E1E4E8\">         :: 查询 IP 对应的域名</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">nslookup </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">type</span><span style=\"--0:#BF3441;--1:#F97583\">=</span><span style=\"--0:#24292E;--1:#E1E4E8\">mx qq.com :: 查询邮件服务器记录</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><hr></section><section><h2 id=\"-5-netstat---查看网络连接状态\">📊 5. <code>netstat</code> - 查看网络连接状态<a class=\"anchor\" href=\"#-5-netstat---查看网络连接状态\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:43ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">netstat </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">a               :: 所有连接和监听端口</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">netstat </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">n               :: 不解析域名（显示IP）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">netstat </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">an | find </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"80\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">  :: 查找80端口使用情况</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">netstat </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">b               :: 查看使用端口的程序（需管理员）</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><hr></section><section><h2 id=\"-6-route---查看修改路由表\">🛣 6. <code>route</code> - 查看/修改路由表<a class=\"anchor\" href=\"#-6-route---查看修改路由表\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:52ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">route print              :: 显示当前路由表</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">route </span><span style=\"--0:#005CC5;--1:#79B8FF\">add</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0.0.0.0</span><span style=\"--0:#24292E;--1:#E1E4E8\"> mask </span><span style=\"--0:#005CC5;--1:#79B8FF\">0.0.0.0</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">192.168.1.1</span><span style=\"--0:#24292E;--1:#E1E4E8\"> :: 添加默认路由</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">route </span><span style=\"--0:#BF3441;--1:#F97583\">delete</span><span style=\"--0:#24292E;--1:#E1E4E8\"> </span><span style=\"--0:#005CC5;--1:#79B8FF\">0.0.0.0</span><span style=\"--0:#24292E;--1:#E1E4E8\">     :: 删除默认路由</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><hr></section><section><h2 id=\"-7-其他实用工具\">🧰 7. 其他实用工具<a class=\"anchor\" href=\"#-7-其他实用工具\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>工具/命令</th><th>功能</th></tr></thead><tbody><tr><td><code>tasklist</code></td><td>查看所有进程</td></tr><tr><td><code>taskkill /PID 1234 /F</code></td><td>强制结束指定进程</td></tr><tr><td><code>arp -a</code></td><td>查看本地 ARP 缓存</td></tr><tr><td><code>netsh interface ipv4 show config</code></td><td>查看网络接口详细配置</td></tr><tr><td><code>netsh winsock reset</code></td><td>重置网络组件（解决异常连接）</td></tr><tr><td><code>net use</code></td><td>查看网络驱动器共享</td></tr><tr><td><code>telnet IP port</code></td><td>测试端口是否通（需启用 Telnet）</td></tr></tbody></table><hr></section><section><h2 id=\"-使用技巧\">🚨 使用技巧<a class=\"anchor\" href=\"#-使用技巧\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>\n<p><strong>建议使用管理员 CMD 执行命令</strong></p>\n</li>\n<li>\n<p><strong>分页查看长输出</strong>：加 <code>| more</code>，如：</p>\n<div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"cmd\" class=\"wrap\" style=\"--ecMaxLine:18ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">netstat </span><span style=\"--0:#BF3441;--1:#F97583\">-</span><span style=\"--0:#24292E;--1:#E1E4E8\">an | more</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n</li>\n</ul><hr></section></section>","metadata":{"headings":[{"depth":1,"slug":"-windows-网络排障命令速查合集","text":"🛠 Windows 网络排障命令速查合集#"},{"depth":2,"slug":"-1-ipconfig---查看和管理-ip-配置","text":"📡 1. ipconfig - 查看和管理 IP 配置#"},{"depth":2,"slug":"-2-ping---测试网络连通性和延迟","text":"📶 2. ping - 测试网络连通性和延迟#"},{"depth":2,"slug":"-3-tracert---路由追踪逐跳","text":"🌐 3. tracert - 路由追踪（逐跳）#"},{"depth":2,"slug":"-4-nslookup---域名解析诊断","text":"🔍 4. nslookup - 域名解析诊断#"},{"depth":2,"slug":"-5-netstat---查看网络连接状态","text":"📊 5. netstat - 查看网络连接状态#"},{"depth":2,"slug":"-6-route---查看修改路由表","text":"🛣 6. route - 查看/修改路由表#"},{"depth":2,"slug":"-7-其他实用工具","text":"🧰 7. 其他实用工具#"},{"depth":2,"slug":"-使用技巧","text":"🚨 使用技巧#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"Windows Network Troubleshooting CheatSheet","published":"2025-05-04T00:00:00.000Z","description":"How to find out network problem fast!?","category":"Network","tags":["bat","cmd"],"draft":false,"minutes":2,"words":460,"excerpt":""},"imagePaths":[]}},"collection":"posts"}],"2025-05-01":[{"id":"advanced_calculus_formula","data":{"title":"Advanced Calculus Formulas","published":"2025-05-01T00:00:00.000Z","draft":false,"description":"基本上用不到的数学公式🥲","image":"","tags":["calculus","math","Newton","Leibniz","Mathjax"],"category":"Math","lang":"","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"Bat脚本编程笔记","prevSlug":"bat_programming","nextTitle":"Windows Network Troubleshooting CheatSheet","nextSlug":"windows_network_troubleshooting_cheatsheet"},"body":"## 一、极限与连续\n\n### 数列极限\n\n$$\n\\lim_{n \\to \\infty} a_n = A\n$$\n\n### 函数极限\n\n$$\n\\lim_{x \\to a} f(x) = L\n$$\n\n### 无穷小与无穷大\n\n$$\n\\lim_{x \\to 0} x^2 = 0 \\quad (\\text{无穷小})\n$$\n\n$$\n\\lim_{x \\to 0} \\frac{1}{x} = \\infty \\quad (\\text{无穷大})\n$$\n\n### 洛必达法则\n\n$$\n\\lim_{x \\to a} \\frac{f(x)}{g(x)} = \\lim_{x \\to a} \\frac{f'(x)}{g'(x)} \\quad \\text{（0/0 型或 ∞/∞ 型）}\n$$\n\n---\n\n## 二、导数与微分\n\n### 导数定义\n\n$$\nf'(x) = \\lim_{\\Delta x \\to 0} \\frac{f(x + \\Delta x) - f(x)}{\\Delta x}\n$$\n\n### 常见函数导数\n\n$$\n\\frac{d}{dx} x^n = nx^{n-1}, \\quad \\frac{d}{dx} \\sin x = \\cos x, \\quad \\frac{d}{dx} e^x = e^x\n$$\n\n### 微分\n\n$$\ndy = f'(x)\\,dx\n$$\n\n---\n\n## 三、微分中值定理\n\n### 罗尔定理\n\n若 $f(a) = f(b)$，则存在 $\\xi \\in (a, b)$ 使得：\n$$\nf'(\\xi) = 0\n$$\n\n### 拉格朗日中值定理\n\n$$\nf'(\\xi) = \\frac{f(b) - f(a)}{b - a}\n$$\n\n### 柯西中值定理\n\n$$\n\\frac{f'(\\xi)}{g'(\\xi)} = \\frac{f(b) - f(a)}{g(b) - g(a)}\n$$\n\n---\n\n## 四、不定积分\n\n### 基本积分表\n\n$$\n\\int x^n \\, dx = \\frac{x^{n+1}}{n+1} + C \\quad (n \\ne -1)\n$$\n\n$$\n\\int e^x \\, dx = e^x + C, \\quad \\int \\frac{1}{x} \\, dx = \\ln|x| + C\n$$\n\n---\n\n## 五、定积分\n\n### 定积分定义\n\n$$\n\\int_a^b f(x)\\,dx = \\lim_{n \\to \\infty} \\sum_{i=1}^{n} f(x_i^*)\\Delta x\n$$\n\n### 牛顿-莱布尼茨公式\n\n$$\n\\int_a^b f(x)\\,dx = F(b) - F(a)\n$$\n\n---\n\n## 六、积分技巧\n\n### 换元积分法\n\n若 $x = \\varphi(t)$，则：\n$$\n\\int f(x)\\,dx = \\int f(\\varphi(t)) \\varphi'(t)\\,dt\n$$\n\n### 分部积分法\n\n$$\n\\int u\\,dv = uv - \\int v\\,du\n$$\n\n---\n\n## 七、曲线积分\n\n### 第一类曲线积分\n\n$$\n\\int_L f(x, y)\\, ds\n$$\n\n### 第二类曲线积分\n\n$$\n\\int_L P(x, y)\\,dx + Q(x, y)\\,dy\n$$\n\n---\n\n## 八、二重积分\n\n### 直角坐标系下\n\n$$\n\\iint_D f(x, y)\\, dx\\,dy\n$$\n\n### 极坐标下\n\n$$\n\\iint_D f(r, \\theta)\\, r\\,dr\\,d\\theta\n$$\n\n---\n\n## 九、其他重要公式\n\n### 泰勒展开（以 $x = a$ 展开）\n\n$$\nf(x) = f(a) + f'(a)(x - a) + \\frac{f''(a)}{2!}(x - a)^2 + \\cdots\n$$\n\n### 麦克劳林展开（$a = 0$）\n\n$$\n\\sin x = x - \\frac{x^3}{3!} + \\frac{x^5}{5!} - \\cdots\n$$\n\n---\n\n以上是高等数学中常见的重要公式，建议配合图形、例题或练习一起使用，帮助记忆和理解。","filePath":"src/content/posts/Advanced_Calculus_Formula.md","digest":"89bca19ce7934491","rendered":{"html":"<section><h2 id=\"一极限与连续\">一、极限与连续<a class=\"anchor\" href=\"#一极限与连续\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"数列极限\">数列极限<a class=\"anchor\" href=\"#数列极限\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><munder><mrow><mi>lim</mi><mo>⁡</mo></mrow><mrow><mi>n</mi><mo>→</mo><mi mathvariant=\"normal\">∞</mi></mrow></munder><msub><mi>a</mi><mi>n</mi></msub><mo>=</mo><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">\\lim_{n \\to \\infty} a_n = A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3944em;vertical-align:-0.7em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-2.4em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mrel mtight\">→</span><span class=\"mord mtight\">∞</span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\">lim</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">A</span></span></span></span></span></section><section><h3 id=\"函数极限\">函数极限<a class=\"anchor\" href=\"#函数极限\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><munder><mrow><mi>lim</mi><mo>⁡</mo></mrow><mrow><mi>x</mi><mo>→</mo><mi>a</mi></mrow></munder><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">\\lim_{x \\to a} f(x) = L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.45em;vertical-align:-0.7em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-2.4em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"mrel mtight\">→</span><span class=\"mord mathnormal mtight\">a</span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\">lim</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">L</span></span></span></span></span></section><section><h3 id=\"无穷小与无穷大\">无穷小与无穷大<a class=\"anchor\" href=\"#无穷小与无穷大\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><munder><mrow><mi>lim</mi><mo>⁡</mo></mrow><mrow><mi>x</mi><mo>→</mo><mn>0</mn></mrow></munder><msup><mi>x</mi><mn>2</mn></msup><mo>=</mo><mn>0</mn><mspace width=\"1em\"></mspace><mo stretchy=\"false\">(</mo><mtext>无穷小</mtext><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\lim_{x \\to 0} x^2 = 0 \\quad (\\text{无穷小})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.5812em;vertical-align:-0.7171em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-2.3829em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"mrel mtight\">→</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\">lim</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7171em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mopen\">(</span><span class=\"mord text\"><span class=\"mord cjk_fallback\">无穷小</span></span><span class=\"mclose\">)</span></span></span></span></span><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><munder><mrow><mi>lim</mi><mo>⁡</mo></mrow><mrow><mi>x</mi><mo>→</mo><mn>0</mn></mrow></munder><mfrac><mn>1</mn><mi>x</mi></mfrac><mo>=</mo><mi mathvariant=\"normal\">∞</mi><mspace width=\"1em\"></mspace><mo stretchy=\"false\">(</mo><mtext>无穷大</mtext><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\lim_{x \\to 0} \\frac{1}{x} = \\infty \\quad (\\text{无穷大})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.0385em;vertical-align:-0.7171em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-2.3829em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"mrel mtight\">→</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\">lim</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7171em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3214em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∞</span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mopen\">(</span><span class=\"mord text\"><span class=\"mord cjk_fallback\">无穷大</span></span><span class=\"mclose\">)</span></span></span></span></span></section><section><h3 id=\"洛必达法则\">洛必达法则<a class=\"anchor\" href=\"#洛必达法则\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><munder><mrow><mi>lim</mi><mo>⁡</mo></mrow><mrow><mi>x</mi><mo>→</mo><mi>a</mi></mrow></munder><mfrac><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mi>g</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow></mfrac><mo>=</mo><munder><mrow><mi>lim</mi><mo>⁡</mo></mrow><mrow><mi>x</mi><mo>→</mo><mi>a</mi></mrow></munder><mfrac><mrow><msup><mi>f</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><mrow><msup><mi>g</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow></mfrac><mspace width=\"1em\"></mspace><mtext>（0/0 型或 ∞/∞ 型）</mtext></mrow><annotation encoding=\"application/x-tex\">\\lim_{x \\to a} \\frac{f(x)}{g(x)} = \\lim_{x \\to a} \\frac{f'(x)}{g'(x)} \\quad \\text{（0/0 型或 ∞/∞ 型）}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.363em;vertical-align:-0.936em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-2.4em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"mrel mtight\">→</span><span class=\"mord mathnormal mtight\">a</span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\">lim</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.427em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.936em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.3649em;vertical-align:-0.936em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-2.4em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"mrel mtight\">→</span><span class=\"mord mathnormal mtight\">a</span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\">lim</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4289em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6779em;\"><span style=\"top:-2.989em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.936em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mord text\"><span class=\"mord cjk_fallback\">（</span><span class=\"mord\">0/0 </span><span class=\"mord cjk_fallback\">型或</span><span class=\"mord\"> ∞/∞ </span><span class=\"mord cjk_fallback\">型）</span></span></span></span></span></span><hr></section></section>\n<section><h2 id=\"二导数与微分\">二、导数与微分<a class=\"anchor\" href=\"#二导数与微分\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"导数定义\">导数定义<a class=\"anchor\" href=\"#导数定义\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msup><mi>f</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><munder><mrow><mi>lim</mi><mo>⁡</mo></mrow><mrow><mi mathvariant=\"normal\">Δ</mi><mi>x</mi><mo>→</mo><mn>0</mn></mrow></munder><mfrac><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo>+</mo><mi mathvariant=\"normal\">Δ</mi><mi>x</mi><mo stretchy=\"false\">)</mo><mo>−</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mi mathvariant=\"normal\">Δ</mi><mi>x</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">f'(x) = \\lim_{\\Delta x \\to 0} \\frac{f(x + \\Delta x) - f(x)}{\\Delta x}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0519em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8019em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.1713em;vertical-align:-0.7443em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-2.3557em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">Δ</span><span class=\"mord mathnormal mtight\">x</span><span class=\"mrel mtight\">→</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\">lim</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7443em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.427em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">Δ</span><span class=\"mord mathnormal\">x</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">Δ</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></section><section><h3 id=\"常见函数导数\">常见函数导数<a class=\"anchor\" href=\"#常见函数导数\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mfrac><mi>d</mi><mrow><mi>d</mi><mi>x</mi></mrow></mfrac><msup><mi>x</mi><mi>n</mi></msup><mo>=</mo><mi>n</mi><msup><mi>x</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup><mo separator=\"true\">,</mo><mspace width=\"1em\"></mspace><mfrac><mi>d</mi><mrow><mi>d</mi><mi>x</mi></mrow></mfrac><mi>sin</mi><mo>⁡</mo><mi>x</mi><mo>=</mo><mi>cos</mi><mo>⁡</mo><mi>x</mi><mo separator=\"true\">,</mo><mspace width=\"1em\"></mspace><mfrac><mi>d</mi><mrow><mi>d</mi><mi>x</mi></mrow></mfrac><msup><mi>e</mi><mi>x</mi></msup><mo>=</mo><msup><mi>e</mi><mi>x</mi></msup></mrow><annotation encoding=\"application/x-tex\">\\frac{d}{dx} x^n = nx^{n-1}, \\quad \\frac{d}{dx} \\sin x = \\cos x, \\quad \\frac{d}{dx} e^x = e^x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.0574em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">x</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7144em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.0574em;vertical-align:-0.686em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">x</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\">sin</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.0574em;vertical-align:-0.686em;\"></span><span class=\"mop\">cos</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">x</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mord mathnormal\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7144em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">x</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7144em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7144em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">x</span></span></span></span></span></span></span></span></span></span></span></span></section><section><h3 id=\"微分\">微分<a class=\"anchor\" href=\"#微分\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>d</mi><mi>y</mi><mo>=</mo><msup><mi>f</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mtext> </mtext><mi>d</mi><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">dy = f'(x)\\,dx</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0519em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8019em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">x</span></span></span></span></span><hr></section></section>\n<section><h2 id=\"三微分中值定理\">三、微分中值定理<a class=\"anchor\" href=\"#三微分中值定理\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"罗尔定理\">罗尔定理<a class=\"anchor\" href=\"#罗尔定理\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>若 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">f(a) = f(b)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span></span></span></span>，则存在 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ξ</mi><mo>∈</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\xi \\in (a, b)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.04601em;\">ξ</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span></span></span></span> 使得：</p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msup><mi>f</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo stretchy=\"false\">(</mo><mi>ξ</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">f'(\\xi) = 0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0519em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8019em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.04601em;\">ξ</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span></span></section><section><h3 id=\"拉格朗日中值定理\">拉格朗日中值定理<a class=\"anchor\" href=\"#拉格朗日中值定理\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msup><mi>f</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo stretchy=\"false\">(</mo><mi>ξ</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>−</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mi>b</mi><mo>−</mo><mi>a</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">f'(\\xi) = \\frac{f(b) - f(a)}{b - a}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0519em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8019em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.04601em;\">ξ</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.1963em;vertical-align:-0.7693em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.427em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\">a</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></section><section><h3 id=\"柯西中值定理\">柯西中值定理<a class=\"anchor\" href=\"#柯西中值定理\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mfrac><mrow><msup><mi>f</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo stretchy=\"false\">(</mo><mi>ξ</mi><mo stretchy=\"false\">)</mo></mrow><mrow><msup><mi>g</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo stretchy=\"false\">(</mo><mi>ξ</mi><mo stretchy=\"false\">)</mo></mrow></mfrac><mo>=</mo><mfrac><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>−</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mi>g</mi><mo stretchy=\"false\">(</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>−</mo><mi>g</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{f'(\\xi)}{g'(\\xi)} = \\frac{f(b) - f(a)}{g(b) - g(a)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.3649em;vertical-align:-0.936em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4289em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6779em;\"><span style=\"top:-2.989em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.04601em;\">ξ</span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.04601em;\">ξ</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.936em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.363em;vertical-align:-0.936em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.427em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.936em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span><hr></section></section>\n<section><h2 id=\"四不定积分\">四、不定积分<a class=\"anchor\" href=\"#四不定积分\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"基本积分表\">基本积分表<a class=\"anchor\" href=\"#基本积分表\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mo>∫</mo><msup><mi>x</mi><mi>n</mi></msup><mtext> </mtext><mi>d</mi><mi>x</mi><mo>=</mo><mfrac><msup><mi>x</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msup><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></mfrac><mo>+</mo><mi>C</mi><mspace width=\"1em\"></mspace><mo stretchy=\"false\">(</mo><mi>n</mi><mo mathvariant=\"normal\">≠</mo><mo>−</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\int x^n \\, dx = \\frac{x^{n+1}}{n+1} + C \\quad (n \\ne -1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.2222em;vertical-align:-0.8622em;\"></span><span class=\"mop op-symbol large-op\" style=\"margin-right:0.44445em;position:relative;top:-0.0011em;\">∫</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7144em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.2604em;vertical-align:-0.7693em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4911em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">1</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord vbox\"><span class=\"thinbox\"><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"inner\"><span class=\"mord\"><span class=\"mrel\"></span></span></span><span class=\"fix\"></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></span><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mo>∫</mo><msup><mi>e</mi><mi>x</mi></msup><mtext> </mtext><mi>d</mi><mi>x</mi><mo>=</mo><msup><mi>e</mi><mi>x</mi></msup><mo>+</mo><mi>C</mi><mo separator=\"true\">,</mo><mspace width=\"1em\"></mspace><mo>∫</mo><mfrac><mn>1</mn><mi>x</mi></mfrac><mtext> </mtext><mi>d</mi><mi>x</mi><mo>=</mo><mi>ln</mi><mo>⁡</mo><mi mathvariant=\"normal\">∣</mi><mi>x</mi><mi mathvariant=\"normal\">∣</mi><mo>+</mo><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">\\int e^x \\, dx = e^x + C, \\quad \\int \\frac{1}{x} \\, dx = \\ln|x| + C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.2222em;vertical-align:-0.8622em;\"></span><span class=\"mop op-symbol large-op\" style=\"margin-right:0.44445em;position:relative;top:-0.0011em;\">∫</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7144em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">x</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7977em;vertical-align:-0.0833em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7144em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">x</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.2222em;vertical-align:-0.8622em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop op-symbol large-op\" style=\"margin-right:0.44445em;position:relative;top:-0.0011em;\">∫</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3214em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">ln</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\">x</span><span class=\"mord\">∣</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span></span></span><hr></section></section>\n<section><h2 id=\"五定积分\">五、定积分<a class=\"anchor\" href=\"#五定积分\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"定积分定义\">定积分定义<a class=\"anchor\" href=\"#定积分定义\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msubsup><mo>∫</mo><mi>a</mi><mi>b</mi></msubsup><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mtext> </mtext><mi>d</mi><mi>x</mi><mo>=</mo><munder><mrow><mi>lim</mi><mo>⁡</mo></mrow><mrow><mi>n</mi><mo>→</mo><mi mathvariant=\"normal\">∞</mi></mrow></munder><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mi>f</mi><mo stretchy=\"false\">(</mo><msubsup><mi>x</mi><mi>i</mi><mo>∗</mo></msubsup><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">Δ</mi><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">\\int_a^b f(x)\\,dx = \\lim_{n \\to \\infty} \\sum_{i=1}^{n} f(x_i^*)\\Delta x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.511em;vertical-align:-0.9119em;\"></span><span class=\"mop\"><span class=\"mop op-symbol large-op\" style=\"margin-right:0.44445em;position:relative;top:-0.0011em;\">∫</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.599em;\"><span style=\"top:-1.7881em;margin-left:-0.4445em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span><span style=\"top:-3.8129em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9119em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.9291em;vertical-align:-1.2777em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-2.4em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mrel mtight\">→</span><span class=\"mord mtight\">∞</span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\">lim</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6514em;\"><span style=\"top:-1.8723em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.05em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.2777em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7387em;\"><span style=\"top:-2.453em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mord\">Δ</span><span class=\"mord mathnormal\">x</span></span></span></span></span></section><section><h3 id=\"牛顿-莱布尼茨公式\">牛顿-莱布尼茨公式<a class=\"anchor\" href=\"#牛顿-莱布尼茨公式\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msubsup><mo>∫</mo><mi>a</mi><mi>b</mi></msubsup><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mtext> </mtext><mi>d</mi><mi>x</mi><mo>=</mo><mi>F</mi><mo stretchy=\"false\">(</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>−</mo><mi>F</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\int_a^b f(x)\\,dx = F(b) - F(a)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.511em;vertical-align:-0.9119em;\"></span><span class=\"mop\"><span class=\"mop op-symbol large-op\" style=\"margin-right:0.44445em;position:relative;top:-0.0011em;\">∫</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.599em;\"><span style=\"top:-1.7881em;margin-left:-0.4445em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span><span style=\"top:-3.8129em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9119em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mclose\">)</span></span></span></span></span><hr></section></section>\n<section><h2 id=\"六积分技巧\">六、积分技巧<a class=\"anchor\" href=\"#六积分技巧\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"换元积分法\">换元积分法<a class=\"anchor\" href=\"#换元积分法\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>若 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mi>φ</mi><mo stretchy=\"false\">(</mo><mi>t</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">x = \\varphi(t)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">φ</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">t</span><span class=\"mclose\">)</span></span></span></span>，则：</p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mo>∫</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mtext> </mtext><mi>d</mi><mi>x</mi><mo>=</mo><mo>∫</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>φ</mi><mo stretchy=\"false\">(</mo><mi>t</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><msup><mi>φ</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo stretchy=\"false\">(</mo><mi>t</mi><mo stretchy=\"false\">)</mo><mtext> </mtext><mi>d</mi><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">\\int f(x)\\,dx = \\int f(\\varphi(t)) \\varphi'(t)\\,dt</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.2222em;vertical-align:-0.8622em;\"></span><span class=\"mop op-symbol large-op\" style=\"margin-right:0.44445em;position:relative;top:-0.0011em;\">∫</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.2222em;vertical-align:-0.8622em;\"></span><span class=\"mop op-symbol large-op\" style=\"margin-right:0.44445em;position:relative;top:-0.0011em;\">∫</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">φ</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">t</span><span class=\"mclose\">))</span><span class=\"mord\"><span class=\"mord mathnormal\">φ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8019em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">t</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">t</span></span></span></span></span></section><section><h3 id=\"分部积分法\">分部积分法<a class=\"anchor\" href=\"#分部积分法\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mo>∫</mo><mi>u</mi><mtext> </mtext><mi>d</mi><mi>v</mi><mo>=</mo><mi>u</mi><mi>v</mi><mo>−</mo><mo>∫</mo><mi>v</mi><mtext> </mtext><mi>d</mi><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">\\int u\\,dv = uv - \\int v\\,du</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.2222em;vertical-align:-0.8622em;\"></span><span class=\"mop op-symbol large-op\" style=\"margin-right:0.44445em;position:relative;top:-0.0011em;\">∫</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">u</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">uv</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.2222em;vertical-align:-0.8622em;\"></span><span class=\"mop op-symbol large-op\" style=\"margin-right:0.44445em;position:relative;top:-0.0011em;\">∫</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">u</span></span></span></span></span><hr></section></section>\n<section><h2 id=\"七曲线积分\">七、曲线积分<a class=\"anchor\" href=\"#七曲线积分\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"第一类曲线积分\">第一类曲线积分<a class=\"anchor\" href=\"#第一类曲线积分\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mo>∫</mo><mi>L</mi></msub><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mtext> </mtext><mi>d</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">\\int_L f(x, y)\\, ds</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.2719em;vertical-align:-0.9119em;\"></span><span class=\"mop\"><span class=\"mop op-symbol large-op\" style=\"margin-right:0.44445em;position:relative;top:-0.0011em;\">∫</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:-0.4336em;\"><span style=\"top:-1.7881em;margin-left:-0.4445em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">L</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9119em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">s</span></span></span></span></span></section><section><h3 id=\"第二类曲线积分\">第二类曲线积分<a class=\"anchor\" href=\"#第二类曲线积分\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mo>∫</mo><mi>L</mi></msub><mi>P</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mtext> </mtext><mi>d</mi><mi>x</mi><mo>+</mo><mi>Q</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mtext> </mtext><mi>d</mi><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">\\int_L P(x, y)\\,dx + Q(x, y)\\,dy</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.2719em;vertical-align:-0.9119em;\"></span><span class=\"mop\"><span class=\"mop op-symbol large-op\" style=\"margin-right:0.44445em;position:relative;top:-0.0011em;\">∫</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:-0.4336em;\"><span style=\"top:-1.7881em;margin-left:-0.4445em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">L</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9119em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">Q</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span></span><hr></section></section>\n<section><h2 id=\"八二重积分\">八、二重积分<a class=\"anchor\" href=\"#八二重积分\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"直角坐标系下\">直角坐标系下<a class=\"anchor\" href=\"#直角坐标系下\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mo>∬</mo><mi>D</mi></msub><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mtext> </mtext><mi>d</mi><mi>x</mi><mtext> </mtext><mi>d</mi><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">\\iint_D f(x, y)\\, dx\\,dy</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.2717em;vertical-align:-0.9117em;\"></span><span class=\"mop\"><span class=\"mop op-symbol large-op\" style=\"margin-right:0.44445em;position:relative;top:-0.001em;\">∬</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:-0.4334em;\"><span style=\"top:-1.7883em;margin-left:-0.4445em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">D</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9117em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span></span></section><section><h3 id=\"极坐标下\">极坐标下<a class=\"anchor\" href=\"#极坐标下\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mo>∬</mo><mi>D</mi></msub><mi>f</mi><mo stretchy=\"false\">(</mo><mi>r</mi><mo separator=\"true\">,</mo><mi>θ</mi><mo stretchy=\"false\">)</mo><mtext> </mtext><mi>r</mi><mtext> </mtext><mi>d</mi><mi>r</mi><mtext> </mtext><mi>d</mi><mi>θ</mi></mrow><annotation encoding=\"application/x-tex\">\\iint_D f(r, \\theta)\\, r\\,dr\\,d\\theta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.2717em;vertical-align:-0.9117em;\"></span><span class=\"mop\"><span class=\"mop op-symbol large-op\" style=\"margin-right:0.44445em;position:relative;top:-0.001em;\">∬</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:-0.4334em;\"><span style=\"top:-1.7883em;margin-left:-0.4445em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">D</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9117em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span></span></span></span></span><hr></section></section>\n<section><h2 id=\"九其他重要公式\">九、其他重要公式<a class=\"anchor\" href=\"#九其他重要公式\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"泰勒展开以-xax--axa-展开\">泰勒展开（以 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">x = a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span></span></span></span> 展开）<a class=\"anchor\" href=\"#泰勒展开以-xax--axa-展开\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo><mo>+</mo><msup><mi>f</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">(</mo><mi>x</mi><mo>−</mo><mi>a</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mfrac><mrow><msup><mi>f</mi><mrow><mo mathvariant=\"normal\">′</mo><mo mathvariant=\"normal\">′</mo></mrow></msup><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mn>2</mn><mo stretchy=\"false\">!</mo></mrow></mfrac><mo stretchy=\"false\">(</mo><mi>x</mi><mo>−</mo><mi>a</mi><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup><mo>+</mo><mo>⋯</mo></mrow><annotation encoding=\"application/x-tex\">f(x) = f(a) + f'(a)(x - a) + \\frac{f''(a)}{2!}(x - a)^2 + \\cdots</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0519em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8019em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mclose\">)</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.1149em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4289em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"mclose\">!</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′′</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1141em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.313em;\"></span><span class=\"minner\">⋯</span></span></span></span></span></section><section><h3 id=\"麦克劳林展开a0a--0a0\">麦克劳林展开（<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">a = 0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span>）<a class=\"anchor\" href=\"#麦克劳林展开a0a--0a0\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>sin</mi><mo>⁡</mo><mi>x</mi><mo>=</mo><mi>x</mi><mo>−</mo><mfrac><msup><mi>x</mi><mn>3</mn></msup><mrow><mn>3</mn><mo stretchy=\"false\">!</mo></mrow></mfrac><mo>+</mo><mfrac><msup><mi>x</mi><mn>5</mn></msup><mrow><mn>5</mn><mo stretchy=\"false\">!</mo></mrow></mfrac><mo>−</mo><mo>⋯</mo></mrow><annotation encoding=\"application/x-tex\">\\sin x = x - \\frac{x^3}{3!} + \\frac{x^5}{5!} - \\cdots</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6679em;\"></span><span class=\"mop\">sin</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.1771em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4911em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">3</span><span class=\"mclose\">!</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.1771em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4911em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">5</span><span class=\"mclose\">!</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">5</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.313em;\"></span><span class=\"minner\">⋯</span></span></span></span></span><hr><p>以上是高等数学中常见的重要公式，建议配合图形、例题或练习一起使用，帮助记忆和理解。</p></section></section>","metadata":{"headings":[{"depth":2,"slug":"一极限与连续","text":"一、极限与连续#"},{"depth":3,"slug":"数列极限","text":"数列极限#"},{"depth":3,"slug":"函数极限","text":"函数极限#"},{"depth":3,"slug":"无穷小与无穷大","text":"无穷小与无穷大#"},{"depth":3,"slug":"洛必达法则","text":"洛必达法则#"},{"depth":2,"slug":"二导数与微分","text":"二、导数与微分#"},{"depth":3,"slug":"导数定义","text":"导数定义#"},{"depth":3,"slug":"常见函数导数","text":"常见函数导数#"},{"depth":3,"slug":"微分","text":"微分#"},{"depth":2,"slug":"三微分中值定理","text":"三、微分中值定理#"},{"depth":3,"slug":"罗尔定理","text":"罗尔定理#"},{"depth":3,"slug":"拉格朗日中值定理","text":"拉格朗日中值定理#"},{"depth":3,"slug":"柯西中值定理","text":"柯西中值定理#"},{"depth":2,"slug":"四不定积分","text":"四、不定积分#"},{"depth":3,"slug":"基本积分表","text":"基本积分表#"},{"depth":2,"slug":"五定积分","text":"五、定积分#"},{"depth":3,"slug":"定积分定义","text":"定积分定义#"},{"depth":3,"slug":"牛顿-莱布尼茨公式","text":"牛顿-莱布尼茨公式#"},{"depth":2,"slug":"六积分技巧","text":"六、积分技巧#"},{"depth":3,"slug":"换元积分法","text":"换元积分法#"},{"depth":3,"slug":"分部积分法","text":"分部积分法#"},{"depth":2,"slug":"七曲线积分","text":"七、曲线积分#"},{"depth":3,"slug":"第一类曲线积分","text":"第一类曲线积分#"},{"depth":3,"slug":"第二类曲线积分","text":"第二类曲线积分#"},{"depth":2,"slug":"八二重积分","text":"八、二重积分#"},{"depth":3,"slug":"直角坐标系下","text":"直角坐标系下#"},{"depth":3,"slug":"极坐标下","text":"极坐标下#"},{"depth":2,"slug":"九其他重要公式","text":"九、其他重要公式#"},{"depth":3,"slug":"泰勒展开以-xax--axa-展开","text":"泰勒展开（以 x=ax = ax=a 展开）#"},{"depth":3,"slug":"麦克劳林展开a0a--0a0","text":"麦克劳林展开（a=0a = 0a=0）#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"Advanced Calculus Formulas","published":"2025-05-01T00:00:00.000Z","description":"基本上用不到的数学公式🥲","category":"Math","tags":["calculus","math","Newton","Leibniz","Mathjax"],"draft":false,"minutes":2,"words":420,"excerpt":"若 f(a) = f(b)，则存在 \\xi \\in (a, b) 使得："},"imagePaths":[]}},"collection":"posts"}],"2025-04-27":[{"id":"bat_programming","data":{"title":"Bat脚本编程笔记","published":"2025-04-27T00:00:00.000Z","draft":false,"description":"Bat编程是好文明吗? bat or powershell","image":"","tags":["bat","cmd","language","programming","code","windows"],"category":"bat","lang":"","pinned":false,"author":"Akeboshi Himari","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"Markdown Extended Features","prevSlug":"markdown-extended","nextTitle":"Advanced Calculus Formulas","nextSlug":"advanced_calculus_formula"},"body":"# 📚 Windows批处理编程实践\n\n## 什么是批处理命令\n\n**Batch file programming**是微软操作系统自带原生的开发语言，不需要构建任何环境就可以执行的脚本。\n\nBatch file批处理使用cmd.exe执行\n\n## 如何编辑批处理程序\n\n使用任何文本编辑器\n\n## 批处理程序可以做什么\n\n使用一系列内置命令进行自动化操作\n> 例如：匹配规则删除文件\n>\n> 新建文件日志等\n>\n> 甚至可以批量创建计算机病毒\n\n## 一个基本的批处理文件\n\n输出hello world\n\n~~~\n@echo off\nEcho \"hello world\"\npause\n~~~\n\n## 命令分类\n\n### 内部命令\n\n`cls`,`ipconfig`等\n\n### 外部命令\n\n`java`和`python`脚本\n\n----------------\n----------------\n\n## 算数运算\n\n算数运算符具有优先级，括号`()`进行分组优先级\n\n### 命令模式\n\n`set /a 1+2` `/a`和`/A`都可以，不区分大小写\n\n### 文本模式\n\n~~~\n@echo off\nset /a var = 1 + 2\necho %var% // 声明var变量\npause\n~~~\n\n## 重定向运算\n\n四个符号`>` `>>` `<` `<<`\n\n## 关系运算\n\n`>`大于`<`小于\n\n> type命令可以在终端中显示文件内容(和linux中的cat作用相同)\n\n## 多命令运算符\n\n`&&`：与，具有短路效果，第一个命令为假不会执行第二个命令\n`||`：或，具有短路效果，第一个命令为假也会执行第二个命令，第一个命令为真不会执行后面的命令\n> `net user`命令会显示计算机上的用户\n\n## 管道符号运算\n\n`A|B`：A命令的输出作为B命令的输入\n\n~~~\ndir | find \".txt\" 找出当前目录下的所有以.txt为后缀的文件\nnetstat -an\n~~~\n\n> linux下只有文件与目录的区别，windows以后缀名区分文件\n>\n> `dir`命令显示当前目录下的所有文件，`netstat`是一个常用于查看网络连接、路由表、接口状态等网络相关信息的命令。它在网络故障排查、端口监控、安全检测中非常有用。\n\n--------------------\n--------------------\n\n## 批处理基本命令\n\n### 命令格式\n\n`命令 子命令 参数 操作 选项`\n> `/?`查看命令帮助信息\n例如使用net操作命令\n\n~~~\nnet /?\nnet user /?\nnet user /help 显示完整的帮助信息\nNET USER\n[username [password | *] [options]] [/DOMAIN]\n         username {password | *} /ADD [options] [/DOMAIN]\n         username [/DELETE] [/DOMAIN]\n         username [/TIMES:{times | ALL}]\n         username [/ACTIVE: {YES | NO}]\n\nnet user test \"password\" /add 命令添加用户test\n~~~\n\n## 批处理文件参数传递\n\n`.bat`文件接受参数使用`%num`(和shell编程一样作为占位符接收参数)\n\n~~~\nnet user %1 %2 /add // %1 %2 从外部传入\n~~~\n\n参数传递使用空格分隔\n\n## 注释符\n\n~~~\nrem comment多行注释\n:: comment单行注释\n~~~\n\n## 命令提示符\n\n### 颜色命令\n\n颜色数学由两个十六进制数字指定，第一个对应于背景，第二个对应于前景。`color /?`查看具体可选参数\n\n~~~\ncolor 0a // 0是背景色,a是前景色 \n~~~\n\n### 标题命令\n\n改变终端标题\n\n~~~\ntitle \"title\"\n~~~\n\n### 时间相关命令\n\n`date`和`time`\n\n`date /T`和`time /T`能获取更纯粹的时间内容\n`date /t  && time /t`将日期和时间一起显示\n\n### 启动命令\n\n`start`命令\n\n~~~\nstart /? 查看帮助手册\nstart \"title\" \"relative path\" // title 表示打开终端的标题 \"relative path\" 表示打开程序路径\n~~~\n\n### 使用其他bat文件\n\n`call`命令(类似函数文件调用)\n\n~~~\n1.bat\necho %1 \necho %2\ncall 2.bat %1 %2\n~~~\n\n## 任务列表查看\n\n`tasklist`命令\n\n~~~\ntasklist /S （远程ip） /U administrator （以管理员身份登录）/P password （密码）\n查看远程计算机的tasklist\n\ntasklist /FI \"STATUS eq UNKNOWN\"\n查看tasklist中状态属于unknown的进程\n\ntasklist /FI \"PID EQ 12352\"\n查看tasklist中PID为12352的进程\n\ntasklist /FI \"PID EQ 12352\" /FO table\n默认输出的table模式\n\ntasklist /FI \"PID EQ 12352\" /FO csv\n输出csv格式\n\ntasklist /FI \"PID EQ 12352\" /FO csv > task.csv\n将csv格式的内容重定向到task.csv文件中\n~~~\n\n## 任务终止命令\n\n`taskkill`\n\n~~~\ntaskkill /IM notepad.exe 根据印象名称关闭程序\ntaskkill /PID 1230 /PID 2321 /T 根据pid关闭进程与子进程\ntaskkill /F /IM cmd.exe /T 根据印象名称关闭进程与子进程\n~~~\n\n## 文件夹结构查看命令\n\n`tree` `/A` `/F`\n> /A以ascii字符显示文件结构而不是扩展字符\n>\n> /F显示每个文件夹中文件的名称\n\n## 关机命令\n\n`shutdown`\n\n- `shutdown /i`图形化显示关机操作界面\n- `shutdown /l`注销计算机\n- `shutdown /s` 关闭计算机\n- `shutdown /t`定时\n\n## 计划任务命令\n\n`schtasks`\n\n### 🧭 常用格式\n\n~~~\nschtasks /<操作> [参数]\n~~~\n\n### 🔧 常用操作命令\n\n#### 📅 创建任务\n\n~~~\nschtasks /create /tn \"任务名\" /tr \"程序路径\" /sc once /st 14:00\n~~~\n\n参数说明：\n\n- `/tn`：任务名称(Task Name)\n- `/tr`：任务运行的程序或脚本(Task Run)\n- `/sc`：计划频率(Schedule: once,daily,monthly,onstart,onlogon等)\n- `/st`：开始时间(Start Time，格式：HH:MM)\n\n**例子：每天早上8点运行脚本**\n\n~~~\nschtasks /create /tn \"BackupScript\" /tr \"C:\\scripts\\backup.bat\" /sc daily /st 08:00\n~~~\n\n#### 📜 查询任务列表\n\n~~~\nschtasks /query\n~~~\n\n**带详细信息：**\n\n~~~\nschtasks /query /v /fo list\n~~~\n\n- `/v`：详细模式(Verbose)\n- `/fo`：输出格式(Format：table、list、csv)\n\n#### ❌ 删除任务\n\n~~~\nschtasks /delete /tn \"任务名\" /f\n~~~\n\n#### 📝 修改任务\n\n~~~\nschtasks /change /tn \"任务名\" /enable\n~~~\n\n也可以用来更改运行用户、禁用任务等。\n\n#### ▶️ 运行一次任务（手动触发）\n\n~~~\nschtasks /run /tn \"任务名\"\n~~~\n\n#### ⏹️ 停止正在运行的任务\n\n~~~\nschtasks /end /tn \"任务名\"\n~~~\n\n### 💡 提示\n\n- 如果任务需要管理员权限运行，建议在创建时指定用户：\n\n~~~\nschtasks /create /tn \"MyTask\" /tr \"C:\\myapp.exe\" /sc once /st 12:00 /ru \"SYSTEM\"\n~~~\n\n## 调用命令\n\n`call`\n\n### 📌 基本用法\n\n#### 1️⃣ 调用另一个批处理脚本\n\n~~~\ncall other_script.bat\n~~~\n\n- 不使用 `call`，主脚本会在运行 `other_script.bat` 后不会返回。\n- 使用 `call`，则执行完 `other_script.bat` 后会继续执行主脚本。\n\n#### 2️⃣ 调用并传递参数\n\n~~~\ncall other_script.bat arg1 arg2\n~~~\n\n在`other_script.bat`中可以用`%1`,`%2`来接收参数。\n\n#### 3️⃣ 调用子程序（同一个脚本内部）\n\n~~~\ncall :label_name\n~~~\n\n~~~\n@echo off\necho 主脚本开始\ncall :myFunction\necho 主脚本结束\nexit /b\n\n:myFunction\necho 我是子程序\nexit /b\n~~~\n\n- `:label_name` 是一个脚本内的子程序标签\n- `exit /b`用于从子程序返回（不是结束整个脚本）\n\n#### 🔁 常见场景\n\n1. 调用多个批处理文件，按顺序执行\n2. 在脚本中使用函数/模块化结构\n3. 根据条件选择性地调用不同子程序\n\n## 批处理环境变量\n\n`set`\n\n### 📌 基本用法\n\n## 目录浏览命令dir\n\n### 📌 基本用法\n\n#### 🔑 查看所有信息（包括隐藏目录文件）\n\n`dir /a`\n\n#### 🗝 以小写形式输出\n\n`dir /l`\n\n### 目录重命名命令\n\n`ren`,`rename`\n\n### 目录拷贝命令\n\n`copy`,`cp`\n\n### 文件删除命令\n\n`del`,`delete`\n\n### 文件剪切命令\n\n`move`,`mv`\n\n## 网络相关命令\n\n1. `net user`用户操作命令\n\n- 删除用户指令\n\n~~~\nnet user username /delete\n~~~\n\n- 添加用户指令\n\n~~~\nnet user username (password | *) /add\n~~~\n\n2. `net localgroup`用户组操作命令\n\n- 向本地管理组添加用户\n\n~~~\nnet localgroup administrators himari /add\n~~~\n\n- 删除指定本地管理组用户\n\n~~~\nnet localgroup users himari /delete\n~~~\n\n3. 主机连通性命令`ping`指定的主机，直到停止\n\n- 设置发送缓冲区大小\n\n```\nping -l 65500 127.0.0.1\n```\n\n- ping指定主机直到停止\n\n```\nping -l 444 -t 127.0.0.1\n```\n\n4. 网络连接命令`telnet`\n\n> win10默认关闭，要去控制面板中的**程序**-->**程序和功能**-->**启动或关闭windows功能打开**\n\n5. 网络路由信息查看命令`tracert`\n\n### 🧭 tracert 命令（Windows）\n\n#### 📌 用途\n\n查看 **数据包从你本地出发，一跳一跳经过的网络节点**，直到目标地址。\n\n可以用来：\n\n- 排查网络延迟\n- 判断哪一段网络不通\n- 分析出站路径\n\n#### ✅ 基本语法\n\n~~~\ntracert [选项] 目标地址\n~~~\n\n```\ntracert 192.168.0.1 对本地路由进行跟踪\ntracert www.baidu.com 对百度网址进行跟踪\n```\n\n6. 网络适配器命令`ipconfig`\n\n`ipconfig`是 Windows 系统中用来查看和管理本机网络配置信息的超常用命令之一。\n\n### 🧭 ipconfig 命令作用\n\n主要用于查看本机：\n\n- IP地址\n- 子网掩码\n- 默认网关\n- DNS配置\n- 当前网络状态\n\n### ✅ 常用命令大全\n\n|命令|功能说明|\n|:---:|:---:|\n|`ipconfig`|查看简要 IP 配置信息|\n|`ipconfig /all`|查看详细配置信息（包括物理地址、DNS等）|\n|~~ipconfig /release~~|释放当前IP(DHCP模式下)|\n|`ipconfig /renew`|重新申请IP(DHCP模式下)|\n|`ipconfig /flushdns`|清除DNS缓存|\n|`ipconfig /displaydns`|显示DNS缓存|\n|`ipconfig /registrdns`|刷新DHCP租约并重新注册DNS|\n\n7. `ARP`信息命令\n\n### 📡 arp 命令详解（Windows）\n\n#### 🎯 用途\n\n查看或修改本地ARP缓存表，用于**IP<-->MAC地址映射的管理与排错**\n\n### 🧾 常用命令速查表\n\n|**命令**|**功能说明**|\n|:---:|:---:|\n|`arp -a`|显示本地ARP缓存表(IP<-->MAC映射)|\n|`arp -a 192.168.1.1`|查看指定接口的 ARP 缓存|\n|`arp -d IP地址`|删除特定 IP 的 ARP 缓存记录|\n|arp -s IP地址 MAC地址|添加静态 ARP 映射（不会随系统重启保留）|\n\n### 📌 注意事项\n\n- `arp` 只作用于本地的 IP/MAC 映射缓存。\n- ARP 表仅包含最近通信过的设备，**不是扫描整个局域网的工具**。\n\n## 条件判断结构\n\n### 😎 if-else结构\n\n#### ✅ 基本语法\n\n~~~\nif 条件(\n    命令1\n) else (\n    命令2\n)\n~~~\n\n### 🔍 示例：判断文件是否存在\n\n~~~\n@echo off\nif exist \"C:\\test.txt\"(\n    echo 文件存在！\n) else (\n    echo 文件不存在。\n)\npause>nul\n~~~\n\n### 🧠 for 循环结构\n\n#### ✅ 遍历文件夹中的所有文件\n\n~~~\n@echo off\nfor %%f in (*.txt) do (\n    echo 找到文件: %%f\n)\npause>nul\n~~~\n\n> ⚠ 注意：在 .bat 脚本中用 **%%变量**，而在命令行窗口直接输入时只用一个 **%变量**。\n>\n#### 😚 遍历目录(文件夹)\n\n~~~\n@echo off\nfor /d %%a in (*) do echo %%a\npause\n~~~\n\n#### 🔄 遍历文件夹中的所有子目录和文件（递归）(recursion)\n\n~~~\nfor /r \"C:\\MyFolder\" %%f in (*.jpg) do (\n    echo 发现图片：%%f\n)\npause\n~~~\n\n#### 🧪 遍历一个列表\n\n~~~\n@echo off\nfor %%i in (苹果 香蕉 西瓜) do (\n    echo 水果：%%i\npause\n~~~\n\n~~~\n@echo off\nrem for 遍历数字 /l\nfor /l %%i in (1,1,20) do ping %1.%%i\npause\n~~~\n\n#### 🧠 if 与 for 嵌套使用（判断文件是否包含关键字）\n\n~~~\n@echo off\nfor %%f in (*.txt) do (\n    findstr \"关键字\" %%f >nul\n    if errorlevel 1(\n        echo 没找到：%%f\n    ) else (\n        echo 找到关键字于：%%f\n    )\n)\npause\n~~~\n\n#### 逐行读取文件内容\n\n~~~\n@echo off\nrem for test\nfor /f %%i in (for.cmd) do echo %%i\n~~~\n\n#### 🔥 常用增强参数\n\n|**语法**|**说明**|\n|:---:|:---:|\n|`for /r`|递归子目录|\n|`for /f`|逐行读取文件内容|\n|`for /d`|遍历目录|\n|`if exist`|判断文件或目录存在|\n|`if \"%var%\"==\"\"`|判断变量是否为空|\n|`if not defined VAR`|判断变量未定义|\n\n### ✅ 命名习惯（但不是语法限制）\n\n|**变量名**|**通常用途**|**示例**|\n|:---:|:---:|:---:|\n|`%%i`|通用索引(index)|`for %%i in (...) do`|\n|`%%f`|文件(file)相关循环|`for %%f in (*.txt) do`|\n|`%%d`|目录(dir)相关|`for /d %%d in (*) do`|\n\n## goto命令\n\n### ✅ 基本语法\n\n``goto 标签名``\n\n~~~\n:标签名\nrem 在这里执行跳转后的代码\n~~~\n\n### 🧩 示例：if 判断 + goto 跳转\n\n~~~\n@echo off\nset /p answer=是否继续?(y/n):\n\nif /i \"%answer%\"==\"y\" goto continue\nif /i \"%answer%\"==\"n\" goto exit\n:continue\necho 你选择了继续\ngoto end\n\n:exit\necho 已退出程序\n\n:end\npause>nul\n~~~\n\n### ♻ 示例：goto 构造简单循环\n\n~~~\n@echo off\nset /a count=0\n\n:loop\nset /a count+=1\necho 当前计数：%count%\n\nif %count% lss 5 goto loop\necho 循环结束\npause\n~~~\n\n## set命令\n\n`set` 是 Windows 批处理脚本中最基础、最常用的命令之一，用于定义、读取和修改变量。\n\n### 🧩 基本语法\n\n`set 变量名=值`\n\n### ✅ 示例\n\n~~~\nset name=张三\necho 你好，%name%\n~~~\n\n### 🔢 示例：数学运算\n\n~~~\n@echo off\nset /a a=5\nset /a b=3\nset /a sum=a+b\necho 和是：%sum%\n~~~\n\n### ⌨ 示例：用户输入\n\n~~~\n@echo off\nset /p name=请输入你的名字：\necho 你好，%name%\n~~~\n\n### 🔁 示例：循环中使用变量（延迟扩展）\n\n~~~\n@echo off\nsetlocal enabledelayedexpansion\nfor /l %%i in (1,1,5) do (\n    set /a val=%%i*2\n    echo 第%%i项:!val!\n)\n~~~\n\n>🚨 注意：循环中需要用 **!变量名!** 而不是 ~~%变量名%~~，并配合 `setlocal enabledelayedexpansion`\n\n### 🧽 示例：清空变量\n\n`set var=`\n\n### 💡 高级技巧\n\n- `set \"var=value\"`（推荐写法，防止空格问题）\n- `set /a i+=1`支持累加减法等\n- `set /p`可用于制作简易菜单输入\n\n## 💡 什么是延迟扩展（Delayed Variable Expansion）\n>\n> 延迟扩展 = **让变量在运行到那一行时才获取值**，而不是在脚本解析阶段就确定值。\n>\n### 📌 默认行为（非延迟）\n\n批处理在执行 **for/if** 结构前，会先整体解析整段语句中的 %变量% —— 也就是说 “提前确定值”！\n\n这就导致：你在 **for** 循环中改变了变量，但 %变量% 仍然是旧值。\n\n### 🧨 问题例子（没开启延迟扩展）\n\n~~~\n@echo off\nset count=0\nfor /l %%i in (1,1,3) do (\n    set /a count+=1\n    echo 循环中：%count%\n)\n~~~\n\n### 💥 输出是\n\n~~~\n循环中：0\n循环中：0\n循环中：0\n~~~\n\n### ✅ 正确写法：开启延迟扩展\n\n~~~\n@echo off\nsetlocal enabledelayedexpansion\nset count=0\nfor /l %%i in (1,1,3) do (\n    set /a count+=1\n    echo 循环中：!count!\n)\n~~~\n\n## at命令\n\n`at` 命令是 Windows（尤其是早期版本）中的一个计划任务命令，用于在指定时间运行程序或命令。它已经被较新的 `schtasks` 命令取代，但在某些系统上仍然可用。\n\n### 🧭 基本格式\n\n~~~\nat [时间] [命令]\n~~~\n\n时间格式通常是**24小时制**，如 `14:30`\n\n### ✅ 示例用法\n\n1. 在下午2点30分执行一个程序：\n`at 14:30 \"notepad.exe\"`\n2. 执行一个批处理脚本：\n`at 18:00 xxx.bat`\n3. 查看当前已排的任务：\n`at`\n4. 删除任务：\n`at [任务ID] /delete`\n\n### ⚠️ 注意事项\n\n|**限制/说明**|**详情**|\n|:---:|:---:|\n|✅ 管理员权限|需要以 **管理员身份运行命令提示符** 才能使用 `at`|\n|❌ 不支持日期计划|只能设置“**今天**几点执行”，不支持设置“哪天”|\n|❌ 在 Win10 后被废弃|Windows 8/10/11 推荐使用 schtasks 命令|\n|❌ 无法持久保存|重启后计划任务通常会丢失（默认行为）|\n\n### 🆕 推荐替代：schtasks\n\n~~~\nschtasks /create /tn \"OpenNotepad\" /tr \"notepad.exe\" /sc once /st 14:30\n~~~\n\n## find命令和findstr命令\n\n- `find`命令查找的是纯文本字符串\n\n~~~\nfind \"hello\" myfile.txt\n// 查找文本中包含hello的行，不能使用正则表达式\n/i 忽略大小写\n/c 统计匹配的行数\n/v 查找不包含某字符串的行\n~~~\n\n- `findstr`功能更强可以用简单正则\n\n~~~\nfindstr /R \"^A.*Z$\" myfile.txt\n// 查找以A开头以Z结尾的行\n/s 递归子目录\n/i 忽略大小写\n/r 正则模式\n/c:\"exact phrase\"查找精确短语\n~~~\n\n# ✅ 示例：模糊查找并杀掉进程名中包含 chrome 的程序\n\n~~~\nfor /f \"tokens=2 delims= \" %%i in ('tasklist ^| findstr /i chrome') do taskkill /pid %%i /f \n~~~\n\n- `/f`：逐行读取文件内容\n- `tokens=2 delims=`：取第二行，按空格分割\n- `%%i`和`%i`为在bat文件内运行和cmd终端运行\n- `('tasklist ^| findstr /i chrome')`：这里使用`''`和`^|`转义符是为了防止`for`命令将前后分为两个语句\n- `taskkill /pid %%i /f`：将指定的进程名程序杀死\n\n## 🧩 扩展用法（高级）\n\n### ▶ 只杀掉特定用户下的进程\n\n~~~\ntasklist /v | findstr /i \"chrome myusername\"\n~~~\n\n### ▶ 匹配多个关键词\n\n~~~\ntasklist | findstr /i \"chrome firefox\"\n~~~\n\n### ▶ 过滤多个字段（通过正则）\n\n~~~\ntasklist | findstr /r /i \"notepad.*Console\"\n~~~\n\n# ✅ for 循环常用语法和选项\n\n## 🧩 常用结构一：遍历文件列表\n\n~~~\nfor %%f in (*.txt) do echo %%f\n~~~\n\n## 🧩 常用结构二：读取文件内容（逐行处理）\n\n~~~\nfor /f \"tokens=1,2 delims= \" %%a in (data.csv) do echo 第一列=%%a 第二列=%%b\n~~~\n\n## 🧩 常用结构三：命令输出处理\n\n~~~\nfor /f \"usebackq tokens=*\" %%i in ('tasklist ^| findstr notepad') do echo %%i\n~~~\n\n- `usebackq`：让命令用反引号包围\n- `tokens=*`：整行提取(防止空格截断)\n\n## 🔧 for 参数说明\n\n|**参数**|**作用**|\n|:---:|:---:|\n|`/f`|从文本文件或命令输出中逐行读取|\n|`/r`|递归遍历目录|\n|`/d`| 仅匹配目录名|\n|`tokens=n`|指定取第几列(n可以是多个)|\n|`delims=x`|指定分隔符(默认为空格和制表符)|\n|`usebackq`|使用反引号执行命令/支持文件路径含空格|\n\n# ✅ if 语句常用结构\n\n## 🧩 结构一：字符串比较\n\n~~~\nif \"%var%\"==\"hello\" echo 是hello\n~~~\n\n## 🧩 结构二：数字比较\n\n~~~\nif %num% GEQ 100 echo 大于等于100\n~~~\n\n|**比较符**|**含义**|\n|:---:|:---:|\n|`==`|等于(字符串)|\n|`NEQ`|不等于|\n|`LSS`|小于|\n|`LEQ`|小于等于|\n|`GTR`|大于|\n|`GEQ`|大于等于|\n\n> ⚠ 注意：数字比较时变量不能加引号。\n>\n## 🧩 结构三：文件/目录判断\n\n~~~\nif exist myfile.txt echo 文件存在\nif not exist myfolder\\NUL echo 文件夹不存在\n~~~\n\n🧩 结构四：带括号的多语句判断（推荐）\n\n~~~\nif \"%var%\"==\"yes\" (\n    echo 用户确认\n    echo 正在继续\n) else (\n    echo 用户取消\n)\n~~~\n\n# 📝 练习1：遍历所有 .log 文件，并显示文件名和行数\n\n~~~\nfor %%f in (*.log) do (]\n    echo 文件：%%f\n    find /c /v \"\" \"%%f\"\n)\n~~~\n\n## ✅ 各部分含义\n\n|**部分**|**含义**|\n|:---:|:---:|\n|`find`|Windows的文本查找命令|\n|`/c`|只显示匹配行的数量|\n|`/v \"\"`|匹配所有\"**不包含空字符串**\"的行->相当于\"所有行\"|\n|`%%f`|要处理的文件名(在`for`循环中)|\n\n# 📝 练习3：用 tasklist 和 if 判断某进程是否存在\n\n~~~\ntasklist | findstr /i notepad >nul\nif errorlevel 1 (\n    echo Notepad 没有运行\n) else (\n    echo Notepad 正在运行\n)\n~~~\n\n# ✨字符串截取语法\n\n## ✅ 通用语法\n\n~~~\n%变量名:~起始位置,长度%\n~~~\n\n- *起始位置*：从0开始\n- *长度*：截取的字符数(可以省略，表示到结尾)\n\n## ✅ 举例说明\n\n### 📆 示例1：处理 %date%\n\n假设 *%date% = 2025/04/29*\n\n| 表达式               | 结果     | 说明                         |\n|----------------------|----------|------------------------------|\n| `%date:~0,4%`        | `2025`   | 年                           |\n| `%date:~5,2%`        | `04`     | 月                           |\n| `%date:~8,2%`        | `29`     | 日                           |","filePath":"src/content/posts/bat_programming.md","digest":"59d3b7e9ed00ad61","rendered":{"html":"<section><h1 id=\"-windows批处理编程实践\">📚 Windows批处理编程实践<a class=\"anchor\" href=\"#-windows批处理编程实践\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h2 id=\"什么是批处理命令\">什么是批处理命令<a class=\"anchor\" href=\"#什么是批处理命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><strong>Batch file programming</strong>是微软操作系统自带原生的开发语言，不需要构建任何环境就可以执行的脚本。</p><p>Batch file批处理使用cmd.exe执行</p></section><section><h2 id=\"如何编辑批处理程序\">如何编辑批处理程序<a class=\"anchor\" href=\"#如何编辑批处理程序\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>使用任何文本编辑器</p></section><section><h2 id=\"批处理程序可以做什么\">批处理程序可以做什么<a class=\"anchor\" href=\"#批处理程序可以做什么\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>使用一系列内置命令进行自动化操作</p><blockquote>\n<p>例如：匹配规则删除文件</p>\n<p>新建文件日志等</p>\n<p>甚至可以批量创建计算机病毒</p>\n</blockquote></section><section><h2 id=\"一个基本的批处理文件\">一个基本的批处理文件<a class=\"anchor\" href=\"#一个基本的批处理文件\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>输出hello world</p><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:18ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">@echo off</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">Echo \"hello world\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">pause</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"命令分类\">命令分类<a class=\"anchor\" href=\"#命令分类\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"内部命令\">内部命令<a class=\"anchor\" href=\"#内部命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>cls</code>,<code>ipconfig</code>等</p></section><section><h3 id=\"外部命令\">外部命令<a class=\"anchor\" href=\"#外部命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>java</code>和<code>python</code>脚本</p><hr><hr></section></section><section><h2 id=\"算数运算\">算数运算<a class=\"anchor\" href=\"#算数运算\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>算数运算符具有优先级，括号<code>()</code>进行分组优先级</p><section><h3 id=\"命令模式\">命令模式<a class=\"anchor\" href=\"#命令模式\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>set /a 1+2</code> <code>/a</code>和<code>/A</code>都可以，不区分大小写</p></section><section><h3 id=\"文本模式\">文本模式<a class=\"anchor\" href=\"#文本模式\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:21ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">@echo off</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">set /a var = 1 + 2</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">echo %var% // 声明var变量</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">pause</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section><section><h2 id=\"重定向运算\">重定向运算<a class=\"anchor\" href=\"#重定向运算\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>四个符号<code>></code> <code>>></code> <code>&#x3C;</code> <code>&#x3C;&#x3C;</code></p></section><section><h2 id=\"关系运算\">关系运算<a class=\"anchor\" href=\"#关系运算\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><code>></code>大于<code>&#x3C;</code>小于</p><blockquote>\n<p>type命令可以在终端中显示文件内容(和linux中的cat作用相同)</p>\n</blockquote></section><section><h2 id=\"多命令运算符\">多命令运算符<a class=\"anchor\" href=\"#多命令运算符\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><code>&#x26;&#x26;</code>：与，具有短路效果，第一个命令为假不会执行第二个命令\n<code>||</code>：或，具有短路效果，第一个命令为假也会执行第二个命令，第一个命令为真不会执行后面的命令</p><blockquote>\n<p><code>net user</code>命令会显示计算机上的用户</p>\n</blockquote></section><section><h2 id=\"管道符号运算\">管道符号运算<a class=\"anchor\" href=\"#管道符号运算\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><code>A|B</code>：A命令的输出作为B命令的输入</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:39ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">dir | find \".txt\" 找出当前目录下的所有以.txt为后缀的文件</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">netstat -an</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>linux下只有文件与目录的区别，windows以后缀名区分文件</p>\n<p><code>dir</code>命令显示当前目录下的所有文件，<code>netstat</code>是一个常用于查看网络连接、路由表、接口状态等网络相关信息的命令。它在网络故障排查、端口监控、安全检测中非常有用。</p>\n</blockquote><hr><hr></section><section><h2 id=\"批处理基本命令\">批处理基本命令<a class=\"anchor\" href=\"#批处理基本命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"命令格式\">命令格式<a class=\"anchor\" href=\"#命令格式\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>命令 子命令 参数 操作 选项</code></p><blockquote>\n<p><code>/?</code>查看命令帮助信息\n例如使用net操作命令</p>\n</blockquote><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:57ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">net /?</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">net user /?</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">net user /help 显示完整的帮助信息</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">NET USER</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">[username [password | *] [options]] [/DOMAIN]</span></div></div><div class=\"ec-line\" style=\"--ecIndent:9ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">         </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">username {password | *} /ADD [options] [/DOMAIN]</span></div></div><div class=\"ec-line\" style=\"--ecIndent:9ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">         </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">username [/DELETE] [/DOMAIN]</span></div></div><div class=\"ec-line\" style=\"--ecIndent:9ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">         </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">username [/TIMES:{times | ALL}]</span></div></div><div class=\"ec-line\" style=\"--ecIndent:9ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">         </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">username [/ACTIVE: {YES | NO}]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">net user test \"password\" /add 命令添加用户test</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section><section><h2 id=\"批处理文件参数传递\">批处理文件参数传递<a class=\"anchor\" href=\"#批处理文件参数传递\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><code>.bat</code>文件接受参数使用<code>%num</code>(和shell编程一样作为占位符接收参数)</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:34ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">net user %1 %2 /add // %1 %2 从外部传入</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>参数传递使用空格分隔</p></section><section><h2 id=\"注释符\">注释符<a class=\"anchor\" href=\"#注释符\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:15ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">rem comment多行注释</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">:: comment单行注释</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"命令提示符\">命令提示符<a class=\"anchor\" href=\"#命令提示符\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"颜色命令\">颜色命令<a class=\"anchor\" href=\"#颜色命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>颜色数学由两个十六进制数字指定，第一个对应于背景，第二个对应于前景。<code>color /?</code>查看具体可选参数</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:23ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">color 0a // 0是背景色,a是前景色</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"标题命令\">标题命令<a class=\"anchor\" href=\"#标题命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>改变终端标题</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:13ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">title \"title\"</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"时间相关命令\">时间相关命令<a class=\"anchor\" href=\"#时间相关命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>date</code>和<code>time</code></p><p><code>date /T</code>和<code>time /T</code>能获取更纯粹的时间内容\n<code>date /t  &#x26;&#x26; time /t</code>将日期和时间一起显示</p></section><section><h3 id=\"启动命令\">启动命令<a class=\"anchor\" href=\"#启动命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>start</code>命令</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:73ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">start /? 查看帮助手册</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">start \"title\" \"relative path\" // title 表示打开终端的标题 \"relative path\" 表示打开程序路径</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"使用其他bat文件\">使用其他bat文件<a class=\"anchor\" href=\"#使用其他bat文件\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>call</code>命令(类似函数文件调用)</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:16ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">1.bat</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">echo %1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">echo %2</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">call 2.bat %1 %2</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section><section><h2 id=\"任务列表查看\">任务列表查看<a class=\"anchor\" href=\"#任务列表查看\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><code>tasklist</code>命令</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:62ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">tasklist /S （远程ip） /U administrator （以管理员身份登录）/P password （密码）</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">查看远程计算机的tasklist</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">tasklist /FI \"STATUS eq UNKNOWN\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">查看tasklist中状态属于unknown的进程</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">tasklist /FI \"PID EQ 12352\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">查看tasklist中PID为12352的进程</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">tasklist /FI \"PID EQ 12352\" /FO table</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">默认输出的table模式</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">tasklist /FI \"PID EQ 12352\" /FO csv</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">输出csv格式</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">tasklist /FI \"PID EQ 12352\" /FO csv > task.csv</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">将csv格式的内容重定向到task.csv文件中</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"任务终止命令\">任务终止命令<a class=\"anchor\" href=\"#任务终止命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><code>taskkill</code></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:45ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">taskkill /IM notepad.exe 根据印象名称关闭程序</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">taskkill /PID 1230 /PID 2321 /T 根据pid关闭进程与子进程</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">taskkill /F /IM cmd.exe /T 根据印象名称关闭进程与子进程</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"文件夹结构查看命令\">文件夹结构查看命令<a class=\"anchor\" href=\"#文件夹结构查看命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><code>tree</code> <code>/A</code> <code>/F</code></p><blockquote>\n<p>/A以ascii字符显示文件结构而不是扩展字符</p>\n<p>/F显示每个文件夹中文件的名称</p>\n</blockquote></section><section><h2 id=\"关机命令\">关机命令<a class=\"anchor\" href=\"#关机命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><code>shutdown</code></p><ul>\n<li><code>shutdown /i</code>图形化显示关机操作界面</li>\n<li><code>shutdown /l</code>注销计算机</li>\n<li><code>shutdown /s</code> 关闭计算机</li>\n<li><code>shutdown /t</code>定时</li>\n</ul></section><section><h2 id=\"计划任务命令\">计划任务命令<a class=\"anchor\" href=\"#计划任务命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><code>schtasks</code></p><section><h3 id=\"-常用格式\">🧭 常用格式<a class=\"anchor\" href=\"#-常用格式\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:19ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">schtasks /&#x3C;操作> [参数]</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"-常用操作命令\">🔧 常用操作命令<a class=\"anchor\" href=\"#-常用操作命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><section><h4 id=\"-创建任务\">📅 创建任务<a class=\"anchor\" href=\"#-创建任务\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:56ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">schtasks /create /tn \"任务名\" /tr \"程序路径\" /sc once /st 14:00</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>参数说明：</p><ul>\n<li><code>/tn</code>：任务名称(Task Name)</li>\n<li><code>/tr</code>：任务运行的程序或脚本(Task Run)</li>\n<li><code>/sc</code>：计划频率(Schedule: once,daily,monthly,onstart,onlogon等)</li>\n<li><code>/st</code>：开始时间(Start Time，格式：HH<mm></mm>)</li>\n</ul><p><strong>例子：每天早上8点运行脚本</strong></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:83ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">schtasks /create /tn \"BackupScript\" /tr \"C:\\scripts\\backup.bat\" /sc daily /st 08:00</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h4 id=\"-查询任务列表\">📜 查询任务列表<a class=\"anchor\" href=\"#-查询任务列表\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:15ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">schtasks /query</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><strong>带详细信息：</strong></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:27ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">schtasks /query /v /fo list</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li><code>/v</code>：详细模式(Verbose)</li>\n<li><code>/fo</code>：输出格式(Format：table、list、csv)</li>\n</ul></section><section><h4 id=\"-删除任务\">❌ 删除任务<a class=\"anchor\" href=\"#-删除任务\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:29ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">schtasks /delete /tn \"任务名\" /f</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h4 id=\"-修改任务\">📝 修改任务<a class=\"anchor\" href=\"#-修改任务\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:34ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">schtasks /change /tn \"任务名\" /enable</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>也可以用来更改运行用户、禁用任务等。</p></section><section><h4 id=\"️-运行一次任务手动触发\">▶️ 运行一次任务（手动触发）<a class=\"anchor\" href=\"#️-运行一次任务手动触发\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:23ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">schtasks /run /tn \"任务名\"</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h4 id=\"️-停止正在运行的任务\">⏹️ 停止正在运行的任务<a class=\"anchor\" href=\"#️-停止正在运行的任务\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:23ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">schtasks /end /tn \"任务名\"</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section><section><h3 id=\"-提示\">💡 提示<a class=\"anchor\" href=\"#-提示\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>如果任务需要管理员权限运行，建议在创建时指定用户：</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:80ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">schtasks /create /tn \"MyTask\" /tr \"C:\\myapp.exe\" /sc once /st 12:00 /ru \"SYSTEM\"</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section><section><h2 id=\"调用命令\">调用命令<a class=\"anchor\" href=\"#调用命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><code>call</code></p><section><h3 id=\"-基本用法\">📌 基本用法<a class=\"anchor\" href=\"#-基本用法\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><section><h4 id=\"1️⃣-调用另一个批处理脚本\">1️⃣ 调用另一个批处理脚本<a class=\"anchor\" href=\"#1️⃣-调用另一个批处理脚本\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:21ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">call other_script.bat</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li>不使用 <code>call</code>，主脚本会在运行 <code>other_script.bat</code> 后不会返回。</li>\n<li>使用 <code>call</code>，则执行完 <code>other_script.bat</code> 后会继续执行主脚本。</li>\n</ul></section><section><h4 id=\"2️⃣-调用并传递参数\">2️⃣ 调用并传递参数<a class=\"anchor\" href=\"#2️⃣-调用并传递参数\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:31ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">call other_script.bat arg1 arg2</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>在<code>other_script.bat</code>中可以用<code>%1</code>,<code>%2</code>来接收参数。</p></section><section><h4 id=\"3️⃣-调用子程序同一个脚本内部\">3️⃣ 调用子程序（同一个脚本内部）<a class=\"anchor\" href=\"#3️⃣-调用子程序同一个脚本内部\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:16ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">call :label_name</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:16ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">@echo off</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">echo 主脚本开始</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">call :myFunction</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">echo 主脚本结束</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">exit /b</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">:myFunction</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">echo 我是子程序</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">exit /b</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li><code>:label_name</code> 是一个脚本内的子程序标签</li>\n<li><code>exit /b</code>用于从子程序返回（不是结束整个脚本）</li>\n</ul></section><section><h4 id=\"-常见场景\">🔁 常见场景<a class=\"anchor\" href=\"#-常见场景\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><ol>\n<li>调用多个批处理文件，按顺序执行</li>\n<li>在脚本中使用函数/模块化结构</li>\n<li>根据条件选择性地调用不同子程序</li>\n</ol></section></section></section><section><h2 id=\"批处理环境变量\">批处理环境变量<a class=\"anchor\" href=\"#批处理环境变量\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><code>set</code></p><section><h3 id=\"-基本用法-1\">📌 基本用法<a class=\"anchor\" href=\"#-基本用法-1\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3></section></section><section><h2 id=\"目录浏览命令dir\">目录浏览命令dir<a class=\"anchor\" href=\"#目录浏览命令dir\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"-基本用法-2\">📌 基本用法<a class=\"anchor\" href=\"#-基本用法-2\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><section><h4 id=\"-查看所有信息包括隐藏目录文件\">🔑 查看所有信息（包括隐藏目录文件）<a class=\"anchor\" href=\"#-查看所有信息包括隐藏目录文件\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p><code>dir /a</code></p></section><section><h4 id=\"-以小写形式输出\">🗝 以小写形式输出<a class=\"anchor\" href=\"#-以小写形式输出\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p><code>dir /l</code></p></section></section><section><h3 id=\"目录重命名命令\">目录重命名命令<a class=\"anchor\" href=\"#目录重命名命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>ren</code>,<code>rename</code></p></section><section><h3 id=\"目录拷贝命令\">目录拷贝命令<a class=\"anchor\" href=\"#目录拷贝命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>copy</code>,<code>cp</code></p></section><section><h3 id=\"文件删除命令\">文件删除命令<a class=\"anchor\" href=\"#文件删除命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>del</code>,<code>delete</code></p></section><section><h3 id=\"文件剪切命令\">文件剪切命令<a class=\"anchor\" href=\"#文件剪切命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>move</code>,<code>mv</code></p></section></section><section><h2 id=\"网络相关命令\">网络相关命令<a class=\"anchor\" href=\"#网络相关命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ol>\n<li><code>net user</code>用户操作命令</li>\n</ol><ul>\n<li>删除用户指令</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:25ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">net user username /delete</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li>添加用户指令</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:37ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">net user username (password | *) /add</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ol start=\"2\">\n<li><code>net localgroup</code>用户组操作命令</li>\n</ol><ul>\n<li>向本地管理组添加用户</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:41ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">net localgroup administrators himari /add</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li>删除指定本地管理组用户</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:35ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">net localgroup users himari /delete</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ol start=\"3\">\n<li>主机连通性命令<code>ping</code>指定的主机，直到停止</li>\n</ol><ul>\n<li>设置发送缓冲区大小</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:23ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">ping -l 65500 127.0.0.1</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li>ping指定主机直到停止</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:24ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">ping -l 444 -t 127.0.0.1</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ol start=\"4\">\n<li>网络连接命令<code>telnet</code></li>\n</ol><blockquote>\n<p>win10默认关闭，要去控制面板中的<strong>程序</strong>—><strong>程序和功能</strong>—><strong>启动或关闭windows功能打开</strong></p>\n</blockquote><ol start=\"5\">\n<li>网络路由信息查看命令<code>tracert</code></li>\n</ol><section><h3 id=\"-tracert-命令windows\">🧭 tracert 命令（Windows）<a class=\"anchor\" href=\"#-tracert-命令windows\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><section><h4 id=\"-用途\">📌 用途<a class=\"anchor\" href=\"#-用途\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>查看 <strong>数据包从你本地出发，一跳一跳经过的网络节点</strong>，直到目标地址。</p><p>可以用来：</p><ul>\n<li>排查网络延迟</li>\n<li>判断哪一段网络不通</li>\n<li>分析出站路径</li>\n</ul></section><section><h4 id=\"-基本语法\">✅ 基本语法<a class=\"anchor\" href=\"#-基本语法\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:17ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">tracert [选项] 目标地址</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:31ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">tracert 192.168.0.1 对本地路由进行跟踪</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">tracert www.baidu.com 对百度网址进行跟踪</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ol start=\"6\">\n<li>网络适配器命令<code>ipconfig</code></li>\n</ol><p><code>ipconfig</code>是 Windows 系统中用来查看和管理本机网络配置信息的超常用命令之一。</p></section></section><section><h3 id=\"-ipconfig-命令作用\">🧭 ipconfig 命令作用<a class=\"anchor\" href=\"#-ipconfig-命令作用\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>主要用于查看本机：</p><ul>\n<li>IP地址</li>\n<li>子网掩码</li>\n<li>默认网关</li>\n<li>DNS配置</li>\n<li>当前网络状态</li>\n</ul></section><section><h3 id=\"-常用命令大全\">✅ 常用命令大全<a class=\"anchor\" href=\"#-常用命令大全\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\">命令</th><th align=\"center\">功能说明</th></tr></thead><tbody><tr><td align=\"center\"><code>ipconfig</code></td><td align=\"center\">查看简要 IP 配置信息</td></tr><tr><td align=\"center\"><code>ipconfig /all</code></td><td align=\"center\">查看详细配置信息（包括物理地址、DNS等）</td></tr><tr><td align=\"center\"><del>ipconfig /release</del></td><td align=\"center\">释放当前IP(DHCP模式下)</td></tr><tr><td align=\"center\"><code>ipconfig /renew</code></td><td align=\"center\">重新申请IP(DHCP模式下)</td></tr><tr><td align=\"center\"><code>ipconfig /flushdns</code></td><td align=\"center\">清除DNS缓存</td></tr><tr><td align=\"center\"><code>ipconfig /displaydns</code></td><td align=\"center\">显示DNS缓存</td></tr><tr><td align=\"center\"><code>ipconfig /registrdns</code></td><td align=\"center\">刷新DHCP租约并重新注册DNS</td></tr></tbody></table><ol start=\"7\">\n<li><code>ARP</code>信息命令</li>\n</ol></section><section><h3 id=\"-arp-命令详解windows\">📡 arp 命令详解（Windows）<a class=\"anchor\" href=\"#-arp-命令详解windows\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><section><h4 id=\"-用途-1\">🎯 用途<a class=\"anchor\" href=\"#-用途-1\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><p>查看或修改本地ARP缓存表，用于<strong>IP&#x3C;—>MAC地址映射的管理与排错</strong></p></section></section><section><h3 id=\"-常用命令速查表\">🧾 常用命令速查表<a class=\"anchor\" href=\"#-常用命令速查表\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\"><strong>命令</strong></th><th align=\"center\"><strong>功能说明</strong></th></tr></thead><tbody><tr><td align=\"center\"><code>arp -a</code></td><td align=\"center\">显示本地ARP缓存表(IP&#x3C;—>MAC映射)</td></tr><tr><td align=\"center\"><code>arp -a 192.168.1.1</code></td><td align=\"center\">查看指定接口的 ARP 缓存</td></tr><tr><td align=\"center\"><code>arp -d IP地址</code></td><td align=\"center\">删除特定 IP 的 ARP 缓存记录</td></tr><tr><td align=\"center\">arp -s IP地址 MAC地址</td><td align=\"center\">添加静态 ARP 映射（不会随系统重启保留）</td></tr></tbody></table></section><section><h3 id=\"-注意事项\">📌 注意事项<a class=\"anchor\" href=\"#-注意事项\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li><code>arp</code> 只作用于本地的 IP/MAC 映射缓存。</li>\n<li>ARP 表仅包含最近通信过的设备，<strong>不是扫描整个局域网的工具</strong>。</li>\n</ul></section></section><section><h2 id=\"条件判断结构\">条件判断结构<a class=\"anchor\" href=\"#条件判断结构\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"-if-else结构\">😎 if-else结构<a class=\"anchor\" href=\"#-if-else结构\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><section><h4 id=\"-基本语法-1\">✅ 基本语法<a class=\"anchor\" href=\"#-基本语法-1\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:8ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">if 条件(</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">命令1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">) else (</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">命令2</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section><section><h3 id=\"-示例判断文件是否存在\">🔍 示例：判断文件是否存在<a class=\"anchor\" href=\"#-示例判断文件是否存在\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:23ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">@echo off</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">if exist \"C:\\test.txt\"(</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">echo 文件存在！</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">) else (</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">echo 文件不存在。</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">pause>nul</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"-for-循环结构\">🧠 for 循环结构<a class=\"anchor\" href=\"#-for-循环结构\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><section><h4 id=\"-遍历文件夹中的所有文件\">✅ 遍历文件夹中的所有文件<a class=\"anchor\" href=\"#-遍历文件夹中的所有文件\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:23ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">@echo off</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">for %%f in (*.txt) do (</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">echo 找到文件: %%f</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">pause>nul</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>⚠ 注意：在 .bat 脚本中用 <strong>%%变量</strong>，而在命令行窗口直接输入时只用一个 <strong>%变量</strong>。</p>\n</blockquote></section><section><h4 id=\"-遍历目录文件夹\">😚 遍历目录(文件夹)<a class=\"anchor\" href=\"#-遍历目录文件夹\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:29ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">@echo off</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">for /d %%a in (*) do echo %%a</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">pause</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h4 id=\"-遍历文件夹中的所有子目录和文件递归recursion\">🔄 遍历文件夹中的所有子目录和文件（递归）(recursion)<a class=\"anchor\" href=\"#-遍历文件夹中的所有子目录和文件递归recursion\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:40ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">for /r \"C:\\MyFolder\" %%f in (*.jpg) do (</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">echo 发现图片：%%f</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">pause</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h4 id=\"-遍历一个列表\">🧪 遍历一个列表<a class=\"anchor\" href=\"#-遍历一个列表\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:26ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">@echo off</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">for %%i in (苹果 香蕉 西瓜) do (</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">echo 水果：%%i</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">pause</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:37ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">@echo off</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">rem for 遍历数字 /l</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">for /l %%i in (1,1,20) do ping %1.%%i</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">pause</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h4 id=\"-if-与-for-嵌套使用判断文件是否包含关键字\">🧠 if 与 for 嵌套使用（判断文件是否包含关键字）<a class=\"anchor\" href=\"#-if-与-for-嵌套使用判断文件是否包含关键字\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:26ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">@echo off</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">for %%f in (*.txt) do (</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">findstr \"关键字\" %%f >nul</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">if errorlevel 1(</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">echo 没找到：%%f</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">) else (</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">        </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">echo 找到关键字于：%%f</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">pause</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h4 id=\"逐行读取文件内容\">逐行读取文件内容<a class=\"anchor\" href=\"#逐行读取文件内容\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:35ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">@echo off</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">rem for test</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">for /f %%i in (for.cmd) do echo %%i</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h4 id=\"-常用增强参数\">🔥 常用增强参数<a class=\"anchor\" href=\"#-常用增强参数\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h4>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\"><strong>语法</strong></th><th align=\"center\"><strong>说明</strong></th></tr></thead><tbody><tr><td align=\"center\"><code>for /r</code></td><td align=\"center\">递归子目录</td></tr><tr><td align=\"center\"><code>for /f</code></td><td align=\"center\">逐行读取文件内容</td></tr><tr><td align=\"center\"><code>for /d</code></td><td align=\"center\">遍历目录</td></tr><tr><td align=\"center\"><code>if exist</code></td><td align=\"center\">判断文件或目录存在</td></tr><tr><td align=\"center\"><code>if \"%var%\"==\"\"</code></td><td align=\"center\">判断变量是否为空</td></tr><tr><td align=\"center\"><code>if not defined VAR</code></td><td align=\"center\">判断变量未定义</td></tr></tbody></table></section></section><section><h3 id=\"-命名习惯但不是语法限制\">✅ 命名习惯（但不是语法限制）<a class=\"anchor\" href=\"#-命名习惯但不是语法限制\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\"><strong>变量名</strong></th><th align=\"center\"><strong>通常用途</strong></th><th align=\"center\"><strong>示例</strong></th></tr></thead><tbody><tr><td align=\"center\"><code>%%i</code></td><td align=\"center\">通用索引(index)</td><td align=\"center\"><code>for %%i in (...) do</code></td></tr><tr><td align=\"center\"><code>%%f</code></td><td align=\"center\">文件(file)相关循环</td><td align=\"center\"><code>for %%f in (*.txt) do</code></td></tr><tr><td align=\"center\"><code>%%d</code></td><td align=\"center\">目录(dir)相关</td><td align=\"center\"><code>for /d %%d in (*) do</code></td></tr></tbody></table></section></section><section><h2 id=\"goto命令\">goto命令<a class=\"anchor\" href=\"#goto命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"-基本语法-2\">✅ 基本语法<a class=\"anchor\" href=\"#-基本语法-2\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>goto 标签名</code></p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:15ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">:标签名</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">rem 在这里执行跳转后的代码</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"-示例if-判断--goto-跳转\">🧩 示例：if 判断 + goto 跳转<a class=\"anchor\" href=\"#-示例if-判断--goto-跳转\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:35ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">@echo off</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">set /p answer=是否继续?(y/n):</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">if /i \"%answer%\"==\"y\" goto continue</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">if /i \"%answer%\"==\"n\" goto exit</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">:continue</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">echo 你选择了继续</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">goto end</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">:exit</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">echo 已退出程序</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">:end</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">pause>nul</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"-示例goto-构造简单循环\">♻ 示例：goto 构造简单循环<a class=\"anchor\" href=\"#-示例goto-构造简单循环\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:26ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">@echo off</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">set /a count=0</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">:loop</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">set /a count+=1</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">echo 当前计数：%count%</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">if %count% lss 5 goto loop</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">echo 循环结束</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">pause</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section><section><h2 id=\"set命令\">set命令<a class=\"anchor\" href=\"#set命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><code>set</code> 是 Windows 批处理脚本中最基础、最常用的命令之一，用于定义、读取和修改变量。</p><section><h3 id=\"-基本语法-3\">🧩 基本语法<a class=\"anchor\" href=\"#-基本语法-3\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>set 变量名=值</code></p></section><section><h3 id=\"-示例\">✅ 示例<a class=\"anchor\" href=\"#-示例\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:14ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">set name=张三</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">echo 你好，%name%</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"-示例数学运算\">🔢 示例：数学运算<a class=\"anchor\" href=\"#-示例数学运算\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:14ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">@echo off</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">set /a a=5</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">set /a b=3</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">set /a sum=a+b</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">echo 和是：%sum%</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"-示例用户输入\">⌨ 示例：用户输入<a class=\"anchor\" href=\"#-示例用户输入\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:20ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">@echo off</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">set /p name=请输入你的名字：</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">echo 你好，%name%</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"-示例循环中使用变量延迟扩展\">🔁 示例：循环中使用变量（延迟扩展）<a class=\"anchor\" href=\"#-示例循环中使用变量延迟扩展\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:31ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">@echo off</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">setlocal enabledelayedexpansion</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">for /l %%i in (1,1,5) do (</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">set /a val=%%i*2</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">echo 第%%i项:!val!</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><blockquote>\n<p>🚨 注意：循环中需要用 <strong>!变量名!</strong> 而不是 <del>%变量名%</del>，并配合 <code>setlocal enabledelayedexpansion</code></p>\n</blockquote></section><section><h3 id=\"-示例清空变量\">🧽 示例：清空变量<a class=\"anchor\" href=\"#-示例清空变量\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p><code>set var=</code></p></section><section><h3 id=\"-高级技巧\">💡 高级技巧<a class=\"anchor\" href=\"#-高级技巧\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li><code>set \"var=value\"</code>（推荐写法，防止空格问题）</li>\n<li><code>set /a i+=1</code>支持累加减法等</li>\n<li><code>set /p</code>可用于制作简易菜单输入</li>\n</ul></section></section><section><h2 id=\"-什么是延迟扩展delayed-variable-expansion\">💡 什么是延迟扩展（Delayed Variable Expansion）<a class=\"anchor\" href=\"#-什么是延迟扩展delayed-variable-expansion\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><blockquote>\n<p>延迟扩展 = <strong>让变量在运行到那一行时才获取值</strong>，而不是在脚本解析阶段就确定值。</p>\n</blockquote><section><h3 id=\"-默认行为非延迟\">📌 默认行为（非延迟）<a class=\"anchor\" href=\"#-默认行为非延迟\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>批处理在执行 <strong>for/if</strong> 结构前，会先整体解析整段语句中的 %变量% —— 也就是说 “提前确定值”！</p><p>这就导致：你在 <strong>for</strong> 循环中改变了变量，但 %变量% 仍然是旧值。</p></section><section><h3 id=\"-问题例子没开启延迟扩展\">🧨 问题例子（没开启延迟扩展）<a class=\"anchor\" href=\"#-问题例子没开启延迟扩展\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:26ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">@echo off</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">set count=0</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">for /l %%i in (1,1,3) do (</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">set /a count+=1</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">echo 循环中：%count%</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"-输出是\">💥 输出是<a class=\"anchor\" href=\"#-输出是\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:5ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">循环中：0</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">循环中：0</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">循环中：0</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"-正确写法开启延迟扩展\">✅ 正确写法：开启延迟扩展<a class=\"anchor\" href=\"#-正确写法开启延迟扩展\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:31ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">@echo off</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">setlocal enabledelayedexpansion</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">set count=0</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">for /l %%i in (1,1,3) do (</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">set /a count+=1</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">echo 循环中：!count!</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section><section><h2 id=\"at命令\">at命令<a class=\"anchor\" href=\"#at命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><code>at</code> 命令是 Windows（尤其是早期版本）中的一个计划任务命令，用于在指定时间运行程序或命令。它已经被较新的 <code>schtasks</code> 命令取代，但在某些系统上仍然可用。</p><section><h3 id=\"-基本格式\">🧭 基本格式<a class=\"anchor\" href=\"#-基本格式\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:12ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">at [时间] [命令]</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>时间格式通常是<strong>24小时制</strong>，如 <code>14:30</code></p></section><section><h3 id=\"-示例用法\">✅ 示例用法<a class=\"anchor\" href=\"#-示例用法\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ol>\n<li>在下午2点30分执行一个程序：\n<code>at 14:30 \"notepad.exe\"</code></li>\n<li>执行一个批处理脚本：\n<code>at 18:00 xxx.bat</code></li>\n<li>查看当前已排的任务：\n<code>at</code></li>\n<li>删除任务：\n<code>at [任务ID] /delete</code></li>\n</ol></section><section><h3 id=\"️-注意事项\">⚠️ 注意事项<a class=\"anchor\" href=\"#️-注意事项\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\"><strong>限制/说明</strong></th><th align=\"center\"><strong>详情</strong></th></tr></thead><tbody><tr><td align=\"center\">✅ 管理员权限</td><td align=\"center\">需要以 <strong>管理员身份运行命令提示符</strong> 才能使用 <code>at</code></td></tr><tr><td align=\"center\">❌ 不支持日期计划</td><td align=\"center\">只能设置“<strong>今天</strong>几点执行”，不支持设置“哪天”</td></tr><tr><td align=\"center\">❌ 在 Win10 后被废弃</td><td align=\"center\">Windows 8/10/11 推荐使用 schtasks 命令</td></tr><tr><td align=\"center\">❌ 无法持久保存</td><td align=\"center\">重启后计划任务通常会丢失（默认行为）</td></tr></tbody></table></section><section><h3 id=\"-推荐替代schtasks\">🆕 推荐替代：schtasks<a class=\"anchor\" href=\"#-推荐替代schtasks\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:71ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">schtasks /create /tn \"OpenNotepad\" /tr \"notepad.exe\" /sc once /st 14:30</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section><section><h2 id=\"find命令和findstr命令\">find命令和findstr命令<a class=\"anchor\" href=\"#find命令和findstr命令\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li><code>find</code>命令查找的是纯文本字符串</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:27ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">find \"hello\" myfile.txt</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">// 查找文本中包含hello的行，不能使用正则表达式</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">/i 忽略大小写</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">/c 统计匹配的行数</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">/v 查找不包含某字符串的行</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li><code>findstr</code>功能更强可以用简单正则</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:30ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">findstr /R \"^A.*Z$\" myfile.txt</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">// 查找以A开头以Z结尾的行</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">/s 递归子目录</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">/i 忽略大小写</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">/r 正则模式</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">/c:\"exact phrase\"查找精确短语</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section>\n<section><h1 id=\"-示例模糊查找并杀掉进程名中包含-chrome-的程序\">✅ 示例：模糊查找并杀掉进程名中包含 chrome 的程序<a class=\"anchor\" href=\"#-示例模糊查找并杀掉进程名中包含-chrome-的程序\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:91ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">for /f \"tokens=2 delims= \" %%i in ('tasklist ^| findstr /i chrome') do taskkill /pid %%i /f</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li><code>/f</code>：逐行读取文件内容</li>\n<li><code>tokens=2 delims=</code>：取第二行，按空格分割</li>\n<li><code>%%i</code>和<code>%i</code>为在bat文件内运行和cmd终端运行</li>\n<li><code>('tasklist ^| findstr /i chrome')</code>：这里使用<code>''</code>和<code>^|</code>转义符是为了防止<code>for</code>命令将前后分为两个语句</li>\n<li><code>taskkill /pid %%i /f</code>：将指定的进程名程序杀死</li>\n</ul><section><h2 id=\"-扩展用法高级\">🧩 扩展用法（高级）<a class=\"anchor\" href=\"#-扩展用法高级\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"-只杀掉特定用户下的进程\">▶ 只杀掉特定用户下的进程<a class=\"anchor\" href=\"#-只杀掉特定用户下的进程\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:44ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">tasklist /v | findstr /i \"chrome myusername\"</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"-匹配多个关键词\">▶ 匹配多个关键词<a class=\"anchor\" href=\"#-匹配多个关键词\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:38ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">tasklist | findstr /i \"chrome firefox\"</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"-过滤多个字段通过正则\">▶ 过滤多个字段（通过正则）<a class=\"anchor\" href=\"#-过滤多个字段通过正则\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:43ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">tasklist | findstr /r /i \"notepad.*Console\"</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section></section>\n<section><h1 id=\"-for-循环常用语法和选项\">✅ for 循环常用语法和选项<a class=\"anchor\" href=\"#-for-循环常用语法和选项\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h2 id=\"-常用结构一遍历文件列表\">🧩 常用结构一：遍历文件列表<a class=\"anchor\" href=\"#-常用结构一遍历文件列表\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:30ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">for %%f in (*.txt) do echo %%f</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"-常用结构二读取文件内容逐行处理\">🧩 常用结构二：读取文件内容（逐行处理）<a class=\"anchor\" href=\"#-常用结构二读取文件内容逐行处理\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:70ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">for /f \"tokens=1,2 delims= \" %%a in (data.csv) do echo 第一列=%%a 第二列=%%b</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"-常用结构三命令输出处理\">🧩 常用结构三：命令输出处理<a class=\"anchor\" href=\"#-常用结构三命令输出处理\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:77ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">for /f \"usebackq tokens=*\" %%i in ('tasklist ^| findstr notepad') do echo %%i</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li><code>usebackq</code>：让命令用反引号包围</li>\n<li><code>tokens=*</code>：整行提取(防止空格截断)</li>\n</ul></section><section><h2 id=\"-for-参数说明\">🔧 for 参数说明<a class=\"anchor\" href=\"#-for-参数说明\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\"><strong>参数</strong></th><th align=\"center\"><strong>作用</strong></th></tr></thead><tbody><tr><td align=\"center\"><code>/f</code></td><td align=\"center\">从文本文件或命令输出中逐行读取</td></tr><tr><td align=\"center\"><code>/r</code></td><td align=\"center\">递归遍历目录</td></tr><tr><td align=\"center\"><code>/d</code></td><td align=\"center\">仅匹配目录名</td></tr><tr><td align=\"center\"><code>tokens=n</code></td><td align=\"center\">指定取第几列(n可以是多个)</td></tr><tr><td align=\"center\"><code>delims=x</code></td><td align=\"center\">指定分隔符(默认为空格和制表符)</td></tr><tr><td align=\"center\"><code>usebackq</code></td><td align=\"center\">使用反引号执行命令/支持文件路径含空格</td></tr></tbody></table></section></section>\n<section><h1 id=\"-if-语句常用结构\">✅ if 语句常用结构<a class=\"anchor\" href=\"#-if-语句常用结构\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h2 id=\"-结构一字符串比较\">🧩 结构一：字符串比较<a class=\"anchor\" href=\"#-结构一字符串比较\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:31ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">if \"%var%\"==\"hello\" echo 是hello</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h2 id=\"-结构二数字比较\">🧩 结构二：数字比较<a class=\"anchor\" href=\"#-结构二数字比较\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:29ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">if %num% GEQ 100 echo 大于等于100</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\"><strong>比较符</strong></th><th align=\"center\"><strong>含义</strong></th></tr></thead><tbody><tr><td align=\"center\"><code>==</code></td><td align=\"center\">等于(字符串)</td></tr><tr><td align=\"center\"><code>NEQ</code></td><td align=\"center\">不等于</td></tr><tr><td align=\"center\"><code>LSS</code></td><td align=\"center\">小于</td></tr><tr><td align=\"center\"><code>LEQ</code></td><td align=\"center\">小于等于</td></tr><tr><td align=\"center\"><code>GTR</code></td><td align=\"center\">大于</td></tr><tr><td align=\"center\"><code>GEQ</code></td><td align=\"center\">大于等于</td></tr></tbody></table><blockquote>\n<p>⚠ 注意：数字比较时变量不能加引号。</p>\n</blockquote></section><section><h2 id=\"-结构三文件目录判断\">🧩 结构三：文件/目录判断<a class=\"anchor\" href=\"#-结构三文件目录判断\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:37ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">if exist myfile.txt echo 文件存在</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">if not exist myfolder\\NUL echo 文件夹不存在</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>🧩 结构四：带括号的多语句判断（推荐）</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:19ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">if \"%var%\"==\"yes\" (</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">echo 用户确认</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">echo 正在继续</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">) else (</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">echo 用户取消</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section>\n<section><h1 id=\"-练习1遍历所有-log-文件并显示文件名和行数\">📝 练习1：遍历所有 .log 文件，并显示文件名和行数<a class=\"anchor\" href=\"#-练习1遍历所有-log-文件并显示文件名和行数\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:24ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">for %%f in (*.log) do (]</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">echo 文件：%%f</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">find /c /v \"\" \"%%f\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><section><h2 id=\"-各部分含义\">✅ 各部分含义<a class=\"anchor\" href=\"#-各部分含义\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\"><strong>部分</strong></th><th align=\"center\"><strong>含义</strong></th></tr></thead><tbody><tr><td align=\"center\"><code>find</code></td><td align=\"center\">Windows的文本查找命令</td></tr><tr><td align=\"center\"><code>/c</code></td><td align=\"center\">只显示匹配行的数量</td></tr><tr><td align=\"center\"><code>/v \"\"</code></td><td align=\"center\">匹配所有”<strong>不包含空字符串</strong>”的行->相当于”所有行”</td></tr><tr><td align=\"center\"><code>%%f</code></td><td align=\"center\">要处理的文件名(在<code>for</code>循环中)</td></tr></tbody></table></section></section>\n<section><h1 id=\"-练习3用-tasklist-和-if-判断某进程是否存在\">📝 练习3：用 tasklist 和 if 判断某进程是否存在<a class=\"anchor\" href=\"#-练习3用-tasklist-和-if-判断某进程是否存在\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:34ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">tasklist | findstr /i notepad >nul</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">if errorlevel 1 (</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">echo Notepad 没有运行</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">) else (</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">echo Notepad 正在运行</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>\n<section><h1 id=\"字符串截取语法\">✨字符串截取语法<a class=\"anchor\" href=\"#字符串截取语法\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><section><h2 id=\"-通用语法\">✅ 通用语法<a class=\"anchor\" href=\"#-通用语法\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:14ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">%变量名:~起始位置,长度%</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><ul>\n<li><em>起始位置</em>：从0开始</li>\n<li><em>长度</em>：截取的字符数(可以省略，表示到结尾)</li>\n</ul></section><section><h2 id=\"-举例说明\">✅ 举例说明<a class=\"anchor\" href=\"#-举例说明\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><section><h3 id=\"-示例1处理-date\">📆 示例1：处理 %date%<a class=\"anchor\" href=\"#-示例1处理-date\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>假设 <em>%date% = 2025/04/29</em></p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>表达式</th><th>结果</th><th>说明</th></tr></thead><tbody><tr><td><code>%date:~0,4%</code></td><td><code>2025</code></td><td>年</td></tr><tr><td><code>%date:~5,2%</code></td><td><code>04</code></td><td>月</td></tr><tr><td><code>%date:~8,2%</code></td><td><code>29</code></td><td>日</td></tr></tbody></table></section></section></section>","metadata":{"headings":[{"depth":1,"slug":"-windows批处理编程实践","text":"📚 Windows批处理编程实践#"},{"depth":2,"slug":"什么是批处理命令","text":"什么是批处理命令#"},{"depth":2,"slug":"如何编辑批处理程序","text":"如何编辑批处理程序#"},{"depth":2,"slug":"批处理程序可以做什么","text":"批处理程序可以做什么#"},{"depth":2,"slug":"一个基本的批处理文件","text":"一个基本的批处理文件#"},{"depth":2,"slug":"命令分类","text":"命令分类#"},{"depth":3,"slug":"内部命令","text":"内部命令#"},{"depth":3,"slug":"外部命令","text":"外部命令#"},{"depth":2,"slug":"算数运算","text":"算数运算#"},{"depth":3,"slug":"命令模式","text":"命令模式#"},{"depth":3,"slug":"文本模式","text":"文本模式#"},{"depth":2,"slug":"重定向运算","text":"重定向运算#"},{"depth":2,"slug":"关系运算","text":"关系运算#"},{"depth":2,"slug":"多命令运算符","text":"多命令运算符#"},{"depth":2,"slug":"管道符号运算","text":"管道符号运算#"},{"depth":2,"slug":"批处理基本命令","text":"批处理基本命令#"},{"depth":3,"slug":"命令格式","text":"命令格式#"},{"depth":2,"slug":"批处理文件参数传递","text":"批处理文件参数传递#"},{"depth":2,"slug":"注释符","text":"注释符#"},{"depth":2,"slug":"命令提示符","text":"命令提示符#"},{"depth":3,"slug":"颜色命令","text":"颜色命令#"},{"depth":3,"slug":"标题命令","text":"标题命令#"},{"depth":3,"slug":"时间相关命令","text":"时间相关命令#"},{"depth":3,"slug":"启动命令","text":"启动命令#"},{"depth":3,"slug":"使用其他bat文件","text":"使用其他bat文件#"},{"depth":2,"slug":"任务列表查看","text":"任务列表查看#"},{"depth":2,"slug":"任务终止命令","text":"任务终止命令#"},{"depth":2,"slug":"文件夹结构查看命令","text":"文件夹结构查看命令#"},{"depth":2,"slug":"关机命令","text":"关机命令#"},{"depth":2,"slug":"计划任务命令","text":"计划任务命令#"},{"depth":3,"slug":"-常用格式","text":"🧭 常用格式#"},{"depth":3,"slug":"-常用操作命令","text":"🔧 常用操作命令#"},{"depth":4,"slug":"-创建任务","text":"📅 创建任务#"},{"depth":4,"slug":"-查询任务列表","text":"📜 查询任务列表#"},{"depth":4,"slug":"-删除任务","text":"❌ 删除任务#"},{"depth":4,"slug":"-修改任务","text":"📝 修改任务#"},{"depth":4,"slug":"️-运行一次任务手动触发","text":"▶️ 运行一次任务（手动触发）#"},{"depth":4,"slug":"️-停止正在运行的任务","text":"⏹️ 停止正在运行的任务#"},{"depth":3,"slug":"-提示","text":"💡 提示#"},{"depth":2,"slug":"调用命令","text":"调用命令#"},{"depth":3,"slug":"-基本用法","text":"📌 基本用法#"},{"depth":4,"slug":"1️⃣-调用另一个批处理脚本","text":"1️⃣ 调用另一个批处理脚本#"},{"depth":4,"slug":"2️⃣-调用并传递参数","text":"2️⃣ 调用并传递参数#"},{"depth":4,"slug":"3️⃣-调用子程序同一个脚本内部","text":"3️⃣ 调用子程序（同一个脚本内部）#"},{"depth":4,"slug":"-常见场景","text":"🔁 常见场景#"},{"depth":2,"slug":"批处理环境变量","text":"批处理环境变量#"},{"depth":3,"slug":"-基本用法-1","text":"📌 基本用法#"},{"depth":2,"slug":"目录浏览命令dir","text":"目录浏览命令dir#"},{"depth":3,"slug":"-基本用法-2","text":"📌 基本用法#"},{"depth":4,"slug":"-查看所有信息包括隐藏目录文件","text":"🔑 查看所有信息（包括隐藏目录文件）#"},{"depth":4,"slug":"-以小写形式输出","text":"🗝 以小写形式输出#"},{"depth":3,"slug":"目录重命名命令","text":"目录重命名命令#"},{"depth":3,"slug":"目录拷贝命令","text":"目录拷贝命令#"},{"depth":3,"slug":"文件删除命令","text":"文件删除命令#"},{"depth":3,"slug":"文件剪切命令","text":"文件剪切命令#"},{"depth":2,"slug":"网络相关命令","text":"网络相关命令#"},{"depth":3,"slug":"-tracert-命令windows","text":"🧭 tracert 命令（Windows）#"},{"depth":4,"slug":"-用途","text":"📌 用途#"},{"depth":4,"slug":"-基本语法","text":"✅ 基本语法#"},{"depth":3,"slug":"-ipconfig-命令作用","text":"🧭 ipconfig 命令作用#"},{"depth":3,"slug":"-常用命令大全","text":"✅ 常用命令大全#"},{"depth":3,"slug":"-arp-命令详解windows","text":"📡 arp 命令详解（Windows）#"},{"depth":4,"slug":"-用途-1","text":"🎯 用途#"},{"depth":3,"slug":"-常用命令速查表","text":"🧾 常用命令速查表#"},{"depth":3,"slug":"-注意事项","text":"📌 注意事项#"},{"depth":2,"slug":"条件判断结构","text":"条件判断结构#"},{"depth":3,"slug":"-if-else结构","text":"😎 if-else结构#"},{"depth":4,"slug":"-基本语法-1","text":"✅ 基本语法#"},{"depth":3,"slug":"-示例判断文件是否存在","text":"🔍 示例：判断文件是否存在#"},{"depth":3,"slug":"-for-循环结构","text":"🧠 for 循环结构#"},{"depth":4,"slug":"-遍历文件夹中的所有文件","text":"✅ 遍历文件夹中的所有文件#"},{"depth":4,"slug":"-遍历目录文件夹","text":"😚 遍历目录(文件夹)#"},{"depth":4,"slug":"-遍历文件夹中的所有子目录和文件递归recursion","text":"🔄 遍历文件夹中的所有子目录和文件（递归）(recursion)#"},{"depth":4,"slug":"-遍历一个列表","text":"🧪 遍历一个列表#"},{"depth":4,"slug":"-if-与-for-嵌套使用判断文件是否包含关键字","text":"🧠 if 与 for 嵌套使用（判断文件是否包含关键字）#"},{"depth":4,"slug":"逐行读取文件内容","text":"逐行读取文件内容#"},{"depth":4,"slug":"-常用增强参数","text":"🔥 常用增强参数#"},{"depth":3,"slug":"-命名习惯但不是语法限制","text":"✅ 命名习惯（但不是语法限制）#"},{"depth":2,"slug":"goto命令","text":"goto命令#"},{"depth":3,"slug":"-基本语法-2","text":"✅ 基本语法#"},{"depth":3,"slug":"-示例if-判断--goto-跳转","text":"🧩 示例：if 判断 + goto 跳转#"},{"depth":3,"slug":"-示例goto-构造简单循环","text":"♻ 示例：goto 构造简单循环#"},{"depth":2,"slug":"set命令","text":"set命令#"},{"depth":3,"slug":"-基本语法-3","text":"🧩 基本语法#"},{"depth":3,"slug":"-示例","text":"✅ 示例#"},{"depth":3,"slug":"-示例数学运算","text":"🔢 示例：数学运算#"},{"depth":3,"slug":"-示例用户输入","text":"⌨ 示例：用户输入#"},{"depth":3,"slug":"-示例循环中使用变量延迟扩展","text":"🔁 示例：循环中使用变量（延迟扩展）#"},{"depth":3,"slug":"-示例清空变量","text":"🧽 示例：清空变量#"},{"depth":3,"slug":"-高级技巧","text":"💡 高级技巧#"},{"depth":2,"slug":"-什么是延迟扩展delayed-variable-expansion","text":"💡 什么是延迟扩展（Delayed Variable Expansion）#"},{"depth":3,"slug":"-默认行为非延迟","text":"📌 默认行为（非延迟）#"},{"depth":3,"slug":"-问题例子没开启延迟扩展","text":"🧨 问题例子（没开启延迟扩展）#"},{"depth":3,"slug":"-输出是","text":"💥 输出是#"},{"depth":3,"slug":"-正确写法开启延迟扩展","text":"✅ 正确写法：开启延迟扩展#"},{"depth":2,"slug":"at命令","text":"at命令#"},{"depth":3,"slug":"-基本格式","text":"🧭 基本格式#"},{"depth":3,"slug":"-示例用法","text":"✅ 示例用法#"},{"depth":3,"slug":"️-注意事项","text":"⚠️ 注意事项#"},{"depth":3,"slug":"-推荐替代schtasks","text":"🆕 推荐替代：schtasks#"},{"depth":2,"slug":"find命令和findstr命令","text":"find命令和findstr命令#"},{"depth":1,"slug":"-示例模糊查找并杀掉进程名中包含-chrome-的程序","text":"✅ 示例：模糊查找并杀掉进程名中包含 chrome 的程序#"},{"depth":2,"slug":"-扩展用法高级","text":"🧩 扩展用法（高级）#"},{"depth":3,"slug":"-只杀掉特定用户下的进程","text":"▶ 只杀掉特定用户下的进程#"},{"depth":3,"slug":"-匹配多个关键词","text":"▶ 匹配多个关键词#"},{"depth":3,"slug":"-过滤多个字段通过正则","text":"▶ 过滤多个字段（通过正则）#"},{"depth":1,"slug":"-for-循环常用语法和选项","text":"✅ for 循环常用语法和选项#"},{"depth":2,"slug":"-常用结构一遍历文件列表","text":"🧩 常用结构一：遍历文件列表#"},{"depth":2,"slug":"-常用结构二读取文件内容逐行处理","text":"🧩 常用结构二：读取文件内容（逐行处理）#"},{"depth":2,"slug":"-常用结构三命令输出处理","text":"🧩 常用结构三：命令输出处理#"},{"depth":2,"slug":"-for-参数说明","text":"🔧 for 参数说明#"},{"depth":1,"slug":"-if-语句常用结构","text":"✅ if 语句常用结构#"},{"depth":2,"slug":"-结构一字符串比较","text":"🧩 结构一：字符串比较#"},{"depth":2,"slug":"-结构二数字比较","text":"🧩 结构二：数字比较#"},{"depth":2,"slug":"-结构三文件目录判断","text":"🧩 结构三：文件/目录判断#"},{"depth":1,"slug":"-练习1遍历所有-log-文件并显示文件名和行数","text":"📝 练习1：遍历所有 .log 文件，并显示文件名和行数#"},{"depth":2,"slug":"-各部分含义","text":"✅ 各部分含义#"},{"depth":1,"slug":"-练习3用-tasklist-和-if-判断某进程是否存在","text":"📝 练习3：用 tasklist 和 if 判断某进程是否存在#"},{"depth":1,"slug":"字符串截取语法","text":"✨字符串截取语法#"},{"depth":2,"slug":"-通用语法","text":"✅ 通用语法#"},{"depth":2,"slug":"-举例说明","text":"✅ 举例说明#"},{"depth":3,"slug":"-示例1处理-date","text":"📆 示例1：处理 %date%#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"Bat脚本编程笔记","published":"2025-04-27T00:00:00.000Z","description":"Bat编程是好文明吗? bat or powershell","category":"bat","tags":["bat","cmd","language","programming","code","windows"],"author":"Akeboshi Himari","draft":false,"minutes":21,"words":4215,"excerpt":"Batch file programming是微软操作系统自带原生的开发语言，不需要构建任何环境就可以执行的脚本。"},"imagePaths":[]}},"collection":"posts"}],"2024-05-01":[{"id":"markdown-extended","data":{"title":"Markdown Extended Features","published":"2024-05-01T00:00:00.000Z","updated":"2024-11-29T00:00:00.000Z","draft":false,"description":"Read more about Markdown features in Mizuki","image":"","tags":["Demo","Example","Markdown","mizuki"],"category":"Examples","lang":"","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"Simple Guides for Mizuki","prevSlug":"guide","nextTitle":"Bat脚本编程笔记","nextSlug":"bat_programming"},"body":"## GitHub Repository Cards\nYou can add dynamic cards that link to GitHub repositories, on page load, the repository information is pulled from the GitHub API. \n\n::github{repo=\"matsuzaka-yuki/Mizuki\"}\n\nCreate a GitHub repository card with the code `::github{repo=\"matsuzaka-yuki/Mizuki\"}`.\n\n```markdown\n::github{repo=\"matsuzaka-yuki/Mizuki\"}\n```\n\n## Admonitions\n\nFollowing types of admonitions are supported: `note` `tip` `important` `warning` `caution`\n\n:::note\nHighlights information that users should take into account, even when skimming.\n:::\n\n:::tip\nOptional information to help a user be more successful.\n:::\n\n:::important\nCrucial information necessary for users to succeed.\n:::\n\n:::warning\nCritical content demanding immediate user attention due to potential risks.\n:::\n\n:::caution\nNegative potential consequences of an action.\n:::\n\n### Basic Syntax\n\n```markdown\n:::note\nHighlights information that users should take into account, even when skimming.\n:::\n\n:::tip\nOptional information to help a user be more successful.\n:::\n```\n\n### Custom Titles\n\nThe title of the admonition can be customized.\n\n:::note[MY CUSTOM TITLE]\nThis is a note with a custom title.\n:::\n\n```markdown\n:::note[MY CUSTOM TITLE]\nThis is a note with a custom title.\n:::\n```\n\n### GitHub Syntax\n\n> [!TIP]\n> [The GitHub syntax](https://github.com/orgs/community/discussions/16925) is also supported.\n\n```\n> [!NOTE]\n> The GitHub syntax is also supported.\n\n> [!TIP]\n> The GitHub syntax is also supported.\n```\n\n### Spoiler\n\nYou can add spoilers to your text. The text also supports **Markdown** syntax.\n\nThe content :spoiler[is hidden **ayyy**]!\n\n```markdown\nThe content :spoiler[is hidden **ayyy**]!","filePath":"src/content/posts/markdown-extended.md","digest":"d8ebd636c64dcb46","rendered":{"html":"<section><h2 id=\"github-repository-cards\">GitHub Repository Cards<a class=\"anchor\" href=\"#github-repository-cards\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>You can add dynamic cards that link to GitHub repositories, on page load, the repository information is pulled from the GitHub API.</p><a id=\"GCv36vii-card\" class=\"card-github fetch-waiting no-styling\" href=\"https://github.com/matsuzaka-yuki/Mizuki\" target=\"_blank\" repo=\"matsuzaka-yuki/Mizuki\"><div class=\"gc-titlebar\"><div class=\"gc-titlebar-left\"><div class=\"gc-owner\"><div id=\"GCv36vii-avatar\" class=\"gc-avatar\"></div><div class=\"gc-user\">matsuzaka-yuki</div></div><div class=\"gc-divider\">/</div><div class=\"gc-repo\">Mizuki</div></div><div class=\"github-logo\"></div></div><div id=\"GCv36vii-description\" class=\"gc-description\">Waiting for api.github.com...</div><div class=\"gc-infobar\"><div id=\"GCv36vii-stars\" class=\"gc-stars\">00K</div><div id=\"GCv36vii-forks\" class=\"gc-forks\">0K</div><div id=\"GCv36vii-license\" class=\"gc-license\">0K</div><span id=\"GCv36vii-language\" class=\"gc-language\">Waiting...</span></div><script id=\"GCv36vii-script\" type=\"text/javascript\" defer>\n      fetch('https://api.github.com/repos/matsuzaka-yuki/Mizuki', { referrerPolicy: \"no-referrer\" }).then(response => response.json()).then(data => {\n        document.getElementById('GCv36vii-description').innerText = data.description?.replace(/:[a-zA-Z0-9_]+:/g, '') || \"Description not set\";\n        document.getElementById('GCv36vii-language').innerText = data.language;\n        document.getElementById('GCv36vii-forks').innerText = Intl.NumberFormat('en-us', { notation: \"compact\", maximumFractionDigits: 1 }).format(data.forks).replaceAll(\" \", '');\n        document.getElementById('GCv36vii-stars').innerText = Intl.NumberFormat('en-us', { notation: \"compact\", maximumFractionDigits: 1 }).format(data.stargazers_count).replaceAll(\" \", '');\n        const avatarEl = document.getElementById('GCv36vii-avatar');\n        avatarEl.style.backgroundImage = 'url(' + data.owner.avatar_url + ')';\n        avatarEl.style.backgroundColor = 'transparent';\n        document.getElementById('GCv36vii-license').innerText = data.license?.spdx_id || \"no-license\";\n        document.getElementById('GCv36vii-card').classList.remove(\"fetch-waiting\");\n        console.log(\"[GITHUB-CARD] Loaded card for matsuzaka-yuki/Mizuki | GCv36vii.\")\n      }).catch(err => {\n        const c = document.getElementById('GCv36vii-card');\n        c?.classList.add(\"fetch-error\");\n        console.warn(\"[GITHUB-CARD] (Error) Loading card for matsuzaka-yuki/Mizuki | GCv36vii.\")\n      })\n    \x3C/script></a><p>Create a GitHub repository card with the code <code>::github{repo=\"matsuzaka-yuki/Mizuki\"}</code>.</p><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"markdown\" class=\"wrap\" style=\"--ecMaxLine:38ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">::github{repo=\"matsuzaka-yuki/Mizuki\"}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>\n<section><h2 id=\"admonitions\">Admonitions<a class=\"anchor\" href=\"#admonitions\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>Following types of admonitions are supported: <code>note</code> <code>tip</code> <code>important</code> <code>warning</code> <code>caution</code></p><blockquote class=\"admonition bdm-note\"><span class=\"bdm-title\">NOTE</span><p>Highlights information that users should take into account, even when skimming.</p></blockquote><blockquote class=\"admonition bdm-tip\"><span class=\"bdm-title\">TIP</span><p>Optional information to help a user be more successful.</p></blockquote><blockquote class=\"admonition bdm-important\"><span class=\"bdm-title\">IMPORTANT</span><p>Crucial information necessary for users to succeed.</p></blockquote><blockquote class=\"admonition bdm-warning\"><span class=\"bdm-title\">WARNING</span><p>Critical content demanding immediate user attention due to potential risks.</p></blockquote><blockquote class=\"admonition bdm-caution\"><span class=\"bdm-title\">CAUTION</span><p>Negative potential consequences of an action.</p></blockquote><section><h3 id=\"basic-syntax\">Basic Syntax<a class=\"anchor\" href=\"#basic-syntax\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"markdown\" class=\"wrap\" style=\"--ecMaxLine:79ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">:::note</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">Highlights information that users should take into account, even when skimming.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">:::</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">:::tip</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">Optional information to help a user be more successful.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">:::</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"custom-titles\">Custom Titles<a class=\"anchor\" href=\"#custom-titles\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>The title of the admonition can be customized.</p><blockquote class=\"admonition bdm-note\"><span class=\"bdm-title\"><div>MY CUSTOM TITLE</div></span><p>This is a note with a custom title.</p></blockquote><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"markdown\" class=\"wrap\" style=\"--ecMaxLine:35ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">:::note[MY CUSTOM TITLE]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">This is a note with a custom title.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">:::</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"github-syntax\">GitHub Syntax<a class=\"anchor\" href=\"#github-syntax\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><blockquote class=\"admonition bdm-tip\"><span class=\"bdm-title\">TIP</span><p><a href=\"https://github.com/orgs/community/discussions/16925\">The GitHub syntax</a> is also supported.</p></blockquote><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:38ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> [!NOTE]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> The GitHub syntax is also supported.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> [!TIP]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">> The GitHub syntax is also supported.</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section><section><h3 id=\"spoiler\">Spoiler<a class=\"anchor\" href=\"#spoiler\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>You can add spoilers to your text. The text also supports <strong>Markdown</strong> syntax.</p><p>The content <spoiler>is hidden <strong>ayyy</strong></spoiler>!</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"markdown\" class=\"wrap\" style=\"--ecMaxLine:41ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292E;--1:#E1E4E8\">The content :spoiler[is hidden </span><span style=\"--0:#24292E;--0fw:bold;--1:#E1E4E8;--1fw:bold\">**ayyy**</span><span style=\"--0:#24292E;--1:#E1E4E8\">]!</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section></section>","metadata":{"headings":[{"depth":2,"slug":"github-repository-cards","text":"GitHub Repository Cards#"},{"depth":2,"slug":"admonitions","text":"Admonitions#"},{"depth":3,"slug":"basic-syntax","text":"Basic Syntax#"},{"depth":3,"slug":"custom-titles","text":"Custom Titles#"},{"depth":3,"slug":"github-syntax","text":"GitHub Syntax#"},{"depth":3,"slug":"spoiler","text":"Spoiler#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"Markdown Extended Features","published":"2024-05-01T00:00:00.000Z","updated":"2024-11-29T00:00:00.000Z","description":"Read more about Markdown features in Mizuki","image":"","tags":["Demo","Example","Markdown","mizuki"],"category":"Examples","draft":false,"minutes":1,"words":176,"excerpt":"You can add dynamic cards that link to GitHub repositories, on page load, the repository information is pulled from the GitHub API."},"imagePaths":[]}},"collection":"posts"}],"2024-04-01":[{"id":"guide","data":{"title":"Simple Guides for Mizuki","published":"2024-04-01T00:00:00.000Z","draft":false,"description":"How to use this blog template.","image":"./cover.png","tags":["Mizuki","Blogging","Customization"],"category":"Guides","lang":"","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"Markdown Mermaid","prevSlug":"markdown-mermaid","nextTitle":"Markdown Extended Features","nextSlug":"markdown-extended"},"body":"This blog template is built with [Astro](https://astro.build/). For the things that are not mentioned in this guide, you may find the answers in the [Astro Docs](https://docs.astro.build/).\n\n## Front-matter of Posts\n\n```yaml\n---\ntitle: My First Blog Post\npublished: 2023-09-09\ndescription: This is the first post of my new Astro blog.\nimage: ./cover.jpg\ntags: [Foo, Bar]\ncategory: Front-end\ndraft: false\n---\n```\n\n\n\n\n| Attribute     | Description                                                                                                                                                                                                 |\n|---------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| `title`       | The title of the post.                                                                                                                                                                                      |\n| `published`   | The date the post was published.                                                                                                                                                                            |\n| `pinned`      | Whether this post is pinned to the top of the post list.                                                                                                                                                   |\n| `description` | A short description of the post. Displayed on index page.                                                                                                                                                   |\n| `image`       | The cover image path of the post.<br/>1. Start with `http://` or `https://`: Use web image<br/>2. Start with `/`: For image in `public` dir<br/>3. With none of the prefixes: Relative to the markdown file |\n| `tags`        | The tags of the post.                                                                                                                                                                                       |\n| `category`    | The category of the post.                                                                                                                                                                                   |\n| `licenseName` | The license name for the post content.                                                                                                                                                                      |\n| `author`      | The author of the post.                                                                                                                                                                                     |\n| `sourceLink`  | The source link or reference for the post content.                                                                                                                                                          |\n| `draft`       | If this post is still a draft, which won't be displayed.                                                                                                                                                    |\n\n## Where to Place the Post Files\n\n\n\nYour post files should be placed in `src/content/posts/` directory. You can also create sub-directories to better organize your posts and assets.\n\n```\nsrc/content/posts/\n├── post-1.md\n└── post-2/\n    ├── cover.png\n    └── index.md\n```","filePath":"src/content/posts/guide/index.md","digest":"0a690933be771c1d","rendered":{"html":"<p>This blog template is built with <a href=\"https://astro.build/\">Astro</a>. For the things that are not mentioned in this guide, you may find the answers in the <a href=\"https://docs.astro.build/\">Astro Docs</a>.</p>\n<section><h2 id=\"front-matter-of-posts\">Front-matter of Posts<a class=\"anchor\" href=\"#front-matter-of-posts\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"yaml\" class=\"wrap\" style=\"--ecMaxLine:57ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">---</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">title</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">My First Blog Post</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">published</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#005CC5;--1:#79B8FF\">2023-09-09</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">description</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">This is the first post of my new Astro blog.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">image</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">./cover.jpg</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">tags</span><span style=\"--0:#24292E;--1:#E1E4E8\">: [</span><span style=\"--0:#032F62;--1:#9ECBFF\">Foo</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#032F62;--1:#9ECBFF\">Bar</span><span style=\"--0:#24292E;--1:#E1E4E8\">]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">category</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">Front-end</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">draft</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#005CC5;--1:#79B8FF\">false</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">---</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>Attribute</th><th>Description</th></tr></thead><tbody><tr><td><code>title</code></td><td>The title of the post.</td></tr><tr><td><code>published</code></td><td>The date the post was published.</td></tr><tr><td><code>pinned</code></td><td>Whether this post is pinned to the top of the post list.</td></tr><tr><td><code>description</code></td><td>A short description of the post. Displayed on index page.</td></tr><tr><td><code>image</code></td><td>The cover image path of the post.<br>1. Start with <code>http://</code> or <code>https://</code>: Use web image<br>2. Start with <code>/</code>: For image in <code>public</code> dir<br>3. With none of the prefixes: Relative to the markdown file</td></tr><tr><td><code>tags</code></td><td>The tags of the post.</td></tr><tr><td><code>category</code></td><td>The category of the post.</td></tr><tr><td><code>licenseName</code></td><td>The license name for the post content.</td></tr><tr><td><code>author</code></td><td>The author of the post.</td></tr><tr><td><code>sourceLink</code></td><td>The source link or reference for the post content.</td></tr><tr><td><code>draft</code></td><td>If this post is still a draft, which won’t be displayed.</td></tr></tbody></table></section>\n<section><h2 id=\"where-to-place-the-post-files\">Where to Place the Post Files<a class=\"anchor\" href=\"#where-to-place-the-post-files\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>Your post files should be placed in <code>src/content/posts/</code> directory. You can also create sub-directories to better organize your posts and assets.</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:18ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">src/content/posts/</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">├── post-1.md</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">└── post-2/</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">├── cover.png</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">└── index.md</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>","metadata":{"headings":[{"depth":2,"slug":"front-matter-of-posts","text":"Front-matter of Posts#"},{"depth":2,"slug":"where-to-place-the-post-files","text":"Where to Place the Post Files#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"Simple Guides for Mizuki","published":"2024-04-01T00:00:00.000Z","description":"How to use this blog template.","image":"./cover.png","tags":["Mizuki","Blogging","Customization"],"category":"Guides","draft":false,"minutes":1,"words":186,"excerpt":"This blog template is built with Astro. For the things that are not mentioned in this guide, you may find the answers in the Astro Docs."},"imagePaths":[]}},"collection":"posts"}],"2023-10-01":[{"id":"markdown-mermaid","data":{"title":"Markdown Mermaid","published":"2023-10-01T00:00:00.000Z","draft":false,"description":"A simple example of a Markdown blog post with Mermaid.","image":"","tags":["Markdown","Blogging","Mermaid"],"category":"Examples","lang":"","pinned":false,"author":"","sourceLink":"","licenseName":"","licenseUrl":"","encrypted":false,"password":"","prevTitle":"","prevSlug":"","nextTitle":"Simple Guides for Mizuki","nextSlug":"guide"},"body":"# Complete Guide to Markdown with Mermaid Diagrams\n\nThis article demonstrates how to create various complex diagrams using Mermaid in Markdown documents, including flowcharts, sequence diagrams, Gantt charts, class diagrams, and state diagrams.\n\n## Flowchart Example\n\nFlowcharts are excellent for representing processes or algorithm steps.\n\n\n\n\n```mermaid\ngraph TD\n    A[Start] --> B{Condition Check}\n    B -->|Yes| C[Process Step 1]\n    B -->|No| D[Process Step 2]\n    C --> E[Subprocess]\n    D --> E\n    subgraph E [Subprocess Details]\n        E1[Substep 1] --> E2[Substep 2]\n        E2 --> E3[Substep 3]\n    end\n    E --> F{Another Decision}\n    F -->|Option 1| G[Result 1]\n    F -->|Option 2| H[Result 2]\n    F -->|Option 3| I[Result 3]\n    G --> J[End]\n    H --> J\n    I --> J\n```\n\n## Sequence Diagram Example\n\nSequence diagrams show interactions between objects over time.\n\n```mermaid\nsequenceDiagram\n    participant User\n    participant WebApp\n    participant Server\n    participant Database\n\n    User->>WebApp: Submit Login Request\n    WebApp->>Server: Send Auth Request\n    Server->>Database: Query User Credentials\n    Database-->>Server: Return User Data\n    Server-->>WebApp: Return Auth Result\n    \n    alt Auth Successful\n        WebApp->>User: Show Welcome Page\n        WebApp->>Server: Request User Data\n        Server->>Database: Get User Preferences\n        Database-->>Server: Return Preferences\n        Server-->>WebApp: Return User Data\n        WebApp->>User: Load Personalized Interface\n    else Auth Failed\n        WebApp->>User: Show Error Message\n        WebApp->>User: Prompt Re-entry\n    end\n```\n\n## Gantt Chart Example\n\nGantt charts are perfect for displaying project schedules and timelines.\n\n```mermaid\ngantt\n    title Website Development Project Timeline\n    dateFormat  YYYY-MM-DD\n    axisFormat  %m/%d\n    \n    section Design Phase\n    Requirements Analysis      :a1, 2023-10-01, 7d\n    UI Design                 :a2, after a1, 10d\n    Prototype Creation        :a3, after a2, 5d\n    \n    section Development Phase\n    Frontend Development      :b1, 2023-10-20, 15d\n    Backend Development       :b2, after a2, 18d\n    Database Design           :b3, after a1, 12d\n    \n    section Testing Phase\n    Unit Testing              :c1, after b1, 8d\n    Integration Testing       :c2, after b2, 10d\n    User Acceptance Testing   :c3, after c2, 7d\n    \n    section Deployment\n    Production Deployment     :d1, after c3, 3d\n    Launch                    :milestone, after d1, 0d\n```\n\n## Class Diagram Example\n\nClass diagrams show the static structure of a system, including classes, attributes, methods, and their relationships.\n\n```mermaid\nclassDiagram\n    class User {\n        +String username\n        +String password\n        +String email\n        +Boolean active\n        +login()\n        +logout()\n        +updateProfile()\n    }\n    \n    class Article {\n        +String title\n        +String content\n        +Date publishDate\n        +Boolean published\n        +publish()\n        +edit()\n        +delete()\n    }\n    \n    class Comment {\n        +String content\n        +Date commentDate\n        +addComment()\n        +deleteComment()\n    }\n    \n    class Category {\n        +String name\n        +String description\n        +addArticle()\n        +removeArticle()\n    }\n    \n    User \"1\" -- \"*\" Article : writes\n    User \"1\" -- \"*\" Comment : posts\n    Article \"1\" -- \"*\" Comment : has\n    Article \"1\" -- \"*\" Category : belongs to\n```\n\n## State Diagram Example\n\nState diagrams show the sequence of states an object goes through during its life cycle.\n\n```mermaid\nstateDiagram-v2\n    [*] --> Draft\n    \n    Draft --> UnderReview : submit\n    UnderReview --> Draft : reject\n    UnderReview --> Approved : approve\n    Approved --> Published : publish\n    Published --> Archived : archive\n    Published --> Draft : retract\n    \n    state Published {\n        [*] --> Active\n        Active --> Hidden : temporarily hide\n        Hidden --> Active : restore\n        Active --> [*]\n        Hidden --> [*]\n    }\n    \n    Archived --> [*]\n```\n\n## Pie Chart Example\n\nPie charts are ideal for displaying proportions and percentage data.\n\n```mermaid\npie title Website Traffic Sources Analysis\n    \"Search Engines\" : 45.6\n    \"Direct Access\" : 30.1\n    \"Social Media\" : 15.3\n    \"Referral Links\" : 6.4\n    \"Other Sources\" : 2.6\n```\n\n## Conclusion\n\nMermaid is a powerful tool for creating various types of diagrams in Markdown documents. This article demonstrated how to use flowcharts, sequence diagrams, Gantt charts, class diagrams, state diagrams, and pie charts. These diagrams can help you express complex concepts, processes, and data structures more clearly.\n\nTo use Mermaid, simply specify the mermaid language in a code block and describe the diagram using concise text syntax. Mermaid will automatically convert these descriptions into beautiful visual diagrams.\n\nTry using Mermaid diagrams in your next technical blog post or project documentation - they will make your content more professional and easier to understand!","filePath":"src/content/posts/markdown-mermaid.md","digest":"4230c959b2bda94b","rendered":{"html":"<section><h1 id=\"complete-guide-to-markdown-with-mermaid-diagrams\">Complete Guide to Markdown with Mermaid Diagrams<a class=\"anchor\" href=\"#complete-guide-to-markdown-with-mermaid-diagrams\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><p>This article demonstrates how to create various complex diagrams using Mermaid in Markdown documents, including flowcharts, sequence diagrams, Gantt charts, class diagrams, and state diagrams.</p><section><h2 id=\"flowchart-example\">Flowchart Example<a class=\"anchor\" href=\"#flowchart-example\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>Flowcharts are excellent for representing processes or algorithm steps.</p><div class=\"mermaid-diagram-container\"><div class=\"mermaid-wrapper\" id=\"mermaid-927rkb\"><div class=\"mermaid\" data-mermaid-code=\"graph TD\n    A[Start] --> B{Condition Check}\n    B -->|Yes| C[Process Step 1]\n    B -->|No| D[Process Step 2]\n    C --> E[Subprocess]\n    D --> E\n    subgraph E [Subprocess Details]\n        E1[Substep 1] --> E2[Substep 2]\n        E2 --> E3[Substep 3]\n    end\n    E --> F{Another Decision}\n    F -->|Option 1| G[Result 1]\n    F -->|Option 2| H[Result 2]\n    F -->|Option 3| I[Result 3]\n    G --> J[End]\n    H --> J\n    I --> J\">graph TD\n    A[Start] --> B{Condition Check}\n    B -->|Yes| C[Process Step 1]\n    B -->|No| D[Process Step 2]\n    C --> E[Subprocess]\n    D --> E\n    subgraph E [Subprocess Details]\n        E1[Substep 1] --> E2[Substep 2]\n        E2 --> E3[Substep 3]\n    end\n    E --> F{Another Decision}\n    F -->|Option 1| G[Result 1]\n    F -->|Option 2| H[Result 2]\n    F -->|Option 3| I[Result 3]\n    G --> J[End]\n    H --> J\n    I --> J</div></div><script type=\"text/javascript\">(() => {\n\t// 单例模式：检查是否已经初始化过\n\tif (window.mermaidInitialized) {\n\t\treturn;\n\t}\n\n\twindow.mermaidInitialized = true;\n\n\t// 记录当前主题状态，避免不必要的重新渲染\n\tlet currentTheme = null;\n\tlet isRendering = false; // 防止并发渲染\n\tlet retryCount = 0;\n\tconst MAX_RETRIES = 3;\n\tconst RETRY_DELAY = 1000; // 1秒\n\n\t// 检查主题是否真的发生了变化\n\tfunction hasThemeChanged() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tconst newTheme = isDark ? \"dark\" : \"default\";\n\n\t\tif (currentTheme !== newTheme) {\n\t\t\tcurrentTheme = newTheme;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t// 等待 Mermaid 库加载完成\n\tfunction waitForMermaid(timeout = 10000) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst startTime = Date.now();\n\n\t\t\tfunction check() {\n\t\t\t\tif (window.mermaid && typeof window.mermaid.initialize === \"function\") {\n\t\t\t\t\tresolve(window.mermaid);\n\t\t\t\t} else if (Date.now() - startTime > timeout) {\n\t\t\t\t\treject(new Error(\"Mermaid library failed to load within timeout\"));\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(check, 100);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcheck();\n\t\t});\n\t}\n\n\t// 设置 MutationObserver 监听 html 元素的 class 属性变化\n\tfunction setupMutationObserver() {\n\t\tconst observer = new MutationObserver((mutations) => {\n\t\t\tmutations.forEach((mutation) => {\n\t\t\t\tif (\n\t\t\t\t\tmutation.type === \"attributes\" &&\n\t\t\t\t\tmutation.attributeName === \"class\"\n\t\t\t\t) {\n\t\t\t\t\t// 检查是否是 dark 类的变化\n\t\t\t\t\tconst target = mutation.target;\n\t\t\t\t\tconst wasDark = mutation.oldValue\n\t\t\t\t\t\t? mutation.oldValue.includes(\"dark\")\n\t\t\t\t\t\t: false;\n\t\t\t\t\tconst isDark = target.classList.contains(\"dark\");\n\n\t\t\t\t\tif (wasDark !== isDark) {\n\t\t\t\t\t\tif (hasThemeChanged()) {\n\t\t\t\t\t\t\t// 延迟渲染，避免主题切换时的闪烁\n\t\t\t\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 150);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// 开始观察 html 元素的 class 属性变化\n\t\tobserver.observe(document.documentElement, {\n\t\t\tattributes: true,\n\t\t\tattributeFilter: [\"class\"],\n\t\t\tattributeOldValue: true,\n\t\t});\n\t}\n\n    // 缩放平移\n    function attachZoomControls(element, svgElement) {\n        if (element.__zoomAttached) return;\n        element.__zoomAttached = true;\n\n        const wrapper = document.createElement('div');\n        wrapper.className = 'mermaid-zoom-wrapper';\n\n        const svgParent = svgElement.parentNode;\n        wrapper.appendChild(svgElement);\n        svgParent.appendChild(wrapper);\n\n        let scale = 1;\n        let tx = 0;\n        let ty = 0;\n        const MIN_SCALE = 0.2;\n        const MAX_SCALE = 6;\n\n        function applyTransform() {\n            wrapper.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`;\n        }\n        const controls = document.createElement('div');\n        controls.className = 'mermaid-zoom-controls';\n        controls.innerHTML = `\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-in\" title=\"Zoom in\">+</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-out\" title=\"Zoom out\">−</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"reset\" title=\"Reset\">⤾</button>\n\t\t`;\n        element.appendChild(controls);\n\n        controls.addEventListener('click', (ev) => {\n            const action = ev.target.getAttribute && ev.target.getAttribute('data-action');\n            if (!action) return;\n\n            switch (action) {\n                case 'zoom-in':\n                    scale = Math.min(MAX_SCALE, +(scale * 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'zoom-out':\n                    scale = Math.max(MIN_SCALE, +(scale / 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'reset':\n                    scale = 1;\n                    tx = 0;\n                    ty = 0;\n                    applyTransform();\n                    break;\n            }\n        });\n\n        let isPanning = false;\n        let startX = 0;\n        let startY = 0;\n        let startTx = 0;\n        let startTy = 0;\n\n        wrapper.style.touchAction = 'none';\n\n        wrapper.addEventListener('pointerdown', (ev) => {\n            if (ev.button !== 0) return; // 仅左键\n            isPanning = true;\n            wrapper.setPointerCapture(ev.pointerId);\n            startX = ev.clientX;\n            startY = ev.clientY;\n            startTx = tx;\n            startTy = ty;\n        });\n\n        wrapper.addEventListener('pointermove', (ev) => {\n            if (!isPanning) return;\n            const dx = ev.clientX - startX;\n            const dy = ev.clientY - startY;\n            tx = startTx + dx / scale; // 根据当前缩放调整灵敏度\n            ty = startTy + dy / scale;\n            applyTransform();\n        });\n\n        wrapper.addEventListener('pointerup', (ev) => {\n            isPanning = false;\n            try {\n                wrapper.releasePointerCapture(ev.pointerId);\n            } catch (e) {\n            }\n        });\n\n        wrapper.addEventListener('pointercancel', () => {\n            isPanning = false;\n        });\n\n        // 鼠标滚轮缩放\n        element.addEventListener('wheel', (ev) => {\n            ev.preventDefault();\n            const delta = -ev.deltaY;\n            const zoomFactor = delta > 0 ? 1.12 : 1 / 1.12;\n            const prevScale = scale;\n            scale = Math.min(MAX_SCALE, Math.max(MIN_SCALE, +(scale * zoomFactor).toFixed(3)));\n\n            const rect = wrapper.getBoundingClientRect();\n            const cx = ev.clientX - rect.left;\n            const cy = ev.clientY - rect.top;\n\n            const worldX = (cx / prevScale) - tx;\n            const worldY = (cy / prevScale) - ty;\n\n            tx = cx / scale - worldX;\n            ty = cy / scale - worldY;\n\n            applyTransform();\n        }, {passive: false});\n\n        // 双击重置\n        wrapper.addEventListener('dblclick', () => {\n            scale = 1;\n            tx = 0;\n            ty = 0;\n            applyTransform();\n        });\n        applyTransform();\n        let resizeTimer = null;\n        window.addEventListener('resize', () => {\n            clearTimeout(resizeTimer);\n            resizeTimer = setTimeout(() => {\n                applyTransform()\n            }, 200);\n        });\n    }\n\n    // 设置其他事件监听器\n\tfunction setupEventListeners() {\n\t\t// 监听页面切换\n\t\tdocument.addEventListener(\"astro:page-load\", () => {\n\t\t\t// 重新初始化主题状态\n\t\t\tcurrentTheme = null;\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t\tif (hasThemeChanged()) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 100);\n\t\t\t}\n\t\t});\n\n\t\t// 监听页面可见性变化，页面重新可见时重新渲染\n\t\tdocument.addEventListener(\"visibilitychange\", () => {\n\t\t\tif (!document.hidden) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 200);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync function initializeMermaid() {\n\t\ttry {\n\t\t\tawait waitForMermaid();\n\n\t\t\t// 初始化 Mermaid 配置\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: \"default\",\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\t// 添加错误处理配置\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 渲染所有 Mermaid 图表\n\t\t\tawait renderMermaidDiagrams();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid:\", error);\n\t\t\t// 如果初始化失败，尝试重新加载\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => initializeMermaid(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function renderMermaidDiagrams() {\n\t\t// 防止并发渲染\n\t\tif (isRendering) {\n\t\t\treturn;\n\t\t}\n\n\t\t// 检查 Mermaid 是否可用\n\t\tif (!window.mermaid || typeof window.mermaid.render !== \"function\") {\n\t\t\tconsole.warn(\"Mermaid not available, skipping render\");\n\t\t\treturn;\n\t\t}\n\n\t\tisRendering = true;\n\n\t\ttry {\n\t\t\tconst mermaidElements = document.querySelectorAll(\n\t\t\t\t\".mermaid[data-mermaid-code]\",\n\t\t\t);\n\n\t\t\tif (mermaidElements.length === 0) {\n\t\t\t\tisRendering = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 延迟检测主题，确保 DOM 已经更新\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 100));\n\n\t\t\tconst htmlElement = document.documentElement;\n\t\t\tconst isDark = htmlElement.classList.contains(\"dark\");\n\t\t\tconst theme = isDark ? \"dark\" : \"default\";\n\n\t\t\t// 更新 Mermaid 主题（只需要更新一次）\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: theme,\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t\t// 强制应用主题变量\n\t\t\t\t\tprimaryColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryTextColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryBorderColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tlineColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tsecondaryColor: isDark ? \"#333333\" : \"#f0f0f0\",\n\t\t\t\t\ttertiaryColor: isDark ? \"#555555\" : \"#e0e0e0\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 批量渲染所有图表，添加重试机制\n\t\t\tconst renderPromises = Array.from(mermaidElements).map(\n\t\t\t\tasync (element, index) => {\n\t\t\t\t\tlet attempts = 0;\n\t\t\t\t\tconst maxAttempts = 3;\n\n\t\t\t\t\twhile (attempts < maxAttempts) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst code = element.getAttribute(\"data-mermaid-code\");\n\n\t\t\t\t\t\t\tif (!code) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 显示加载状态\n\t\t\t\t\t\t\telement.innerHTML =\n\t\t\t\t\t\t\t\t'<div class=\"mermaid-loading\">Rendering diagram...</div>';\n\n\t\t\t\t\t\t\t// 渲染图表\n\t\t\t\t\t\t\tconst { svg } = await window.mermaid.render(\n\t\t\t\t\t\t\t\t`mermaid-${Date.now()}-${index}-${attempts}`,\n\t\t\t\t\t\t\t\tcode,\n\t\t\t\t\t\t\t);\n\n                            const parser = new DOMParser();\n                            const doc = parser.parseFromString(svg, 'image/svg+xml');\n                            const svgElement = doc.documentElement;\n\n                            element.innerHTML = '';\n                            element.__zoomAttached = false;\n                            element.appendChild(svgElement);\n\n                            // 添加响应式支持\n                            const insertedSvg = element.querySelector('svg');\n                            if (insertedSvg) {\n                                insertedSvg.setAttribute('width', '100%');\n                                insertedSvg.removeAttribute('height');\n                                insertedSvg.style.maxWidth = '100%';\n                                insertedSvg.style.height = 'auto';\n                                //Todo 需要根据实际情况\n                                insertedSvg.style.minHeight = \"300px\";\n\n\t\t\t\t\t\t\t\t// 强制应用样式\n\t\t\t\t\t\t\t\tif (isDark) {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"brightness(0.9) contrast(1.1)\";\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"none\";\n\t\t\t\t\t\t\t\t}\n                                attachZoomControls(element, insertedSvg);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 渲染成功，跳出重试循环\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tattempts++;\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`Mermaid rendering attempt ${attempts} failed for element ${index}:`,\n\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif (attempts >= maxAttempts) {\n\t\t\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t\t\t`Failed to render Mermaid diagram after ${maxAttempts} attempts:`,\n\t\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\telement.innerHTML = `\n\t\t\t\t\t\t\t\t\t<div class=\"mermaid-error\">\n\t\t\t\t\t\t\t\t\t\t<p>Failed to render diagram after ${maxAttempts} attempts.</p>\n\t\t\t\t\t\t\t\t\t\t<button onclick=\"location.reload()\" style=\"margin-top: 8px; padding: 4px 8px; background: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer;\">\n\t\t\t\t\t\t\t\t\t\t\tRetry Page\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// 等待一段时间后重试\n\t\t\t\t\t\t\t\tawait new Promise((resolve) =>\n\t\t\t\t\t\t\t\t\tsetTimeout(resolve, 500 * attempts),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\n\t\t\t// 等待所有渲染完成\n\t\t\tawait Promise.all(renderPromises);\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error in renderMermaidDiagrams:\", error);\n\n\t\t\t// 如果渲染失败，尝试重新渲染\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t} finally {\n\t\t\tisRendering = false;\n\t\t}\n\t}\n\n\t// 初始化主题状态\n\tfunction initializeThemeState() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tcurrentTheme = isDark ? \"dark\" : \"default\";\n\t}\n\n\t// 加载 Mermaid 库\n\tasync function loadMermaid() {\n\t\tif (typeof window.mermaid !== \"undefined\") {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst script = document.createElement(\"script\");\n\t\t\tscript.src =\n\t\t\t\t\"https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\tscript.onload = () => {\n\t\t\t\tconsole.log(\"Mermaid library loaded successfully\");\n\t\t\t\tresolve();\n\t\t\t};\n\n\t\t\tscript.onerror = (error) => {\n\t\t\t\tconsole.error(\"Failed to load Mermaid library:\", error);\n\t\t\t\t// 尝试备用 CDN\n\t\t\t\tconst fallbackScript = document.createElement(\"script\");\n\t\t\t\tfallbackScript.src = \"https://unpkg.com/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\t\tfallbackScript.onload = () => {\n\t\t\t\t\tconsole.log(\"Mermaid library loaded from fallback CDN\");\n\t\t\t\t\tresolve();\n\t\t\t\t};\n\n\t\t\t\tfallbackScript.onerror = () => {\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t\"Failed to load Mermaid from both primary and fallback CDNs\",\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tdocument.head.appendChild(fallbackScript);\n\t\t\t};\n\n\t\t\tdocument.head.appendChild(script);\n\t\t});\n\t}\n\n\t// 主初始化函数\n\tasync function initialize() {\n\t\ttry {\n\t\t\t// 设置监听器\n\t\t\tsetupMutationObserver();\n\t\t\tsetupEventListeners();\n\n\t\t\t// 初始化主题状态\n\t\t\tinitializeThemeState();\n\n\t\t\t// 加载并初始化 Mermaid\n\t\t\tawait loadMermaid();\n\t\t\tawait initializeMermaid();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid system:\", error);\n\t\t}\n\t}\n\n\t// 启动初始化\n\tif (document.readyState === \"loading\") {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", initialize);\n\t} else {\n\t\tinitialize();\n\t}\n})();\n\x3C/script></div></section><section><h2 id=\"sequence-diagram-example\">Sequence Diagram Example<a class=\"anchor\" href=\"#sequence-diagram-example\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>Sequence diagrams show interactions between objects over time.</p><div class=\"mermaid-diagram-container\"><div class=\"mermaid-wrapper\" id=\"mermaid-tz2o0d\"><div class=\"mermaid\" data-mermaid-code=\"sequenceDiagram\n    participant User\n    participant WebApp\n    participant Server\n    participant Database\n\n    User->>WebApp: Submit Login Request\n    WebApp->>Server: Send Auth Request\n    Server->>Database: Query User Credentials\n    Database-->>Server: Return User Data\n    Server-->>WebApp: Return Auth Result\n    \n    alt Auth Successful\n        WebApp->>User: Show Welcome Page\n        WebApp->>Server: Request User Data\n        Server->>Database: Get User Preferences\n        Database-->>Server: Return Preferences\n        Server-->>WebApp: Return User Data\n        WebApp->>User: Load Personalized Interface\n    else Auth Failed\n        WebApp->>User: Show Error Message\n        WebApp->>User: Prompt Re-entry\n    end\">sequenceDiagram\n    participant User\n    participant WebApp\n    participant Server\n    participant Database\n\n    User->>WebApp: Submit Login Request\n    WebApp->>Server: Send Auth Request\n    Server->>Database: Query User Credentials\n    Database-->>Server: Return User Data\n    Server-->>WebApp: Return Auth Result\n    \n    alt Auth Successful\n        WebApp->>User: Show Welcome Page\n        WebApp->>Server: Request User Data\n        Server->>Database: Get User Preferences\n        Database-->>Server: Return Preferences\n        Server-->>WebApp: Return User Data\n        WebApp->>User: Load Personalized Interface\n    else Auth Failed\n        WebApp->>User: Show Error Message\n        WebApp->>User: Prompt Re-entry\n    end</div></div><script type=\"text/javascript\">(() => {\n\t// 单例模式：检查是否已经初始化过\n\tif (window.mermaidInitialized) {\n\t\treturn;\n\t}\n\n\twindow.mermaidInitialized = true;\n\n\t// 记录当前主题状态，避免不必要的重新渲染\n\tlet currentTheme = null;\n\tlet isRendering = false; // 防止并发渲染\n\tlet retryCount = 0;\n\tconst MAX_RETRIES = 3;\n\tconst RETRY_DELAY = 1000; // 1秒\n\n\t// 检查主题是否真的发生了变化\n\tfunction hasThemeChanged() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tconst newTheme = isDark ? \"dark\" : \"default\";\n\n\t\tif (currentTheme !== newTheme) {\n\t\t\tcurrentTheme = newTheme;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t// 等待 Mermaid 库加载完成\n\tfunction waitForMermaid(timeout = 10000) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst startTime = Date.now();\n\n\t\t\tfunction check() {\n\t\t\t\tif (window.mermaid && typeof window.mermaid.initialize === \"function\") {\n\t\t\t\t\tresolve(window.mermaid);\n\t\t\t\t} else if (Date.now() - startTime > timeout) {\n\t\t\t\t\treject(new Error(\"Mermaid library failed to load within timeout\"));\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(check, 100);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcheck();\n\t\t});\n\t}\n\n\t// 设置 MutationObserver 监听 html 元素的 class 属性变化\n\tfunction setupMutationObserver() {\n\t\tconst observer = new MutationObserver((mutations) => {\n\t\t\tmutations.forEach((mutation) => {\n\t\t\t\tif (\n\t\t\t\t\tmutation.type === \"attributes\" &&\n\t\t\t\t\tmutation.attributeName === \"class\"\n\t\t\t\t) {\n\t\t\t\t\t// 检查是否是 dark 类的变化\n\t\t\t\t\tconst target = mutation.target;\n\t\t\t\t\tconst wasDark = mutation.oldValue\n\t\t\t\t\t\t? mutation.oldValue.includes(\"dark\")\n\t\t\t\t\t\t: false;\n\t\t\t\t\tconst isDark = target.classList.contains(\"dark\");\n\n\t\t\t\t\tif (wasDark !== isDark) {\n\t\t\t\t\t\tif (hasThemeChanged()) {\n\t\t\t\t\t\t\t// 延迟渲染，避免主题切换时的闪烁\n\t\t\t\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 150);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// 开始观察 html 元素的 class 属性变化\n\t\tobserver.observe(document.documentElement, {\n\t\t\tattributes: true,\n\t\t\tattributeFilter: [\"class\"],\n\t\t\tattributeOldValue: true,\n\t\t});\n\t}\n\n    // 缩放平移\n    function attachZoomControls(element, svgElement) {\n        if (element.__zoomAttached) return;\n        element.__zoomAttached = true;\n\n        const wrapper = document.createElement('div');\n        wrapper.className = 'mermaid-zoom-wrapper';\n\n        const svgParent = svgElement.parentNode;\n        wrapper.appendChild(svgElement);\n        svgParent.appendChild(wrapper);\n\n        let scale = 1;\n        let tx = 0;\n        let ty = 0;\n        const MIN_SCALE = 0.2;\n        const MAX_SCALE = 6;\n\n        function applyTransform() {\n            wrapper.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`;\n        }\n        const controls = document.createElement('div');\n        controls.className = 'mermaid-zoom-controls';\n        controls.innerHTML = `\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-in\" title=\"Zoom in\">+</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-out\" title=\"Zoom out\">−</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"reset\" title=\"Reset\">⤾</button>\n\t\t`;\n        element.appendChild(controls);\n\n        controls.addEventListener('click', (ev) => {\n            const action = ev.target.getAttribute && ev.target.getAttribute('data-action');\n            if (!action) return;\n\n            switch (action) {\n                case 'zoom-in':\n                    scale = Math.min(MAX_SCALE, +(scale * 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'zoom-out':\n                    scale = Math.max(MIN_SCALE, +(scale / 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'reset':\n                    scale = 1;\n                    tx = 0;\n                    ty = 0;\n                    applyTransform();\n                    break;\n            }\n        });\n\n        let isPanning = false;\n        let startX = 0;\n        let startY = 0;\n        let startTx = 0;\n        let startTy = 0;\n\n        wrapper.style.touchAction = 'none';\n\n        wrapper.addEventListener('pointerdown', (ev) => {\n            if (ev.button !== 0) return; // 仅左键\n            isPanning = true;\n            wrapper.setPointerCapture(ev.pointerId);\n            startX = ev.clientX;\n            startY = ev.clientY;\n            startTx = tx;\n            startTy = ty;\n        });\n\n        wrapper.addEventListener('pointermove', (ev) => {\n            if (!isPanning) return;\n            const dx = ev.clientX - startX;\n            const dy = ev.clientY - startY;\n            tx = startTx + dx / scale; // 根据当前缩放调整灵敏度\n            ty = startTy + dy / scale;\n            applyTransform();\n        });\n\n        wrapper.addEventListener('pointerup', (ev) => {\n            isPanning = false;\n            try {\n                wrapper.releasePointerCapture(ev.pointerId);\n            } catch (e) {\n            }\n        });\n\n        wrapper.addEventListener('pointercancel', () => {\n            isPanning = false;\n        });\n\n        // 鼠标滚轮缩放\n        element.addEventListener('wheel', (ev) => {\n            ev.preventDefault();\n            const delta = -ev.deltaY;\n            const zoomFactor = delta > 0 ? 1.12 : 1 / 1.12;\n            const prevScale = scale;\n            scale = Math.min(MAX_SCALE, Math.max(MIN_SCALE, +(scale * zoomFactor).toFixed(3)));\n\n            const rect = wrapper.getBoundingClientRect();\n            const cx = ev.clientX - rect.left;\n            const cy = ev.clientY - rect.top;\n\n            const worldX = (cx / prevScale) - tx;\n            const worldY = (cy / prevScale) - ty;\n\n            tx = cx / scale - worldX;\n            ty = cy / scale - worldY;\n\n            applyTransform();\n        }, {passive: false});\n\n        // 双击重置\n        wrapper.addEventListener('dblclick', () => {\n            scale = 1;\n            tx = 0;\n            ty = 0;\n            applyTransform();\n        });\n        applyTransform();\n        let resizeTimer = null;\n        window.addEventListener('resize', () => {\n            clearTimeout(resizeTimer);\n            resizeTimer = setTimeout(() => {\n                applyTransform()\n            }, 200);\n        });\n    }\n\n    // 设置其他事件监听器\n\tfunction setupEventListeners() {\n\t\t// 监听页面切换\n\t\tdocument.addEventListener(\"astro:page-load\", () => {\n\t\t\t// 重新初始化主题状态\n\t\t\tcurrentTheme = null;\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t\tif (hasThemeChanged()) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 100);\n\t\t\t}\n\t\t});\n\n\t\t// 监听页面可见性变化，页面重新可见时重新渲染\n\t\tdocument.addEventListener(\"visibilitychange\", () => {\n\t\t\tif (!document.hidden) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 200);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync function initializeMermaid() {\n\t\ttry {\n\t\t\tawait waitForMermaid();\n\n\t\t\t// 初始化 Mermaid 配置\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: \"default\",\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\t// 添加错误处理配置\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 渲染所有 Mermaid 图表\n\t\t\tawait renderMermaidDiagrams();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid:\", error);\n\t\t\t// 如果初始化失败，尝试重新加载\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => initializeMermaid(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function renderMermaidDiagrams() {\n\t\t// 防止并发渲染\n\t\tif (isRendering) {\n\t\t\treturn;\n\t\t}\n\n\t\t// 检查 Mermaid 是否可用\n\t\tif (!window.mermaid || typeof window.mermaid.render !== \"function\") {\n\t\t\tconsole.warn(\"Mermaid not available, skipping render\");\n\t\t\treturn;\n\t\t}\n\n\t\tisRendering = true;\n\n\t\ttry {\n\t\t\tconst mermaidElements = document.querySelectorAll(\n\t\t\t\t\".mermaid[data-mermaid-code]\",\n\t\t\t);\n\n\t\t\tif (mermaidElements.length === 0) {\n\t\t\t\tisRendering = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 延迟检测主题，确保 DOM 已经更新\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 100));\n\n\t\t\tconst htmlElement = document.documentElement;\n\t\t\tconst isDark = htmlElement.classList.contains(\"dark\");\n\t\t\tconst theme = isDark ? \"dark\" : \"default\";\n\n\t\t\t// 更新 Mermaid 主题（只需要更新一次）\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: theme,\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t\t// 强制应用主题变量\n\t\t\t\t\tprimaryColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryTextColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryBorderColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tlineColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tsecondaryColor: isDark ? \"#333333\" : \"#f0f0f0\",\n\t\t\t\t\ttertiaryColor: isDark ? \"#555555\" : \"#e0e0e0\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 批量渲染所有图表，添加重试机制\n\t\t\tconst renderPromises = Array.from(mermaidElements).map(\n\t\t\t\tasync (element, index) => {\n\t\t\t\t\tlet attempts = 0;\n\t\t\t\t\tconst maxAttempts = 3;\n\n\t\t\t\t\twhile (attempts < maxAttempts) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst code = element.getAttribute(\"data-mermaid-code\");\n\n\t\t\t\t\t\t\tif (!code) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 显示加载状态\n\t\t\t\t\t\t\telement.innerHTML =\n\t\t\t\t\t\t\t\t'<div class=\"mermaid-loading\">Rendering diagram...</div>';\n\n\t\t\t\t\t\t\t// 渲染图表\n\t\t\t\t\t\t\tconst { svg } = await window.mermaid.render(\n\t\t\t\t\t\t\t\t`mermaid-${Date.now()}-${index}-${attempts}`,\n\t\t\t\t\t\t\t\tcode,\n\t\t\t\t\t\t\t);\n\n                            const parser = new DOMParser();\n                            const doc = parser.parseFromString(svg, 'image/svg+xml');\n                            const svgElement = doc.documentElement;\n\n                            element.innerHTML = '';\n                            element.__zoomAttached = false;\n                            element.appendChild(svgElement);\n\n                            // 添加响应式支持\n                            const insertedSvg = element.querySelector('svg');\n                            if (insertedSvg) {\n                                insertedSvg.setAttribute('width', '100%');\n                                insertedSvg.removeAttribute('height');\n                                insertedSvg.style.maxWidth = '100%';\n                                insertedSvg.style.height = 'auto';\n                                //Todo 需要根据实际情况\n                                insertedSvg.style.minHeight = \"300px\";\n\n\t\t\t\t\t\t\t\t// 强制应用样式\n\t\t\t\t\t\t\t\tif (isDark) {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"brightness(0.9) contrast(1.1)\";\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"none\";\n\t\t\t\t\t\t\t\t}\n                                attachZoomControls(element, insertedSvg);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 渲染成功，跳出重试循环\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tattempts++;\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`Mermaid rendering attempt ${attempts} failed for element ${index}:`,\n\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif (attempts >= maxAttempts) {\n\t\t\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t\t\t`Failed to render Mermaid diagram after ${maxAttempts} attempts:`,\n\t\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\telement.innerHTML = `\n\t\t\t\t\t\t\t\t\t<div class=\"mermaid-error\">\n\t\t\t\t\t\t\t\t\t\t<p>Failed to render diagram after ${maxAttempts} attempts.</p>\n\t\t\t\t\t\t\t\t\t\t<button onclick=\"location.reload()\" style=\"margin-top: 8px; padding: 4px 8px; background: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer;\">\n\t\t\t\t\t\t\t\t\t\t\tRetry Page\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// 等待一段时间后重试\n\t\t\t\t\t\t\t\tawait new Promise((resolve) =>\n\t\t\t\t\t\t\t\t\tsetTimeout(resolve, 500 * attempts),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\n\t\t\t// 等待所有渲染完成\n\t\t\tawait Promise.all(renderPromises);\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error in renderMermaidDiagrams:\", error);\n\n\t\t\t// 如果渲染失败，尝试重新渲染\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t} finally {\n\t\t\tisRendering = false;\n\t\t}\n\t}\n\n\t// 初始化主题状态\n\tfunction initializeThemeState() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tcurrentTheme = isDark ? \"dark\" : \"default\";\n\t}\n\n\t// 加载 Mermaid 库\n\tasync function loadMermaid() {\n\t\tif (typeof window.mermaid !== \"undefined\") {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst script = document.createElement(\"script\");\n\t\t\tscript.src =\n\t\t\t\t\"https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\tscript.onload = () => {\n\t\t\t\tconsole.log(\"Mermaid library loaded successfully\");\n\t\t\t\tresolve();\n\t\t\t};\n\n\t\t\tscript.onerror = (error) => {\n\t\t\t\tconsole.error(\"Failed to load Mermaid library:\", error);\n\t\t\t\t// 尝试备用 CDN\n\t\t\t\tconst fallbackScript = document.createElement(\"script\");\n\t\t\t\tfallbackScript.src = \"https://unpkg.com/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\t\tfallbackScript.onload = () => {\n\t\t\t\t\tconsole.log(\"Mermaid library loaded from fallback CDN\");\n\t\t\t\t\tresolve();\n\t\t\t\t};\n\n\t\t\t\tfallbackScript.onerror = () => {\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t\"Failed to load Mermaid from both primary and fallback CDNs\",\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tdocument.head.appendChild(fallbackScript);\n\t\t\t};\n\n\t\t\tdocument.head.appendChild(script);\n\t\t});\n\t}\n\n\t// 主初始化函数\n\tasync function initialize() {\n\t\ttry {\n\t\t\t// 设置监听器\n\t\t\tsetupMutationObserver();\n\t\t\tsetupEventListeners();\n\n\t\t\t// 初始化主题状态\n\t\t\tinitializeThemeState();\n\n\t\t\t// 加载并初始化 Mermaid\n\t\t\tawait loadMermaid();\n\t\t\tawait initializeMermaid();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid system:\", error);\n\t\t}\n\t}\n\n\t// 启动初始化\n\tif (document.readyState === \"loading\") {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", initialize);\n\t} else {\n\t\tinitialize();\n\t}\n})();\n\x3C/script></div></section><section><h2 id=\"gantt-chart-example\">Gantt Chart Example<a class=\"anchor\" href=\"#gantt-chart-example\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>Gantt charts are perfect for displaying project schedules and timelines.</p><div class=\"mermaid-diagram-container\"><div class=\"mermaid-wrapper\" id=\"mermaid-wqh6v4\"><div class=\"mermaid\" data-mermaid-code=\"gantt\n    title Website Development Project Timeline\n    dateFormat  YYYY-MM-DD\n    axisFormat  %m/%d\n    \n    section Design Phase\n    Requirements Analysis      :a1, 2023-10-01, 7d\n    UI Design                 :a2, after a1, 10d\n    Prototype Creation        :a3, after a2, 5d\n    \n    section Development Phase\n    Frontend Development      :b1, 2023-10-20, 15d\n    Backend Development       :b2, after a2, 18d\n    Database Design           :b3, after a1, 12d\n    \n    section Testing Phase\n    Unit Testing              :c1, after b1, 8d\n    Integration Testing       :c2, after b2, 10d\n    User Acceptance Testing   :c3, after c2, 7d\n    \n    section Deployment\n    Production Deployment     :d1, after c3, 3d\n    Launch                    :milestone, after d1, 0d\">gantt\n    title Website Development Project Timeline\n    dateFormat  YYYY-MM-DD\n    axisFormat  %m/%d\n    \n    section Design Phase\n    Requirements Analysis      :a1, 2023-10-01, 7d\n    UI Design                 :a2, after a1, 10d\n    Prototype Creation        :a3, after a2, 5d\n    \n    section Development Phase\n    Frontend Development      :b1, 2023-10-20, 15d\n    Backend Development       :b2, after a2, 18d\n    Database Design           :b3, after a1, 12d\n    \n    section Testing Phase\n    Unit Testing              :c1, after b1, 8d\n    Integration Testing       :c2, after b2, 10d\n    User Acceptance Testing   :c3, after c2, 7d\n    \n    section Deployment\n    Production Deployment     :d1, after c3, 3d\n    Launch                    :milestone, after d1, 0d</div></div><script type=\"text/javascript\">(() => {\n\t// 单例模式：检查是否已经初始化过\n\tif (window.mermaidInitialized) {\n\t\treturn;\n\t}\n\n\twindow.mermaidInitialized = true;\n\n\t// 记录当前主题状态，避免不必要的重新渲染\n\tlet currentTheme = null;\n\tlet isRendering = false; // 防止并发渲染\n\tlet retryCount = 0;\n\tconst MAX_RETRIES = 3;\n\tconst RETRY_DELAY = 1000; // 1秒\n\n\t// 检查主题是否真的发生了变化\n\tfunction hasThemeChanged() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tconst newTheme = isDark ? \"dark\" : \"default\";\n\n\t\tif (currentTheme !== newTheme) {\n\t\t\tcurrentTheme = newTheme;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t// 等待 Mermaid 库加载完成\n\tfunction waitForMermaid(timeout = 10000) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst startTime = Date.now();\n\n\t\t\tfunction check() {\n\t\t\t\tif (window.mermaid && typeof window.mermaid.initialize === \"function\") {\n\t\t\t\t\tresolve(window.mermaid);\n\t\t\t\t} else if (Date.now() - startTime > timeout) {\n\t\t\t\t\treject(new Error(\"Mermaid library failed to load within timeout\"));\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(check, 100);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcheck();\n\t\t});\n\t}\n\n\t// 设置 MutationObserver 监听 html 元素的 class 属性变化\n\tfunction setupMutationObserver() {\n\t\tconst observer = new MutationObserver((mutations) => {\n\t\t\tmutations.forEach((mutation) => {\n\t\t\t\tif (\n\t\t\t\t\tmutation.type === \"attributes\" &&\n\t\t\t\t\tmutation.attributeName === \"class\"\n\t\t\t\t) {\n\t\t\t\t\t// 检查是否是 dark 类的变化\n\t\t\t\t\tconst target = mutation.target;\n\t\t\t\t\tconst wasDark = mutation.oldValue\n\t\t\t\t\t\t? mutation.oldValue.includes(\"dark\")\n\t\t\t\t\t\t: false;\n\t\t\t\t\tconst isDark = target.classList.contains(\"dark\");\n\n\t\t\t\t\tif (wasDark !== isDark) {\n\t\t\t\t\t\tif (hasThemeChanged()) {\n\t\t\t\t\t\t\t// 延迟渲染，避免主题切换时的闪烁\n\t\t\t\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 150);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// 开始观察 html 元素的 class 属性变化\n\t\tobserver.observe(document.documentElement, {\n\t\t\tattributes: true,\n\t\t\tattributeFilter: [\"class\"],\n\t\t\tattributeOldValue: true,\n\t\t});\n\t}\n\n    // 缩放平移\n    function attachZoomControls(element, svgElement) {\n        if (element.__zoomAttached) return;\n        element.__zoomAttached = true;\n\n        const wrapper = document.createElement('div');\n        wrapper.className = 'mermaid-zoom-wrapper';\n\n        const svgParent = svgElement.parentNode;\n        wrapper.appendChild(svgElement);\n        svgParent.appendChild(wrapper);\n\n        let scale = 1;\n        let tx = 0;\n        let ty = 0;\n        const MIN_SCALE = 0.2;\n        const MAX_SCALE = 6;\n\n        function applyTransform() {\n            wrapper.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`;\n        }\n        const controls = document.createElement('div');\n        controls.className = 'mermaid-zoom-controls';\n        controls.innerHTML = `\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-in\" title=\"Zoom in\">+</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-out\" title=\"Zoom out\">−</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"reset\" title=\"Reset\">⤾</button>\n\t\t`;\n        element.appendChild(controls);\n\n        controls.addEventListener('click', (ev) => {\n            const action = ev.target.getAttribute && ev.target.getAttribute('data-action');\n            if (!action) return;\n\n            switch (action) {\n                case 'zoom-in':\n                    scale = Math.min(MAX_SCALE, +(scale * 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'zoom-out':\n                    scale = Math.max(MIN_SCALE, +(scale / 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'reset':\n                    scale = 1;\n                    tx = 0;\n                    ty = 0;\n                    applyTransform();\n                    break;\n            }\n        });\n\n        let isPanning = false;\n        let startX = 0;\n        let startY = 0;\n        let startTx = 0;\n        let startTy = 0;\n\n        wrapper.style.touchAction = 'none';\n\n        wrapper.addEventListener('pointerdown', (ev) => {\n            if (ev.button !== 0) return; // 仅左键\n            isPanning = true;\n            wrapper.setPointerCapture(ev.pointerId);\n            startX = ev.clientX;\n            startY = ev.clientY;\n            startTx = tx;\n            startTy = ty;\n        });\n\n        wrapper.addEventListener('pointermove', (ev) => {\n            if (!isPanning) return;\n            const dx = ev.clientX - startX;\n            const dy = ev.clientY - startY;\n            tx = startTx + dx / scale; // 根据当前缩放调整灵敏度\n            ty = startTy + dy / scale;\n            applyTransform();\n        });\n\n        wrapper.addEventListener('pointerup', (ev) => {\n            isPanning = false;\n            try {\n                wrapper.releasePointerCapture(ev.pointerId);\n            } catch (e) {\n            }\n        });\n\n        wrapper.addEventListener('pointercancel', () => {\n            isPanning = false;\n        });\n\n        // 鼠标滚轮缩放\n        element.addEventListener('wheel', (ev) => {\n            ev.preventDefault();\n            const delta = -ev.deltaY;\n            const zoomFactor = delta > 0 ? 1.12 : 1 / 1.12;\n            const prevScale = scale;\n            scale = Math.min(MAX_SCALE, Math.max(MIN_SCALE, +(scale * zoomFactor).toFixed(3)));\n\n            const rect = wrapper.getBoundingClientRect();\n            const cx = ev.clientX - rect.left;\n            const cy = ev.clientY - rect.top;\n\n            const worldX = (cx / prevScale) - tx;\n            const worldY = (cy / prevScale) - ty;\n\n            tx = cx / scale - worldX;\n            ty = cy / scale - worldY;\n\n            applyTransform();\n        }, {passive: false});\n\n        // 双击重置\n        wrapper.addEventListener('dblclick', () => {\n            scale = 1;\n            tx = 0;\n            ty = 0;\n            applyTransform();\n        });\n        applyTransform();\n        let resizeTimer = null;\n        window.addEventListener('resize', () => {\n            clearTimeout(resizeTimer);\n            resizeTimer = setTimeout(() => {\n                applyTransform()\n            }, 200);\n        });\n    }\n\n    // 设置其他事件监听器\n\tfunction setupEventListeners() {\n\t\t// 监听页面切换\n\t\tdocument.addEventListener(\"astro:page-load\", () => {\n\t\t\t// 重新初始化主题状态\n\t\t\tcurrentTheme = null;\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t\tif (hasThemeChanged()) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 100);\n\t\t\t}\n\t\t});\n\n\t\t// 监听页面可见性变化，页面重新可见时重新渲染\n\t\tdocument.addEventListener(\"visibilitychange\", () => {\n\t\t\tif (!document.hidden) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 200);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync function initializeMermaid() {\n\t\ttry {\n\t\t\tawait waitForMermaid();\n\n\t\t\t// 初始化 Mermaid 配置\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: \"default\",\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\t// 添加错误处理配置\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 渲染所有 Mermaid 图表\n\t\t\tawait renderMermaidDiagrams();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid:\", error);\n\t\t\t// 如果初始化失败，尝试重新加载\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => initializeMermaid(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function renderMermaidDiagrams() {\n\t\t// 防止并发渲染\n\t\tif (isRendering) {\n\t\t\treturn;\n\t\t}\n\n\t\t// 检查 Mermaid 是否可用\n\t\tif (!window.mermaid || typeof window.mermaid.render !== \"function\") {\n\t\t\tconsole.warn(\"Mermaid not available, skipping render\");\n\t\t\treturn;\n\t\t}\n\n\t\tisRendering = true;\n\n\t\ttry {\n\t\t\tconst mermaidElements = document.querySelectorAll(\n\t\t\t\t\".mermaid[data-mermaid-code]\",\n\t\t\t);\n\n\t\t\tif (mermaidElements.length === 0) {\n\t\t\t\tisRendering = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 延迟检测主题，确保 DOM 已经更新\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 100));\n\n\t\t\tconst htmlElement = document.documentElement;\n\t\t\tconst isDark = htmlElement.classList.contains(\"dark\");\n\t\t\tconst theme = isDark ? \"dark\" : \"default\";\n\n\t\t\t// 更新 Mermaid 主题（只需要更新一次）\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: theme,\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t\t// 强制应用主题变量\n\t\t\t\t\tprimaryColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryTextColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryBorderColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tlineColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tsecondaryColor: isDark ? \"#333333\" : \"#f0f0f0\",\n\t\t\t\t\ttertiaryColor: isDark ? \"#555555\" : \"#e0e0e0\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 批量渲染所有图表，添加重试机制\n\t\t\tconst renderPromises = Array.from(mermaidElements).map(\n\t\t\t\tasync (element, index) => {\n\t\t\t\t\tlet attempts = 0;\n\t\t\t\t\tconst maxAttempts = 3;\n\n\t\t\t\t\twhile (attempts < maxAttempts) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst code = element.getAttribute(\"data-mermaid-code\");\n\n\t\t\t\t\t\t\tif (!code) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 显示加载状态\n\t\t\t\t\t\t\telement.innerHTML =\n\t\t\t\t\t\t\t\t'<div class=\"mermaid-loading\">Rendering diagram...</div>';\n\n\t\t\t\t\t\t\t// 渲染图表\n\t\t\t\t\t\t\tconst { svg } = await window.mermaid.render(\n\t\t\t\t\t\t\t\t`mermaid-${Date.now()}-${index}-${attempts}`,\n\t\t\t\t\t\t\t\tcode,\n\t\t\t\t\t\t\t);\n\n                            const parser = new DOMParser();\n                            const doc = parser.parseFromString(svg, 'image/svg+xml');\n                            const svgElement = doc.documentElement;\n\n                            element.innerHTML = '';\n                            element.__zoomAttached = false;\n                            element.appendChild(svgElement);\n\n                            // 添加响应式支持\n                            const insertedSvg = element.querySelector('svg');\n                            if (insertedSvg) {\n                                insertedSvg.setAttribute('width', '100%');\n                                insertedSvg.removeAttribute('height');\n                                insertedSvg.style.maxWidth = '100%';\n                                insertedSvg.style.height = 'auto';\n                                //Todo 需要根据实际情况\n                                insertedSvg.style.minHeight = \"300px\";\n\n\t\t\t\t\t\t\t\t// 强制应用样式\n\t\t\t\t\t\t\t\tif (isDark) {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"brightness(0.9) contrast(1.1)\";\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"none\";\n\t\t\t\t\t\t\t\t}\n                                attachZoomControls(element, insertedSvg);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 渲染成功，跳出重试循环\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tattempts++;\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`Mermaid rendering attempt ${attempts} failed for element ${index}:`,\n\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif (attempts >= maxAttempts) {\n\t\t\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t\t\t`Failed to render Mermaid diagram after ${maxAttempts} attempts:`,\n\t\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\telement.innerHTML = `\n\t\t\t\t\t\t\t\t\t<div class=\"mermaid-error\">\n\t\t\t\t\t\t\t\t\t\t<p>Failed to render diagram after ${maxAttempts} attempts.</p>\n\t\t\t\t\t\t\t\t\t\t<button onclick=\"location.reload()\" style=\"margin-top: 8px; padding: 4px 8px; background: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer;\">\n\t\t\t\t\t\t\t\t\t\t\tRetry Page\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// 等待一段时间后重试\n\t\t\t\t\t\t\t\tawait new Promise((resolve) =>\n\t\t\t\t\t\t\t\t\tsetTimeout(resolve, 500 * attempts),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\n\t\t\t// 等待所有渲染完成\n\t\t\tawait Promise.all(renderPromises);\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error in renderMermaidDiagrams:\", error);\n\n\t\t\t// 如果渲染失败，尝试重新渲染\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t} finally {\n\t\t\tisRendering = false;\n\t\t}\n\t}\n\n\t// 初始化主题状态\n\tfunction initializeThemeState() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tcurrentTheme = isDark ? \"dark\" : \"default\";\n\t}\n\n\t// 加载 Mermaid 库\n\tasync function loadMermaid() {\n\t\tif (typeof window.mermaid !== \"undefined\") {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst script = document.createElement(\"script\");\n\t\t\tscript.src =\n\t\t\t\t\"https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\tscript.onload = () => {\n\t\t\t\tconsole.log(\"Mermaid library loaded successfully\");\n\t\t\t\tresolve();\n\t\t\t};\n\n\t\t\tscript.onerror = (error) => {\n\t\t\t\tconsole.error(\"Failed to load Mermaid library:\", error);\n\t\t\t\t// 尝试备用 CDN\n\t\t\t\tconst fallbackScript = document.createElement(\"script\");\n\t\t\t\tfallbackScript.src = \"https://unpkg.com/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\t\tfallbackScript.onload = () => {\n\t\t\t\t\tconsole.log(\"Mermaid library loaded from fallback CDN\");\n\t\t\t\t\tresolve();\n\t\t\t\t};\n\n\t\t\t\tfallbackScript.onerror = () => {\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t\"Failed to load Mermaid from both primary and fallback CDNs\",\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tdocument.head.appendChild(fallbackScript);\n\t\t\t};\n\n\t\t\tdocument.head.appendChild(script);\n\t\t});\n\t}\n\n\t// 主初始化函数\n\tasync function initialize() {\n\t\ttry {\n\t\t\t// 设置监听器\n\t\t\tsetupMutationObserver();\n\t\t\tsetupEventListeners();\n\n\t\t\t// 初始化主题状态\n\t\t\tinitializeThemeState();\n\n\t\t\t// 加载并初始化 Mermaid\n\t\t\tawait loadMermaid();\n\t\t\tawait initializeMermaid();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid system:\", error);\n\t\t}\n\t}\n\n\t// 启动初始化\n\tif (document.readyState === \"loading\") {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", initialize);\n\t} else {\n\t\tinitialize();\n\t}\n})();\n\x3C/script></div></section><section><h2 id=\"class-diagram-example\">Class Diagram Example<a class=\"anchor\" href=\"#class-diagram-example\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>Class diagrams show the static structure of a system, including classes, attributes, methods, and their relationships.</p><div class=\"mermaid-diagram-container\"><div class=\"mermaid-wrapper\" id=\"mermaid-80hf1g\"><div class=\"mermaid\" data-mermaid-code=\"classDiagram\n    class User {\n        +String username\n        +String password\n        +String email\n        +Boolean active\n        +login()\n        +logout()\n        +updateProfile()\n    }\n    \n    class Article {\n        +String title\n        +String content\n        +Date publishDate\n        +Boolean published\n        +publish()\n        +edit()\n        +delete()\n    }\n    \n    class Comment {\n        +String content\n        +Date commentDate\n        +addComment()\n        +deleteComment()\n    }\n    \n    class Category {\n        +String name\n        +String description\n        +addArticle()\n        +removeArticle()\n    }\n    \n    User &#x22;1&#x22; -- &#x22;*&#x22; Article : writes\n    User &#x22;1&#x22; -- &#x22;*&#x22; Comment : posts\n    Article &#x22;1&#x22; -- &#x22;*&#x22; Comment : has\n    Article &#x22;1&#x22; -- &#x22;*&#x22; Category : belongs to\">classDiagram\n    class User {\n        +String username\n        +String password\n        +String email\n        +Boolean active\n        +login()\n        +logout()\n        +updateProfile()\n    }\n    \n    class Article {\n        +String title\n        +String content\n        +Date publishDate\n        +Boolean published\n        +publish()\n        +edit()\n        +delete()\n    }\n    \n    class Comment {\n        +String content\n        +Date commentDate\n        +addComment()\n        +deleteComment()\n    }\n    \n    class Category {\n        +String name\n        +String description\n        +addArticle()\n        +removeArticle()\n    }\n    \n    User \"1\" -- \"*\" Article : writes\n    User \"1\" -- \"*\" Comment : posts\n    Article \"1\" -- \"*\" Comment : has\n    Article \"1\" -- \"*\" Category : belongs to</div></div><script type=\"text/javascript\">(() => {\n\t// 单例模式：检查是否已经初始化过\n\tif (window.mermaidInitialized) {\n\t\treturn;\n\t}\n\n\twindow.mermaidInitialized = true;\n\n\t// 记录当前主题状态，避免不必要的重新渲染\n\tlet currentTheme = null;\n\tlet isRendering = false; // 防止并发渲染\n\tlet retryCount = 0;\n\tconst MAX_RETRIES = 3;\n\tconst RETRY_DELAY = 1000; // 1秒\n\n\t// 检查主题是否真的发生了变化\n\tfunction hasThemeChanged() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tconst newTheme = isDark ? \"dark\" : \"default\";\n\n\t\tif (currentTheme !== newTheme) {\n\t\t\tcurrentTheme = newTheme;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t// 等待 Mermaid 库加载完成\n\tfunction waitForMermaid(timeout = 10000) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst startTime = Date.now();\n\n\t\t\tfunction check() {\n\t\t\t\tif (window.mermaid && typeof window.mermaid.initialize === \"function\") {\n\t\t\t\t\tresolve(window.mermaid);\n\t\t\t\t} else if (Date.now() - startTime > timeout) {\n\t\t\t\t\treject(new Error(\"Mermaid library failed to load within timeout\"));\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(check, 100);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcheck();\n\t\t});\n\t}\n\n\t// 设置 MutationObserver 监听 html 元素的 class 属性变化\n\tfunction setupMutationObserver() {\n\t\tconst observer = new MutationObserver((mutations) => {\n\t\t\tmutations.forEach((mutation) => {\n\t\t\t\tif (\n\t\t\t\t\tmutation.type === \"attributes\" &&\n\t\t\t\t\tmutation.attributeName === \"class\"\n\t\t\t\t) {\n\t\t\t\t\t// 检查是否是 dark 类的变化\n\t\t\t\t\tconst target = mutation.target;\n\t\t\t\t\tconst wasDark = mutation.oldValue\n\t\t\t\t\t\t? mutation.oldValue.includes(\"dark\")\n\t\t\t\t\t\t: false;\n\t\t\t\t\tconst isDark = target.classList.contains(\"dark\");\n\n\t\t\t\t\tif (wasDark !== isDark) {\n\t\t\t\t\t\tif (hasThemeChanged()) {\n\t\t\t\t\t\t\t// 延迟渲染，避免主题切换时的闪烁\n\t\t\t\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 150);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// 开始观察 html 元素的 class 属性变化\n\t\tobserver.observe(document.documentElement, {\n\t\t\tattributes: true,\n\t\t\tattributeFilter: [\"class\"],\n\t\t\tattributeOldValue: true,\n\t\t});\n\t}\n\n    // 缩放平移\n    function attachZoomControls(element, svgElement) {\n        if (element.__zoomAttached) return;\n        element.__zoomAttached = true;\n\n        const wrapper = document.createElement('div');\n        wrapper.className = 'mermaid-zoom-wrapper';\n\n        const svgParent = svgElement.parentNode;\n        wrapper.appendChild(svgElement);\n        svgParent.appendChild(wrapper);\n\n        let scale = 1;\n        let tx = 0;\n        let ty = 0;\n        const MIN_SCALE = 0.2;\n        const MAX_SCALE = 6;\n\n        function applyTransform() {\n            wrapper.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`;\n        }\n        const controls = document.createElement('div');\n        controls.className = 'mermaid-zoom-controls';\n        controls.innerHTML = `\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-in\" title=\"Zoom in\">+</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-out\" title=\"Zoom out\">−</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"reset\" title=\"Reset\">⤾</button>\n\t\t`;\n        element.appendChild(controls);\n\n        controls.addEventListener('click', (ev) => {\n            const action = ev.target.getAttribute && ev.target.getAttribute('data-action');\n            if (!action) return;\n\n            switch (action) {\n                case 'zoom-in':\n                    scale = Math.min(MAX_SCALE, +(scale * 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'zoom-out':\n                    scale = Math.max(MIN_SCALE, +(scale / 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'reset':\n                    scale = 1;\n                    tx = 0;\n                    ty = 0;\n                    applyTransform();\n                    break;\n            }\n        });\n\n        let isPanning = false;\n        let startX = 0;\n        let startY = 0;\n        let startTx = 0;\n        let startTy = 0;\n\n        wrapper.style.touchAction = 'none';\n\n        wrapper.addEventListener('pointerdown', (ev) => {\n            if (ev.button !== 0) return; // 仅左键\n            isPanning = true;\n            wrapper.setPointerCapture(ev.pointerId);\n            startX = ev.clientX;\n            startY = ev.clientY;\n            startTx = tx;\n            startTy = ty;\n        });\n\n        wrapper.addEventListener('pointermove', (ev) => {\n            if (!isPanning) return;\n            const dx = ev.clientX - startX;\n            const dy = ev.clientY - startY;\n            tx = startTx + dx / scale; // 根据当前缩放调整灵敏度\n            ty = startTy + dy / scale;\n            applyTransform();\n        });\n\n        wrapper.addEventListener('pointerup', (ev) => {\n            isPanning = false;\n            try {\n                wrapper.releasePointerCapture(ev.pointerId);\n            } catch (e) {\n            }\n        });\n\n        wrapper.addEventListener('pointercancel', () => {\n            isPanning = false;\n        });\n\n        // 鼠标滚轮缩放\n        element.addEventListener('wheel', (ev) => {\n            ev.preventDefault();\n            const delta = -ev.deltaY;\n            const zoomFactor = delta > 0 ? 1.12 : 1 / 1.12;\n            const prevScale = scale;\n            scale = Math.min(MAX_SCALE, Math.max(MIN_SCALE, +(scale * zoomFactor).toFixed(3)));\n\n            const rect = wrapper.getBoundingClientRect();\n            const cx = ev.clientX - rect.left;\n            const cy = ev.clientY - rect.top;\n\n            const worldX = (cx / prevScale) - tx;\n            const worldY = (cy / prevScale) - ty;\n\n            tx = cx / scale - worldX;\n            ty = cy / scale - worldY;\n\n            applyTransform();\n        }, {passive: false});\n\n        // 双击重置\n        wrapper.addEventListener('dblclick', () => {\n            scale = 1;\n            tx = 0;\n            ty = 0;\n            applyTransform();\n        });\n        applyTransform();\n        let resizeTimer = null;\n        window.addEventListener('resize', () => {\n            clearTimeout(resizeTimer);\n            resizeTimer = setTimeout(() => {\n                applyTransform()\n            }, 200);\n        });\n    }\n\n    // 设置其他事件监听器\n\tfunction setupEventListeners() {\n\t\t// 监听页面切换\n\t\tdocument.addEventListener(\"astro:page-load\", () => {\n\t\t\t// 重新初始化主题状态\n\t\t\tcurrentTheme = null;\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t\tif (hasThemeChanged()) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 100);\n\t\t\t}\n\t\t});\n\n\t\t// 监听页面可见性变化，页面重新可见时重新渲染\n\t\tdocument.addEventListener(\"visibilitychange\", () => {\n\t\t\tif (!document.hidden) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 200);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync function initializeMermaid() {\n\t\ttry {\n\t\t\tawait waitForMermaid();\n\n\t\t\t// 初始化 Mermaid 配置\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: \"default\",\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\t// 添加错误处理配置\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 渲染所有 Mermaid 图表\n\t\t\tawait renderMermaidDiagrams();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid:\", error);\n\t\t\t// 如果初始化失败，尝试重新加载\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => initializeMermaid(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function renderMermaidDiagrams() {\n\t\t// 防止并发渲染\n\t\tif (isRendering) {\n\t\t\treturn;\n\t\t}\n\n\t\t// 检查 Mermaid 是否可用\n\t\tif (!window.mermaid || typeof window.mermaid.render !== \"function\") {\n\t\t\tconsole.warn(\"Mermaid not available, skipping render\");\n\t\t\treturn;\n\t\t}\n\n\t\tisRendering = true;\n\n\t\ttry {\n\t\t\tconst mermaidElements = document.querySelectorAll(\n\t\t\t\t\".mermaid[data-mermaid-code]\",\n\t\t\t);\n\n\t\t\tif (mermaidElements.length === 0) {\n\t\t\t\tisRendering = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 延迟检测主题，确保 DOM 已经更新\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 100));\n\n\t\t\tconst htmlElement = document.documentElement;\n\t\t\tconst isDark = htmlElement.classList.contains(\"dark\");\n\t\t\tconst theme = isDark ? \"dark\" : \"default\";\n\n\t\t\t// 更新 Mermaid 主题（只需要更新一次）\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: theme,\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t\t// 强制应用主题变量\n\t\t\t\t\tprimaryColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryTextColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryBorderColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tlineColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tsecondaryColor: isDark ? \"#333333\" : \"#f0f0f0\",\n\t\t\t\t\ttertiaryColor: isDark ? \"#555555\" : \"#e0e0e0\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 批量渲染所有图表，添加重试机制\n\t\t\tconst renderPromises = Array.from(mermaidElements).map(\n\t\t\t\tasync (element, index) => {\n\t\t\t\t\tlet attempts = 0;\n\t\t\t\t\tconst maxAttempts = 3;\n\n\t\t\t\t\twhile (attempts < maxAttempts) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst code = element.getAttribute(\"data-mermaid-code\");\n\n\t\t\t\t\t\t\tif (!code) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 显示加载状态\n\t\t\t\t\t\t\telement.innerHTML =\n\t\t\t\t\t\t\t\t'<div class=\"mermaid-loading\">Rendering diagram...</div>';\n\n\t\t\t\t\t\t\t// 渲染图表\n\t\t\t\t\t\t\tconst { svg } = await window.mermaid.render(\n\t\t\t\t\t\t\t\t`mermaid-${Date.now()}-${index}-${attempts}`,\n\t\t\t\t\t\t\t\tcode,\n\t\t\t\t\t\t\t);\n\n                            const parser = new DOMParser();\n                            const doc = parser.parseFromString(svg, 'image/svg+xml');\n                            const svgElement = doc.documentElement;\n\n                            element.innerHTML = '';\n                            element.__zoomAttached = false;\n                            element.appendChild(svgElement);\n\n                            // 添加响应式支持\n                            const insertedSvg = element.querySelector('svg');\n                            if (insertedSvg) {\n                                insertedSvg.setAttribute('width', '100%');\n                                insertedSvg.removeAttribute('height');\n                                insertedSvg.style.maxWidth = '100%';\n                                insertedSvg.style.height = 'auto';\n                                //Todo 需要根据实际情况\n                                insertedSvg.style.minHeight = \"300px\";\n\n\t\t\t\t\t\t\t\t// 强制应用样式\n\t\t\t\t\t\t\t\tif (isDark) {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"brightness(0.9) contrast(1.1)\";\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"none\";\n\t\t\t\t\t\t\t\t}\n                                attachZoomControls(element, insertedSvg);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 渲染成功，跳出重试循环\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tattempts++;\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`Mermaid rendering attempt ${attempts} failed for element ${index}:`,\n\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif (attempts >= maxAttempts) {\n\t\t\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t\t\t`Failed to render Mermaid diagram after ${maxAttempts} attempts:`,\n\t\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\telement.innerHTML = `\n\t\t\t\t\t\t\t\t\t<div class=\"mermaid-error\">\n\t\t\t\t\t\t\t\t\t\t<p>Failed to render diagram after ${maxAttempts} attempts.</p>\n\t\t\t\t\t\t\t\t\t\t<button onclick=\"location.reload()\" style=\"margin-top: 8px; padding: 4px 8px; background: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer;\">\n\t\t\t\t\t\t\t\t\t\t\tRetry Page\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// 等待一段时间后重试\n\t\t\t\t\t\t\t\tawait new Promise((resolve) =>\n\t\t\t\t\t\t\t\t\tsetTimeout(resolve, 500 * attempts),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\n\t\t\t// 等待所有渲染完成\n\t\t\tawait Promise.all(renderPromises);\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error in renderMermaidDiagrams:\", error);\n\n\t\t\t// 如果渲染失败，尝试重新渲染\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t} finally {\n\t\t\tisRendering = false;\n\t\t}\n\t}\n\n\t// 初始化主题状态\n\tfunction initializeThemeState() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tcurrentTheme = isDark ? \"dark\" : \"default\";\n\t}\n\n\t// 加载 Mermaid 库\n\tasync function loadMermaid() {\n\t\tif (typeof window.mermaid !== \"undefined\") {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst script = document.createElement(\"script\");\n\t\t\tscript.src =\n\t\t\t\t\"https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\tscript.onload = () => {\n\t\t\t\tconsole.log(\"Mermaid library loaded successfully\");\n\t\t\t\tresolve();\n\t\t\t};\n\n\t\t\tscript.onerror = (error) => {\n\t\t\t\tconsole.error(\"Failed to load Mermaid library:\", error);\n\t\t\t\t// 尝试备用 CDN\n\t\t\t\tconst fallbackScript = document.createElement(\"script\");\n\t\t\t\tfallbackScript.src = \"https://unpkg.com/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\t\tfallbackScript.onload = () => {\n\t\t\t\t\tconsole.log(\"Mermaid library loaded from fallback CDN\");\n\t\t\t\t\tresolve();\n\t\t\t\t};\n\n\t\t\t\tfallbackScript.onerror = () => {\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t\"Failed to load Mermaid from both primary and fallback CDNs\",\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tdocument.head.appendChild(fallbackScript);\n\t\t\t};\n\n\t\t\tdocument.head.appendChild(script);\n\t\t});\n\t}\n\n\t// 主初始化函数\n\tasync function initialize() {\n\t\ttry {\n\t\t\t// 设置监听器\n\t\t\tsetupMutationObserver();\n\t\t\tsetupEventListeners();\n\n\t\t\t// 初始化主题状态\n\t\t\tinitializeThemeState();\n\n\t\t\t// 加载并初始化 Mermaid\n\t\t\tawait loadMermaid();\n\t\t\tawait initializeMermaid();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid system:\", error);\n\t\t}\n\t}\n\n\t// 启动初始化\n\tif (document.readyState === \"loading\") {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", initialize);\n\t} else {\n\t\tinitialize();\n\t}\n})();\n\x3C/script></div></section><section><h2 id=\"state-diagram-example\">State Diagram Example<a class=\"anchor\" href=\"#state-diagram-example\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>State diagrams show the sequence of states an object goes through during its life cycle.</p><div class=\"mermaid-diagram-container\"><div class=\"mermaid-wrapper\" id=\"mermaid-e9vs2b\"><div class=\"mermaid\" data-mermaid-code=\"stateDiagram-v2\n    [*] --> Draft\n    \n    Draft --> UnderReview : submit\n    UnderReview --> Draft : reject\n    UnderReview --> Approved : approve\n    Approved --> Published : publish\n    Published --> Archived : archive\n    Published --> Draft : retract\n    \n    state Published {\n        [*] --> Active\n        Active --> Hidden : temporarily hide\n        Hidden --> Active : restore\n        Active --> [*]\n        Hidden --> [*]\n    }\n    \n    Archived --> [*]\">stateDiagram-v2\n    [*] --> Draft\n    \n    Draft --> UnderReview : submit\n    UnderReview --> Draft : reject\n    UnderReview --> Approved : approve\n    Approved --> Published : publish\n    Published --> Archived : archive\n    Published --> Draft : retract\n    \n    state Published {\n        [*] --> Active\n        Active --> Hidden : temporarily hide\n        Hidden --> Active : restore\n        Active --> [*]\n        Hidden --> [*]\n    }\n    \n    Archived --> [*]</div></div><script type=\"text/javascript\">(() => {\n\t// 单例模式：检查是否已经初始化过\n\tif (window.mermaidInitialized) {\n\t\treturn;\n\t}\n\n\twindow.mermaidInitialized = true;\n\n\t// 记录当前主题状态，避免不必要的重新渲染\n\tlet currentTheme = null;\n\tlet isRendering = false; // 防止并发渲染\n\tlet retryCount = 0;\n\tconst MAX_RETRIES = 3;\n\tconst RETRY_DELAY = 1000; // 1秒\n\n\t// 检查主题是否真的发生了变化\n\tfunction hasThemeChanged() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tconst newTheme = isDark ? \"dark\" : \"default\";\n\n\t\tif (currentTheme !== newTheme) {\n\t\t\tcurrentTheme = newTheme;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t// 等待 Mermaid 库加载完成\n\tfunction waitForMermaid(timeout = 10000) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst startTime = Date.now();\n\n\t\t\tfunction check() {\n\t\t\t\tif (window.mermaid && typeof window.mermaid.initialize === \"function\") {\n\t\t\t\t\tresolve(window.mermaid);\n\t\t\t\t} else if (Date.now() - startTime > timeout) {\n\t\t\t\t\treject(new Error(\"Mermaid library failed to load within timeout\"));\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(check, 100);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcheck();\n\t\t});\n\t}\n\n\t// 设置 MutationObserver 监听 html 元素的 class 属性变化\n\tfunction setupMutationObserver() {\n\t\tconst observer = new MutationObserver((mutations) => {\n\t\t\tmutations.forEach((mutation) => {\n\t\t\t\tif (\n\t\t\t\t\tmutation.type === \"attributes\" &&\n\t\t\t\t\tmutation.attributeName === \"class\"\n\t\t\t\t) {\n\t\t\t\t\t// 检查是否是 dark 类的变化\n\t\t\t\t\tconst target = mutation.target;\n\t\t\t\t\tconst wasDark = mutation.oldValue\n\t\t\t\t\t\t? mutation.oldValue.includes(\"dark\")\n\t\t\t\t\t\t: false;\n\t\t\t\t\tconst isDark = target.classList.contains(\"dark\");\n\n\t\t\t\t\tif (wasDark !== isDark) {\n\t\t\t\t\t\tif (hasThemeChanged()) {\n\t\t\t\t\t\t\t// 延迟渲染，避免主题切换时的闪烁\n\t\t\t\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 150);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// 开始观察 html 元素的 class 属性变化\n\t\tobserver.observe(document.documentElement, {\n\t\t\tattributes: true,\n\t\t\tattributeFilter: [\"class\"],\n\t\t\tattributeOldValue: true,\n\t\t});\n\t}\n\n    // 缩放平移\n    function attachZoomControls(element, svgElement) {\n        if (element.__zoomAttached) return;\n        element.__zoomAttached = true;\n\n        const wrapper = document.createElement('div');\n        wrapper.className = 'mermaid-zoom-wrapper';\n\n        const svgParent = svgElement.parentNode;\n        wrapper.appendChild(svgElement);\n        svgParent.appendChild(wrapper);\n\n        let scale = 1;\n        let tx = 0;\n        let ty = 0;\n        const MIN_SCALE = 0.2;\n        const MAX_SCALE = 6;\n\n        function applyTransform() {\n            wrapper.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`;\n        }\n        const controls = document.createElement('div');\n        controls.className = 'mermaid-zoom-controls';\n        controls.innerHTML = `\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-in\" title=\"Zoom in\">+</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-out\" title=\"Zoom out\">−</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"reset\" title=\"Reset\">⤾</button>\n\t\t`;\n        element.appendChild(controls);\n\n        controls.addEventListener('click', (ev) => {\n            const action = ev.target.getAttribute && ev.target.getAttribute('data-action');\n            if (!action) return;\n\n            switch (action) {\n                case 'zoom-in':\n                    scale = Math.min(MAX_SCALE, +(scale * 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'zoom-out':\n                    scale = Math.max(MIN_SCALE, +(scale / 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'reset':\n                    scale = 1;\n                    tx = 0;\n                    ty = 0;\n                    applyTransform();\n                    break;\n            }\n        });\n\n        let isPanning = false;\n        let startX = 0;\n        let startY = 0;\n        let startTx = 0;\n        let startTy = 0;\n\n        wrapper.style.touchAction = 'none';\n\n        wrapper.addEventListener('pointerdown', (ev) => {\n            if (ev.button !== 0) return; // 仅左键\n            isPanning = true;\n            wrapper.setPointerCapture(ev.pointerId);\n            startX = ev.clientX;\n            startY = ev.clientY;\n            startTx = tx;\n            startTy = ty;\n        });\n\n        wrapper.addEventListener('pointermove', (ev) => {\n            if (!isPanning) return;\n            const dx = ev.clientX - startX;\n            const dy = ev.clientY - startY;\n            tx = startTx + dx / scale; // 根据当前缩放调整灵敏度\n            ty = startTy + dy / scale;\n            applyTransform();\n        });\n\n        wrapper.addEventListener('pointerup', (ev) => {\n            isPanning = false;\n            try {\n                wrapper.releasePointerCapture(ev.pointerId);\n            } catch (e) {\n            }\n        });\n\n        wrapper.addEventListener('pointercancel', () => {\n            isPanning = false;\n        });\n\n        // 鼠标滚轮缩放\n        element.addEventListener('wheel', (ev) => {\n            ev.preventDefault();\n            const delta = -ev.deltaY;\n            const zoomFactor = delta > 0 ? 1.12 : 1 / 1.12;\n            const prevScale = scale;\n            scale = Math.min(MAX_SCALE, Math.max(MIN_SCALE, +(scale * zoomFactor).toFixed(3)));\n\n            const rect = wrapper.getBoundingClientRect();\n            const cx = ev.clientX - rect.left;\n            const cy = ev.clientY - rect.top;\n\n            const worldX = (cx / prevScale) - tx;\n            const worldY = (cy / prevScale) - ty;\n\n            tx = cx / scale - worldX;\n            ty = cy / scale - worldY;\n\n            applyTransform();\n        }, {passive: false});\n\n        // 双击重置\n        wrapper.addEventListener('dblclick', () => {\n            scale = 1;\n            tx = 0;\n            ty = 0;\n            applyTransform();\n        });\n        applyTransform();\n        let resizeTimer = null;\n        window.addEventListener('resize', () => {\n            clearTimeout(resizeTimer);\n            resizeTimer = setTimeout(() => {\n                applyTransform()\n            }, 200);\n        });\n    }\n\n    // 设置其他事件监听器\n\tfunction setupEventListeners() {\n\t\t// 监听页面切换\n\t\tdocument.addEventListener(\"astro:page-load\", () => {\n\t\t\t// 重新初始化主题状态\n\t\t\tcurrentTheme = null;\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t\tif (hasThemeChanged()) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 100);\n\t\t\t}\n\t\t});\n\n\t\t// 监听页面可见性变化，页面重新可见时重新渲染\n\t\tdocument.addEventListener(\"visibilitychange\", () => {\n\t\t\tif (!document.hidden) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 200);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync function initializeMermaid() {\n\t\ttry {\n\t\t\tawait waitForMermaid();\n\n\t\t\t// 初始化 Mermaid 配置\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: \"default\",\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\t// 添加错误处理配置\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 渲染所有 Mermaid 图表\n\t\t\tawait renderMermaidDiagrams();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid:\", error);\n\t\t\t// 如果初始化失败，尝试重新加载\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => initializeMermaid(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function renderMermaidDiagrams() {\n\t\t// 防止并发渲染\n\t\tif (isRendering) {\n\t\t\treturn;\n\t\t}\n\n\t\t// 检查 Mermaid 是否可用\n\t\tif (!window.mermaid || typeof window.mermaid.render !== \"function\") {\n\t\t\tconsole.warn(\"Mermaid not available, skipping render\");\n\t\t\treturn;\n\t\t}\n\n\t\tisRendering = true;\n\n\t\ttry {\n\t\t\tconst mermaidElements = document.querySelectorAll(\n\t\t\t\t\".mermaid[data-mermaid-code]\",\n\t\t\t);\n\n\t\t\tif (mermaidElements.length === 0) {\n\t\t\t\tisRendering = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 延迟检测主题，确保 DOM 已经更新\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 100));\n\n\t\t\tconst htmlElement = document.documentElement;\n\t\t\tconst isDark = htmlElement.classList.contains(\"dark\");\n\t\t\tconst theme = isDark ? \"dark\" : \"default\";\n\n\t\t\t// 更新 Mermaid 主题（只需要更新一次）\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: theme,\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t\t// 强制应用主题变量\n\t\t\t\t\tprimaryColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryTextColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryBorderColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tlineColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tsecondaryColor: isDark ? \"#333333\" : \"#f0f0f0\",\n\t\t\t\t\ttertiaryColor: isDark ? \"#555555\" : \"#e0e0e0\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 批量渲染所有图表，添加重试机制\n\t\t\tconst renderPromises = Array.from(mermaidElements).map(\n\t\t\t\tasync (element, index) => {\n\t\t\t\t\tlet attempts = 0;\n\t\t\t\t\tconst maxAttempts = 3;\n\n\t\t\t\t\twhile (attempts < maxAttempts) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst code = element.getAttribute(\"data-mermaid-code\");\n\n\t\t\t\t\t\t\tif (!code) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 显示加载状态\n\t\t\t\t\t\t\telement.innerHTML =\n\t\t\t\t\t\t\t\t'<div class=\"mermaid-loading\">Rendering diagram...</div>';\n\n\t\t\t\t\t\t\t// 渲染图表\n\t\t\t\t\t\t\tconst { svg } = await window.mermaid.render(\n\t\t\t\t\t\t\t\t`mermaid-${Date.now()}-${index}-${attempts}`,\n\t\t\t\t\t\t\t\tcode,\n\t\t\t\t\t\t\t);\n\n                            const parser = new DOMParser();\n                            const doc = parser.parseFromString(svg, 'image/svg+xml');\n                            const svgElement = doc.documentElement;\n\n                            element.innerHTML = '';\n                            element.__zoomAttached = false;\n                            element.appendChild(svgElement);\n\n                            // 添加响应式支持\n                            const insertedSvg = element.querySelector('svg');\n                            if (insertedSvg) {\n                                insertedSvg.setAttribute('width', '100%');\n                                insertedSvg.removeAttribute('height');\n                                insertedSvg.style.maxWidth = '100%';\n                                insertedSvg.style.height = 'auto';\n                                //Todo 需要根据实际情况\n                                insertedSvg.style.minHeight = \"300px\";\n\n\t\t\t\t\t\t\t\t// 强制应用样式\n\t\t\t\t\t\t\t\tif (isDark) {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"brightness(0.9) contrast(1.1)\";\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"none\";\n\t\t\t\t\t\t\t\t}\n                                attachZoomControls(element, insertedSvg);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 渲染成功，跳出重试循环\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tattempts++;\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`Mermaid rendering attempt ${attempts} failed for element ${index}:`,\n\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif (attempts >= maxAttempts) {\n\t\t\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t\t\t`Failed to render Mermaid diagram after ${maxAttempts} attempts:`,\n\t\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\telement.innerHTML = `\n\t\t\t\t\t\t\t\t\t<div class=\"mermaid-error\">\n\t\t\t\t\t\t\t\t\t\t<p>Failed to render diagram after ${maxAttempts} attempts.</p>\n\t\t\t\t\t\t\t\t\t\t<button onclick=\"location.reload()\" style=\"margin-top: 8px; padding: 4px 8px; background: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer;\">\n\t\t\t\t\t\t\t\t\t\t\tRetry Page\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// 等待一段时间后重试\n\t\t\t\t\t\t\t\tawait new Promise((resolve) =>\n\t\t\t\t\t\t\t\t\tsetTimeout(resolve, 500 * attempts),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\n\t\t\t// 等待所有渲染完成\n\t\t\tawait Promise.all(renderPromises);\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error in renderMermaidDiagrams:\", error);\n\n\t\t\t// 如果渲染失败，尝试重新渲染\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t} finally {\n\t\t\tisRendering = false;\n\t\t}\n\t}\n\n\t// 初始化主题状态\n\tfunction initializeThemeState() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tcurrentTheme = isDark ? \"dark\" : \"default\";\n\t}\n\n\t// 加载 Mermaid 库\n\tasync function loadMermaid() {\n\t\tif (typeof window.mermaid !== \"undefined\") {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst script = document.createElement(\"script\");\n\t\t\tscript.src =\n\t\t\t\t\"https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\tscript.onload = () => {\n\t\t\t\tconsole.log(\"Mermaid library loaded successfully\");\n\t\t\t\tresolve();\n\t\t\t};\n\n\t\t\tscript.onerror = (error) => {\n\t\t\t\tconsole.error(\"Failed to load Mermaid library:\", error);\n\t\t\t\t// 尝试备用 CDN\n\t\t\t\tconst fallbackScript = document.createElement(\"script\");\n\t\t\t\tfallbackScript.src = \"https://unpkg.com/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\t\tfallbackScript.onload = () => {\n\t\t\t\t\tconsole.log(\"Mermaid library loaded from fallback CDN\");\n\t\t\t\t\tresolve();\n\t\t\t\t};\n\n\t\t\t\tfallbackScript.onerror = () => {\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t\"Failed to load Mermaid from both primary and fallback CDNs\",\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tdocument.head.appendChild(fallbackScript);\n\t\t\t};\n\n\t\t\tdocument.head.appendChild(script);\n\t\t});\n\t}\n\n\t// 主初始化函数\n\tasync function initialize() {\n\t\ttry {\n\t\t\t// 设置监听器\n\t\t\tsetupMutationObserver();\n\t\t\tsetupEventListeners();\n\n\t\t\t// 初始化主题状态\n\t\t\tinitializeThemeState();\n\n\t\t\t// 加载并初始化 Mermaid\n\t\t\tawait loadMermaid();\n\t\t\tawait initializeMermaid();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid system:\", error);\n\t\t}\n\t}\n\n\t// 启动初始化\n\tif (document.readyState === \"loading\") {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", initialize);\n\t} else {\n\t\tinitialize();\n\t}\n})();\n\x3C/script></div></section><section><h2 id=\"pie-chart-example\">Pie Chart Example<a class=\"anchor\" href=\"#pie-chart-example\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>Pie charts are ideal for displaying proportions and percentage data.</p><div class=\"mermaid-diagram-container\"><div class=\"mermaid-wrapper\" id=\"mermaid-sim4ge\"><div class=\"mermaid\" data-mermaid-code=\"pie title Website Traffic Sources Analysis\n    &#x22;Search Engines&#x22; : 45.6\n    &#x22;Direct Access&#x22; : 30.1\n    &#x22;Social Media&#x22; : 15.3\n    &#x22;Referral Links&#x22; : 6.4\n    &#x22;Other Sources&#x22; : 2.6\">pie title Website Traffic Sources Analysis\n    \"Search Engines\" : 45.6\n    \"Direct Access\" : 30.1\n    \"Social Media\" : 15.3\n    \"Referral Links\" : 6.4\n    \"Other Sources\" : 2.6</div></div><script type=\"text/javascript\">(() => {\n\t// 单例模式：检查是否已经初始化过\n\tif (window.mermaidInitialized) {\n\t\treturn;\n\t}\n\n\twindow.mermaidInitialized = true;\n\n\t// 记录当前主题状态，避免不必要的重新渲染\n\tlet currentTheme = null;\n\tlet isRendering = false; // 防止并发渲染\n\tlet retryCount = 0;\n\tconst MAX_RETRIES = 3;\n\tconst RETRY_DELAY = 1000; // 1秒\n\n\t// 检查主题是否真的发生了变化\n\tfunction hasThemeChanged() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tconst newTheme = isDark ? \"dark\" : \"default\";\n\n\t\tif (currentTheme !== newTheme) {\n\t\t\tcurrentTheme = newTheme;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t// 等待 Mermaid 库加载完成\n\tfunction waitForMermaid(timeout = 10000) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst startTime = Date.now();\n\n\t\t\tfunction check() {\n\t\t\t\tif (window.mermaid && typeof window.mermaid.initialize === \"function\") {\n\t\t\t\t\tresolve(window.mermaid);\n\t\t\t\t} else if (Date.now() - startTime > timeout) {\n\t\t\t\t\treject(new Error(\"Mermaid library failed to load within timeout\"));\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(check, 100);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcheck();\n\t\t});\n\t}\n\n\t// 设置 MutationObserver 监听 html 元素的 class 属性变化\n\tfunction setupMutationObserver() {\n\t\tconst observer = new MutationObserver((mutations) => {\n\t\t\tmutations.forEach((mutation) => {\n\t\t\t\tif (\n\t\t\t\t\tmutation.type === \"attributes\" &&\n\t\t\t\t\tmutation.attributeName === \"class\"\n\t\t\t\t) {\n\t\t\t\t\t// 检查是否是 dark 类的变化\n\t\t\t\t\tconst target = mutation.target;\n\t\t\t\t\tconst wasDark = mutation.oldValue\n\t\t\t\t\t\t? mutation.oldValue.includes(\"dark\")\n\t\t\t\t\t\t: false;\n\t\t\t\t\tconst isDark = target.classList.contains(\"dark\");\n\n\t\t\t\t\tif (wasDark !== isDark) {\n\t\t\t\t\t\tif (hasThemeChanged()) {\n\t\t\t\t\t\t\t// 延迟渲染，避免主题切换时的闪烁\n\t\t\t\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 150);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// 开始观察 html 元素的 class 属性变化\n\t\tobserver.observe(document.documentElement, {\n\t\t\tattributes: true,\n\t\t\tattributeFilter: [\"class\"],\n\t\t\tattributeOldValue: true,\n\t\t});\n\t}\n\n    // 缩放平移\n    function attachZoomControls(element, svgElement) {\n        if (element.__zoomAttached) return;\n        element.__zoomAttached = true;\n\n        const wrapper = document.createElement('div');\n        wrapper.className = 'mermaid-zoom-wrapper';\n\n        const svgParent = svgElement.parentNode;\n        wrapper.appendChild(svgElement);\n        svgParent.appendChild(wrapper);\n\n        let scale = 1;\n        let tx = 0;\n        let ty = 0;\n        const MIN_SCALE = 0.2;\n        const MAX_SCALE = 6;\n\n        function applyTransform() {\n            wrapper.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`;\n        }\n        const controls = document.createElement('div');\n        controls.className = 'mermaid-zoom-controls';\n        controls.innerHTML = `\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-in\" title=\"Zoom in\">+</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-out\" title=\"Zoom out\">−</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"reset\" title=\"Reset\">⤾</button>\n\t\t`;\n        element.appendChild(controls);\n\n        controls.addEventListener('click', (ev) => {\n            const action = ev.target.getAttribute && ev.target.getAttribute('data-action');\n            if (!action) return;\n\n            switch (action) {\n                case 'zoom-in':\n                    scale = Math.min(MAX_SCALE, +(scale * 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'zoom-out':\n                    scale = Math.max(MIN_SCALE, +(scale / 1.2).toFixed(3));\n                    applyTransform();\n                    break;\n                case 'reset':\n                    scale = 1;\n                    tx = 0;\n                    ty = 0;\n                    applyTransform();\n                    break;\n            }\n        });\n\n        let isPanning = false;\n        let startX = 0;\n        let startY = 0;\n        let startTx = 0;\n        let startTy = 0;\n\n        wrapper.style.touchAction = 'none';\n\n        wrapper.addEventListener('pointerdown', (ev) => {\n            if (ev.button !== 0) return; // 仅左键\n            isPanning = true;\n            wrapper.setPointerCapture(ev.pointerId);\n            startX = ev.clientX;\n            startY = ev.clientY;\n            startTx = tx;\n            startTy = ty;\n        });\n\n        wrapper.addEventListener('pointermove', (ev) => {\n            if (!isPanning) return;\n            const dx = ev.clientX - startX;\n            const dy = ev.clientY - startY;\n            tx = startTx + dx / scale; // 根据当前缩放调整灵敏度\n            ty = startTy + dy / scale;\n            applyTransform();\n        });\n\n        wrapper.addEventListener('pointerup', (ev) => {\n            isPanning = false;\n            try {\n                wrapper.releasePointerCapture(ev.pointerId);\n            } catch (e) {\n            }\n        });\n\n        wrapper.addEventListener('pointercancel', () => {\n            isPanning = false;\n        });\n\n        // 鼠标滚轮缩放\n        element.addEventListener('wheel', (ev) => {\n            ev.preventDefault();\n            const delta = -ev.deltaY;\n            const zoomFactor = delta > 0 ? 1.12 : 1 / 1.12;\n            const prevScale = scale;\n            scale = Math.min(MAX_SCALE, Math.max(MIN_SCALE, +(scale * zoomFactor).toFixed(3)));\n\n            const rect = wrapper.getBoundingClientRect();\n            const cx = ev.clientX - rect.left;\n            const cy = ev.clientY - rect.top;\n\n            const worldX = (cx / prevScale) - tx;\n            const worldY = (cy / prevScale) - ty;\n\n            tx = cx / scale - worldX;\n            ty = cy / scale - worldY;\n\n            applyTransform();\n        }, {passive: false});\n\n        // 双击重置\n        wrapper.addEventListener('dblclick', () => {\n            scale = 1;\n            tx = 0;\n            ty = 0;\n            applyTransform();\n        });\n        applyTransform();\n        let resizeTimer = null;\n        window.addEventListener('resize', () => {\n            clearTimeout(resizeTimer);\n            resizeTimer = setTimeout(() => {\n                applyTransform()\n            }, 200);\n        });\n    }\n\n    // 设置其他事件监听器\n\tfunction setupEventListeners() {\n\t\t// 监听页面切换\n\t\tdocument.addEventListener(\"astro:page-load\", () => {\n\t\t\t// 重新初始化主题状态\n\t\t\tcurrentTheme = null;\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t\tif (hasThemeChanged()) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 100);\n\t\t\t}\n\t\t});\n\n\t\t// 监听页面可见性变化，页面重新可见时重新渲染\n\t\tdocument.addEventListener(\"visibilitychange\", () => {\n\t\t\tif (!document.hidden) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 200);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync function initializeMermaid() {\n\t\ttry {\n\t\t\tawait waitForMermaid();\n\n\t\t\t// 初始化 Mermaid 配置\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: \"default\",\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\t// 添加错误处理配置\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 渲染所有 Mermaid 图表\n\t\t\tawait renderMermaidDiagrams();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid:\", error);\n\t\t\t// 如果初始化失败，尝试重新加载\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => initializeMermaid(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function renderMermaidDiagrams() {\n\t\t// 防止并发渲染\n\t\tif (isRendering) {\n\t\t\treturn;\n\t\t}\n\n\t\t// 检查 Mermaid 是否可用\n\t\tif (!window.mermaid || typeof window.mermaid.render !== \"function\") {\n\t\t\tconsole.warn(\"Mermaid not available, skipping render\");\n\t\t\treturn;\n\t\t}\n\n\t\tisRendering = true;\n\n\t\ttry {\n\t\t\tconst mermaidElements = document.querySelectorAll(\n\t\t\t\t\".mermaid[data-mermaid-code]\",\n\t\t\t);\n\n\t\t\tif (mermaidElements.length === 0) {\n\t\t\t\tisRendering = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 延迟检测主题，确保 DOM 已经更新\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 100));\n\n\t\t\tconst htmlElement = document.documentElement;\n\t\t\tconst isDark = htmlElement.classList.contains(\"dark\");\n\t\t\tconst theme = isDark ? \"dark\" : \"default\";\n\n\t\t\t// 更新 Mermaid 主题（只需要更新一次）\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: theme,\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t\t// 强制应用主题变量\n\t\t\t\t\tprimaryColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryTextColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryBorderColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tlineColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tsecondaryColor: isDark ? \"#333333\" : \"#f0f0f0\",\n\t\t\t\t\ttertiaryColor: isDark ? \"#555555\" : \"#e0e0e0\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 批量渲染所有图表，添加重试机制\n\t\t\tconst renderPromises = Array.from(mermaidElements).map(\n\t\t\t\tasync (element, index) => {\n\t\t\t\t\tlet attempts = 0;\n\t\t\t\t\tconst maxAttempts = 3;\n\n\t\t\t\t\twhile (attempts < maxAttempts) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst code = element.getAttribute(\"data-mermaid-code\");\n\n\t\t\t\t\t\t\tif (!code) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 显示加载状态\n\t\t\t\t\t\t\telement.innerHTML =\n\t\t\t\t\t\t\t\t'<div class=\"mermaid-loading\">Rendering diagram...</div>';\n\n\t\t\t\t\t\t\t// 渲染图表\n\t\t\t\t\t\t\tconst { svg } = await window.mermaid.render(\n\t\t\t\t\t\t\t\t`mermaid-${Date.now()}-${index}-${attempts}`,\n\t\t\t\t\t\t\t\tcode,\n\t\t\t\t\t\t\t);\n\n                            const parser = new DOMParser();\n                            const doc = parser.parseFromString(svg, 'image/svg+xml');\n                            const svgElement = doc.documentElement;\n\n                            element.innerHTML = '';\n                            element.__zoomAttached = false;\n                            element.appendChild(svgElement);\n\n                            // 添加响应式支持\n                            const insertedSvg = element.querySelector('svg');\n                            if (insertedSvg) {\n                                insertedSvg.setAttribute('width', '100%');\n                                insertedSvg.removeAttribute('height');\n                                insertedSvg.style.maxWidth = '100%';\n                                insertedSvg.style.height = 'auto';\n                                //Todo 需要根据实际情况\n                                insertedSvg.style.minHeight = \"300px\";\n\n\t\t\t\t\t\t\t\t// 强制应用样式\n\t\t\t\t\t\t\t\tif (isDark) {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"brightness(0.9) contrast(1.1)\";\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"none\";\n\t\t\t\t\t\t\t\t}\n                                attachZoomControls(element, insertedSvg);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 渲染成功，跳出重试循环\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tattempts++;\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`Mermaid rendering attempt ${attempts} failed for element ${index}:`,\n\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif (attempts >= maxAttempts) {\n\t\t\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t\t\t`Failed to render Mermaid diagram after ${maxAttempts} attempts:`,\n\t\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\telement.innerHTML = `\n\t\t\t\t\t\t\t\t\t<div class=\"mermaid-error\">\n\t\t\t\t\t\t\t\t\t\t<p>Failed to render diagram after ${maxAttempts} attempts.</p>\n\t\t\t\t\t\t\t\t\t\t<button onclick=\"location.reload()\" style=\"margin-top: 8px; padding: 4px 8px; background: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer;\">\n\t\t\t\t\t\t\t\t\t\t\tRetry Page\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// 等待一段时间后重试\n\t\t\t\t\t\t\t\tawait new Promise((resolve) =>\n\t\t\t\t\t\t\t\t\tsetTimeout(resolve, 500 * attempts),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\n\t\t\t// 等待所有渲染完成\n\t\t\tawait Promise.all(renderPromises);\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error in renderMermaidDiagrams:\", error);\n\n\t\t\t// 如果渲染失败，尝试重新渲染\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t} finally {\n\t\t\tisRendering = false;\n\t\t}\n\t}\n\n\t// 初始化主题状态\n\tfunction initializeThemeState() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tcurrentTheme = isDark ? \"dark\" : \"default\";\n\t}\n\n\t// 加载 Mermaid 库\n\tasync function loadMermaid() {\n\t\tif (typeof window.mermaid !== \"undefined\") {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst script = document.createElement(\"script\");\n\t\t\tscript.src =\n\t\t\t\t\"https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\tscript.onload = () => {\n\t\t\t\tconsole.log(\"Mermaid library loaded successfully\");\n\t\t\t\tresolve();\n\t\t\t};\n\n\t\t\tscript.onerror = (error) => {\n\t\t\t\tconsole.error(\"Failed to load Mermaid library:\", error);\n\t\t\t\t// 尝试备用 CDN\n\t\t\t\tconst fallbackScript = document.createElement(\"script\");\n\t\t\t\tfallbackScript.src = \"https://unpkg.com/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\t\tfallbackScript.onload = () => {\n\t\t\t\t\tconsole.log(\"Mermaid library loaded from fallback CDN\");\n\t\t\t\t\tresolve();\n\t\t\t\t};\n\n\t\t\t\tfallbackScript.onerror = () => {\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t\"Failed to load Mermaid from both primary and fallback CDNs\",\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tdocument.head.appendChild(fallbackScript);\n\t\t\t};\n\n\t\t\tdocument.head.appendChild(script);\n\t\t});\n\t}\n\n\t// 主初始化函数\n\tasync function initialize() {\n\t\ttry {\n\t\t\t// 设置监听器\n\t\t\tsetupMutationObserver();\n\t\t\tsetupEventListeners();\n\n\t\t\t// 初始化主题状态\n\t\t\tinitializeThemeState();\n\n\t\t\t// 加载并初始化 Mermaid\n\t\t\tawait loadMermaid();\n\t\t\tawait initializeMermaid();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid system:\", error);\n\t\t}\n\t}\n\n\t// 启动初始化\n\tif (document.readyState === \"loading\") {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", initialize);\n\t} else {\n\t\tinitialize();\n\t}\n})();\n\x3C/script></div></section><section><h2 id=\"conclusion\">Conclusion<a class=\"anchor\" href=\"#conclusion\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>Mermaid is a powerful tool for creating various types of diagrams in Markdown documents. This article demonstrated how to use flowcharts, sequence diagrams, Gantt charts, class diagrams, state diagrams, and pie charts. These diagrams can help you express complex concepts, processes, and data structures more clearly.</p><p>To use Mermaid, simply specify the mermaid language in a code block and describe the diagram using concise text syntax. Mermaid will automatically convert these descriptions into beautiful visual diagrams.</p><p>Try using Mermaid diagrams in your next technical blog post or project documentation - they will make your content more professional and easier to understand!</p></section></section>","metadata":{"headings":[{"depth":1,"slug":"complete-guide-to-markdown-with-mermaid-diagrams","text":"Complete Guide to Markdown with Mermaid Diagrams#"},{"depth":2,"slug":"flowchart-example","text":"Flowchart Example#"},{"depth":2,"slug":"sequence-diagram-example","text":"Sequence Diagram Example#"},{"depth":2,"slug":"gantt-chart-example","text":"Gantt Chart Example#"},{"depth":2,"slug":"class-diagram-example","text":"Class Diagram Example#"},{"depth":2,"slug":"state-diagram-example","text":"State Diagram Example#"},{"depth":2,"slug":"pie-chart-example","text":"Pie Chart Example#"},{"depth":2,"slug":"conclusion","text":"Conclusion#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"Markdown Mermaid","published":"2023-10-01T00:00:00.000Z","pinned":false,"description":"A simple example of a Markdown blog post with Mermaid.","tags":["Markdown","Blogging","Mermaid"],"category":"Examples","draft":false,"minutes":3,"words":578,"excerpt":"This article demonstrates how to create various complex diagrams using Mermaid in Markdown documents, including flowcharts, sequence diagrams, Gantt charts, class diagrams, and state diagrams."},"imagePaths":[]}},"collection":"posts"}]};
const allPostsData = [{"id":"markdown-tutorial","title":"Markdown Tutorial","published":"2025-01-20T00:00:00.000Z"},{"id":"encrypted-post","title":"Encrypted Post","published":"2024-01-15T00:00:00.000Z"},{"id":"c/c_pointer","title":"C与指针笔记","published":"2025-09-21T00:00:00.000Z"},{"id":"ffmepg_related","title":"Useful FFmpeg commands","published":"2025-09-02T00:00:00.000Z"},{"id":"record_etc_deleted","title":"删除etc目录后如何把备份的etc目录重新恢复","published":"2025-06-08T00:00:00.000Z"},{"id":"shell_command","title":"鸟哥Linux笔记","published":"2025-06-08T00:00:00.000Z"},{"id":"ssh_keygen","title":"ssh-keygen generate","published":"2025-05-05T00:00:00.000Z"},{"id":"bat_parameter_modifiers","title":"Bat编程中的参数修饰符","published":"2025-05-04T00:00:00.000Z"},{"id":"windows_network_troubleshooting_cheatsheet","title":"Windows Network Troubleshooting CheatSheet","published":"2025-05-04T00:00:00.000Z"},{"id":"advanced_calculus_formula","title":"Advanced Calculus Formulas","published":"2025-05-01T00:00:00.000Z"},{"id":"bat_programming","title":"Bat脚本编程笔记","published":"2025-04-27T00:00:00.000Z"},{"id":"markdown-extended","title":"Markdown Extended Features","published":"2024-05-01T00:00:00.000Z"},{"id":"guide","title":"Simple Guides for Mizuki","published":"2024-04-01T00:00:00.000Z"},{"id":"markdown-mermaid","title":"Markdown Mermaid","published":"2023-10-01T00:00:00.000Z"}];
const monthNames = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
const weekDays = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
const yearSuffix = " ";

  // 客户端动态渲染日历
  function renderCalendar() {
    const now = new Date();
    const currentYear = now.getFullYear();
    const currentMonth = now.getMonth();
    const currentDate = now.getDate();
    
    // 更新 Widget 标题
    const titleElement = document.getElementById('calendar-widget-title');
    if (titleElement) {
      titleElement.textContent = `${currentYear}${yearSuffix}${monthNames[currentMonth]}`;
    }
    
    // 获取月份的第一天是星期几
    const firstDayOfMonth = new Date(currentYear, currentMonth, 1).getDay();
    
    // 获取当月天数
    const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
    
    // 生成日历格子
    const calendarGrid = document.getElementById('calendar-grid');
    if (!calendarGrid) return;
    
    const calendarDays = [];
    
    // 添加空白格子（月初空白）
    for (let i = 0; i < firstDayOfMonth; i++) {
      calendarDays.push({ day: null, hasPost: false, count: 0, dateKey: "" });
    }
    
    // 添加每一天
    for (let day = 1; day <= daysInMonth; day++) {
      const dateKey = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
      const posts = postDateMap[dateKey] || [];
      const count = posts.length;
      calendarDays.push({
        day,
        hasPost: count > 0,
        count,
        dateKey
      });
    }
    
    // 渲染日历格子
    calendarGrid.innerHTML = calendarDays.map(({day, hasPost, count, dateKey}) => {
      const isToday = day === currentDate;
      const classes = [
        "calendar-day aspect-square flex items-center justify-center rounded text-sm relative cursor-pointer"
      ];
      
      if (!day) {
        classes.push("text-neutral-400 dark:text-neutral-600");
      } else if (!hasPost) {
        classes.push("text-neutral-700 dark:text-neutral-300");
      } else {
        classes.push("text-neutral-900 dark:text-neutral-100 font-bold");
      }
      
      if (isToday) {
        classes.push("ring-2 ring-[var(--primary)]");
      }
      
      return `
        <div
          class="${classes.join(' ')}"
          data-date="${dateKey}"
          data-has-post="${hasPost}"
        >
          ${day || ''}
          ${hasPost ? '<span class="absolute bottom-0 left-1/2 -translate-x-1/2 w-1 h-1 rounded-full bg-[var(--primary)]"></span>' : ''}
          ${hasPost && count > 1 ? `<span class="absolute top-0 right-0 text-[10px] text-[var(--primary)] font-bold">${count}</span>` : ''}
        </div>
      `;
    }).join('');
    
    // 获取当月所有文章
    const currentMonthPosts = allPostsData.filter(post => {
      const date = new Date(post.published);
      return date.getFullYear() === currentYear && date.getMonth() === currentMonth;
    });
    
    // 显示当月文章列表
    showMonthlyPosts(currentMonthPosts);
    
    // 添加点击事件监听
    setupClickHandlers(currentMonthPosts);
  }
  
  // 显示当月所有文章
  function showMonthlyPosts(currentMonthPosts) {
    const postsList = document.getElementById('calendar-posts-list');
    const divider = document.getElementById('calendar-posts-divider');
    
    if (postsList) {
      postsList.innerHTML = currentMonthPosts.map(post => `
        <a href="/posts/${post.id}/" class="block text-sm text-neutral-700 dark:text-neutral-300 hover:text-[var(--primary)] dark:hover:text-[var(--primary)] transition-colors truncate px-2 py-1 rounded hover:bg-[var(--btn-plain-bg-hover)]">
          ${post.title}
        </a>
      `).join('');
      
      // 显示/隐藏分割线
      if (divider) {
        divider.style.display = currentMonthPosts.length > 0 ? 'block' : 'none';
      }
    }
  }
  
  // 设置日历格子点击事件
  function setupClickHandlers(currentMonthPosts) {
    const calendarDays = document.querySelectorAll('.calendar-day[data-date]');
    const postsList = document.getElementById('calendar-posts-list');
    const divider = document.getElementById('calendar-posts-divider');
    
    let currentSelectedDay = null;
    
    calendarDays.forEach(dayElement => {
      dayElement.addEventListener('click', () => {
        const dateKey = dayElement.getAttribute('data-date');
        const hasPost = dayElement.getAttribute('data-has-post') === 'true';
        
        if (!hasPost || !dateKey) return;
        
        // 切换选中状态
        if (currentSelectedDay === dayElement) {
          // 取消选中，恢复显示当月所有文章
          dayElement.classList.remove('bg-[var(--primary)]', 'bg-opacity-10');
          currentSelectedDay = null;
          showMonthlyPosts(currentMonthPosts);
          return;
        }
        
        // 移除之前选中的样式
        if (currentSelectedDay) {
          currentSelectedDay.classList.remove('bg-[var(--primary)]', 'bg-opacity-10');
        }
        
        // 添加选中样式
        dayElement.classList.add('bg-[var(--primary)]', 'bg-opacity-10');
        currentSelectedDay = dayElement;
        
        // 获取该日期的文章
        const posts = postDateMap[dateKey] || [];
        
        if (posts.length > 0 && postsList) {
          // 渲染文章列表
          postsList.innerHTML = posts.map(post => `
            <a href="/posts/${post.id}/" class="block text-sm text-neutral-700 dark:text-neutral-300 hover:text-[var(--primary)] dark:hover:text-[var(--primary)] transition-colors truncate px-2 py-1 rounded hover:bg-[var(--btn-plain-bg-hover)]">
              ${post.data.title}
            </a>
          `).join('');
          
          // 显示分割线
          if (divider) {
            divider.style.display = 'block';
          }
        }
      });
    });
  }
  
  // 页面加载时渲染日历
  renderCalendar();
  
  // 每天午夜更新一次日历（可选）
  const now = new Date();
  const tomorrow = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1);
  const msUntilMidnight = tomorrow.getTime() - now.getTime();
  
  setTimeout(() => {
    renderCalendar();
    // 之后每24小时更新一次
    setInterval(renderCalendar, 24 * 60 * 60 * 1000);
  }, msUntilMidnight);
})();</script>  </div> <!-- 粘性组件区域 -->  </div> <!-- 响应式样式和JavaScript -->  <script type="module" src="/_astro/RightSideBar.astro_astro_type_script_index_0_lang.D2qfzFrN.js"></script></div> <main id="swup-container" class="transition-swup-fade overflow-hidden w-full col-span-1 row-start-1 row-end-2 col-span-1 row-start-1 row-end-2 lg:col-start-2 lg:col-end-3 lg:col-start-2 lg:col-end-3 transition-main" data-astro-cid-haiuh7kc> <div id="content-wrapper" class="onload-animation transition-leaving" data-astro-cid-haiuh7kc> <!-- the overflow-hidden here prevent long text break the layout--> <!-- make id different from windows.swup global property -->  <div class="flex w-full rounded-[var(--radius-large)] overflow-hidden relative min-h-32" data-astro-cid-rgidg7mq> <div class="card-base z-10 px-9 py-6 relative w-full" data-astro-cid-rgidg7mq> <!-- 返回按钮 --> <div class="mb-6" data-astro-cid-rgidg7mq> <a href="/albums/" class="inline-flex items-center gap-2 text-neutral-600 dark:text-neutral-400 hover:text-[var(--primary)] transition-colors" data-astro-cid-rgidg7mq> <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-astro-cid-rgidg7mq> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" data-astro-cid-rgidg7mq></path> </svg> Back to Albums </a> </div> <!-- 相册标题信息 --> <header class="mb-8" data-astro-cid-rgidg7mq> <h1 class="text-3xl font-bold text-neutral-900 dark:text-neutral-100 mb-3" data-astro-cid-rgidg7mq> Blue Archive related </h1> <p class="text-neutral-600 dark:text-neutral-400 mb-4" data-astro-cid-rgidg7mq> things who made me became today without knowing who made them. </p> <!-- 相册元数据 --> <div class="flex flex-wrap items-center gap-4 text-sm text-neutral-500 dark:text-neutral-500" data-astro-cid-rgidg7mq> <span data-astro-cid-rgidg7mq>8 photos</span> <time data-astro-cid-rgidg7mq>2025/11/22</time> <span class="flex items-center gap-1" data-astro-cid-rgidg7mq> <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20" data-astro-cid-rgidg7mq> <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" data-astro-cid-rgidg7mq></path> </svg> Bilibili </span> </div> <!-- 标签 --> <div class="flex flex-wrap gap-2 mt-4" data-astro-cid-rgidg7mq> <span class="btn-regular h-8 text-sm px-3 rounded-lg" data-astro-cid-rgidg7mq> Acg </span><span class="btn-regular h-8 text-sm px-3 rounded-lg" data-astro-cid-rgidg7mq> Colorful </span><span class="btn-regular h-8 text-sm px-3 rounded-lg" data-astro-cid-rgidg7mq> Moe </span><span class="btn-regular h-8 text-sm px-3 rounded-lg" data-astro-cid-rgidg7mq> Inspiration </span> </div> </header> <!-- 照片网格 --> <div class="photo-gallery moment-images masonry-layout" data-layout="masonry" data-columns="3" data-astro-cid-rgidg7mq> <figure class="photo-item group relative overflow-hidden rounded-lg" data-astro-cid-rgidg7mq> <a href="javascript:void(0)" data-src="/images/albums/AcgExample/G6CY-Ilb0AA7KQz.jpg" data-fancybox="gallery" data-caption="G6CY-Ilb0AA7KQz" class="block" data-astro-cid-rgidg7mq> <img src="/images/albums/AcgExample/G6CY-Ilb0AA7KQz.jpg" alt="G6CY-Ilb0AA7KQz" class="photo-image w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 cursor-pointer" loading="lazy" data-astro-cid-rgidg7mq> </a> </figure><figure class="photo-item group relative overflow-hidden rounded-lg" data-astro-cid-rgidg7mq> <a href="javascript:void(0)" data-src="/images/albums/AcgExample/G6CYtkSbYAAuj4n.jpg" data-fancybox="gallery" data-caption="G6CYtkSbYAAuj4n" class="block" data-astro-cid-rgidg7mq> <img src="/images/albums/AcgExample/G6CYtkSbYAAuj4n.jpg" alt="G6CYtkSbYAAuj4n" class="photo-image w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 cursor-pointer" loading="lazy" data-astro-cid-rgidg7mq> </a> </figure><figure class="photo-item group relative overflow-hidden rounded-lg" data-astro-cid-rgidg7mq> <a href="javascript:void(0)" data-src="/images/albums/AcgExample/G6E_YLobMAExwD2.jpg" data-fancybox="gallery" data-caption class="block" data-astro-cid-rgidg7mq> <img src="/images/albums/AcgExample/G6E_YLobMAExwD2.jpg" alt class="photo-image w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 cursor-pointer" loading="lazy" data-astro-cid-rgidg7mq> </a> </figure><figure class="photo-item group relative overflow-hidden rounded-lg" data-astro-cid-rgidg7mq> <a href="javascript:void(0)" data-src="/images/albums/AcgExample/G6E_YLsbMAAElU6.jpg" data-fancybox="gallery" data-caption class="block" data-astro-cid-rgidg7mq> <img src="/images/albums/AcgExample/G6E_YLsbMAAElU6.jpg" alt class="photo-image w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 cursor-pointer" loading="lazy" data-astro-cid-rgidg7mq> </a> </figure><figure class="photo-item group relative overflow-hidden rounded-lg" data-astro-cid-rgidg7mq> <a href="javascript:void(0)" data-src="/images/albums/AcgExample/G6FI1BLaQAA2tmj.jpg" data-fancybox="gallery" data-caption="G6FI1BLaQAA2tmj" class="block" data-astro-cid-rgidg7mq> <img src="/images/albums/AcgExample/G6FI1BLaQAA2tmj.jpg" alt="G6FI1BLaQAA2tmj" class="photo-image w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 cursor-pointer" loading="lazy" data-astro-cid-rgidg7mq> </a> </figure><figure class="photo-item group relative overflow-hidden rounded-lg" data-astro-cid-rgidg7mq> <a href="javascript:void(0)" data-src="/images/albums/AcgExample/G6FI3z_akAA7tLe.jpg" data-fancybox="gallery" data-caption class="block" data-astro-cid-rgidg7mq> <img src="/images/albums/AcgExample/G6FI3z_akAA7tLe.jpg" alt class="photo-image w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 cursor-pointer" loading="lazy" data-astro-cid-rgidg7mq> </a> </figure><figure class="photo-item group relative overflow-hidden rounded-lg" data-astro-cid-rgidg7mq> <a href="javascript:void(0)" data-src="/images/albums/AcgExample/G6FIx1GbMAMmeFA.jpg" data-fancybox="gallery" data-caption="G6FIx1GbMAMmeFA" class="block" data-astro-cid-rgidg7mq> <img src="/images/albums/AcgExample/G6FIx1GbMAMmeFA.jpg" alt="G6FIx1GbMAMmeFA" class="photo-image w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 cursor-pointer" loading="lazy" data-astro-cid-rgidg7mq> </a> </figure><figure class="photo-item group relative overflow-hidden rounded-lg" data-astro-cid-rgidg7mq> <a href="javascript:void(0)" data-src="/images/albums/AcgExample/G6FJZt0aAAASuBD.jpg" data-fancybox="gallery" data-caption="G6FJZt0aAAASuBD" class="block" data-astro-cid-rgidg7mq> <img src="/images/albums/AcgExample/G6FJZt0aAAASuBD.jpg" alt="G6FJZt0aAAASuBD" class="photo-image w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 cursor-pointer" loading="lazy" data-astro-cid-rgidg7mq> </a> </figure> </div> </div> </div>  <div class="footer col-span-2 onload-animation hidden lg:block" data-astro-cid-haiuh7kc> <!--<div class="border-t border-[var(&#45;&#45;primary)] mx-16 border-dashed py-8 max-w-[var(&#45;&#45;page-width)] flex flex-col items-center justify-center px-6">--><div class="transition border-t border-black/10 dark:border-white/15 my-10 border-dashed mx-32"></div> <!--<div class="transition bg-[oklch(92%_0.01_var(&#45;&#45;hue))] dark:bg-black rounded-2xl py-8 mt-4 mb-8 flex flex-col items-center justify-center px-6">--> <div class="transition border-dashed border-[oklch(85%_0.01_var(--hue))] dark:border-white/15 rounded-2xl mb-12 flex flex-col items-center justify-center px-6"> <div class="transition text-50 text-sm text-center"> 
&copy; <span id="copyright-year">2025</span> Kirifuji Nagisa. All Rights Reserved. /
<a class="transition link text-[var(--primary)] font-medium" href="/rss/" onclick="event.preventDefault(); navigateToPage('/rss/')">RSS</a> /
<a class="transition link text-[var(--primary)] font-medium" href="/atom/" onclick="event.preventDefault(); navigateToPage('/atom/')">Atom</a> /
<a class="transition link text-[var(--primary)] font-medium" target="_blank" href="/sitemap-index.xml">Sitemap</a><br>
Powered by
<a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://astro.build">Astro</a> &
<a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://github.com/matsuzaka-yuki/mizuki">Mizuki</a>&nbsp; Version <a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://github.com/matsuzaka-yuki/mizuki">7.4.5</a><br> </div> </div> </div> </div> </main> <div class="footer col-span-2 onload-animation block lg:hidden" data-astro-cid-haiuh7kc> <!--<div class="border-t border-[var(&#45;&#45;primary)] mx-16 border-dashed py-8 max-w-[var(&#45;&#45;page-width)] flex flex-col items-center justify-center px-6">--><div class="transition border-t border-black/10 dark:border-white/15 my-10 border-dashed mx-32"></div> <!--<div class="transition bg-[oklch(92%_0.01_var(&#45;&#45;hue))] dark:bg-black rounded-2xl py-8 mt-4 mb-8 flex flex-col items-center justify-center px-6">--> <div class="transition border-dashed border-[oklch(85%_0.01_var(--hue))] dark:border-white/15 rounded-2xl mb-12 flex flex-col items-center justify-center px-6"> <div class="transition text-50 text-sm text-center"> 
&copy; <span id="copyright-year">2025</span> Kirifuji Nagisa. All Rights Reserved. /
<a class="transition link text-[var(--primary)] font-medium" href="/rss/" onclick="event.preventDefault(); navigateToPage('/rss/')">RSS</a> /
<a class="transition link text-[var(--primary)] font-medium" href="/atom/" onclick="event.preventDefault(); navigateToPage('/atom/')">Atom</a> /
<a class="transition link text-[var(--primary)] font-medium" target="_blank" href="/sitemap-index.xml">Sitemap</a><br>
Powered by
<a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://astro.build">Astro</a> &
<a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://github.com/matsuzaka-yuki/mizuki">Mizuki</a>&nbsp; Version <a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://github.com/matsuzaka-yuki/mizuki">7.4.5</a><br> </div> </div> </div> </div> <!-- There can't be a filter on parent element, or it will break `fixed` --><div class="back-to-top-wrapper block" data-astro-cid-eymb5ayk> <div id="back-to-top-btn" class="back-to-top-btn hide flex items-center rounded-2xl overflow-hidden transition" onclick="backToTop()" data-astro-cid-eymb5ayk> <button aria-label="Back to Top" class="btn-card h-[3.75rem] w-[3.75rem]" data-astro-cid-eymb5ayk> <svg width="1em" height="1em" class="mx-auto" data-astro-cid-eymb5ayk="true" data-icon="material-symbols:keyboard-arrow-up-rounded">   <symbol id="ai:material-symbols:keyboard-arrow-up-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="m12 10.8l-3.9 3.9q-.275.275-.7.275t-.7-.275t-.275-.7t.275-.7l4.6-4.6q.3-.3.7-.3t.7.3l4.6 4.6q.275.275.275.7t-.275.7t-.7.275t-.7-.275z"/></symbol><use href="#ai:material-symbols:keyboard-arrow-up-rounded"></use>  </svg> </button> </div> </div>  <script>
    function backToTop() {
        // 直接使用原生滚动，避免OverlayScrollbars冲突
        window.scroll({top: 0, behavior: 'smooth'});
    }
</script> </div> </div>  <div class="absolute w-full z-0 hidden 2xl:block" data-astro-cid-haiuh7kc> <div class="relative max-w-[var(--page-width)] mx-auto" data-astro-cid-haiuh7kc> <!-- TOC component --> <div id="toc-wrapper" class="hidden lg:block transition absolute top-0 w-[var(--toc-width)] items-center -right-[var(--toc-width)] toc-hide" data-astro-cid-haiuh7kc> <div id="toc-inner-wrapper" class="fixed top-14 w-[var(--toc-width)] h-[calc(100vh_-_20rem)] overflow-y-scroll overflow-x-hidden hide-scrollbar" data-astro-cid-haiuh7kc> <div id="toc" class="w-full h-full transition-swup-fade " data-astro-cid-haiuh7kc> <table-of-contents id="toc" data-astro-cid-7ckeuxew="true" class="group"> <!-- TOC内容将由JavaScript动态生成 --> </table-of-contents> <script type="module" src="/_astro/TOC.astro_astro_type_script_index_0_lang.h7KfX3Q5.js"></script>  </div> </div> </div> <!-- #toc needs to exist for Swup to work normally -->  </div> </div>  <!-- Music Player - 仅在启用时加载 --> <script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><astro-island uid="Z1X0Py2" component-url="/_astro/MusicPlayer.CnU3Vp_2.js" component-export="default" renderer-url="/_astro/client.svelte.CXVuBcRL.js" props="{&quot;data-astro-cid-sckkx6r4&quot;:[0,true]}" ssr client="load" opts="{&quot;name&quot;:&quot;MusicPlayer&quot;,&quot;value&quot;:true}" await-children><!--[--><!--[--><!--[!--><!--]--> <div class="music-player fixed bottom-4 right-4 z-50 transition-all duration-300 ease-in-out"><div class="orb-player w-12 h-12 bg-[var(--primary)] rounded-full shadow-lg cursor-pointer transition-all duration-500 ease-in-out flex items-center justify-center hover:scale-110 active:scale-95 opacity-0 scale-0 pointer-events-none" role="button" tabindex="0" aria-label="显示音乐播放器"><!--[!--><!--[!--><!--[!--><!--]--><!--]--><!--]--></div> <div class="mini-player card-base bg-[var(--float-panel-bg)] shadow-xl rounded-2xl p-3 transition-all duration-500 ease-in-out"><div class="flex items-center gap-3"><div class="cover-container relative w-12 h-12 rounded-full overflow-hidden cursor-pointer" role="button" tabindex="0" aria-label="播放"><img src="/favicon/favicon-light-192.png" alt="封面" class="w-full h-full object-cover transition-transform duration-300"/> <div class="absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity"><!--[!--><!--[!--><!--[!--><!--]--><!--]--><!--]--></div></div> <div class="flex-1 min-w-0 cursor-pointer" role="button" tabindex="0" aria-label="展开音乐播放器"><div class="text-sm font-medium text-90 truncate">示例歌曲</div> <div class="text-xs text-50 truncate">示例艺术家</div></div> <div class="flex items-center gap-1"><button class="btn-plain w-8 h-8 rounded-lg flex items-center justify-center" title="隐藏播放器"><!--[!--><!--]--><!----></button> <button class="btn-plain w-8 h-8 rounded-lg flex items-center justify-center"><!--[!--><!--]--><!----></button></div></div></div> <div class="expanded-player card-base bg-[var(--float-panel-bg)] shadow-xl rounded-2xl p-4 transition-all duration-500 ease-in-out opacity-0 scale-95 pointer-events-none"><div class="flex items-center gap-4 mb-4"><div class="cover-container relative w-16 h-16 rounded-full overflow-hidden flex-shrink-0"><img src="/favicon/favicon-light-192.png" alt="封面" class="w-full h-full object-cover transition-transform duration-300"/></div> <div class="flex-1 min-w-0"><div class="song-title text-lg font-bold text-90 truncate mb-1">示例歌曲</div> <div class="song-artist text-sm text-50 truncate">示例艺术家</div> <div class="text-xs text-30 mt-1">0:00 / 0:00</div></div> <div class="flex items-center gap-1"><button class="btn-plain w-8 h-8 rounded-lg flex items-center justify-center" title="隐藏播放器"><!--[!--><!--]--><!----></button> <button class="btn-plain w-8 h-8 rounded-lg flex items-center justify-center"><!--[!--><!--]--><!----></button></div></div> <div class="progress-section mb-4"><div class="progress-bar flex-1 h-2 bg-[var(--btn-regular-bg)] rounded-full cursor-pointer" role="slider" tabindex="0" aria-label="播放进度" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"><div class="h-full bg-[var(--primary)] rounded-full transition-all duration-100" style="width: 0%"></div></div></div> <div class="controls flex items-center justify-center gap-2 mb-4"><button class="w-10 h-10 rounded-lg btn-plain" disabled><!--[!--><!--]--><!----></button> <button class="btn-plain w-10 h-10 rounded-lg" disabled><!--[!--><!--]--><!----></button> <button class="btn-regular w-12 h-12 rounded-full"><!--[!--><!--[!--><!--[!--><!--]--><!--]--><!--]--></button> <button class="btn-plain w-10 h-10 rounded-lg" disabled><!--[!--><!--]--><!----></button> <button class="w-10 h-10 rounded-lg btn-plain"><!--[!--><!--[!--><!--[!--><!--]--><!--]--><!--]--></button></div> <div class="bottom-controls flex items-center gap-2"><button class="btn-plain w-8 h-8 rounded-lg"><!--[!--><!--[!--><!--[!--><!--]--><!--]--><!--]--></button> <div class="flex-1 h-2 bg-[var(--btn-regular-bg)] rounded-full cursor-pointer" role="slider" tabindex="0" aria-label="音量控制" aria-valuemin="0" aria-valuemax="100" aria-valuenow="70"><div class="h-full bg-[var(--primary)] rounded-full transition-all duration-100" style="width: 70%"></div></div> <button class="btn-plain w-8 h-8 rounded-lg"><!--[!--><!--]--><!----></button></div></div> <!--[!--><!--]--></div> <style>
.orb-player {
	position: relative;
	backdrop-filter: blur(10px);
	-webkit-backdrop-filter: blur(10px);
}
.orb-player::before {
	content: '';
	position: absolute;
	inset: -2px;
	background: linear-gradient(45deg, var(--primary), transparent, var(--primary));
	border-radius: 50%;
	z-index: -1;
	opacity: 0;
	transition: opacity 0.3s ease;
}
.orb-player:hover::before {
	opacity: 0.3;
	animation: rotate 2s linear infinite;
}
.orb-player .animate-pulse {
	animation: musicWave 1.5s ease-in-out infinite;
}
@keyframes rotate {
	from { transform: rotate(0deg); }
	to { transform: rotate(360deg); }
}
@keyframes musicWave {
	0%, 100% { transform: scaleY(0.5); }
	50% { transform: scaleY(1); }
}
.music-player.hidden-mode {
	width: 48px;
	height: 48px;
}
.music-player {
    max-width: 320px;
    -webkit-user-select: none;
       -moz-user-select: none;
            user-select: none;
}
.mini-player {
    width: 280px;
    position: absolute;
    bottom: 0;
    right: 0;
    /*left: 0;*/
}
.expanded-player {
    width: 320px;
    position: absolute;
    bottom: 0;
    right: 0;
}
.animate-pulse {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}
@keyframes pulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.5;
    }
}
.progress-section div:hover,
.bottom-controls > div:hover {
    transform: scaleY(1.2);
    transition: transform 0.2s ease;
}
@media (max-width: 768px) {
    .music-player {
        max-width: 280px;
        /*left: 8px !important;*/
        bottom: 8px !important;
        right: 8px !important;
    }
    .music-player.expanded {
        width: calc(100vw - 16px);
        max-width: none;
        /*left: 8px !important;*/
        right: 8px !important;
    }
    .playlist-panel {
        width: calc(100vw - 16px) !important;
        /*left: 8px !important;*/
        right: 8px !important;
        max-width: none;
    }
    .controls {
        gap: 8px;
    }
    .controls button {
        width: 36px;
        height: 36px;
    }
    .controls button:nth-child(3) {
        width: 44px;
        height: 44px;
    }
}
@media (max-width: 480px) {
    .music-player {
        max-width: 260px;
    }
    .song-title {
        font-size: 14px;
    }
    .song-artist {
        font-size: 12px;
    }
    .controls {
        gap: 6px;
        margin-bottom: 12px;
    }
    .controls button {
        width: 32px;
        height: 32px;
    }
    .controls button:nth-child(3) {
        width: 40px;
        height: 40px;
    }
    .playlist-item {
        padding: 8px 12px;
    }
    .playlist-item .w-10 {
        width: 32px;
        height: 32px;
    }
}
@keyframes slide-up {
    from {
        transform: translateY(100%);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}
.animate-slide-up {
    animation: slide-up 0.3s ease-out;
}
@media (hover: none) and (pointer: coarse) {
    .music-player button,
    .playlist-item {
        min-height: 44px;
    }
    .progress-section > div,
    .bottom-controls > div:nth-child(2) {
        height: 12px;
    }
}
/* 自定义旋转动画，停止时保持当前位置 */
@keyframes spin-continuous {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}
.cover-container img {
    animation: spin-continuous 3s linear infinite;
    animation-play-state: paused;
}
.cover-container img.spinning {
    animation-play-state: running;
}
/* 让主题色按钮更有视觉反馈 */
button.bg-\[var\(--primary\)\] {
    box-shadow: 0 0 0 2px var(--primary);
    border: none;
}
</style><!--]--><!--]--><!--astro:end--></astro-island> <!-- Pio 看板娘组件 - 仅在启用时加载 --> <astro-island uid="1OlTF2" component-url="/_astro/Pio.CAHyzk-e.js" component-export="default" renderer-url="/_astro/client.svelte.CXVuBcRL.js" props="{&quot;data-astro-cid-sckkx6r4&quot;:[0,true]}" ssr client="load" opts="{&quot;name&quot;:&quot;Pio&quot;,&quot;value&quot;:true}" await-children><!--[--><!--[--><div class="pio-container left"><div class="pio-action"></div> <canvas id="pio" width="280" height="250"></canvas></div><!--]--><!--]--><!--astro:end--></astro-island> <!-- increase the page height during page transition to prevent the scrolling animation from jumping --> <div id="page-height-extend" class="hidden h-[300vh]" data-astro-cid-sckkx6r4 style="--bannerOffset: 15vh;--banner-height-home: 65vh;--banner-height: 35vh;--configHue: 230;--page-width: 90rem;"></div>  <script type="module" src="/_astro/Layout.astro_astro_type_script_index_0_lang.SkltkRAO.js"></script> <!-- 代码块折叠功能 --> <script type="module" src="/_astro/Layout.astro_astro_type_script_index_1_lang._R4ib5TO.js"></script> <!-- 主题切换综合性能优化器（包含代码块优化、重型元素优化、性能诊断） --> <script type="module" src="/_astro/Layout.astro_astro_type_script_index_2_lang.BMyF9r-v.js"></script> <script type="module" src="/_astro/Layout.astro_astro_type_script_index_3_lang.KV9kGKUW.js"></script></body></html>  <script type="module">document.addEventListener("DOMContentLoaded",()=>{console.log("=== 相册页面加载完成 ===");const e=document.querySelectorAll(".moment-images img, .photo-gallery img");console.log("相册图片数量:",e.length),e.forEach(o=>{if(o instanceof HTMLImageElement){const n=new Image;n.src=o.src}})});</script> 